/*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */
function Boxy(e,t){this.boxy=jQuery(Boxy.WRAPPER),jQuery.data(this.boxy[0],"boxy",this),this.visible=!1,this.options=jQuery.extend({},Boxy.DEFAULTS,t||{}),this.options.modal&&(this.options=jQuery.extend(this.options,{center:!0,draggable:!1})),this.options.actuator&&jQuery.data(this.options.actuator,"active.boxy",this),this.setContent(e||"<div></div>"),this._setupTitleBar(),this.boxy.css("display","none").appendTo(document.body),this.toTop(),this.options.fixed&&(jQuery.browser.msie&&jQuery.browser.version<7?this.options.fixed=!1:this.boxy.addClass("fixed")),this.options.center&&Boxy._u(this.options.x,this.options.y)?this.center():this.moveTo(Boxy._u(this.options.x)?this.options.x:Boxy.DEFAULT_X,Boxy._u(this.options.y)?this.options.y:Boxy.DEFAULT_Y),this.options.show&&this.show()}/*!
 * OpenTok JavaScript Library v0.91.46
 * http://www.tokbox.com/
 *
 * Copyright (c) 2011 TokBox, Inc.
 *
 * Date: February 16 18:15:10 2012
 */
function getHostname(){return window.location.hostname}!function(e,t){function n(e){var t=e.length,n=lt.type(e);return lt.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=Ct[e]={};return lt.each(e.match(ut)||[],function(e,n){t[n]=!0}),t}function o(e,n,i,o){if(lt.acceptData(e)){var r,s,a=lt.expando,l="string"==typeof n,c=e.nodeType,u=c?lt.cache:e,h=c?e[a]:e[a]&&a;if(h&&u[h]&&(o||u[h].data)||!l||i!==t)return h||(c?e[a]=h=Z.pop()||lt.guid++:h=a),u[h]||(u[h]={},c||(u[h].toJSON=lt.noop)),("object"==typeof n||"function"==typeof n)&&(o?u[h]=lt.extend(u[h],n):u[h].data=lt.extend(u[h].data,n)),r=u[h],o||(r.data||(r.data={}),r=r.data),i!==t&&(r[lt.camelCase(n)]=i),l?(s=r[n],null==s&&(s=r[lt.camelCase(n)])):s=r,s}}function r(e,t,n){if(lt.acceptData(e)){var i,o,r,s=e.nodeType,l=s?lt.cache:e,c=s?e[lt.expando]:lt.expando;if(l[c]){if(t&&(r=n?l[c]:l[c].data)){lt.isArray(t)?t=t.concat(lt.map(t,lt.camelCase)):t in r?t=[t]:(t=lt.camelCase(t),t=t in r?[t]:t.split(" "));for(i=0,o=t.length;o>i;i++)delete r[t[i]];if(!(n?a:lt.isEmptyObject)(r))return}(n||(delete l[c].data,a(l[c])))&&(s?lt.cleanData([e],!0):lt.support.deleteExpando||l!=l.window?delete l[c]:l[c]=null)}}}function s(e,n,i){if(i===t&&1===e.nodeType){var o="data-"+n.replace(St,"-$1").toLowerCase();if(i=e.getAttribute(o),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Et.test(i)?lt.parseJSON(i):i}catch(r){}lt.data(e,n,i)}else i=t}return i}function a(e){var t;for(t in e)if(("data"!==t||!lt.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function c(){return!1}function u(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function h(e,t,n){if(t=t||0,lt.isFunction(t))return lt.grep(e,function(e,i){var o=!!t.call(e,i,e);return o===n});if(t.nodeType)return lt.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=lt.grep(e,function(e){return 1===e.nodeType});if(Wt.test(t))return lt.filter(t,i,!n);t=lt.filter(t,i)}return lt.grep(e,function(e){return lt.inArray(e,t)>=0===n})}function d(e){var t=Vt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function f(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function p(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function m(e){var t=rn.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n,i=0;null!=(n=e[i]);i++)lt._data(n,"globalEval",!t||lt._data(t[i],"globalEval"))}function v(e,t){if(1===t.nodeType&&lt.hasData(e)){var n,i,o,r=lt._data(e),s=lt._data(t,r),a=r.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,o=a[n].length;o>i;i++)lt.event.add(t,n,a[n][i])}s.data&&(s.data=lt.extend({},s.data))}}function y(e,t){var n,i,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!lt.support.noCloneEvent&&t[lt.expando]){o=lt._data(t);for(i in o.events)lt.removeEvent(t,i,o.handle);t.removeAttribute(lt.expando)}"script"===n&&t.text!==e.text?(p(t).text=e.text,m(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),lt.support.html5Clone&&e.innerHTML&&!lt.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tn.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function b(e,n){var i,o,r=0,s=typeof e.getElementsByTagName!==G?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==G?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],i=e.childNodes||e;null!=(o=i[r]);r++)!n||lt.nodeName(o,n)?s.push(o):lt.merge(s,b(o,n));return n===t||n&&lt.nodeName(e,n)?lt.merge([e],s):s}function w(e){tn.test(e.type)&&(e.defaultChecked=e.checked)}function _(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,o=Sn.length;o--;)if(t=Sn[o]+n,t in e)return t;return i}function x(e,t){return e=t||e,"none"===lt.css(e,"display")||!lt.contains(e.ownerDocument,e)}function C(e,t){for(var n,i,o,r=[],s=0,a=e.length;a>s;s++)i=e[s],i.style&&(r[s]=lt._data(i,"olddisplay"),n=i.style.display,t?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&x(i)&&(r[s]=lt._data(i,"olddisplay",k(i.nodeName)))):r[s]||(o=x(i),(n&&"none"!==n||!o)&&lt._data(i,"olddisplay",o?n:lt.css(i,"display"))));for(s=0;a>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[s]||"":"none"));return e}function E(e,t,n){var i=yn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function S(e,t,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=lt.css(e,n+En[r],!0,o)),i?("content"===n&&(s-=lt.css(e,"padding"+En[r],!0,o)),"margin"!==n&&(s-=lt.css(e,"border"+En[r]+"Width",!0,o))):(s+=lt.css(e,"padding"+En[r],!0,o),"padding"!==n&&(s+=lt.css(e,"border"+En[r]+"Width",!0,o)));return s}function T(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,r=hn(e),s=lt.support.boxSizing&&"border-box"===lt.css(e,"boxSizing",!1,r);if(0>=o||null==o){if(o=dn(e,t,r),(0>o||null==o)&&(o=e.style[t]),bn.test(o))return o;i=s&&(lt.support.boxSizingReliable||o===e.style[t]),o=parseFloat(o)||0}return o+S(e,t,n||(s?"border":"content"),i,r)+"px"}function k(e){var t=Q,n=_n[e];return n||(n=I(e,t),"none"!==n&&n||(un=(un||lt("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(un[0].contentWindow||un[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=I(e,t),un.detach()),_n[e]=n),n}function I(e,t){var n=lt(t.createElement(e)).appendTo(t.body),i=lt.css(n[0],"display");return n.remove(),i}function N(e,t,n,i){var o;if(lt.isArray(t))lt.each(t,function(t,o){n||kn.test(e)?i(e,o):N(e+"["+("object"==typeof o?t:"")+"]",o,n,i)});else if(n||"object"!==lt.type(t))i(e,t);else for(o in t)N(e+"["+o+"]",t[o],n,i)}function P(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,r=t.toLowerCase().match(ut)||[];if(lt.isFunction(n))for(;i=r[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function A(e,t,n,i){function o(a){var l;return r[a]=!0,lt.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||s||r[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var r={},s=e===$n;return o(t.dataTypes[0])||!r["*"]&&o("*")}function D(e,n){var i,o,r=lt.ajaxSettings.flatOptions||{};for(o in n)n[o]!==t&&((r[o]?e:i||(i={}))[o]=n[o]);return i&&lt.extend(!0,e,i),e}function M(e,n,i){var o,r,s,a,l=e.contents,c=e.dataTypes,u=e.responseFields;for(a in u)a in i&&(n[u[a]]=i[a]);for(;"*"===c[0];)c.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("Content-Type"));if(r)for(a in l)if(l[a]&&l[a].test(r)){c.unshift(a);break}if(c[0]in i)s=c[0];else{for(a in i){if(!c[0]||e.converters[a+" "+c[0]]){s=a;break}o||(o=a)}s=s||o}return s?(s!==c[0]&&c.unshift(s),i[s]):void 0}function R(e,t){var n,i,o,r,s={},a=0,l=e.dataTypes.slice(),c=l[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l[1])for(o in e.converters)s[o.toLowerCase()]=e.converters[o];for(;i=l[++a];)if("*"!==i){if("*"!==c&&c!==i){if(o=s[c+" "+i]||s["* "+i],!o)for(n in s)if(r=n.split(" "),r[1]===i&&(o=s[c+" "+r[0]]||s["* "+r[0]])){o===!0?o=s[n]:s[n]!==!0&&(i=r[0],l.splice(a--,0,i));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(u){return{state:"parsererror",error:o?u:"No conversion from "+c+" to "+i}}}c=i}return{state:"success",data:t}}function j(){try{return new e.XMLHttpRequest}catch(t){}}function O(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function F(){return setTimeout(function(){Zn=t}),Zn=lt.now()}function H(e,t){lt.each(t,function(t,n){for(var i=(ri[t]||[]).concat(ri["*"]),o=0,r=i.length;r>o;o++)if(i[o].call(e,t,n))return})}function B(e,t,n){var i,o,r=0,s=oi.length,a=lt.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Zn||F(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,r=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(r);return a.notifyWith(e,[c,r,n]),1>r&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:lt.extend({},t),opts:lt.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zn||F(),duration:n.duration,tweens:[],createTween:function(t,n){var i=lt.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(L(u,c.opts.specialEasing);s>r;r++)if(i=oi[r].call(c,e,u,c.opts))return i;return H(c,u),lt.isFunction(c.opts.start)&&c.opts.start.call(e,c),lt.fx.timer(lt.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function L(e,t){var n,i,o,r,s;for(o in e)if(i=lt.camelCase(o),r=t[i],n=e[o],lt.isArray(n)&&(r=n[1],n=e[o]=n[0]),o!==i&&(e[i]=n,delete e[o]),s=lt.cssHooks[i],s&&"expand"in s){n=s.expand(n),delete e[i];for(o in n)o in e||(e[o]=n[o],t[o]=r)}else t[i]=r}function q(e,t,n){var i,o,r,s,a,l,c,u,h,d=this,f=e.style,p={},m=[],g=e.nodeType&&x(e);n.queue||(u=lt._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,h=u.empty.fire,u.empty.fire=function(){u.unqueued||h()}),u.unqueued++,d.always(function(){d.always(function(){u.unqueued--,lt.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===lt.css(e,"display")&&"none"===lt.css(e,"float")&&(lt.support.inlineBlockNeedsLayout&&"inline"!==k(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",lt.support.shrinkWrapBlocks||d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(o in t)if(s=t[o],ti.exec(s)){if(delete t[o],l=l||"toggle"===s,s===(g?"hide":"show"))continue;m.push(o)}if(r=m.length){a=lt._data(e,"fxshow")||lt._data(e,"fxshow",{}),"hidden"in a&&(g=a.hidden),l&&(a.hidden=!g),g?lt(e).show():d.done(function(){lt(e).hide()}),d.done(function(){var t;lt._removeData(e,"fxshow");for(t in p)lt.style(e,t,p[t])});for(o=0;r>o;o++)i=m[o],c=d.createTween(i,g?a[i]:0),p[i]=a[i]||lt.style(e,i),i in a||(a[i]=c.start,g&&(c.end=c.start,c.start="width"===i||"height"===i?1:0))}}function z(e,t,n,i,o){return new z.prototype.init(e,t,n,i,o)}function W(e,t){var n,i={height:e},o=0;for(t=t?1:0;4>o;o+=2-t)n=En[o],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function $(e){return lt.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var U,V,G=typeof t,Q=e.document,Y=e.location,X=e.jQuery,K=e.$,J={},Z=[],et="1.9.1",tt=Z.concat,nt=Z.push,it=Z.slice,ot=Z.indexOf,rt=J.toString,st=J.hasOwnProperty,at=et.trim,lt=function(e,t){return new lt.fn.init(e,t,V)},ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ut=/\S+/g,ht=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,dt=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,ft=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pt=/^[\],:{}\s]*$/,mt=/(?:^|:|,)(?:\s*\[)+/g,gt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,vt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,yt=/^-ms-/,bt=/-([\da-z])/gi,wt=function(e,t){return t.toUpperCase()},_t=function(e){(Q.addEventListener||"load"===e.type||"complete"===Q.readyState)&&(xt(),lt.ready())},xt=function(){Q.addEventListener?(Q.removeEventListener("DOMContentLoaded",_t,!1),e.removeEventListener("load",_t,!1)):(Q.detachEvent("onreadystatechange",_t),e.detachEvent("onload",_t))};lt.fn=lt.prototype={jquery:et,constructor:lt,init:function(e,n,i){var o,r;if(!e)return this;if("string"==typeof e){if(o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:dt.exec(e),!o||!o[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(o[1]){if(n=n instanceof lt?n[0]:n,lt.merge(this,lt.parseHTML(o[1],n&&n.nodeType?n.ownerDocument||n:Q,!0)),ft.test(o[1])&&lt.isPlainObject(n))for(o in n)lt.isFunction(this[o])?this[o](n[o]):this.attr(o,n[o]);return this}if(r=Q.getElementById(o[2]),r&&r.parentNode){if(r.id!==o[2])return i.find(e);this.length=1,this[0]=r}return this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):lt.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),lt.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return it.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=lt.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return lt.each(this,e,t)},ready:function(e){return lt.ready.promise().done(e),this},slice:function(){return this.pushStack(it.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(lt.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:nt,sort:[].sort,splice:[].splice},lt.fn.init.prototype=lt.fn,lt.extend=lt.fn.extend=function(){var e,n,i,o,r,s,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||lt.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(r=arguments[l]))for(o in r)e=a[o],i=r[o],a!==i&&(u&&i&&(lt.isPlainObject(i)||(n=lt.isArray(i)))?(n?(n=!1,s=e&&lt.isArray(e)?e:[]):s=e&&lt.isPlainObject(e)?e:{},a[o]=lt.extend(u,s,i)):i!==t&&(a[o]=i));return a},lt.extend({noConflict:function(t){return e.$===lt&&(e.$=K),t&&e.jQuery===lt&&(e.jQuery=X),lt},isReady:!1,readyWait:1,holdReady:function(e){e?lt.readyWait++:lt.ready(!0)},ready:function(e){if(e===!0?!--lt.readyWait:!lt.isReady){if(!Q.body)return setTimeout(lt.ready);lt.isReady=!0,e!==!0&&--lt.readyWait>0||(U.resolveWith(Q,[lt]),lt.fn.trigger&&lt(Q).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===lt.type(e)},isArray:Array.isArray||function(e){return"array"===lt.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?J[rt.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==lt.type(e)||e.nodeType||lt.isWindow(e))return!1;try{if(e.constructor&&!st.call(e,"constructor")&&!st.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||st.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Q;var i=ft.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=lt.buildFragment([e],t,o),o&&lt(o).remove(),lt.merge([],i.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=lt.trim(t),t&&pt.test(t.replace(gt,"@").replace(vt,"]").replace(mt,"")))?new Function("return "+t)():(lt.error("Invalid JSON: "+t),void 0)},parseXML:function(n){var i,o;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(o=new DOMParser,i=o.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(r){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||lt.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&lt.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(yt,"ms-").replace(bt,wt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var o,r=0,s=e.length,a=n(e);if(i){if(a)for(;s>r&&(o=t.apply(e[r],i),o!==!1);r++);else for(r in e)if(o=t.apply(e[r],i),o===!1)break}else if(a)for(;s>r&&(o=t.call(e[r],r,e[r]),o!==!1);r++);else for(r in e)if(o=t.call(e[r],r,e[r]),o===!1)break;return e},trim:at&&!at.call("﻿ ")?function(e){return null==e?"":at.call(e)}:function(e){return null==e?"":(e+"").replace(ht,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?lt.merge(i,"string"==typeof e?[e]:e):nt.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(ot)return ot.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,o=e.length,r=0;if("number"==typeof i)for(;i>r;r++)e[o++]=n[r];else for(;n[r]!==t;)e[o++]=n[r++];return e.length=o,e},grep:function(e,t,n){var i,o=[],r=0,s=e.length;for(n=!!n;s>r;r++)i=!!t(e[r],r),n!==i&&o.push(e[r]);return o},map:function(e,t,i){var o,r=0,s=e.length,a=n(e),l=[];if(a)for(;s>r;r++)o=t(e[r],r,i),null!=o&&(l[l.length]=o);else for(r in e)o=t(e[r],r,i),null!=o&&(l[l.length]=o);return tt.apply([],l)},guid:1,proxy:function(e,n){var i,o,r;return"string"==typeof n&&(r=e[n],n=e,e=r),lt.isFunction(e)?(i=it.call(arguments,2),o=function(){return e.apply(n||this,i.concat(it.call(arguments)))},o.guid=e.guid=e.guid||lt.guid++,o):t},access:function(e,n,i,o,r,s,a){var l=0,c=e.length,u=null==i;if("object"===lt.type(i)){r=!0;for(l in i)lt.access(e,n,l,i[l],!0,s,a)}else if(o!==t&&(r=!0,lt.isFunction(o)||(a=!0),u&&(a?(n.call(e,o),n=null):(u=n,n=function(e,t,n){return u.call(lt(e),n)})),n))for(;c>l;l++)n(e[l],i,a?o:o.call(e[l],l,n(e[l],i)));return r?e:u?n.call(e):c?n(e[0],i):s},now:function(){return(new Date).getTime()}}),lt.ready.promise=function(t){if(!U)if(U=lt.Deferred(),"complete"===Q.readyState)setTimeout(lt.ready);else if(Q.addEventListener)Q.addEventListener("DOMContentLoaded",_t,!1),e.addEventListener("load",_t,!1);else{Q.attachEvent("onreadystatechange",_t),e.attachEvent("onload",_t);var n=!1;try{n=null==e.frameElement&&Q.documentElement}catch(i){}n&&n.doScroll&&function o(){if(!lt.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}xt(),lt.ready()}}()}return U.promise(t)},lt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){J["[object "+t+"]"]=t.toLowerCase()}),V=lt(Q);var Ct={};lt.Callbacks=function(e){e="string"==typeof e?Ct[e]||i(e):lt.extend({},e);var n,o,r,s,a,l,c=[],u=!e.once&&[],h=function(t){for(o=e.memory&&t,r=!0,a=l||0,l=0,s=c.length,n=!0;c&&s>a;a++)if(c[a].apply(t[0],t[1])===!1&&e.stopOnFalse){o=!1;break}n=!1,c&&(u?u.length&&h(u.shift()):o?c=[]:d.disable())},d={add:function(){if(c){var t=c.length;!function i(t){lt.each(t,function(t,n){var o=lt.type(n);"function"===o?e.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==o&&i(n)})}(arguments),n?s=c.length:o&&(l=t,h(o))}return this},remove:function(){return c&&lt.each(arguments,function(e,t){for(var i;(i=lt.inArray(t,c,i))>-1;)c.splice(i,1),n&&(s>=i&&s--,a>=i&&a--)}),this},has:function(e){return e?lt.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],this},disable:function(){return c=u=o=t,this},disabled:function(){return!c},lock:function(){return u=t,o||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||r&&!u||(n?u.push(t):h(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},lt.extend({Deferred:function(e){var t=[["resolve","done",lt.Callbacks("once memory"),"resolved"],["reject","fail",lt.Callbacks("once memory"),"rejected"],["notify","progress",lt.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return lt.Deferred(function(n){lt.each(t,function(t,r){var s=r[0],a=lt.isFunction(e[t])&&e[t];o[r[1]](function(){var e=a&&a.apply(this,arguments);e&&lt.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?lt.extend(e,i):i}},o={};return i.pipe=i.then,lt.each(t,function(e,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,r=it.call(arguments),s=r.length,a=1!==s||e&&lt.isFunction(e.promise)?s:0,l=1===a?e:lt.Deferred(),c=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?it.call(arguments):o,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>o;o++)r[o]&&lt.isFunction(r[o].promise)?r[o].promise().done(c(o,i,r)).fail(l.reject).progress(c(o,n,t)):--a;return a||l.resolveWith(i,r),l.promise()}}),lt.support=function(){var t,n,i,o,r,s,a,l,c,u,h=Q.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),i=h.getElementsByTagName("a")[0],!n||!i||!n.length)return{};r=Q.createElement("select"),a=r.appendChild(Q.createElement("option")),o=h.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==h.className,leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!o.value,optSelected:a.selected,enctype:!!Q.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==Q.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===Q.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!a.disabled;try{delete h.test}catch(d){t.deleteExpando=!1}o=Q.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),s=Q.createDocumentFragment(),s.appendChild(o),t.appendChecked=o.checked,t.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,h.attachEvent&&(h.attachEvent("onclick",function(){t.noCloneEvent=!1}),h.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})h.setAttribute(l="on"+u,"t"),t[u+"Bubbles"]=l in e||h.attributes[l].expando===!1;return h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===h.style.backgroundClip,lt(function(){var n,i,o,r="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=Q.getElementsByTagName("body")[0];s&&(n=Q.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(h),h.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=h.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&0===o[0].offsetHeight,h.innerHTML="",h.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===h.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(h,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(h,null)||{width:"4px"}).width,i=h.appendChild(Q.createElement("div")),i.style.cssText=h.style.cssText=r,i.style.marginRight=i.style.width="0",h.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),typeof h.style.zoom!==G&&(h.innerHTML="",h.style.cssText=r+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===h.offsetWidth,h.style.display="block",h.innerHTML="<div></div>",h.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==h.offsetWidth,t.inlineBlockNeedsLayout&&(s.style.zoom=1)),s.removeChild(n),n=h=o=i=null)}),n=r=s=a=i=o=null,t}();var Et=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,St=/([A-Z])/g;lt.extend({cache:{},expando:"jQuery"+(et+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?lt.cache[e[lt.expando]]:e[lt.expando],!!e&&!a(e)},data:function(e,t,n){return o(e,t,n)},removeData:function(e,t){return r(e,t)},_data:function(e,t,n){return o(e,t,n,!0)},_removeData:function(e,t){return r(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&lt.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),lt.fn.extend({data:function(e,n){var i,o,r=this[0],a=0,l=null;if(e===t){if(this.length&&(l=lt.data(r),1===r.nodeType&&!lt._data(r,"parsedAttrs"))){for(i=r.attributes;a<i.length;a++)o=i[a].name,o.indexOf("data-")||(o=lt.camelCase(o.slice(5)),s(r,o,l[o]));lt._data(r,"parsedAttrs",!0)}return l}return"object"==typeof e?this.each(function(){lt.data(this,e)}):lt.access(this,function(n){return n===t?r?s(r,e,lt.data(r,e)):null:(this.each(function(){lt.data(this,e,n)}),void 0)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){lt.removeData(this,e)})}}),lt.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=lt._data(e,t),n&&(!i||lt.isArray(n)?i=lt._data(e,t,lt.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=lt.queue(e,t),i=n.length,o=n.shift(),r=lt._queueHooks(e,t),s=function(){lt.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),r.cur=o,o&&("fx"===t&&n.unshift("inprogress"),delete r.stop,o.call(e,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return lt._data(e,n)||lt._data(e,n,{empty:lt.Callbacks("once memory").add(function(){lt._removeData(e,t+"queue"),lt._removeData(e,n)})})}}),lt.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?lt.queue(this[0],e):n===t?this:this.each(function(){var t=lt.queue(this,e,n);lt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&lt.dequeue(this,e)})},dequeue:function(e){return this.each(function(){lt.dequeue(this,e)})},delay:function(e,t){return e=lt.fx?lt.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,o=1,r=lt.Deferred(),s=this,a=this.length,l=function(){--o||r.resolveWith(s,[s])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";a--;)i=lt._data(s[a],e+"queueHooks"),i&&i.empty&&(o++,i.empty.add(l));return l(),r.promise(n)}});var Tt,kt,It=/[\t\r\n]/g,Nt=/\r/g,Pt=/^(?:input|select|textarea|button|object)$/i,At=/^(?:a|area)$/i,Dt=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Mt=/^(?:checked|selected)$/i,Rt=lt.support.getSetAttribute,jt=lt.support.input;lt.fn.extend({attr:function(e,t){return lt.access(this,lt.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){lt.removeAttr(this,e)})},prop:function(e,t){return lt.access(this,lt.prop,e,t,arguments.length>1)},removeProp:function(e){return e=lt.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,o,r,s=0,a=this.length,l="string"==typeof e&&e;if(lt.isFunction(e))return this.each(function(t){lt(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ut)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(It," "):" ")){for(r=0;o=t[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");n.className=lt.trim(i)}return this},removeClass:function(e){var t,n,i,o,r,s=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(lt.isFunction(e))return this.each(function(t){lt(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ut)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(It," "):"")){for(r=0;o=t[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");n.className=e?lt.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return lt.isFunction(e)?this.each(function(n){lt(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var o,r=0,s=lt(this),a=t,l=e.match(ut)||[];o=l[r++];)a=i?a:!s.hasClass(o),s[a?"addClass":"removeClass"](o);else(n===G||"boolean"===n)&&(this.className&&lt._data(this,"__className__",this.className),this.className=this.className||e===!1?"":lt._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(It," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,o,r=this[0];{if(arguments.length)return o=lt.isFunction(e),this.each(function(n){var r,s=lt(this);1===this.nodeType&&(r=o?e.call(this,n,s.val()):e,null==r?r="":"number"==typeof r?r+="":lt.isArray(r)&&(r=lt.map(r,function(e){return null==e?"":e+""})),i=lt.valHooks[this.type]||lt.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))});if(r)return i=lt.valHooks[r.type]||lt.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==t?n:(n=r.value,"string"==typeof n?n.replace(Nt,""):null==n?"":n)}}}),lt.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,r="select-one"===e.type||0>o,s=r?null:[],a=r?o+1:i.length,l=0>o?a:r?o:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==o||(lt.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&lt.nodeName(n.parentNode,"optgroup"))){if(t=lt(n).val(),r)return t;s.push(t)}return s},set:function(e,t){var n=lt.makeArray(t);return lt(e).find("option").each(function(){this.selected=lt.inArray(lt(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,i){var o,r,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===G?lt.prop(e,n,i):(r=1!==a||!lt.isXMLDoc(e),r&&(n=n.toLowerCase(),o=lt.attrHooks[n]||(Dt.test(n)?kt:Tt)),i===t?o&&r&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==G&&(s=e.getAttribute(n)),null==s?t:s):null!==i?o&&r&&"set"in o&&(s=o.set(e,i,n))!==t?s:(e.setAttribute(n,i+""),i):(lt.removeAttr(e,n),void 0))},removeAttr:function(e,t){var n,i,o=0,r=t&&t.match(ut);if(r&&1===e.nodeType)for(;n=r[o++];)i=lt.propFix[n]||n,Dt.test(n)?!Rt&&Mt.test(n)?e[lt.camelCase("default-"+n)]=e[i]=!1:e[i]=!1:lt.attr(e,n,""),e.removeAttribute(Rt?n:i)},attrHooks:{type:{set:function(e,t){if(!lt.support.radioValue&&"radio"===t&&lt.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var o,r,s,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return s=1!==a||!lt.isXMLDoc(e),s&&(n=lt.propFix[n]||n,r=lt.propHooks[n]),i!==t?r&&"set"in r&&(o=r.set(e,i,n))!==t?o:e[n]=i:r&&"get"in r&&null!==(o=r.get(e,n))?o:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Pt.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:t}}}}),kt={get:function(e,n){var i=lt.prop(e,n),o="boolean"==typeof i&&e.getAttribute(n),r="boolean"==typeof i?jt&&Rt?null!=o:Mt.test(n)?e[lt.camelCase("default-"+n)]:!!o:e.getAttributeNode(n);return r&&r.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?lt.removeAttr(e,n):jt&&Rt||!Mt.test(n)?e.setAttribute(!Rt&&lt.propFix[n]||n,n):e[lt.camelCase("default-"+n)]=e[n]=!0,n}},jt&&Rt||(lt.attrHooks.value={get:function(e,n){var i=e.getAttributeNode(n);return lt.nodeName(e,"input")?e.defaultValue:i&&i.specified?i.value:t},set:function(e,t,n){return lt.nodeName(e,"input")?(e.defaultValue=t,void 0):Tt&&Tt.set(e,t,n)}}),Rt||(Tt=lt.valHooks.button={get:function(e,n){var i=e.getAttributeNode(n);return i&&("id"===n||"name"===n||"coords"===n?""!==i.value:i.specified)?i.value:t},set:function(e,n,i){var o=e.getAttributeNode(i);return o||e.setAttributeNode(o=e.ownerDocument.createAttribute(i)),o.value=n+="","value"===i||n===e.getAttribute(i)?n:t
}},lt.attrHooks.contenteditable={get:Tt.get,set:function(e,t,n){Tt.set(e,""===t?!1:t,n)}},lt.each(["width","height"],function(e,t){lt.attrHooks[t]=lt.extend(lt.attrHooks[t],{set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}})})),lt.support.hrefNormalized||(lt.each(["href","src","width","height"],function(e,n){lt.attrHooks[n]=lt.extend(lt.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null==i?t:i}})}),lt.each(["href","src"],function(e,t){lt.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),lt.support.style||(lt.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),lt.support.optSelected||(lt.propHooks.selected=lt.extend(lt.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),lt.support.enctype||(lt.propFix.enctype="encoding"),lt.support.checkOn||lt.each(["radio","checkbox"],function(){lt.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),lt.each(["radio","checkbox"],function(){lt.valHooks[this]=lt.extend(lt.valHooks[this],{set:function(e,t){return lt.isArray(t)?e.checked=lt.inArray(lt(e).val(),t)>=0:void 0}})});var Ot=/^(?:input|select|textarea)$/i,Ft=/^key/,Ht=/^(?:mouse|contextmenu)|click/,Bt=/^(?:focusinfocus|focusoutblur)$/,Lt=/^([^.]*)(?:\.(.+)|)$/;lt.event={global:{},add:function(e,n,i,o,r){var s,a,l,c,u,h,d,f,p,m,g,v=lt._data(e);if(v){for(i.handler&&(c=i,i=c.handler,r=c.selector),i.guid||(i.guid=lt.guid++),(a=v.events)||(a=v.events={}),(h=v.handle)||(h=v.handle=function(e){return typeof lt===G||e&&lt.event.triggered===e.type?t:lt.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(ut)||[""],l=n.length;l--;)s=Lt.exec(n[l])||[],p=g=s[1],m=(s[2]||"").split(".").sort(),u=lt.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=lt.event.special[p]||{},d=lt.extend({type:p,origType:g,data:o,handler:i,guid:i.guid,selector:r,needsContext:r&&lt.expr.match.needsContext.test(r),namespace:m.join(".")},c),(f=a[p])||(f=a[p]=[],f.delegateCount=0,u.setup&&u.setup.call(e,o,m,h)!==!1||(e.addEventListener?e.addEventListener(p,h,!1):e.attachEvent&&e.attachEvent("on"+p,h))),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),r?f.splice(f.delegateCount++,0,d):f.push(d),lt.event.global[p]=!0;e=null}},remove:function(e,t,n,i,o){var r,s,a,l,c,u,h,d,f,p,m,g=lt.hasData(e)&&lt._data(e);if(g&&(u=g.events)){for(t=(t||"").match(ut)||[""],c=t.length;c--;)if(a=Lt.exec(t[c])||[],f=m=a[1],p=(a[2]||"").split(".").sort(),f){for(h=lt.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,d=u[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=d.length;r--;)s=d[r],!o&&m!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(d.splice(r,1),s.selector&&d.delegateCount--,h.remove&&h.remove.call(e,s));l&&!d.length&&(h.teardown&&h.teardown.call(e,p,g.handle)!==!1||lt.removeEvent(e,f,g.handle),delete u[f])}else for(f in u)lt.event.remove(e,f+t[c],n,i,!0);lt.isEmptyObject(u)&&(delete g.handle,lt._removeData(e,"events"))}},trigger:function(n,i,o,r){var s,a,l,c,u,h,d,f=[o||Q],p=st.call(n,"type")?n.type:n,m=st.call(n,"namespace")?n.namespace.split("."):[];if(l=h=o=o||Q,3!==o.nodeType&&8!==o.nodeType&&!Bt.test(p+lt.event.triggered)&&(p.indexOf(".")>=0&&(m=p.split("."),p=m.shift(),m.sort()),a=p.indexOf(":")<0&&"on"+p,n=n[lt.expando]?n:new lt.Event(p,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=o),i=null==i?[n]:lt.makeArray(i,[n]),u=lt.event.special[p]||{},r||!u.trigger||u.trigger.apply(o,i)!==!1)){if(!r&&!u.noBubble&&!lt.isWindow(o)){for(c=u.delegateType||p,Bt.test(c+p)||(l=l.parentNode);l;l=l.parentNode)f.push(l),h=l;h===(o.ownerDocument||Q)&&f.push(h.defaultView||h.parentWindow||e)}for(d=0;(l=f[d++])&&!n.isPropagationStopped();)n.type=d>1?c:u.bindType||p,s=(lt._data(l,"events")||{})[n.type]&&lt._data(l,"handle"),s&&s.apply(l,i),s=a&&l[a],s&&lt.acceptData(l)&&s.apply&&s.apply(l,i)===!1&&n.preventDefault();if(n.type=p,!(r||n.isDefaultPrevented()||u._default&&u._default.apply(o.ownerDocument,i)!==!1||"click"===p&&lt.nodeName(o,"a")||!lt.acceptData(o)||!a||!o[p]||lt.isWindow(o))){h=o[a],h&&(o[a]=null),lt.event.triggered=p;try{o[p]()}catch(g){}lt.event.triggered=t,h&&(o[a]=h)}return n.result}},dispatch:function(e){e=lt.event.fix(e);var n,i,o,r,s,a=[],l=it.call(arguments),c=(lt._data(this,"events")||{})[e.type]||[],u=lt.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=lt.event.handlers.call(this,e,c),n=0;(r=a[n++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,s=0;(o=r.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,i=((lt.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,o,r,s,a=[],l=n.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(r=[],s=0;l>s;s++)o=n[s],i=o.selector+" ",r[i]===t&&(r[i]=o.needsContext?lt(i,this).index(c)>=0:lt.find(i,this,null,[c]).length),r[i]&&r.push(o);r.length&&a.push({elem:c,handlers:r})}return l<n.length&&a.push({elem:this,handlers:n.slice(l)}),a},fix:function(e){if(e[lt.expando])return e;var t,n,i,o=e.type,r=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Ht.test(o)?this.mouseHooks:Ft.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new lt.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=r.srcElement||Q),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,o,r,s=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(o=e.target.ownerDocument||Q,r=o.documentElement,i=o.body,e.pageX=n.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return lt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==Q.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===Q.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var o=lt.extend(new lt.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?lt.event.trigger(o,null,t):lt.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},lt.removeEvent=Q.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===G&&(e[i]=null),e.detachEvent(i,n))},lt.Event=function(e,t){return this instanceof lt.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?l:c):this.type=e,t&&lt.extend(this,t),this.timeStamp=e&&e.timeStamp||lt.now(),this[lt.expando]=!0,void 0):new lt.Event(e,t)},lt.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},lt.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){lt.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;return(!o||o!==i&&!lt.contains(i,o))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),lt.support.submitBubbles||(lt.event.special.submit={setup:function(){return lt.nodeName(this,"form")?!1:(lt.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=lt.nodeName(n,"input")||lt.nodeName(n,"button")?n.form:t;i&&!lt._data(i,"submitBubbles")&&(lt.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),lt._data(i,"submitBubbles",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&lt.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return lt.nodeName(this,"form")?!1:(lt.event.remove(this,"._submit"),void 0)}}),lt.support.changeBubbles||(lt.event.special.change={setup:function(){return Ot.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(lt.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),lt.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),lt.event.simulate("change",this,e,!0)})),!1):(lt.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ot.test(t.nodeName)&&!lt._data(t,"changeBubbles")&&(lt.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||lt.event.simulate("change",this.parentNode,e,!0)}),lt._data(t,"changeBubbles",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return lt.event.remove(this,"._change"),!Ot.test(this.nodeName)}}),lt.support.focusinBubbles||lt.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){lt.event.simulate(t,e.target,lt.event.fix(e),!0)};lt.event.special[t]={setup:function(){0===n++&&Q.addEventListener(e,i,!0)},teardown:function(){0===--n&&Q.removeEventListener(e,i,!0)}}}),lt.fn.extend({on:function(e,n,i,o,r){var s,a;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(s in e)this.on(s,n,i,e[s],r);return this}if(null==i&&null==o?(o=n,i=n=t):null==o&&("string"==typeof n?(o=i,i=t):(o=i,i=n,n=t)),o===!1)o=c;else if(!o)return this;return 1===r&&(a=o,o=function(e){return lt().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=lt.guid++)),this.each(function(){lt.event.add(this,e,o,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var o,r;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,lt(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(r in e)this.off(r,n,e[r]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=c),this.each(function(){lt.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){lt.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?lt.event.trigger(e,t,n,!0):void 0}}),/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
function(e,t){function n(e){return pt.test(e+"")}function i(){var e,t=[];return e=function(n,i){return t.push(n+=" ")>E.cacheLength&&delete e[t.shift()],e[n]=i}}function o(e){return e[B]=!0,e}function r(e){var t=A.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function s(e,t,n,i){var o,r,s,a,l,c,u,f,p,m;if((t?t.ownerDocument||t:L)!==A&&P(t),t=t||A,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(!M&&!i){if(o=mt.exec(e))if(s=o[1]){if(9===a){if(r=t.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(s))&&F(t,r)&&r.id===s)return n.push(r),n}else{if(o[2])return K.apply(n,J.call(t.getElementsByTagName(e),0)),n;if((s=o[3])&&q.getByClassName&&t.getElementsByClassName)return K.apply(n,J.call(t.getElementsByClassName(s),0)),n}if(q.qsa&&!R.test(e)){if(u=!0,f=B,p=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=h(e),(u=t.getAttribute("id"))?f=u.replace(yt,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",l=c.length;l--;)c[l]=f+d(c[l]);p=ft.test(e)&&t.parentNode||t,m=c.join(",")}if(m)try{return K.apply(n,J.call(p.querySelectorAll(m),0)),n}catch(g){}finally{u||t.removeAttribute("id")}}}return w(e.replace(st,"$1"),t,n,i)}function a(e,t){var n=t&&e,i=n&&(~t.sourceIndex||Q)-(~e.sourceIndex||Q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return o(function(t){return t=+t,o(function(n,i){for(var o,r=e([],n.length,t),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function h(e,t){var n,i,o,r,a,l,c,u=U[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=E.preFilter;a;){(!n||(i=at.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(o=[])),n=!1,(i=ct.exec(a))&&(n=i.shift(),o.push({value:n,type:i[0].replace(st," ")}),a=a.slice(n.length));for(r in E.filter)!(i=dt[r].exec(a))||c[r]&&!(i=c[r](i))||(n=i.shift(),o.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?s.error(e):U(e,l).slice(0)}function d(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=W++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var a,l,c,u=z+" "+r;if(s){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(c=t[B]||(t[B]={}),(l=c[i])&&l[0]===u){if((a=l[1])===!0||a===C)return a===!0}else if(l=c[i]=[u],l[1]=e(t,n,s)||C,l[1]===!0)return!0}}function p(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function m(e,t,n,i,o){for(var r,s=[],a=0,l=e.length,c=null!=t;l>a;a++)(r=e[a])&&(!n||n(r,i,o))&&(s.push(r),c&&t.push(a));return s}function g(e,t,n,i,r,s){return i&&!i[B]&&(i=g(i)),r&&!r[B]&&(r=g(r,s)),o(function(o,s,a,l){var c,u,h,d=[],f=[],p=s.length,g=o||b(t||"*",a.nodeType?[a]:a,[]),v=!e||!o&&t?g:m(g,d,e,a,l),y=n?r||(o?e:p||i)?[]:s:v;if(n&&n(v,y,a,l),i)for(c=m(y,f),i(c,[],a,l),u=c.length;u--;)(h=c[u])&&(y[f[u]]=!(v[f[u]]=h));if(o){if(r||e){if(r){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(v[u]=h);r(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=r?Z.call(o,h):d[u])>-1&&(o[c]=!(s[c]=h))}}else y=m(y===s?y.splice(p,y.length):y),r?r(null,s,y,l):K.apply(s,y)})}function v(e){for(var t,n,i,o=e.length,r=E.relative[e[0].type],s=r||E.relative[" "],a=r?1:0,l=f(function(e){return e===t},s,!0),c=f(function(e){return Z.call(t,e)>-1},s,!0),u=[function(e,n,i){return!r&&(i||n!==N)||((t=n).nodeType?l(e,n,i):c(e,n,i))}];o>a;a++)if(n=E.relative[e[a].type])u=[f(p(u),n)];else{if(n=E.filter[e[a].type].apply(null,e[a].matches),n[B]){for(i=++a;o>i&&!E.relative[e[i].type];i++);return g(a>1&&p(u),a>1&&d(e.slice(0,a-1)).replace(st,"$1"),n,i>a&&v(e.slice(a,i)),o>i&&v(e=e.slice(i)),o>i&&d(e))}u.push(n)}return p(u)}function y(e,t){var n=0,i=t.length>0,r=e.length>0,a=function(o,a,l,c,u){var h,d,f,p=[],g=0,v="0",y=o&&[],b=null!=u,w=N,_=o||r&&E.find.TAG("*",u&&a.parentNode||a),x=z+=null==w?1:Math.random()||.1;for(b&&(N=a!==A&&a,C=n);null!=(h=_[v]);v++){if(r&&h){for(d=0;f=e[d++];)if(f(h,a,l)){c.push(h);break}b&&(z=x,C=++n)}i&&((h=!f&&h)&&g--,o&&y.push(h))}if(g+=v,i&&v!==g){for(d=0;f=t[d++];)f(y,p,a,l);if(o){if(g>0)for(;v--;)y[v]||p[v]||(p[v]=X.call(c));p=m(p)}K.apply(c,p),b&&!o&&p.length>0&&g+t.length>1&&s.uniqueSort(c)}return b&&(z=x,N=w),y};return i?o(a):a}function b(e,t,n){for(var i=0,o=t.length;o>i;i++)s(e,t[i],n);return n}function w(e,t,n,i){var o,r,s,a,l,c=h(e);if(!i&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&9===t.nodeType&&!M&&E.relative[r[1].type]){if(t=E.find.ID(s.matches[0].replace(wt,_t),t)[0],!t)return n;e=e.slice(r.shift().value.length)}for(o=dt.needsContext.test(e)?0:r.length;o--&&(s=r[o],!E.relative[a=s.type]);)if((l=E.find[a])&&(i=l(s.matches[0].replace(wt,_t),ft.test(r[0].type)&&t.parentNode||t))){if(r.splice(o,1),e=i.length&&d(r),!e)return K.apply(n,J.call(i,0)),n;break}}return k(e,c)(i,t,M,n,ft.test(e)),n}function _(){}var x,C,E,S,T,k,I,N,P,A,D,M,R,j,O,F,H,B="sizzle"+-new Date,L=e.document,q={},z=0,W=0,$=i(),U=i(),V=i(),G=typeof t,Q=1<<31,Y=[],X=Y.pop,K=Y.push,J=Y.slice,Z=Y.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},et="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt=tt.replace("w","w#"),it="([*^$|!~]?=)",ot="\\["+et+"*("+tt+")"+et+"*(?:"+it+et+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+nt+")|)|)"+et+"*\\]",rt=":("+tt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ot.replace(3,8)+")*)|.*)\\)|)",st=new RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),at=new RegExp("^"+et+"*,"+et+"*"),ct=new RegExp("^"+et+"*([\\x20\\t\\r\\n\\f>+~])"+et+"*"),ut=new RegExp(rt),ht=new RegExp("^"+nt+"$"),dt={ID:new RegExp("^#("+tt+")"),CLASS:new RegExp("^\\.("+tt+")"),NAME:new RegExp("^\\[name=['\"]?("+tt+")['\"]?\\]"),TAG:new RegExp("^("+tt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),needsContext:new RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},ft=/[\x20\t\r\n\f]*[+~]/,pt=/^[^{]+\{\s*\[native code/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/^(?:input|select|textarea|button)$/i,vt=/^h\d$/i,yt=/'|\\/g,bt=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,wt=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,_t=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{J.call(L.documentElement.childNodes,0)[0].nodeType}catch(xt){J=function(e){for(var t,n=[];t=this[e++];)n.push(t);return n}}T=s.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},P=s.setDocument=function(e){var i=e?e.ownerDocument||e:L;return i!==A&&9===i.nodeType&&i.documentElement?(A=i,D=i.documentElement,M=T(i),q.tagNameNoComments=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),q.attributes=r(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),q.getByClassName=r(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),q.getByName=r(function(e){e.id=B+0,e.innerHTML="<a name='"+B+"'></a><div name='"+B+"'></div>",D.insertBefore(e,D.firstChild);var t=i.getElementsByName&&i.getElementsByName(B).length===2+i.getElementsByName(B+0).length;return q.getIdNotName=!i.getElementById(B),D.removeChild(e),t}),E.attrHandle=r(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==G&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},q.getIdNotName?(E.find.ID=function(e,t){if(typeof t.getElementById!==G&&!M){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},E.filter.ID=function(e){var t=e.replace(wt,_t);return function(e){return e.getAttribute("id")===t}}):(E.find.ID=function(e,n){if(typeof n.getElementById!==G&&!M){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==G&&i.getAttributeNode("id").value===e?[i]:t:[]}},E.filter.ID=function(e){var t=e.replace(wt,_t);return function(e){var n=typeof e.getAttributeNode!==G&&e.getAttributeNode("id");return n&&n.value===t}}),E.find.TAG=q.tagNameNoComments?function(e,t){return typeof t.getElementsByTagName!==G?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},E.find.NAME=q.getByName&&function(e,t){return typeof t.getElementsByName!==G?t.getElementsByName(name):void 0},E.find.CLASS=q.getByClassName&&function(e,t){return typeof t.getElementsByClassName===G||M?void 0:t.getElementsByClassName(e)},j=[],R=[":focus"],(q.qsa=n(i.querySelectorAll))&&(r(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||R.push("\\["+et+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||R.push(":checked")}),r(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&R.push("[*^$]="+et+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(q.matchesSelector=n(O=D.matchesSelector||D.mozMatchesSelector||D.webkitMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&r(function(e){q.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),j.push("!=",rt)}),R=new RegExp(R.join("|")),j=new RegExp(j.join("|")),F=n(D.contains)||D.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},H=D.compareDocumentPosition?function(e,t){var n;return e===t?(I=!0,0):(n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&n||e.parentNode&&11===e.parentNode.nodeType?e===i||F(L,e)?-1:t===i||F(L,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,o=0,r=e.parentNode,s=t.parentNode,l=[e],c=[t];if(e===t)return I=!0,0;if(!r||!s)return e===i?-1:t===i?1:r?-1:s?1:0;if(r===s)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[o]===c[o];)o++;return o?a(l[o],c[o]):l[o]===L?-1:c[o]===L?1:0},I=!1,[0,0].sort(H),q.detectDuplicates=I,A):A},s.matches=function(e,t){return s(e,null,null,t)},s.matchesSelector=function(e,t){if((e.ownerDocument||e)!==A&&P(e),t=t.replace(bt,"='$1']"),!(!q.matchesSelector||M||j&&j.test(t)||R.test(t)))try{var n=O.call(e,t);if(n||q.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return s(t,A,null,[e]).length>0},s.contains=function(e,t){return(e.ownerDocument||e)!==A&&P(e),F(e,t)},s.attr=function(e,t){var n;return(e.ownerDocument||e)!==A&&P(e),M||(t=t.toLowerCase()),(n=E.attrHandle[t])?n(e):M||q.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},s.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},s.uniqueSort=function(e){var t,n=[],i=1,o=0;if(I=!q.detectDuplicates,e.sort(H),I){for(;t=e[i];i++)t===e[i-1]&&(o=n.push(i));for(;o--;)e.splice(n[o],1)}return e},S=s.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i];i++)n+=S(t);return n},E=s.selectors={cacheLength:50,createPseudo:o,match:dt,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,_t),e[3]=(e[4]||e[5]||"").replace(wt,_t),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||s.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&s.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return dt.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ut.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(wt,_t).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+et+")"+e+"("+et+"|$)"))&&$(e,function(e){return t.test(e.className||typeof e.getAttribute!==G&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var o=s.attr(i,e);return null==o?"!="===t:t?(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,d,f,p,m=r!==s?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(g){if(r){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?g.firstChild:g.lastChild],s&&y){for(u=g[B]||(g[B]={}),c=u[e]||[],f=c[0]===z&&c[1],d=c[0]===z&&c[2],h=f&&g.childNodes[f];h=++f&&h&&h[m]||(d=f=0)||p.pop();)if(1===h.nodeType&&++d&&h===t){u[e]=[z,f,d];break}}else if(y&&(c=(t[B]||(t[B]={}))[e])&&c[0]===z)d=c[1];else for(;(h=++f&&h&&h[m]||(d=f=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[B]||(h[B]={}))[e]=[z,d]),h!==t)););return d-=o,d===i||0===d%i&&d/i>=0}}},PSEUDO:function(e,t){var n,i=E.pseudos[e]||E.setFilters[e.toLowerCase()]||s.error("unsupported pseudo: "+e);return i[B]?i(t):i.length>1?(n=[e,e,"",t],E.setFilters.hasOwnProperty(e.toLowerCase())?o(function(e,n){for(var o,r=i(e,t),s=r.length;s--;)o=Z.call(e,r[s]),e[o]=!(n[o]=r[s])}):function(e){return i(e,0,n)}):i}},pseudos:{not:o(function(e){var t=[],n=[],i=k(e.replace(st,"$1"));return i[B]?o(function(e,t,n,o){for(var r,s=i(e,null,o,[]),a=e.length;a--;)(r=s[a])&&(e[a]=!(t[a]=r))}):function(e,o,r){return t[0]=e,i(t,null,r,n),!n.pop()}}),has:o(function(e){return function(t){return s(e,t).length>0}}),contains:o(function(e){return function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:o(function(e){return ht.test(e||"")||s.error("unsupported lang: "+e),e=e.replace(wt,_t).toLowerCase(),function(t){var n;do if(n=M?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===D},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!E.pseudos.empty(e)},header:function(e){return vt.test(e.nodeName)},input:function(e){return gt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}};for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[x]=l(x);for(x in{submit:!0,reset:!0})E.pseudos[x]=c(x);k=s.compile=function(e,t){var n,i=[],o=[],r=V[e+" "];if(!r){for(t||(t=h(e)),n=t.length;n--;)r=v(t[n]),r[B]?i.push(r):o.push(r);r=V(e,y(o,i))}return r},E.pseudos.nth=E.pseudos.eq,E.filters=_.prototype=E.pseudos,E.setFilters=new _,P(),s.attr=lt.attr,lt.find=s,lt.expr=s.selectors,lt.expr[":"]=lt.expr.pseudos,lt.unique=s.uniqueSort,lt.text=s.getText,lt.isXMLDoc=s.isXML,lt.contains=s.contains}(e);var qt=/Until$/,zt=/^(?:parents|prev(?:Until|All))/,Wt=/^.[^:#\[\.,]*$/,$t=lt.expr.match.needsContext,Ut={children:!0,contents:!0,next:!0,prev:!0};lt.fn.extend({find:function(e){var t,n,i,o=this.length;if("string"!=typeof e)return i=this,this.pushStack(lt(e).filter(function(){for(t=0;o>t;t++)if(lt.contains(i[t],this))return!0}));for(n=[],t=0;o>t;t++)lt.find(e,this[t],n);return n=this.pushStack(o>1?lt.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=lt(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(lt.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(h(this,e,!1))},filter:function(e){return this.pushStack(h(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?$t.test(e)?lt(e,this.context).index(this[0])>=0:lt.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,i=0,o=this.length,r=[],s=$t.test(e)||"string"!=typeof e?lt(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(s?s.index(n)>-1:lt.find.matchesSelector(n,e)){r.push(n);break}n=n.parentNode}return this.pushStack(r.length>1?lt.unique(r):r)},index:function(e){return e?"string"==typeof e?lt.inArray(this[0],lt(e)):lt.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?lt(e,t):lt.makeArray(e&&e.nodeType?[e]:e),i=lt.merge(this.get(),n);return this.pushStack(lt.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),lt.fn.andSelf=lt.fn.addBack,lt.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return lt.dir(e,"parentNode")},parentsUntil:function(e,t,n){return lt.dir(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return lt.dir(e,"nextSibling")},prevAll:function(e){return lt.dir(e,"previousSibling")},nextUntil:function(e,t,n){return lt.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return lt.dir(e,"previousSibling",n)},siblings:function(e){return lt.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return lt.sibling(e.firstChild)},contents:function(e){return lt.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:lt.merge([],e.childNodes)}},function(e,t){lt.fn[e]=function(n,i){var o=lt.map(this,t,n);return qt.test(e)||(i=n),i&&"string"==typeof i&&(o=lt.filter(i,o)),o=this.length>1&&!Ut[e]?lt.unique(o):o,this.length>1&&zt.test(e)&&(o=o.reverse()),this.pushStack(o)}}),lt.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?lt.find.matchesSelector(t[0],e)?[t[0]]:[]:lt.find.matches(e,t)},dir:function(e,n,i){for(var o=[],r=e[n];r&&9!==r.nodeType&&(i===t||1!==r.nodeType||!lt(r).is(i));)1===r.nodeType&&o.push(r),r=r[n];return o},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Vt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Gt=/ jQuery\d+="(?:null|\d+)"/g,Qt=new RegExp("<(?:"+Vt+")[\\s/>]","i"),Yt=/^\s+/,Xt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Kt=/<([\w:]+)/,Jt=/<tbody/i,Zt=/<|&#?\w+;/,en=/<(?:script|style|link)/i,tn=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,on=/^$|\/(?:java|ecma)script/i,rn=/^true\/(.*)/,sn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,an={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:lt.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ln=d(Q),cn=ln.appendChild(Q.createElement("div"));an.optgroup=an.option,an.tbody=an.tfoot=an.colgroup=an.caption=an.thead,an.th=an.td,lt.fn.extend({text:function(e){return lt.access(this,function(e){return e===t?lt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Q).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(lt.isFunction(e))return this.each(function(t){lt(this).wrapAll(e.call(this,t))});if(this[0]){var t=lt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return lt.isFunction(e)?this.each(function(t){lt(this).wrapInner(e.call(this,t))}):this.each(function(){var t=lt(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=lt.isFunction(e);return this.each(function(n){lt(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){lt.nodeName(this,"body")||lt(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||lt.filter(e,[n]).length>0)&&(t||1!==n.nodeType||lt.cleanData(b(n)),n.parentNode&&(t&&lt.contains(n.ownerDocument,n)&&g(b(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&lt.cleanData(b(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&lt.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return lt.clone(this,e,t)})},html:function(e){return lt.access(this,function(e){var n=this[0]||{},i=0,o=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Gt,""):t;if(!("string"!=typeof e||en.test(e)||!lt.support.htmlSerialize&&Qt.test(e)||!lt.support.leadingWhitespace&&Yt.test(e)||an[(Kt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Xt,"<$1></$2>");try{for(;o>i;i++)n=this[i]||{},1===n.nodeType&&(lt.cleanData(b(n,!1)),n.innerHTML=e);n=0}catch(r){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=lt.isFunction(e);return t||"string"==typeof e||(e=lt(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(lt(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){e=tt.apply([],e);var o,r,s,a,l,c,u=0,h=this.length,d=this,g=h-1,v=e[0],y=lt.isFunction(v);if(y||!(1>=h||"string"!=typeof v||lt.support.checkClone)&&nn.test(v))return this.each(function(o){var r=d.eq(o);y&&(e[0]=v.call(this,o,n?r.html():t)),r.domManip(e,n,i)});if(h&&(c=lt.buildFragment(e,this[0].ownerDocument,!1,this),o=c.firstChild,1===c.childNodes.length&&(c=o),o)){for(n=n&&lt.nodeName(o,"tr"),a=lt.map(b(c,"script"),p),s=a.length;h>u;u++)r=c,u!==g&&(r=lt.clone(r,!0,!0),s&&lt.merge(a,b(r,"script"))),i.call(n&&lt.nodeName(this[u],"table")?f(this[u],"tbody"):this[u],r,u);if(s)for(l=a[a.length-1].ownerDocument,lt.map(a,m),u=0;s>u;u++)r=a[u],on.test(r.type||"")&&!lt._data(r,"globalEval")&&lt.contains(l,r)&&(r.src?lt.ajax({url:r.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):lt.globalEval((r.text||r.textContent||r.innerHTML||"").replace(sn,"")));c=o=null}return this}}),lt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){lt.fn[e]=function(e){for(var n,i=0,o=[],r=lt(e),s=r.length-1;s>=i;i++)n=i===s?this:this.clone(!0),lt(r[i])[t](n),nt.apply(o,n.get());return this.pushStack(o)}}),lt.extend({clone:function(e,t,n){var i,o,r,s,a,l=lt.contains(e.ownerDocument,e);if(lt.support.html5Clone||lt.isXMLDoc(e)||!Qt.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(cn.innerHTML=e.outerHTML,cn.removeChild(r=cn.firstChild)),!(lt.support.noCloneEvent&&lt.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||lt.isXMLDoc(e)))for(i=b(r),a=b(e),s=0;null!=(o=a[s]);++s)i[s]&&y(o,i[s]);if(t)if(n)for(a=a||b(e),i=i||b(r),s=0;null!=(o=a[s]);s++)v(o,i[s]);else v(e,r);return i=b(r,"script"),i.length>0&&g(i,!l&&b(e,"script")),i=a=o=null,r},buildFragment:function(e,t,n,i){for(var o,r,s,a,l,c,u,h=e.length,f=d(t),p=[],m=0;h>m;m++)if(r=e[m],r||0===r)if("object"===lt.type(r))lt.merge(p,r.nodeType?[r]:r);else if(Zt.test(r)){for(a=a||f.appendChild(t.createElement("div")),l=(Kt.exec(r)||["",""])[1].toLowerCase(),u=an[l]||an._default,a.innerHTML=u[1]+r.replace(Xt,"<$1></$2>")+u[2],o=u[0];o--;)a=a.lastChild;if(!lt.support.leadingWhitespace&&Yt.test(r)&&p.push(t.createTextNode(Yt.exec(r)[0])),!lt.support.tbody)for(r="table"!==l||Jt.test(r)?"<table>"!==u[1]||Jt.test(r)?0:a:a.firstChild,o=r&&r.childNodes.length;o--;)lt.nodeName(c=r.childNodes[o],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(lt.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=f.lastChild}else p.push(t.createTextNode(r));for(a&&f.removeChild(a),lt.support.appendChecked||lt.grep(b(p,"input"),w),m=0;r=p[m++];)if((!i||-1===lt.inArray(r,i))&&(s=lt.contains(r.ownerDocument,r),a=b(f.appendChild(r),"script"),s&&g(a),n))for(o=0;r=a[o++];)on.test(r.type||"")&&n.push(r);return a=null,f},cleanData:function(e,t){for(var n,i,o,r,s=0,a=lt.expando,l=lt.cache,c=lt.support.deleteExpando,u=lt.event.special;null!=(n=e[s]);s++)if((t||lt.acceptData(n))&&(o=n[a],r=o&&l[o])){if(r.events)for(i in r.events)u[i]?lt.event.remove(n,i):lt.removeEvent(n,i,r.handle);l[o]&&(delete l[o],c?delete n[a]:typeof n.removeAttribute!==G?n.removeAttribute(a):n[a]=null,Z.push(o))}}});var un,hn,dn,fn=/alpha\([^)]*\)/i,pn=/opacity\s*=\s*([^)]*)/,mn=/^(top|right|bottom|left)$/,gn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,yn=new RegExp("^("+ct+")(.*)$","i"),bn=new RegExp("^("+ct+")(?!px)[a-z%]+$","i"),wn=new RegExp("^([+-])=("+ct+")","i"),_n={BODY:"block"},xn={position:"absolute",visibility:"hidden",display:"block"},Cn={letterSpacing:0,fontWeight:400},En=["Top","Right","Bottom","Left"],Sn=["Webkit","O","Moz","ms"];lt.fn.extend({css:function(e,n){return lt.access(this,function(e,n,i){var o,r,s={},a=0;if(lt.isArray(n)){for(r=hn(e),o=n.length;o>a;a++)s[n[a]]=lt.css(e,n[a],!1,r);return s}return i!==t?lt.style(e,n,i):lt.css(e,n)},e,n,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:x(this))?lt(this).show():lt(this).hide()})}}),lt.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=dn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":lt.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,o){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,a,l=lt.camelCase(n),c=e.style;if(n=lt.cssProps[l]||(lt.cssProps[l]=_(c,l)),a=lt.cssHooks[n]||lt.cssHooks[l],i===t)return a&&"get"in a&&(r=a.get(e,!1,o))!==t?r:c[n];if(s=typeof i,"string"===s&&(r=wn.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(lt.css(e,n)),s="number"),!(null==i||"number"===s&&isNaN(i)||("number"!==s||lt.cssNumber[l]||(i+="px"),lt.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),a&&"set"in a&&(i=a.set(e,i,o))===t)))try{c[n]=i}catch(u){}}},css:function(e,n,i,o){var r,s,a,l=lt.camelCase(n);return n=lt.cssProps[l]||(lt.cssProps[l]=_(e.style,l)),a=lt.cssHooks[n]||lt.cssHooks[l],a&&"get"in a&&(s=a.get(e,!0,i)),s===t&&(s=dn(e,n,o)),"normal"===s&&n in Cn&&(s=Cn[n]),""===i||i?(r=parseFloat(s),i===!0||lt.isNumeric(r)?r||0:s):s},swap:function(e,t,n,i){var o,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];o=n.apply(e,i||[]);for(r in t)e.style[r]=s[r];return o}}),e.getComputedStyle?(hn=function(t){return e.getComputedStyle(t,null)},dn=function(e,n,i){var o,r,s,a=i||hn(e),l=a?a.getPropertyValue(n)||a[n]:t,c=e.style;return a&&(""!==l||lt.contains(e.ownerDocument,e)||(l=lt.style(e,n)),bn.test(l)&&vn.test(n)&&(o=c.width,r=c.minWidth,s=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=o,c.minWidth=r,c.maxWidth=s)),l}):Q.documentElement.currentStyle&&(hn=function(e){return e.currentStyle},dn=function(e,n,i){var o,r,s,a=i||hn(e),l=a?a[n]:t,c=e.style;return null==l&&c&&c[n]&&(l=c[n]),bn.test(l)&&!mn.test(n)&&(o=c.left,r=e.runtimeStyle,s=r&&r.left,s&&(r.left=e.currentStyle.left),c.left="fontSize"===n?"1em":l,l=c.pixelLeft+"px",c.left=o,s&&(r.left=s)),""===l?"auto":l}),lt.each(["height","width"],function(e,t){lt.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&gn.test(lt.css(e,"display"))?lt.swap(e,xn,function(){return T(e,t,i)}):T(e,t,i):void 0},set:function(e,n,i){var o=i&&hn(e);return E(e,n,i?S(e,t,i,lt.support.boxSizing&&"border-box"===lt.css(e,"boxSizing",!1,o),o):0)}}}),lt.support.opacity||(lt.cssHooks.opacity={get:function(e,t){return pn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,o=lt.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===lt.trim(r.replace(fn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=fn.test(r)?r.replace(fn,o):r+" "+o)}}),lt(function(){lt.support.reliableMarginRight||(lt.cssHooks.marginRight={get:function(e,t){return t?lt.swap(e,{display:"inline-block"},dn,[e,"marginRight"]):void 0}}),!lt.support.pixelPosition&&lt.fn.position&&lt.each(["top","left"],function(e,t){lt.cssHooks[t]={get:function(e,n){return n?(n=dn(e,t),bn.test(n)?lt(e).position()[t]+"px":n):void 0}}})}),lt.expr&&lt.expr.filters&&(lt.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!lt.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||lt.css(e,"display"))},lt.expr.filters.visible=function(e){return!lt.expr.filters.hidden(e)}),lt.each({margin:"",padding:"",border:"Width"},function(e,t){lt.cssHooks[e+t]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+En[i]+t]=r[i]||r[i-2]||r[0];return o}},vn.test(e)||(lt.cssHooks[e+t].set=E)});var Tn=/%20/g,kn=/\[\]$/,In=/\r?\n/g,Nn=/^(?:submit|button|image|reset|file)$/i,Pn=/^(?:input|select|textarea|keygen)/i;lt.fn.extend({serialize:function(){return lt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=lt.prop(this,"elements");return e?lt.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!lt(this).is(":disabled")&&Pn.test(this.nodeName)&&!Nn.test(e)&&(this.checked||!tn.test(e))}).map(function(e,t){var n=lt(this).val();return null==n?null:lt.isArray(n)?lt.map(n,function(e){return{name:t.name,value:e.replace(In,"\r\n")}}):{name:t.name,value:n.replace(In,"\r\n")}}).get()}}),lt.param=function(e,n){var i,o=[],r=function(e,t){t=lt.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)
};if(n===t&&(n=lt.ajaxSettings&&lt.ajaxSettings.traditional),lt.isArray(e)||e.jquery&&!lt.isPlainObject(e))lt.each(e,function(){r(this.name,this.value)});else for(i in e)N(i,e[i],n,r);return o.join("&").replace(Tn,"+")},lt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){lt.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),lt.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var An,Dn,Mn=lt.now(),Rn=/\?/,jn=/#.*$/,On=/([?&])_=[^&]*/,Fn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Hn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Bn=/^(?:GET|HEAD)$/,Ln=/^\/\//,qn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,zn=lt.fn.load,Wn={},$n={},Un="*/".concat("*");try{Dn=Y.href}catch(Vn){Dn=Q.createElement("a"),Dn.href="",Dn=Dn.href}An=qn.exec(Dn.toLowerCase())||[],lt.fn.load=function(e,n,i){if("string"!=typeof e&&zn)return zn.apply(this,arguments);var o,r,s,a=this,l=e.indexOf(" ");return l>=0&&(o=e.slice(l,e.length),e=e.slice(0,l)),lt.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(s="POST"),a.length>0&&lt.ajax({url:e,type:s,dataType:"html",data:n}).done(function(e){r=arguments,a.html(o?lt("<div>").append(lt.parseHTML(e)).find(o):e)}).complete(i&&function(e,t){a.each(i,r||[e.responseText,t,e])}),this},lt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){lt.fn[t]=function(e){return this.on(t,e)}}),lt.each(["get","post"],function(e,n){lt[n]=function(e,i,o,r){return lt.isFunction(i)&&(r=r||o,o=i,i=t),lt.ajax({url:e,type:n,dataType:r,data:i,success:o})}}),lt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dn,type:"GET",isLocal:Hn.test(An[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Un,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":lt.parseJSON,"text xml":lt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?D(D(e,lt.ajaxSettings),t):D(lt.ajaxSettings,e)},ajaxPrefilter:P(Wn),ajaxTransport:P($n),ajax:function(e,n){function i(e,n,i,o){var r,h,y,b,_,C=n;2!==w&&(w=2,l&&clearTimeout(l),u=t,a=o||"",x.readyState=e>0?4:0,i&&(b=M(d,x,i)),e>=200&&300>e||304===e?(d.ifModified&&(_=x.getResponseHeader("Last-Modified"),_&&(lt.lastModified[s]=_),_=x.getResponseHeader("etag"),_&&(lt.etag[s]=_)),204===e?(r=!0,C="nocontent"):304===e?(r=!0,C="notmodified"):(r=R(d,b),C=r.state,h=r.data,y=r.error,r=!y)):(y=C,(e||!C)&&(C="error",0>e&&(e=0))),x.status=e,x.statusText=(n||C)+"",r?m.resolveWith(f,[h,C,x]):m.rejectWith(f,[x,C,y]),x.statusCode(v),v=t,c&&p.trigger(r?"ajaxSuccess":"ajaxError",[x,d,r?h:y]),g.fireWith(f,[x,C]),c&&(p.trigger("ajaxComplete",[x,d]),--lt.active||lt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var o,r,s,a,l,c,u,h,d=lt.ajaxSetup({},n),f=d.context||d,p=d.context&&(f.nodeType||f.jquery)?lt(f):lt.event,m=lt.Deferred(),g=lt.Callbacks("once memory"),v=d.statusCode||{},y={},b={},w=0,_="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!h)for(h={};t=Fn.exec(a);)h[t[1].toLowerCase()]=t[2];t=h[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return w||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||_;return u&&u.abort(t),i(0,t),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,d.url=((e||d.url||Dn)+"").replace(jn,"").replace(Ln,An[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=lt.trim(d.dataType||"*").toLowerCase().match(ut)||[""],null==d.crossDomain&&(o=qn.exec(d.url.toLowerCase()),d.crossDomain=!(!o||o[1]===An[1]&&o[2]===An[2]&&(o[3]||("http:"===o[1]?80:443))==(An[3]||("http:"===An[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=lt.param(d.data,d.traditional)),A(Wn,d,n,x),2===w)return x;c=d.global,c&&0===lt.active++&&lt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Bn.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(Rn.test(s)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=On.test(s)?s.replace(On,"$1_="+Mn++):s+(Rn.test(s)?"&":"?")+"_="+Mn++)),d.ifModified&&(lt.lastModified[s]&&x.setRequestHeader("If-Modified-Since",lt.lastModified[s]),lt.etag[s]&&x.setRequestHeader("If-None-Match",lt.etag[s])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Un+"; q=0.01":""):d.accepts["*"]);for(r in d.headers)x.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(d.beforeSend.call(f,x,d)===!1||2===w))return x.abort();_="abort";for(r in{success:1,error:1,complete:1})x[r](d[r]);if(u=A($n,d,n,x)){x.readyState=1,c&&p.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},d.timeout));try{w=1,u.send(y,i)}catch(C){if(!(2>w))throw C;i(-1,C)}}else i(-1,"No Transport");return x},getScript:function(e,n){return lt.get(e,t,n,"script")},getJSON:function(e,t,n){return lt.get(e,t,n,"json")}}),lt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return lt.globalEval(e),e}}}),lt.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),lt.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=Q.head||lt("head")[0]||Q.documentElement;return{send:function(t,o){n=Q.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||o(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Gn=[],Qn=/(=)\?(?=&|$)|\?\?/;lt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gn.pop()||lt.expando+"_"+Mn++;return this[e]=!0,e}}),lt.ajaxPrefilter("json jsonp",function(n,i,o){var r,s,a,l=n.jsonp!==!1&&(Qn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(r=n.jsonpCallback=lt.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Qn,"$1"+r):n.jsonp!==!1&&(n.url+=(Rn.test(n.url)?"&":"?")+n.jsonp+"="+r),n.converters["script json"]=function(){return a||lt.error(r+" was not called"),a[0]},n.dataTypes[0]="json",s=e[r],e[r]=function(){a=arguments},o.always(function(){e[r]=s,n[r]&&(n.jsonpCallback=i.jsonpCallback,Gn.push(r)),a&&lt.isFunction(s)&&s(a[0]),a=s=t}),"script"):void 0});var Yn,Xn,Kn=0,Jn=e.ActiveXObject&&function(){var e;for(e in Yn)Yn[e](t,!0)};lt.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&j()||O()}:j,Xn=lt.ajaxSettings.xhr(),lt.support.cors=!!Xn&&"withCredentials"in Xn,Xn=lt.support.ajax=!!Xn,Xn&&lt.ajaxTransport(function(n){if(!n.crossDomain||lt.support.cors){var i;return{send:function(o,r){var s,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");try{for(a in o)l.setRequestHeader(a,o[a])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(e,o){var a,c,u,h;try{if(i&&(o||4===l.readyState))if(i=t,s&&(l.onreadystatechange=lt.noop,Jn&&delete Yn[s]),o)4!==l.readyState&&l.abort();else{h={},a=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(h.text=l.responseText);try{u=l.statusText}catch(d){u=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=h.text?200:404}}catch(f){o||r(-1,f)}h&&r(a,u,h,c)},n.async?4===l.readyState?setTimeout(i):(s=++Kn,Jn&&(Yn||(Yn={},lt(e).unload(Jn)),Yn[s]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(t,!0)}}}});var Zn,ei,ti=/^(?:toggle|show|hide)$/,ni=new RegExp("^(?:([+-])=|)("+ct+")([a-z%]*)$","i"),ii=/queueHooks$/,oi=[q],ri={"*":[function(e,t){var n,i,o=this.createTween(e,t),r=ni.exec(t),s=o.cur(),a=+s||0,l=1,c=20;if(r){if(n=+r[2],i=r[3]||(lt.cssNumber[e]?"":"px"),"px"!==i&&a){a=lt.css(o.elem,e,!0)||n||1;do l=l||".5",a/=l,lt.style(o.elem,e,a+i);while(l!==(l=o.cur()/s)&&1!==l&&--c)}o.unit=i,o.start=a,o.end=r[1]?a+(r[1]+1)*n:n}return o}]};lt.Animation=lt.extend(B,{tweener:function(e,t){lt.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,o=e.length;o>i;i++)n=e[i],ri[n]=ri[n]||[],ri[n].unshift(t)},prefilter:function(e,t){t?oi.unshift(e):oi.push(e)}}),lt.Tween=z,z.prototype={constructor:z,init:function(e,t,n,i,o,r){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(lt.cssNumber[n]?"":"px")},cur:function(){var e=z.propHooks[this.prop];return e&&e.get?e.get(this):z.propHooks._default.get(this)},run:function(e){var t,n=z.propHooks[this.prop];return this.pos=t=this.options.duration?lt.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):z.propHooks._default.set(this),this}},z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=lt.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){lt.fx.step[e.prop]?lt.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[lt.cssProps[e.prop]]||lt.cssHooks[e.prop])?lt.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},lt.each(["toggle","show","hide"],function(e,t){var n=lt.fn[t];lt.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(W(t,!0),e,i,o)}}),lt.fn.extend({fadeTo:function(e,t,n,i){return this.filter(x).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=lt.isEmptyObject(e),r=lt.speed(t,n,i),s=function(){var t=B(this,lt.extend({},e),r);s.finish=function(){t.stop(!0)},(o||lt._data(this,"finish"))&&t.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(e,n,i){var o=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",r=lt.timers,s=lt._data(this);if(n)s[n]&&s[n].stop&&o(s[n]);else for(n in s)s[n]&&s[n].stop&&ii.test(n)&&o(s[n]);for(n=r.length;n--;)r[n].elem!==this||null!=e&&r[n].queue!==e||(r[n].anim.stop(i),t=!1,r.splice(n,1));(t||!i)&&lt.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=lt._data(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=lt.timers,s=i?i.length:0;for(n.finish=!0,lt.queue(this,e,[]),o&&o.cur&&o.cur.finish&&o.cur.finish.call(this),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),lt.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){lt.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),lt.speed=function(e,t,n){var i=e&&"object"==typeof e?lt.extend({},e):{complete:n||!n&&t||lt.isFunction(e)&&e,duration:e,easing:n&&t||t&&!lt.isFunction(t)&&t};return i.duration=lt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in lt.fx.speeds?lt.fx.speeds[i.duration]:lt.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){lt.isFunction(i.old)&&i.old.call(this),i.queue&&lt.dequeue(this,i.queue)},i},lt.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},lt.timers=[],lt.fx=z.prototype.init,lt.fx.tick=function(){var e,n=lt.timers,i=0;for(Zn=lt.now();i<n.length;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||lt.fx.stop(),Zn=t},lt.fx.timer=function(e){e()&&lt.timers.push(e)&&lt.fx.start()},lt.fx.interval=13,lt.fx.start=function(){ei||(ei=setInterval(lt.fx.tick,lt.fx.interval))},lt.fx.stop=function(){clearInterval(ei),ei=null},lt.fx.speeds={slow:600,fast:200,_default:400},lt.fx.step={},lt.expr&&lt.expr.filters&&(lt.expr.filters.animated=function(e){return lt.grep(lt.timers,function(t){return e===t.elem}).length}),lt.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){lt.offset.setOffset(this,e,t)});var n,i,o={top:0,left:0},r=this[0],s=r&&r.ownerDocument;if(s)return n=s.documentElement,lt.contains(n,r)?(typeof r.getBoundingClientRect!==G&&(o=r.getBoundingClientRect()),i=$(s),{top:o.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},lt.offset={setOffset:function(e,t,n){var i=lt.css(e,"position");"static"===i&&(e.style.position="relative");var o,r,s=lt(e),a=s.offset(),l=lt.css(e,"top"),c=lt.css(e,"left"),u=("absolute"===i||"fixed"===i)&&lt.inArray("auto",[l,c])>-1,h={},d={};u?(d=s.position(),o=d.top,r=d.left):(o=parseFloat(l)||0,r=parseFloat(c)||0),lt.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(h.top=t.top-a.top+o),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):s.css(h)}},lt.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===lt.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),lt.nodeName(e[0],"html")||(n=e.offset()),n.top+=lt.css(e[0],"borderTopWidth",!0),n.left+=lt.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-lt.css(i,"marginTop",!0),left:t.left-n.left-lt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Q.documentElement;e&&!lt.nodeName(e,"html")&&"static"===lt.css(e,"position");)e=e.offsetParent;return e||Q.documentElement})}}),lt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);lt.fn[e]=function(o){return lt.access(this,function(e,o,r){var s=$(e);return r===t?s?n in s?s[n]:s.document.documentElement[o]:e[o]:(s?s.scrollTo(i?lt(s).scrollLeft():r,i?r:lt(s).scrollTop()):e[o]=r,void 0)},e,o,arguments.length,null)}}),lt.each({Height:"height",Width:"width"},function(e,n){lt.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,o){lt.fn[o]=function(o,r){var s=arguments.length&&(i||"boolean"!=typeof o),a=i||(o===!0||r===!0?"margin":"border");return lt.access(this,function(n,i,o){var r;return lt.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(r=n.documentElement,Math.max(n.body["scroll"+e],r["scroll"+e],n.body["offset"+e],r["offset"+e],r["client"+e])):o===t?lt.css(n,i,a):lt.style(n,i,o,a)},n,s?o:t,s,null)}})}),e.jQuery=e.$=lt,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return lt})}(window),function(e,t){var n=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return"rails"===e.namespace}).length};n()&&e.error("jquery-ujs has already been loaded!");var i;e.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,i){var o=e.Event(n);return t.trigger(o,i),o.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var o,r,s,a,l,c,u,h;if(i.fire(n,"ajax:before")){if(a=n.data("cross-domain"),l=a===t?null:a,c=n.data("with-credentials")||null,u=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){o=n.attr("method"),r=n.attr("action"),s=n.serializeArray();var d=n.data("ujs:submit-button");d&&(s.push(d),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(o=n.data("method"),r=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):(o=n.data("method"),r=i.href(n),s=n.data("params")||null);h={type:o||"GET",data:s,dataType:u,beforeSend:function(e,o){return o.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),i.fire(n,"ajax:beforeSend",[e,o])},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},crossDomain:l},c&&(h.xhrFields={withCredentials:c}),r&&(h.url=r);var f=i.ajax(h);return n.trigger("ajax:send",f),f}return!1},handleMethod:function(n){var o=i.href(n),r=n.data("method"),s=n.attr("target"),a=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),c=e('<form method="post" action="'+o+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />';l!==t&&a!==t&&(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(u).appendTo("body"),c.submit()},disableFormElements:function(t){t.find(i.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(i.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,n=e.data("confirm"),o=!1;return n?(i.fire(e,"confirm")&&(o=i.confirm(n),t=i.fire(e,"confirm:complete",[o])),o&&t):!0},blankInputs:function(t,n,i){var o,r,s=e(),a=n||"input,textarea",l=t.find(a);return l.each(function(){if(o=e(this),r=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!r==!i){if(o.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;s=s.add(o)}}),s.length?s:!1},nonBlankInputs:function(e,t){return i.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,i){var o=n.data("events"),r=!0;return o!==t&&o.submit!==t&&e.each(o.submit,function(e,t){return"function"==typeof t.handler?r=t.handler(i):void 0}),r},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return i.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},i.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||i.CSRFProtection(n)}),e(document).delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(e(this))}),e(document).delegate(i.linkClickSelector,"click.rails",function(n){var o=e(this),r=o.data("method"),s=o.data("params");if(!i.allowAction(o))return i.stopEverything(n);if(o.is(i.linkDisableSelector)&&i.disableElement(o),o.data("remote")!==t){if(!(!n.metaKey&&!n.ctrlKey||r&&"GET"!==r||s))return!0;var a=i.handleRemote(o);return a===!1?i.enableElement(o):a.error(function(){i.enableElement(o)}),!1}return o.data("method")?(i.handleMethod(o),!1):void 0}),e(document).delegate(i.inputChangeSelector,"change.rails",function(t){var n=e(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(t)}),e(document).delegate(i.formSubmitSelector,"submit.rails",function(n){var o=e(this),r=o.data("remote")!==t,s=i.blankInputs(o,i.requiredInputSelector),a=i.nonBlankInputs(o,i.fileInputSelector);if(!i.allowAction(o))return i.stopEverything(n);if(s&&o.attr("novalidate")==t&&i.fire(o,"ajax:aborted:required",[s]))return i.stopEverything(n);if(r){if(a){setTimeout(function(){i.disableFormElements(o)},13);var l=i.fire(o,"ajax:aborted:file",[a]);return l||setTimeout(function(){i.enableFormElements(o)},13),l}return!e.support.submitBubbles&&e().jquery<"1.7"&&i.callFormSubmitBindings(o,n)===!1?i.stopEverything(n):(i.handleRemote(o),!1)}setTimeout(function(){i.disableFormElements(o)},13)}),e(document).delegate(i.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);var o=n.attr("name"),r=o?{name:o,value:n.val()}:null;n.closest("form").data("ujs:submit-button",r)}),e(document).delegate(i.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&i.disableFormElements(e(this))}),e(document).delegate(i.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&i.enableFormElements(e(this))}),e(function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)}))}(jQuery),/*! jQuery UI - v1.9.2 - 2012-11-23
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */
function(e,t){function n(t,n){var o,r,s,a=t.nodeName.toLowerCase();return"area"===a?(o=t.parentNode,r=o.name,t.href&&r&&"map"===o.nodeName.toLowerCase()?(s=e("img[usemap=#"+r+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var o=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each(function(){var i=this;setTimeout(function(){e(i).focus(),n&&n.call(i)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,o,r=e(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(o=parseInt(r.css("zIndex"),10),!isNaN(o)&&0!==o))return o;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),o=isNaN(i);return(o||i>=0)&&n(t,!o)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function o(t,n,i,o){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?a["inner"+i].call(this):this.each(function(){e(this).css(s,o(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){e(this).css(s,o(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var o,r=e.ui[t].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(e,t,n){var i,o=e.plugins[t];if(o&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<o.length;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return t[i]>0?!0:(t[i]=1,o=t[i]>0,t[i]=0,o)},isOverAxis:function(e,t,n){return e>t&&t+n>e},isOver:function(t,n,i,o,r,s){return e.ui.isOverAxis(t,i,r)&&e.ui.isOverAxis(n,o,s)}}))}(jQuery),function(e,t){var n=0,i=Array.prototype.slice,o=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(r){}o(t)},e.widget=function(t,n,i){var o,r,s,a,l=t.split(".")[0];t=t.split(".")[1],o=l+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[l]=e[l]||{},r=e[l][t],s=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new s(e,t)},e.extend(s,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new n,a.options=e.widget.extend({},a.options),e.each(i,function(t,o){e.isFunction(o)&&(i[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=i,t=o.apply(this,arguments),this._super=n,this._superApply=r,t}}())}),s.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix:t},i,{constructor:s,namespace:l,widgetName:t,widgetBaseClass:o,widgetFullName:o}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete r._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s)},e.widget.extend=function(n){for(var o,r,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(o in s[a])r=s[a][o],s[a].hasOwnProperty(o)&&r!==t&&(n[o]=e.isPlainObject(r)?e.isPlainObject(n[o])?e.widget.extend({},n[o],r):e.widget.extend({},r):r);return n},e.widget.bridge=function(n,o){var r=o.prototype.widgetFullName||n;e.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),c=this;return s=!a&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var i,o=e.data(this,r);return o?e.isFunction(o[s])&&"_"!==s.charAt(0)?(i=o[s].apply(o,l),i!==o&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+s+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+s+"'")}):this.each(function(){var t=e.data(this,r);t?t.option(s||{})._init():e.data(this,r,new o(s,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetName,this),e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var o,r,s,a=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(a={},o=n.split("."),n=o.shift(),o.length){for(r=a[n]=e.widget.extend({},this.options[n]),s=0;s<o.length-1;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(n=o.pop(),i===t)return r[n]===t?null:r[n];r[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var o,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,function(i,s){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.delegate(u,c,a):n.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var o,r,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?n:o.effect||n:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&e.effects&&(e.effects.effect[a]||e.uiBackCompat!==!1&&e.effects[a])?i[t](o):a!==t&&i[a]?i[a](o.duration,o.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,o=1===n.which,r="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return o&&!r&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);for(var i=this.element[0],o=!1;i&&(i=i.parentNode);)i==document&&(o=!0);if(!o&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!n||"valid"==this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var r=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"==n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"==n.appendTo?this.element[0].parentNode:n.appendTo),i[0]==this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var n=e(t.containment),i=n[0];if(!i)return;n.offset();var o="hidden"!=e(i).css("overflow");this.containment=[(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0),(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0),(o?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(o?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,o=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*i}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName),r=t.pageX,s=t.pageY;if(this.originalPosition){var a;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();a=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else a=this.containment;t.pageX-this.offset.click.left<a[0]&&(r=a[0]+this.offset.click.left),t.pageY-this.offset.click.top<a[1]&&(s=a[1]+this.offset.click.top),t.pageX-this.offset.click.left>a[2]&&(r=a[2]+this.offset.click.left),t.pageY-this.offset.click.top>a[3]&&(s=a[3]+this.offset.click.top)}if(n.grid){var c=n.grid[1]?this.originalPageY+Math.round((s-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;s=a?c-this.offset.click.top<a[1]||c-this.offset.click.top>a[3]?c-this.offset.click.top<a[1]?c+n.grid[1]:c-n.grid[1]:c:c;var u=n.grid[0]?this.originalPageX+Math.round((r-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;r=a?u-this.offset.click.left<a[0]||u-this.offset.click.left>a[2]?u-this.offset.click.left<a[0]?u+n.grid[0]:u-n.grid[0]:u:u}}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var i=e(this).data("draggable"),o=i.options,r=e.extend({},n,{item:i.element});i.sortables=[],e(o.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,r))})},stop:function(t,n){var i=e(this).data("draggable"),o=e.extend({},n,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,o))})},drag:function(t,n){var i=e(this).data("draggable"),o=this;e.each(i.sortables,function(){var r=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,e.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!=s&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(s.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(o).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var i=e(n.helper),o=e(this).data("draggable").options;i.css("opacity")&&(o._opacity=i.css("opacity")),i.css("opacity",o.opacity)},stop:function(t,n){var i=e(this).data("draggable").options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("draggable");t.scrollParent[0]!=document&&"HTML"!=t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("draggable"),i=n.options,o=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(i.axis&&"x"==i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"==i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"==i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"==i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!=String?n.snap.items||":data(draggable)":n.snap).each(function(){var n=e(this),i=n.offset();this!=t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(t,n){for(var i=e(this).data("draggable"),o=i.options,r=o.snapTolerance,s=n.offset.left,a=s+i.helperProportions.width,l=n.offset.top,c=l+i.helperProportions.height,u=i.snapElements.length-1;u>=0;u--){var h=i.snapElements[u].left,d=h+i.snapElements[u].width,f=i.snapElements[u].top,p=f+i.snapElements[u].height;if(s>h-r&&d+r>s&&l>f-r&&p+r>l||s>h-r&&d+r>s&&c>f-r&&p+r>c||a>h-r&&d+r>a&&l>f-r&&p+r>l||a>h-r&&d+r>a&&c>f-r&&p+r>c){if("inner"!=o.snapMode){var m=Math.abs(f-c)<=r,g=Math.abs(p-l)<=r,v=Math.abs(h-a)<=r,y=Math.abs(d-s)<=r;m&&(n.position.top=i._convertPositionTo("relative",{top:f-i.helperProportions.height,left:0}).top-i.margins.top),g&&(n.position.top=i._convertPositionTo("relative",{top:p,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:h-i.helperProportions.width}).left-i.margins.left),y&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d}).left-i.margins.left)}var b=m||g||v||y;if("outer"!=o.snapMode){var m=Math.abs(f-l)<=r,g=Math.abs(p-c)<=r,v=Math.abs(h-s)<=r,y=Math.abs(d-a)<=r;m&&(n.position.top=i._convertPositionTo("relative",{top:f,left:0}).top-i.margins.top),g&&(n.position.top=i._convertPositionTo("relative",{top:p-i.helperProportions.height,left:0}).top-i.margins.top),v&&(n.position.left=i._convertPositionTo("relative",{top:0,left:h}).left-i.margins.left),y&&(n.position.left=i._convertPositionTo("relative",{top:0,left:d-i.helperProportions.width}).left-i.margins.left)}!i.snapElements[u].snapping&&(m||g||v||y||b)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=m||g||v||y||b}else i.snapElements[u].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[u].item})),i.snapElements[u].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t=e(this).data("draggable").options,n=e.makeArray(e(t.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(n.length){var i=parseInt(n[0].style.zIndex)||0;e(n).each(function(e){this.style.zIndex=i+e}),this[0].style.zIndex=i+n.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var i=e(n.helper),o=e(this).data("draggable").options;i.css("zIndex")&&(o._zIndex=i.css("zIndex")),i.css("zIndex",o.zIndex)},stop:function(t,n){var i=e(this).data("draggable").options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"==t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)
}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var i=n||e.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]==this.element[0])return!1;var o=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==i.options.scope&&t.accept.call(t.element[0],i.currentItem||i.element)&&e.ui.intersect(i,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(i)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,i){if(!n.offset)return!1;var o=(t.positionAbs||t.position.absolute).left,r=o+t.helperProportions.width,s=(t.positionAbs||t.position.absolute).top,a=s+t.helperProportions.height,l=n.offset.left,c=l+n.proportions.width,u=n.offset.top,h=u+n.proportions.height;switch(i){case"fit":return o>=l&&c>=r&&s>=u&&h>=a;case"intersect":return l<o+t.helperProportions.width/2&&r-t.helperProportions.width/2<c&&u<s+t.helperProportions.height/2&&a-t.helperProportions.height/2<h;case"pointer":var d=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,f=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,p=e.ui.isOver(f,d,u,l,n.proportions.height,n.proportions.width);return p;case"touch":return(s>=u&&h>=s||a>=u&&h>=a||u>s&&a>h)&&(o>=l&&c>=o||r>=l&&c>=r||l>o&&r>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var i=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,r=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var s=0;s<i.length;s++)if(!(i[s].options.disabled||t&&!i[s].accept.call(i[s].element[0],t.currentItem||t.element))){for(var a=0;a<r.length;a++)if(r[a]==i[s].element[0]){i[s].proportions.height=0;continue e}i[s].visible="none"!=i[s].element.css("display"),i[s].visible&&("mousedown"==o&&i[s]._activate.call(i[s],n),i[s].offset=i[s].element.offset(),i[s].proportions={width:i[s].element[0].offsetWidth,height:i[s].element[0].offsetHeight})}},drop:function(t,n){var i=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n)))}),i},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i=e.ui.intersect(t,this,this.options.tolerance),o=i||1!=this.isover?i&&0==this.isover?"isover":null:"isout";if(o){var r;if(this.options.greedy){var s=this.options.scope,a=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===s});a.length&&(r=e.data(a[0],"droppable"),r.greedyChild="isover"==o?1:0)}r&&"isover"==o&&(r.isover=0,r.isout=1,r._out.call(r,n)),this[o]=1,this["isout"==o?"isover":"isout"]=0,this["isover"==o?"_over":"_out"].call(this,n),r&&"isout"==o&&(r.isout=0,r.isover=1,r._over.call(r,n))}}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var i=this.handles.split(",");this.handles={};for(var o=0;o<i.length;o++){var r=e.trim(i[o]),s="ui-resizable-"+r,a=e('<div class="ui-resizable-handle '+s+'"></div>');a.css({zIndex:n.zIndex}),"se"==r&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(a)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){if(this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var i=e(this.handles[n],this.element),o=0;o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth();var r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(r,o),this._proportionallyResize()}e(this.handles[n]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){n.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())}).mouseleave(function(){n.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")}).insertAfter(n),n.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var i in this.handles)e(this.handles[i])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(n){var i=this.options,o=this.element.position(),r=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(r.is(".ui-draggable")||/absolute/.test(r.css("position")))&&r.css({position:"absolute",top:o.top,left:o.left}),this._renderProxy();var s=t(this.helper.css("left")),a=t(this.helper.css("top"));i.containment&&(s+=e(i.containment).scrollLeft()||0,a+=e(i.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:a},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:s,top:a},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof i.aspectRatio?i.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),r.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(e){var t=this.helper,n=(this.options,this.originalMousePosition),i=this.axis,o=e.pageX-n.left||0,r=e.pageY-n.top||0,s=this._change[i];if(!s)return!1;var a=s.apply(this,[e,o,r]);return this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(a=this._updateRatio(a,e)),a=this._respectSize(a,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(a),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,i=this;if(this._helper){var o=this._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&e.ui.hasScroll(o[0],"left")?0:i.sizeDiff.height,a=r?0:i.sizeDiff.width,l={width:i.helper.width()-a,height:i.helper.height()-s},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;n.animate||this.element.css(e.extend(l,{top:u,left:c})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,o,r,s,a=this.options;s={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,o=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),o>s.minHeight&&(s.minHeight=o),i<s.maxWidth&&(s.maxWidth=i),r<s.maxHeight&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(e){this.options,this.offset=this.helper.offset(),n(e.left)&&(this.position.left=e.left),n(e.top)&&(this.position.top=e.top),n(e.height)&&(this.size.height=e.height),n(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=(this.options,this.position),i=this.size,o=this.axis;return n(e.height)?e.width=e.height*this.aspectRatio:n(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==o&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"==o&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e,t){var i=(this.helper,this._vBoundaries),o=(this._aspectRatio||t.shiftKey,this.axis),r=n(e.width)&&i.maxWidth&&i.maxWidth<e.width,s=n(e.height)&&i.maxHeight&&i.maxHeight<e.height,a=n(e.width)&&i.minWidth&&i.minWidth>e.width,l=n(e.height)&&i.minHeight&&i.minHeight>e.height;a&&(e.width=i.minWidth),l&&(e.height=i.minHeight),r&&(e.width=i.maxWidth),s&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,h=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);a&&h&&(e.left=c-i.minWidth),r&&h&&(e.left=c-i.maxWidth),l&&d&&(e.top=u-i.minHeight),s&&d&&(e.top=u-i.maxHeight);var f=!e.width&&!e.height;return f&&!e.left&&e.top?e.top=null:f&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(this.options,this._proportionallyResizeElements.length)for(var t=this.helper||this.element,n=0;n<this._proportionallyResizeElements.length;n++){var i=this._proportionallyResizeElements[n];if(!this.borderDif){var o=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(o,function(e,t){var n=parseInt(e,10)||0,i=parseInt(r[t],10)||0;return n+i})}i.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var i=e.ui.ie6?1:0,o=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+o,height:this.element.outerHeight()+o,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=(this.options,this.originalSize),i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=(this.options,this.originalSize),o=this.originalPosition;return{top:o.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!=t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("resizable"),n=t.options,i=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):e.each(n.alsoResize,function(e){i(e)})},resize:function(t,n){var i=e(this).data("resizable"),o=i.options,r=i.originalSize,s=i.originalPosition,a={height:i.size.height-r.height||0,width:i.size.width-r.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0},l=function(t,i){e(t).each(function(){var t=e(this),o=e(this).data("resizable-alsoresize"),r={},s=i&&i.length?i:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(o[t]||0)+(a[t]||0);n&&n>=0&&(r[t]=n||null)}),t.css(r)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):e.each(o.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("resizable"),i=n.options,o=n._proportionallyResizeElements,r=o.length&&/textarea/i.test(o[0].nodeName),s=r&&e.ui.hasScroll(o[0],"left")?0:n.sizeDiff.height,a=r?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},c=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};o&&o.length&&e(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var n=e(this).data("resizable"),i=n.options,o=n.element,r=i.containment,s=r instanceof e?r.get(0):/parent/.test(r)?o.parent().get(0):r;if(s)if(n.containerElement=e(s),/document/.test(r)||r==document)n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var a=e(s),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,n){l[e]=t(a.css("padding"+n))}),n.containerOffset=a.offset(),n.containerPosition=a.position(),n.containerSize={height:a.innerHeight()-l[3],width:a.innerWidth()-l[1]};var c=n.containerOffset,u=n.containerSize.height,h=n.containerSize.width,d=e.ui.hasScroll(s,"left")?s.scrollWidth:h,f=e.ui.hasScroll(s)?s.scrollHeight:u;n.parentData={element:s,left:c.left,top:c.top,width:d,height:f}}},resize:function(t){var n=e(this).data("resizable"),i=n.options,o=(n.containerSize,n.containerOffset),r=(n.size,n.position),s=n._aspectRatio||t.shiftKey,a={top:0,left:0},l=n.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(a=o),r.left<(n._helper?o.left:0)&&(n.size.width=n.size.width+(n._helper?n.position.left-o.left:n.position.left-a.left),s&&(n.size.height=n.size.width/n.aspectRatio),n.position.left=i.helper?o.left:0),r.top<(n._helper?o.top:0)&&(n.size.height=n.size.height+(n._helper?n.position.top-o.top:n.position.top),s&&(n.size.width=n.size.height*n.aspectRatio),n.position.top=n._helper?o.top:0),n.offset.left=n.parentData.left+n.position.left,n.offset.top=n.parentData.top+n.position.top;var c=Math.abs((n._helper?n.offset.left-a.left:n.offset.left-a.left)+n.sizeDiff.width),u=Math.abs((n._helper?n.offset.top-a.top:n.offset.top-o.top)+n.sizeDiff.height),h=n.containerElement.get(0)==n.element.parent().get(0),d=/relative|absolute/.test(n.containerElement.css("position"));h&&d&&(c-=n.parentData.left),c+n.size.width>=n.parentData.width&&(n.size.width=n.parentData.width-c,s&&(n.size.height=n.size.width/n.aspectRatio)),u+n.size.height>=n.parentData.height&&(n.size.height=n.parentData.height-u,s&&(n.size.width=n.size.height*n.aspectRatio))},stop:function(){var t=e(this).data("resizable"),n=t.options,i=(t.position,t.containerOffset),o=t.containerPosition,r=t.containerElement,s=e(t.helper),a=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(r.css("position"))&&e(this).css({left:a.left-o.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(r.css("position"))&&e(this).css({left:a.left-o.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("resizable"),n=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("resizable");t.options,t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t){var n=e(this).data("resizable"),i=n.options,o=n.size,r=n.originalSize,s=n.originalPosition,a=n.axis;i._aspectRatio||t.shiftKey,i.grid="number"==typeof i.grid?[i.grid,i.grid]:i.grid;var l=Math.round((o.width-r.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((o.height-r.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(n.size.width=r.width+l,n.size.height=r.height+c):/^(ne)$/.test(a)?(n.size.width=r.width+l,n.size.height=r.height+c,n.position.top=s.top-c):/^(sw)$/.test(a)?(n.size.width=r.width+l,n.size.height=r.height+c,n.position.left=s.left-l):(n.size.width=r.width+l,n.size.height=r.height+c,n.position.top=s.top-c,n.position.left=s.left-l)}});var t=function(e){return parseInt(e,10)||0},n=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var i=this.options;this.selectees=e(i.filter,this.element[0]),this._trigger("start",t),e(i.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),i.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var i=e.data(this,"selectable-item");i.startselected=!0,t.metaKey||t.ctrlKey||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element}))}),e(t.target).parents().andSelf().each(function(){var i=e.data(this,"selectable-item");if(i){var o=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected");return i.$element.removeClass(o?"ui-unselecting":"ui-selected").addClass(o?"ui-selecting":"ui-unselecting"),i.unselecting=!o,i.selecting=o,i.selected=o,o?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1}})}},_mouseDrag:function(t){var n=this;if(this.dragged=!0,!this.options.disabled){var i=this.options,o=this.opos[0],r=this.opos[1],s=t.pageX,a=t.pageY;if(o>s){var l=s;s=o,o=l}if(r>a){var l=a;a=r,r=l}return this.helper.css({left:o,top:r,width:s-o,height:a-r}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=n.element[0]){var c=!1;"touch"==i.tolerance?c=!(l.left>s||l.right<o||l.top>a||l.bottom<r):"fit"==i.tolerance&&(c=l.left>o&&l.right<s&&l.top>r&&l.bottom<a),c?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,n._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),n._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&(t.metaKey||t.ctrlKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,n._trigger("unselecting",t,{unselecting:l.element}))))}}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,this.options,e(".ui-unselecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-unselecting"),i.unselecting=!1,i.startselected=!1,n._trigger("unselected",t,{unselected:i.element})}),e(".ui-selecting",this.element[0]).each(function(){var i=e.data(this,"selectable-item");i.$element.removeClass("ui-selecting").addClass("ui-selected"),i.selecting=!1,i.selected=!0,i.startselected=!0,n._trigger("selected",t,{selected:i.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var o=null;if(e(t.target).parents().each(function(){return e.data(this,i.widgetName+"-item")==i?(o=e(this),!1):void 0}),e.data(t.target,i.widgetName+"-item")==i&&(o=e(t.target)),!o)return!1;if(this.options.handle&&!n){var r=!1;if(e(this.options.handle,o).find("*").andSelf().each(function(){this==t.target&&(r=!0)}),!r)return!1}return this.currentItem=o,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,i){var o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",o.cursor)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var n=this.options,i=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),i!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var o=this.items.length-1;o>=0;o--){var r=this.items[o],s=r.item[0],a=this._intersectsWithPointer(r);if(a&&r.instance===this.currentContainer&&s!=this.currentItem[0]&&this.placeholder[1==a?"next":"prev"]()[0]!=s&&!e.contains(this.placeholder[0],s)&&("semi-dynamic"==this.options.type?!e.contains(this.element[0],s):!0)){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,o=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this
},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=e.left,s=r+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,h=i+c>a&&l>i+c&&t+u>r&&s>t+u;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:r<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var n="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=n&&i,r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return o?this.floating?s&&"right"==s||"down"==r?2:1:r&&("down"==r?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"==r&&i||"left"==r&&!i:o&&("down"==o&&n||"up"==o&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],i=[],o=this._connectWith();if(o&&t)for(var r=o.length-1;r>=0;r--)for(var s=e(o[r]),a=s.length-1;a>=0;a--){var l=e.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&i.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var r=i.length-1;r>=0;r--)i[r][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],o=this._connectWith();if(o&&this.ready)for(var r=o.length-1;r>=0;r--)for(var s=e(o[r]),a=s.length-1;a>=0;a--){var l=e.data(s[a],this.widgetName);l&&l!=this&&!l.options.disabled&&(i.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var r=i.length-1;r>=0;r--)for(var c=i[r][1],u=i[r][0],a=0,h=u.length;h>a;a++){var d=e(u[a]);d.data(this.widgetName+"-item",c),n.push({item:d,instance:c,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var i=this.items[n];if(i.instance==this.currentContainer||!this.currentContainer||i.item[0]==this.currentItem[0]){var o=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item;t||(i.width=o.outerWidth(),i.height=o.outerHeight());var r=o.offset();i.left=r.left,i.top=r.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var r=this.containers[n].element.offset();this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var i=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(n.style.visibility="hidden"),n},update:function(e,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var n=null,i=null,o=this.containers.length-1;o>=0;o--)if(!e.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(n&&e.contains(this.containers[o].element[0],n.element[0]))continue;n=this.containers[o],i=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",t,this._uiHash(this)),this.containers[o].containerCache.over=0);if(n)if(1===this.containers.length)this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1;else{for(var r=1e4,s=null,a=this.containers[i].floating?"left":"top",l=this.containers[i].floating?"width":"height",c=this.positionAbs[a]+this.offset.click[a],u=this.items.length-1;u>=0;u--)if(e.contains(this.containers[i].element[0],this.items[u].item[0])&&this.items[u].item[0]!=this.currentItem[0]){var h=this.items[u].item.offset()[a],d=!1;Math.abs(h-c)>Math.abs(h+this.items[u][l]-c)&&(d=!0,h+=this.items[u][l]),Math.abs(h-c)<r&&(r=Math.abs(h-c),s=this.items[u],this.direction=d?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i],s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[i].element,!0),this._trigger("change",t,this._uiHash()),this.containers[i]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"==n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!=n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(""==i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],i=e(t.containment).offset(),o="hidden"!=e(n).css("overflow");this.containment=[i.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,i.left+(o?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(o?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"==t?1:-1,o=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*i}},_generatePosition:function(t){var n=this.options,i="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var r=t.pageX,s=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),n.grid)){var a=this.originalPageY+Math.round((s-this.originalPageY)/n.grid[1])*n.grid[1];s=this.containment?a-this.offset.click.top<this.containment[1]||a-this.offset.click.top>this.containment[3]?a-this.offset.click.top<this.containment[1]?a+n.grid[1]:a-n.grid[1]:a:a;var l=this.originalPageX+Math.round((r-this.originalPageX)/n.grid[0])*n.grid[0];r=this.containment?l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2]?l-this.offset.click.left<this.containment[0]?l+n.grid[0]:l-n.grid[0]:l:l}return{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o==this.counter&&this.refreshPositions(!i)})},_clear:function(t,n){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var o in this._storedCSS)("auto"==this._storedCSS[o]||"static"==this._storedCSS[o])&&(this._storedCSS[o]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||n||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var o=this.containers.length-1;o>=0;o--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var o=0;o<i.length;o++)i[o].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(var o=0;o<i.length;o++)i[o].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,i="ui-effects-";e.effects={effect:{}},/*!
 * jQuery Color Animations v2.0.0
 * http://jquery.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Mon Aug 13 13:41:02 2012 -0500
 */
function(t,n){function i(e,t,n){var i=d[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function o(e){var n=u(),i=n._rgba=[];return e=e.toLowerCase(),m(c,function(t,o){var r,s=o.re.exec(e),a=s&&o.parse(s),l=o.space||"rgba";return a?(r=n[l](a),n[h[l].cache]=r[h[l].cache],i=n._rgba=r._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&t.extend(i,s.transparent),n):s[e]}function r(e,t,n){return n=(n+1)%1,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+6*(t-e)*(2/3-n):e}var s,a="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),l=/^([\-+])=\s*(\d+\.?\d*)/,c=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],u=t.Color=function(e,n,i,o){return new t.Color.fn.parse(e,n,i,o)},h={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=u.support={},p=t("<p>")[0],m=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=p.style.backgroundColor.indexOf("rgba")>-1,m(h,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),u.fn=t.extend(u.prototype,{parse:function(r,a,l,c){if(r===n)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=t(r).css(a),a=n);var d=this,f=t.type(r),p=this._rgba=[];return a!==n&&(r=[r,a,l,c],f="array"),"string"===f?this.parse(o(r)||s._default):"array"===f?(m(h.rgba.props,function(e,t){p[t.idx]=i(r[t.idx],t)}),this):"object"===f?(r instanceof u?m(h,function(e,t){r[t.cache]&&(d[t.cache]=r[t.cache].slice())}):m(h,function(t,n){var o=n.cache;m(n.props,function(e,t){if(!d[o]&&n.to){if("alpha"===e||null==r[e])return;d[o]=n.to(d._rgba)}d[o][t.idx]=i(r[e],t,!0)}),d[o]&&e.inArray(null,d[o].slice(0,3))<0&&(d[o][3]=1,n.from&&(d._rgba=n.from(d[o])))}),this):void 0},is:function(e){var t=u(e),n=!0,i=this;return m(h,function(e,o){var r,s=t[o.cache];return s&&(r=i[o.cache]||o.to&&o.to(i._rgba)||[],m(o.props,function(e,t){return null!=s[t.idx]?n=s[t.idx]===r[t.idx]:void 0})),n}),n},_space:function(){var e=[],t=this;return m(h,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=u(e),o=n._space(),r=h[o],s=0===this.alpha()?u("transparent"):this,a=s[r.cache]||r.to(s._rgba),l=a.slice();return n=n[r.cache],m(r.props,function(e,o){var r=o.idx,s=a[r],c=n[r],u=d[o.type]||{};null!==c&&(null===s?l[r]=c:(u.mod&&(c-s>u.mod/2?s+=u.mod:s-c>u.mod/2&&(s-=u.mod)),l[r]=i((c-s)*t+s,o)))}),this[o](l)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),o=u(e)._rgba;return u(t.map(n,function(e,t){return(1-i)*o[t]+i*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),u.fn.parse.prototype=u.fn,h.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,o=e[1]/255,r=e[2]/255,s=e[3],a=Math.max(i,o,r),l=Math.min(i,o,r),c=a-l,u=a+l,h=.5*u;return t=l===a?0:i===a?60*(o-r)/c+360:o===a?60*(r-i)/c+120:60*(i-o)/c+240,n=0===h||1===h?h:.5>=h?c/u:c/(2-u),[Math.round(t)%360,n,h,null==s?1:s]},h.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],o=e[3],s=.5>=i?i*(1+n):i+n-i*n,a=2*i-s;return[Math.round(255*r(a,s,t+1/3)),Math.round(255*r(a,s,t)),Math.round(255*r(a,s,t-1/3)),o]},m(h,function(e,o){var r=o.props,s=o.cache,a=o.to,c=o.from;u.fn[e]=function(e){if(a&&!this[s]&&(this[s]=a(this._rgba)),e===n)return this[s].slice();var o,l=t.type(e),h="array"===l||"object"===l?e:arguments,d=this[s].slice();return m(r,function(e,t){var n=h["object"===l?e:t.idx];null==n&&(n=d[t.idx]),d[t.idx]=i(n,t)}),c?(o=u(c(d)),o[s]=d,o):u(d)},m(r,function(n,i){u.fn[n]||(u.fn[n]=function(o){var r,s=t.type(o),a="alpha"===n?this._hsla?"hsla":"rgba":e,c=this[a](),u=c[i.idx];return"undefined"===s?u:("function"===s&&(o=o.call(this,u),s=t.type(o)),null==o&&i.empty?this:("string"===s&&(r=l.exec(o),r&&(o=u+parseFloat(r[2])*("+"===r[1]?1:-1))),c[i.idx]=o,this[a](c)))})})}),m(a,function(e,n){t.cssHooks[n]={set:function(e,i){var r,s,a="";if("string"!==t.type(i)||(r=o(i))){if(i=u(r||i),!f.rgba&&1!==i._rgba[3]){for(s="backgroundColor"===n?e.parentNode:e;(""===a||"transparent"===a)&&s&&s.style;)try{a=t.css(s,"backgroundColor"),s=s.parentNode}catch(l){}i=i.blend(a&&"transparent"!==a?a:"_default")}i=i.toRgbaString()}try{e.style[n]=i}catch(c){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=u(e.elem,n),e.end=u(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return m(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},s=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(){var t,n,i=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,o={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)t=i[n],"string"==typeof i[t]&&(o[e.camelCase(t)]=i[t]);else for(t in i)"string"==typeof i[t]&&(o[t]=i[t]);return o}function i(t,n){var i,o,s={};for(i in n)o=n[i],t[i]!==o&&(r[i]||(e.fx.step[i]||!isNaN(parseFloat(o)))&&(s[i]=o));return s}var o=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.effects.animateClass=function(t,r,s,a){var l=e.speed(r,s,a);return this.queue(function(){var r,s=e(this),a=s.attr("class")||"",c=l.children?s.find("*").andSelf():s;c=c.map(function(){var t=e(this);return{el:t,start:n.call(this)}}),r=function(){e.each(o,function(e,n){t[n]&&s[n+"Class"](t[n])})},r(),c=c.map(function(){return this.end=n.call(this.el[0]),this.diff=i(this.start,this.end),this}),s.attr("class",a),c=c.map(function(){var t=this,n=e.Deferred(),i=jQuery.extend({},l,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,c.get()).done(function(){r(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(s[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,i,o){return n?e.effects.animateClass.call(this,{add:t},n,i,o):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,i,o){return n?e.effects.animateClass.call(this,{remove:t},n,i,o):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,i,o,r,s){return"boolean"==typeof i||i===t?o?e.effects.animateClass.call(this,i?{add:n}:{remove:n},o,r,s):this._toggleClass(n,i):e.effects.animateClass.call(this,{toggle:n},i,o,r)},switchClass:function(t,n,i,o,r){return e.effects.animateClass.call(this,{add:n,remove:t},i,o,r)}})}(),function(){function o(t,n,i,o){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(o=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(o=i,i=n,n={}),e.isFunction(i)&&(o=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=o||n.complete,t}function r(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?!1:n&&e.effects[t]?!1:!0}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var o,r;for(r=0;r<n.length;r++)null!==n[r]&&(o=e.data(i+n[r]),o===t&&(o=""),e.css(n[r],o))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(s){r=document.body}return t.wrap(i),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,o){return o=o||{},e.each(n,function(e,n){var r=t.cssUnit(n);r[0]>0&&(o[n]=r[0]*i+r[1])}),o}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(r)&&r.call(o[0]),e.isFunction(t)&&t()}var o=e(this),r=i.complete,s=i.mode;(o.is(":hidden")?"hide"===s:"show"===s)?n():a.call(o[0],i,n)}var i=o.apply(this,arguments),r=i.mode,s=i.queue,a=e.effects.effect[i.effect],l=!a&&n&&e.effects[i.effect];return e.fx.off||!a&&!l?r?this[r](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):a?s===!1?this.each(t):this.queue(s||"fx",t):l.call(this,{options:i,duration:i.duration,callback:i.complete,mode:i.mode})},_show:e.fn.show,show:function(e){if(r(e))return this._show.apply(this,arguments);var t=o.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(r(e))return this._hide.apply(this,arguments);var t=o.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(r(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=o.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e){var t=0,n={},i={};n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var n=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t),i=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),i.collapsible||i.active!==!1&&null!=i.active||(i.active=0),i.active<0&&(i.active+=this.headers.length),this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(t){var i=e(this),o=i.attr("id"),r=i.next(),s=r.attr("id");o||(o=n+"-header-"+t,i.attr("id",o)),s||(s=n+"-panel-"+t,r.attr("id",s)),i.attr("aria-controls",s),r.attr("aria-labelledby",o)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(i.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var n=e.ui.keyCode,i=this.headers.length,o=this.headers.index(t.target),r=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:r=this.headers[(o+1)%i];break;case n.LEFT:case n.UP:r=this.headers[(o-1+i)%i];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:r=this.headers[0];break;case n.END:r=this.headers[i-1]}r&&(e(t.target).attr("tabIndex",-1),e(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t,n,i=this.options.heightStyle,o=this.element.parent();"fill"===i?(e.support.minHeight||(n=o.css("overflow"),o.css("overflow","hidden")),t=o.height(),this.element.siblings(":visible").each(function(){var n=e(this),i=n.css("position");"absolute"!==i&&"fixed"!==i&&(t-=n.outerHeight(!0))}),n&&o.css("overflow",n),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===i&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];n!==this.active[0]&&(n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var n={};t&&(e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._on(this.headers,n))},_eventHandler:function(t){var n=this.options,i=this.active,o=e(t.currentTarget),r=o[0]===i[0],s=r&&n.collapsible,a=s?e():o.next(),l=i.next(),c={oldHeader:i,oldPanel:l,newHeader:s?e():o,newPanel:a};t.preventDefault(),r&&!n.collapsible||this._trigger("beforeActivate",t,c)===!1||(n.active=s?!1:this.headers.index(o),this.active=r?e():o,this._toggle(c),i.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),r||(o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&o.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),o.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var n=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=i,this.options.animate?this._animate(n,i,t):(i.hide(),n.show(),this._toggleComplete(t)),i.attr({"aria-expanded":"false","aria-hidden":"true"}),i.prev().attr("aria-selected","false"),n.length&&i.length?i.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,o){var r,s,a,l=this,c=0,u=e.length&&(!t.length||e.index()<t.index()),h=this.options.animate||{},d=u&&h.down||h,f=function(){l._toggleComplete(o)};return"number"==typeof d&&(a=d),"string"==typeof d&&(s=d),s=s||d.easing||h.easing,a=a||d.duration||h.duration,t.length?e.length?(r=e.show().outerHeight(),t.animate(n,{duration:a,easing:s,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:a,easing:s,complete:f,step:function(e,n){n.now=Math.round(e),"height"!==n.prop?c+=n.now:"content"!==l.options.heightStyle&&(n.now=Math.round(r-t.outerHeight()-c),c=0)}}),void 0):t.animate(n,a,s,f):e.animate(i,a,s,f)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.uiBackCompat!==!1&&(function(e,t){e.extend(t.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var n=t._create;t._create=function(){if(this.options.navigation){var t=this,i=this.element.find(this.options.header),o=i.next(),r=i.add(o).find("a").filter(this.options.navigationFilter)[0];r&&i.add(o).each(function(n){return e.contains(this,r)?(t.options.active=Math.floor(n/2),!1):void 0})}n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var n=t._create,i=t._setOption;e.extend(t,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),n.call(this)},_setOption:function(e){("autoHeight"===e||"clearStyle"===e||"fillSpace"===e)&&(this.options.heightStyle=this._mergeHeightStyle()),i.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;return e.fillSpace?"fill":e.clearStyle?"content":e.autoHeight?"auto":void 0}})}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var n=t._createIcons;t._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var n=t._findActive;t._findActive=function(e){return-1===e&&(e=!1),e&&"number"!=typeof e&&(e=this.headers.index(this.headers.filter(e)),-1===e&&(e=!1)),n.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(e,t){e.extend(t.options,{change:null,changestart:null});var n=t._trigger;t._trigger=function(e,t,i){var o=n.apply(this,arguments);return o?("beforeActivate"===e?o=n.call(this,"changestart",t,{oldHeader:i.oldHeader,oldContent:i.oldPanel,newHeader:i.newHeader,newContent:i.newPanel}):"activate"===e&&(o=n.call(this,"change",t,{oldHeader:i.oldHeader,oldContent:i.oldPanel,newHeader:i.newHeader,newContent:i.newPanel})),o):!1}}(jQuery,jQuery.ui.accordion.prototype),function(e,t){e.extend(t.options,{animate:null,animated:"slide"});var n=t._create;t._create=function(){var e=this.options;null===e.animate&&(e.animate=e.animated?"slide"===e.animated?300:"bounceslide"===e.animated?{duration:200,down:{easing:"easeOutBounce",duration:1e3}}:e.animated:!1),n.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,i;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,i=!0,n=!0,void 0;t=!1,i=!1,n=!1;var r=e.ui.keyCode;switch(o.keyCode){case r.PAGE_UP:t=!0,this._move("previousPage",o);break;case r.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case r.UP:t=!0,this._keyEvent("previous",o);break;case r.DOWN:t=!0,this._keyEvent("next",o);break;case r.ENTER:case r.NUMPAD_ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case r.TAB:this.menu.active&&this.menu.select(o);break;case r.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(t)return t=!1,i.preventDefault(),void 0;if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(i){i.target===t.element[0]||i.target===n||e.contains(n,i.target)||t.close()})})},menufocus:function(t,n){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0;var i=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item")||t.item.data("item.autocomplete"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this.document.find(t||"body")[0]),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,n=++t;return function(i){n===t&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){var t,n,i,o,r="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},c=function(t){var n=t.name,i=t.form,o=e([]);return n&&(o=i?e(i).find("[name='"+n+"']"):e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),o};e.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var s=this,a=this.options,u="checkbox"===this.type||"radio"===this.type,h=u?"":"ui-state-active",d="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(r).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||e(this).removeClass(h)}).bind("click"+this.eventNamespace,function(e){a.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){s.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){s.buttonElement.removeClass(d)}),u&&(this.element.bind("change"+this.eventNamespace,function(){o||s.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){a.disabled||(o=!1,n=e.pageX,i=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){a.disabled||(n!==e.pageX||i!==e.pageY)&&(o=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||o?!1:(e(this).toggleClass("ui-state-active"),s.buttonElement.attr("aria-pressed",s.element[0].checked),void 0)}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||o)return!1;
e(this).addClass("ui-state-active"),s.buttonElement.attr("aria-pressed","true");var t=s.element[0];c(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(e(this).addClass("ui-state-active"),t=this,s.document.one("mouseup",function(){t=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return a.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(r+" "+s+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?c(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,o=i.primary&&i.secondary,r=[];i.primary||i.secondary?(this.options.text&&r.push("ui-button-text-icon"+(o?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(r.push(o?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}}),e.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)(null==t[n]||t[n]==undefined)&&(e[n]=t[n]);return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]),n.hasClass(this.markerClassName)||(this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,i){t.settings[n]=i}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var n=this._get(t,"appendText"),i=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[i?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var o=this._get(t,"showOn");if(("focus"==o||"both"==o)&&e.focus(this._showDatepicker),"button"==o||"both"==o){var r=this._get(t,"buttonText"),s=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:s,alt:r,title:r}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==s?r:$("<img/>").attr({src:s,alt:r,title:r}))),e[i?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var i=function(e){for(var t=0,n=0,i=0;i<e.length;i++)e[i].length>t&&(t=e[i].length,n=i);return n};t.setMonth(i(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(i(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,i){t.settings[n]=i}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,n,i,o){var r=this._dialogInst;if(!r){this.uuid+=1;var s="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+s+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),r=this._dialogInst=this._newInst(this._dialogInput,!1),r.settings={},$.data(this._dialogInput[0],PROP_NAME,r)}if(extendRemove(r.settings,i||{}),t=t&&t.constructor==Date?this._formatDate(r,t):t,this._dialogInput.val(t),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,!this._pos){var a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[a/2-100+c,l/2-150+u]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),r.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,r),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==i?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==i||"span"==i)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();if("input"==i)e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==i||"span"==i){var o=t.children("."+this._inlineClass);o.children().removeClass("ui-state-disabled"),o.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var i=e.nodeName.toLowerCase();if("input"==i)e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==i||"span"==i){var o=t.children("."+this._inlineClass);o.children().addClass("ui-state-disabled"),o.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var i=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):i?"all"==t?$.extend({},i.settings):this._get(i,t):null;var o=t||{};if("string"==typeof t&&(o={},o[t]=n),i){this._curInst==i&&this._hideDatepicker();var r=this._getDateDatepicker(e,!0),s=this._getMinMaxDate(i,"min"),a=this._getMinMaxDate(i,"max");extendRemove(i.settings,o),null!==s&&o.dateFormat!==undefined&&o.minDate===undefined&&(i.settings.minDate=this._formatDate(i,s)),null!==a&&o.dateFormat!==undefined&&o.maxDate===undefined&&(i.settings.maxDate=this._formatDate(i,a)),this._attachments($(e),i),this._autoSize(i),this._setDate(i,r),this._updateAlternate(i),this._updateDatepicker(i)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,i=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var o=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);o[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,o[0]);var r=$.datepicker._get(t,"onSelect");if(r){var s=$.datepicker._formatDate(t);r.apply(t.input?t.input[0]:null,[s,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,i?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,i?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),i=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">i||!n||n.indexOf(i)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(i){$.datepicker.log(i)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),i=n?n.apply(e,[e,t]):{};if(i!==!1){extendRemove(t.settings,i),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var o=!1;$(e).parents().each(function(){return o|="fixed"==$(this).css("position"),!o});var r={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),r=$.datepicker._checkOffset(t,r,o),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),!t.inline){var s=$.datepicker._get(t,"showAnim"),a=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[s]||$.effects[s])?t.dpDiv.show(s,$.datepicker._get(t,"showOptions"),a,l):t.dpDiv[s||"show"](s?a:null,l),s&&a||l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");n.length&&n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i=this._getNumberOfMonths(e),o=i[1],r=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&e.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",r*o+"em"),e.dpDiv[(1!=i[0]||1!=i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var s=e.yearshtml;setTimeout(function(){s===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),s=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var i=e.dpDiv.outerWidth(),o=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,s=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?i-r:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+s?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+i>a&&a>i?Math.abs(t.left+i-a):0),t.top-=Math.min(t.top,t.top+o>l&&l>o?Math.abs(o+s):0),t},_findPos:function(e){for(var t=this._getInst(e),n=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];var i=$(e).offset();return[i.left,i.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var n=this._get(t,"showAnim"),i=this._get(t,"duration"),o=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),i,o):t.dpDiv["slideDown"==n?"slideUp":"fadeIn"==n?"fadeOut":"hide"](n?i:null,o),n||o(),this._datepickerShowing=!1;var r=this._get(t,"onClose");r&&r.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,n){var i=$(e),o=this._getInst(i[0]);this._isDisabledDatepicker(i[0])||(this._adjustInstDate(o,t+("M"==n?this._get(o,"showCurrentAtPos"):0),n),this._updateDatepicker(o))},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var i=new Date;n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var i=$(e),o=this._getInst(i[0]);o["selected"+("M"==n?"Month":"Year")]=o["draw"+("M"==n?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(o),this._adjustDate(i)},_selectDay:function(e,t,n,i){var o=$(e);if(!$(i).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(o[0])){var r=this._getInst(o[0]);r.selectedDay=r.currentDay=$("a",i).html(),r.selectedMonth=r.currentMonth=t,r.selectedYear=r.currentYear=n,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]),this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),i=this._getInst(n[0]);t=null!=t?t:this._formatDate(i),i.input&&i.input.val(t),this._updateAlternate(i);var o=this._get(i,"onSelect");o?o.apply(i.input?i.input[0]:null,[t,i]):i.input&&i.input.trigger("change"),i.inline?this._updateDatepicker(i):(this._hideDatepicker(),this._lastInput=i.input[0],"object"!=typeof i.input[0]&&i.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),o=this.formatDate(n,i,this._getFormatConfig(e));$(t).each(function(){$(this).val(o)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var i=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;i="string"!=typeof i?i:(new Date).getFullYear()%100+parseInt(i,10);for(var o=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,r=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,a=(n?n.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,u=-1,h=-1,d=!1,f=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},p=function(e){var n=f(e),i="@"==e?14:"!"==e?20:"y"==e&&n?4:"o"==e?3:2,o=new RegExp("^\\d{1,"+i+"}"),r=t.substring(v).match(o);if(!r)throw"Missing number at position "+v;return v+=r[0].length,parseInt(r[0],10)},m=function(e,n,i){var o=$.map(f(e)?i:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),r=-1;if($.each(o,function(e,n){var i=n[1];return t.substr(v,i.length).toLowerCase()==i.toLowerCase()?(r=n[0],v+=i.length,!1):void 0}),-1!=r)return r+1;throw"Unknown name at position "+v},g=function(){if(t.charAt(v)!=e.charAt(y))throw"Unexpected literal at position "+v;v++},v=0,y=0;y<e.length;y++)if(d)"'"!=e.charAt(y)||f("'")?g():d=!1;else switch(e.charAt(y)){case"d":u=p("d");break;case"D":m("D",o,r);break;case"o":h=p("o");break;case"m":c=p("m");break;case"M":c=m("M",s,a);break;case"y":l=p("y");break;case"@":var b=new Date(p("@"));l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"!":var b=new Date((p("!")-this._ticksTo1970)/1e4);l=b.getFullYear(),c=b.getMonth()+1,u=b.getDate();break;case"'":f("'")?g():d=!0;break;default:g()}if(v<t.length){var w=t.substr(v);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}if(-1==l?l=(new Date).getFullYear():100>l&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i>=l?0:-100)),h>-1)for(c=1,u=h;;){var _=this._getDaysInMonth(l,c-1);if(_>=u)break;c++,u-=_}var b=this._daylightSavingAdjust(new Date(l,c-1,u));if(b.getFullYear()!=l||b.getMonth()+1!=c||b.getDate()!=u)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,n){if(!t)return"";var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,o=(n?n.dayNames:null)||this._defaults.dayNames,r=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,s=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=d+1<e.length&&e.charAt(d+1)==t;return n&&d++,n},l=function(e,t,n){var i=""+t;if(a(e))for(;i.length<n;)i="0"+i;return i},c=function(e,t,n,i){return a(e)?i[t]:n[t]},u="",h=!1;if(t)for(var d=0;d<e.length;d++)if(h)"'"!=e.charAt(d)||a("'")?u+=e.charAt(d):h=!1;else switch(e.charAt(d)){case"d":u+=l("d",t.getDate(),2);break;case"D":u+=c("D",t.getDay(),i,o);break;case"o":u+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",t.getMonth()+1,2);break;case"M":u+=c("M",t.getMonth(),r,s);break;case"y":u+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":a("'")?u+="'":h=!0;break;default:u+=e.charAt(d)}return u},_possibleChars:function(e){for(var t="",n=!1,i=function(t){var n=o+1<e.length&&e.charAt(o+1)==t;return n&&o++,n},o=0;o<e.length;o++)if(n)"'"!=e.charAt(o)||i("'")?t+=e.charAt(o):n=!1;else switch(e.charAt(o)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":i("'")?t+="'":n=!0;break;default:t+=e.charAt(o)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var n,i,o=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null;n=i=this._getDefaultDate(e);var s=this._getFormatConfig(e);try{n=this.parseDate(o,r,s)||i}catch(a){this.log(a),r=t?"":r}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=r?n.getDate():0,e.currentMonth=r?n.getMonth():0,e.currentYear=r?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},o=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}for(var i=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,o=i.getFullYear(),r=i.getMonth(),s=i.getDate(),a=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(t);l;){switch(l[2]||"d"){case"d":case"D":s+=parseInt(l[1],10);break;case"w":case"W":s+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(o,r));break;case"y":case"Y":o+=parseInt(l[1],10),s=Math.min(s,$.datepicker._getDaysInMonth(o,r))}l=a.exec(t)}return new Date(o,r,s)},r=null==t||""===t?n:"string"==typeof t?o(t):"number"==typeof t?isNaN(t)?n:i(t):new Date(t.getTime());return r=r&&"Invalid Date"==r.toString()?n:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var i=!t,o=e.selectedMonth,r=e.selectedYear,s=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=s.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=s.getMonth(),e.drawYear=e.selectedYear=e.currentYear=s.getFullYear(),o==e.selectedMonth&&r==e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(i?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),i=this._get(e,"showButtonPanel"),o=this._get(e,"hideIfNoPrevNext"),r=this._get(e,"navigationAsDateFormat"),s=this._getNumberOfMonths(e),a=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=s[0]||1!=s[1],u=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),h=this._getMinMaxDate(e,"min"),d=this._getMinMaxDate(e,"max"),f=e.drawMonth-a,p=e.drawYear;if(0>f&&(f+=12,p--),d){var m=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth()-s[0]*s[1]+1,d.getDate()));
for(m=h&&h>m?h:m;this._daylightSavingAdjust(new Date(p,f,1))>m;)f--,0>f&&(f=11,p--)}e.drawMonth=f,e.drawYear=p;var g=this._get(e,"prevText");g=r?this.formatDate(g,this._daylightSavingAdjust(new Date(p,f-l,1)),this._getFormatConfig(e)):g;var v=this._canAdjustMonth(e,-1,p,f)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+g+"</span></a>":o?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+g+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+g+"</span></a>",y=this._get(e,"nextText");y=r?this.formatDate(y,this._daylightSavingAdjust(new Date(p,f+l,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,p,f)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":o?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),_=this._get(e,"gotoCurrent")&&e.currentDay?u:t;w=r?this.formatDate(w,_,this._getFormatConfig(e)):w;var x=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",C=i?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?x:"")+(this._isInRange(e,_)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":x)+"</div>":"",E=parseInt(this._get(e,"firstDay"),10);E=isNaN(E)?0:E;var S=this._get(e,"showWeek"),T=this._get(e,"dayNames");this._get(e,"dayNamesShort");var k=this._get(e,"dayNamesMin"),I=this._get(e,"monthNames"),N=this._get(e,"monthNamesShort"),P=this._get(e,"beforeShowDay"),A=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths");this._get(e,"calculateWeek")||this.iso8601Week;for(var M=this._getDefaultDate(e),R="",j=0;j<s[0];j++){var O="";this.maxRows=4;for(var F=0;F<s[1];F++){var H=this._daylightSavingAdjust(new Date(p,f,e.selectedDay)),B=" ui-corner-all",L="";if(c){if(L+='<div class="ui-datepicker-group',s[1]>1)switch(F){case 0:L+=" ui-datepicker-group-first",B=" ui-corner-"+(n?"right":"left");break;case s[1]-1:L+=" ui-datepicker-group-last",B=" ui-corner-"+(n?"left":"right");break;default:L+=" ui-datepicker-group-middle",B=""}L+='">'}L+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+B+'">'+(/all|left/.test(B)&&0==j?n?b:v:"")+(/all|right/.test(B)&&0==j?n?v:b:"")+this._generateMonthYearHeader(e,f,p,h,d,j>0||F>0,I,N)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";for(var q=S?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",z=0;7>z;z++){var W=(z+E)%7;q+="<th"+((z+E+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+T[W]+'">'+k[W]+"</span></th>"}L+=q+"</tr></thead><tbody>";var U=this._getDaysInMonth(p,f);p==e.selectedYear&&f==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,U));var V=(this._getFirstDayOfMonth(p,f)-E+7)%7,G=Math.ceil((V+U)/7),Q=c?this.maxRows>G?this.maxRows:G:G;this.maxRows=Q;for(var Y=this._daylightSavingAdjust(new Date(p,f,1-V)),X=0;Q>X;X++){L+="<tr>";for(var K=S?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(Y)+"</td>":"",z=0;7>z;z++){var J=P?P.apply(e.input?e.input[0]:null,[Y]):[!0,""],Z=Y.getMonth()!=f,et=Z&&!D||!J[0]||h&&h>Y||d&&Y>d;K+='<td class="'+((z+E+6)%7>=5?" ui-datepicker-week-end":"")+(Z?" ui-datepicker-other-month":"")+(Y.getTime()==H.getTime()&&f==e.selectedMonth&&e._keyEvent||M.getTime()==Y.getTime()&&M.getTime()==H.getTime()?" "+this._dayOverClass:"")+(et?" "+this._unselectableClass+" ui-state-disabled":"")+(Z&&!A?"":" "+J[1]+(Y.getTime()==u.getTime()?" "+this._currentClass:"")+(Y.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(Z&&!A||!J[2]?"":' title="'+J[2]+'"')+(et?"":' data-handler="selectDay" data-event="click" data-month="'+Y.getMonth()+'" data-year="'+Y.getFullYear()+'"')+">"+(Z&&!A?"&#xa0;":et?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==t.getTime()?" ui-state-highlight":"")+(Y.getTime()==u.getTime()?" ui-state-active":"")+(Z?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)}L+=K+"</tr>"}f++,f>11&&(f=0,p++),L+="</tbody></table>"+(c?"</div>"+(s[0]>0&&F==s[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),O+=L}R+=O}return R+=C+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,R},_generateMonthYearHeader:function(e,t,n,i,o,r,s,a){var l=this._get(e,"changeMonth"),c=this._get(e,"changeYear"),u=this._get(e,"showMonthAfterYear"),h='<div class="ui-datepicker-title">',d="";if(r||!l)d+='<span class="ui-datepicker-month">'+s[t]+"</span>";else{var f=i&&i.getFullYear()==n,p=o&&o.getFullYear()==n;d+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var m=0;12>m;m++)(!f||m>=i.getMonth())&&(!p||m<=o.getMonth())&&(d+='<option value="'+m+'"'+(m==t?' selected="selected"':"")+">"+a[m]+"</option>");d+="</select>"}if(u||(h+=d+(!r&&l&&c?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",r||!c)h+='<span class="ui-datepicker-year">'+n+"</span>";else{var g=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},b=y(g[0]),w=Math.max(b,y(g[1]||""));for(b=i?Math.max(b,i.getFullYear()):b,w=o?Math.min(w,o.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';w>=b;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",h+=e.yearshtml,e.yearshtml=null}return h+=this._get(e,"yearSuffix"),u&&(h+=(!r&&l&&c?"":"&#xa0;")+d),h+="</div>"},_adjustInstDate:function(e,t,n){var i=e.drawYear+("Y"==n?t:0),o=e.drawMonth+("M"==n?t:0),r=Math.min(e.selectedDay,this._getDaysInMonth(i,o))+("D"==n?t:0),s=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(i,o,r)));e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),("M"==n||"Y"==n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max"),o=n&&n>t?n:t;return o=i&&o>i?i:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,i){var o=this._getNumberOfMonths(e),r=this._daylightSavingAdjust(new Date(n,i+(0>t?t:o[0]*o[1]),1));return 0>t&&r.setDate(this._getDaysInMonth(r.getFullYear(),r.getMonth())),this._isInRange(e,r)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),i=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!i||t.getTime()<=i.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,i){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var o=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(i,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},o={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;0>n&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var t,i,o,r,s,a=this,l=this.options,c=l.title||"&#160;";t=(this.uiDialog=e("<div>")).addClass(n+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown(function(t){l.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE&&(a.close(t),t.preventDefault())}).mousedown(function(e){a.moveToTop(!1,e)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(t),i=(this.uiDialogTitlebar=e("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){t.focus()}).prependTo(t),o=e("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(e){e.preventDefault(),a.close(e)}).appendTo(i),(this.uiDialogTitlebarCloseText=e("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(o),r=e("<span>").uniqueId().addClass("ui-dialog-title").html(c).prependTo(i),s=(this.uiDialogButtonPane=e("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=e("<div>")).addClass("ui-dialog-buttonset").appendTo(s),t.attr({role:"dialog","aria-labelledby":r.attr("id")}),i.find("*").add(i).disableSelection(),this._hoverable(o),this._focusable(o),l.draggable&&e.fn.draggable&&this._makeDraggable(),l.resizable&&e.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,e.fn.bgiframe&&t.bgiframe(),this._on(t,{keydown:function(n){if(l.modal&&n.keyCode===e.ui.keyCode.TAB){var i=e(":tabbable",t),o=i.filter(":first"),r=i.filter(":last");return n.target!==r[0]||n.shiftKey?n.target===o[0]&&n.shiftKey?(r.focus(1),!1):void 0:(o.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var e,t=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(t){var n,i,o=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){o._trigger("close",t)}):(this.uiDialog.hide(),this._trigger("close",t)),e.ui.dialog.overlay.resize(),this.options.modal&&(n=0,e(".ui-dialog").each(function(){this!==o.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(n=Math.max(n,i)))}),e.ui.dialog.maxZ=n),this},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var i,o=this.options;return o.modal&&!t||!o.stack&&!o.modal?this._trigger("focus",n):(o.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=o.zIndex),this.overlay&&(e.ui.dialog.maxZ+=1,e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ,this.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ)),i={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},e.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",e.ui.dialog.maxZ),this.element.attr(i),this._trigger("focus",n),this)},open:function(){if(!this._isOpen){var t,n=this.options,i=this.uiDialog;return this._size(),this._position(n.position),i.show(n.show),this.overlay=n.modal?new e.ui.dialog.overlay(this):null,this.moveToTop(!0),t=this.element.find(":tabbable"),t.length||(t=this.uiDialogButtonPane.find(":tabbable"),t.length||(t=i)),t.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(t){var n=this,i=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(i=!0)}),i?(e.each(t,function(t,i){var o,r;i=e.isFunction(i)?{click:i,text:t}:i,i=e.extend({type:"button"},i),r=i.click,i.click=function(){r.apply(n.element[0],arguments)},o=e("<button></button>",i).appendTo(n.uiButtonSet),e.fn.button&&o.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){e(this).addClass("ui-dialog-dragging"),n._trigger("dragStart",i,t(o))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(o,r){i.position=[r.position.left-n.document.scrollLeft(),r.position.top-n.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),n._trigger("dragStop",o,t(r)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function i(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var o=this,r=this.options,s=this.uiDialog.css("position"),a="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:a,start:function(t,n){e(this).addClass("ui-dialog-resizing"),o._trigger("resizeStart",t,i(n))},resize:function(e,t){o._trigger("resize",e,i(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),r.height=e(this).height(),r.width=e(this).width(),o._trigger("resizeStop",t,i(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n,i=[],o=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(i=t.split?t.split(" "):[t[0],t[1]],1===i.length&&(i[1]=i[0]),e.each(["left","top"],function(e,t){+i[e]===i[e]&&(o[e]=i[e],i[e]=t)}),t={my:i[0]+(o[0]<0?o[0]:"+"+o[0])+" "+i[1]+(o[1]<0?o[1]:"+"+o[1]),at:i.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,n=this.uiDialog.is(":visible"),n||this.uiDialog.show(),this.uiDialog.position(t),n||this.uiDialog.hide()},_setOptions:function(t){var n=this,r={},s=!1;e.each(t,function(e,t){n._setOption(e,t),e in i&&(s=!0),e in o&&(r[e]=t)}),s&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,i){var o,r,s=this.uiDialog;switch(t){case"buttons":this._createButtons(i);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+i);break;case"dialogClass":s.removeClass(this.options.dialogClass).addClass(n+i);break;case"disabled":i?s.addClass("ui-dialog-disabled"):s.removeClass("ui-dialog-disabled");break;case"draggable":o=s.is(":data(draggable)"),o&&!i&&s.draggable("destroy"),!o&&i&&this._makeDraggable();break;case"position":this._position(i);break;case"resizable":r=s.is(":data(resizable)"),r&&!i&&s.resizable("destroy"),r&&"string"==typeof i&&s.resizable("option","handles",i),r||i===!1||this._makeResizable(i);break;case"title":e(".ui-dialog-title",this.uiDialogTitlebar).html(""+(i||"&#160;"))}this._super(t,i)},_size:function(){var t,n,i,o=this.options,r=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),o.minWidth>o.width&&(o.width=o.minWidth),t=this.uiDialog.css({height:"auto",width:o.width}).outerHeight(),n=Math.max(0,o.minHeight-t),"auto"===o.height?e.support.minHeight?this.element.css({minHeight:n,height:"auto"}):(this.uiDialog.show(),i=this.element.css("height","auto").height(),r||this.uiDialog.hide(),this.element.height(Math.max(i,n))):this.element.height(Math.max(o.height-t,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){return e(t.target).zIndex()<e.ui.dialog.overlay.maxZ?!1:void 0})},1),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=this.oldInstances.pop()||e("<div>").addClass("ui-widget-overlay");return e(document).bind("keydown.dialog-overlay",function(i){var o=e.ui.dialog.overlay.instances;0!==o.length&&o[o.length-1]===n&&t.options.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}),n.appendTo(document.body).css({width:this.width(),height:this.height()}),e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances),i=0;-1!==n&&this.oldInstances.push(this.instances.splice(n,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.height(0).width(0).remove(),e.each(this.instances,function(){i=Math.max(i,this.css("z-index"))}),this.maxZ=i},height:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),n>t?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.ui.ie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),n>t?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e){var t=/up|down|vertical/,n=/up|left|vertical|horizontal/;e.effects.effect.blind=function(i,o){var r,s,a,l=e(this),c=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(l,i.mode||"hide"),h=i.direction||"up",d=t.test(h),f=d?"height":"width",p=d?"top":"left",m=n.test(h),g={},v="show"===u;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),r=e.effects.createWrapper(l).css({overflow:"hidden"}),s=r[f](),a=parseFloat(r.css(p))||0,g[f]=v?s:0,m||(l.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),g[p]=v?a:s+a),v&&(r.css(f,0),m||r.css(p,a+s)),r.animate(g,{duration:i.duration,easing:i.easing,queue:!1,complete:function(){"hide"===u&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),o()}})}}(jQuery),function(e){e.effects.effect.bounce=function(t,n){var i,o,r,s=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(s,t.mode||"effect"),c="hide"===l,u="show"===l,h=t.direction||"up",d=t.distance,f=t.times||5,p=2*f+(u||c?1:0),m=t.duration/p,g=t.easing,v="up"===h||"down"===h?"top":"left",y="up"===h||"left"===h,b=s.queue(),w=b.length;for((u||c)&&a.push("opacity"),e.effects.save(s,a),s.show(),e.effects.createWrapper(s),d||(d=s["top"===v?"outerHeight":"outerWidth"]()/3),u&&(r={opacity:1},r[v]=0,s.css("opacity",0).css(v,y?2*-d:2*d).animate(r,m,g)),c&&(d/=Math.pow(2,f-1)),r={},r[v]=0,i=0;f>i;i++)o={},o[v]=(y?"-=":"+=")+d,s.animate(o,m,g).animate(r,m,g),d=c?2*d:d/2;c&&(o={opacity:0},o[v]=(y?"-=":"+=")+d,s.animate(o,m,g)),s.queue(function(){c&&s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,p+1))),s.dequeue()}}(jQuery),function(e){e.effects.effect.clip=function(t,n){var i,o,r,s=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(s,t.mode||"hide"),c="show"===l,u=t.direction||"vertical",h="vertical"===u,d=h?"height":"width",f=h?"top":"left",p={};e.effects.save(s,a),s.show(),i=e.effects.createWrapper(s).css({overflow:"hidden"}),o="IMG"===s[0].tagName?i:s,r=o[d](),c&&(o.css(d,0),o.css(f,r/2)),p[d]=c?r:0,p[f]=c?0:r/2,o.animate(p,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||s.hide(),e.effects.restore(s,a),e.effects.removeWrapper(s),n()}})}}(jQuery),function(e){e.effects.effect.drop=function(t,n){var i,o=e(this),r=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(o,t.mode||"hide"),a="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",h={opacity:a?1:0};e.effects.save(o,r),o.show(),e.effects.createWrapper(o),i=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&o.css("opacity",0).css(c,"pos"===u?-i:i),h[c]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+i,o.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e){e.effects.effect.explode=function(t,n){function i(){b.push(this),b.length===h*d&&o()}function o(){f.css({visibility:"visible"}),e(b).remove(),m||f.hide(),n()}var r,s,a,l,c,u,h=t.pieces?Math.round(Math.sqrt(t.pieces)):3,d=h,f=e(this),p=e.effects.setMode(f,t.mode||"hide"),m="show"===p,g=f.show().css("visibility","hidden").offset(),v=Math.ceil(f.outerWidth()/d),y=Math.ceil(f.outerHeight()/h),b=[];for(r=0;h>r;r++)for(l=g.top+r*y,u=r-(h-1)/2,s=0;d>s;s++)a=g.left+s*v,c=s-(d-1)/2,f.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-s*v,top:-r*y}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:y,left:a+(m?c*v:0),top:l+(m?u*y:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,i)}}(jQuery),function(e){e.effects.effect.fade=function(t,n){var i=e(this),o=e.effects.setMode(i,t.mode||"toggle");i.animate({opacity:o},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e){e.effects.effect.fold=function(t,n){var i,o,r=e(this),s=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(r,t.mode||"hide"),l="show"===a,c="hide"===a,u=t.size||15,h=/([0-9]+)%/.exec(u),d=!!t.horizFirst,f=l!==d,p=f?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(r,s),r.show(),i=e.effects.createWrapper(r).css({overflow:"hidden"}),o=f?[i.width(),i.height()]:[i.height(),i.width()],h&&(u=parseInt(h[1],10)/100*o[c?0:1]),l&&i.css(d?{height:0,width:u}:{height:u,width:0}),g[p[0]]=l?o[0]:u,v[p[1]]=l?o[1]:0,i.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&r.hide(),e.effects.restore(r,s),e.effects.removeWrapper(r),n()})}}(jQuery),function(e){e.effects.effect.highlight=function(t,n){var i=e(this),o=["backgroundImage","backgroundColor","opacity"],r=e.effects.setMode(i,t.mode||"show"),s={backgroundColor:i.css("backgroundColor")};"hide"===r&&(s.opacity=0),e.effects.save(i,o),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&i.hide(),e.effects.restore(i,o),n()}})}}(jQuery),function(e){e.effects.effect.pulsate=function(t,n){var i,o=e(this),r=e.effects.setMode(o,t.mode||"show"),s="show"===r,a="hide"===r,l=s||"hide"===r,c=2*(t.times||5)+(l?1:0),u=t.duration/c,h=0,d=o.queue(),f=d.length;for((s||!o.is(":visible"))&&(o.css("opacity",0).show(),h=1),i=1;c>i;i++)o.animate({opacity:h},u,t.easing),h=1-h;o.animate({opacity:h},u,t.easing),o.queue(function(){a&&o.hide(),n()}),f>1&&d.splice.apply(d,[1,0].concat(d.splice(f,c+1))),o.dequeue()}}(jQuery),function(e){e.effects.effect.puff=function(t,n){var i=e(this),o=e.effects.setMode(i,t.mode||"hide"),r="hide"===o,s=parseInt(t.percent,10)||150,a=s/100,l={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:o,complete:n,percent:r?s:100,from:r?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),i.effect(t)},e.effects.effect.scale=function(t,n){var i=e(this),o=e.extend(!0,{},t),r=e.effects.setMode(i,t.mode||"effect"),s=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===r?0:100),a=t.direction||"both",l=t.origin,c={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()},u={y:"horizontal"!==a?s/100:1,x:"vertical"!==a?s/100:1};o.effect="size",o.queue=!1,o.complete=n,"effect"!==r&&(o.origin=l||["middle","center"],o.restore=!0),o.from=t.from||("show"===r?{height:0,width:0,outerHeight:0,outerWidth:0}:c),o.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},o.fade&&("show"===r&&(o.from.opacity=0,o.to.opacity=1),"hide"===r&&(o.from.opacity=1,o.to.opacity=0)),i.effect(o)},e.effects.effect.size=function(t,n){var i,o,r,s=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=e.effects.setMode(s,t.mode||"effect"),p=t.restore||"effect"!==f,m=t.scale||"both",g=t.origin||["middle","center"],v=s.css("position"),y=p?a:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===f&&s.show(),i={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},"toggle"===t.mode&&"show"===f?(s.from=t.to||b,s.to=t.from||i):(s.from=t.from||("show"===f?b:i),s.to=t.to||("hide"===f?b:i)),r={from:{y:s.from.height/i.height,x:s.from.width/i.width},to:{y:s.to.height/i.height,x:s.to.width/i.width}},("box"===m||"both"===m)&&(r.from.y!==r.to.y&&(y=y.concat(h),s.from=e.effects.setTransition(s,h,r.from.y,s.from),s.to=e.effects.setTransition(s,h,r.to.y,s.to)),r.from.x!==r.to.x&&(y=y.concat(d),s.from=e.effects.setTransition(s,d,r.from.x,s.from),s.to=e.effects.setTransition(s,d,r.to.x,s.to))),("content"===m||"both"===m)&&r.from.y!==r.to.y&&(y=y.concat(u).concat(c),s.from=e.effects.setTransition(s,u,r.from.y,s.from),s.to=e.effects.setTransition(s,u,r.to.y,s.to)),e.effects.save(s,y),s.show(),e.effects.createWrapper(s),s.css("overflow","hidden").css(s.from),g&&(o=e.effects.getBaseline(g,i),s.from.top=(i.outerHeight-s.outerHeight())*o.y,s.from.left=(i.outerWidth-s.outerWidth())*o.x,s.to.top=(i.outerHeight-s.to.outerHeight)*o.y,s.to.left=(i.outerWidth-s.to.outerWidth)*o.x),s.css(s.from),("content"===m||"both"===m)&&(h=h.concat(["marginTop","marginBottom"]).concat(u),d=d.concat(["marginLeft","marginRight"]),c=a.concat(h).concat(d),s.find("*[width]").each(function(){var n=e(this),i={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};p&&e.effects.save(n,c),n.from={height:i.height*r.from.y,width:i.width*r.from.x,outerHeight:i.outerHeight*r.from.y,outerWidth:i.outerWidth*r.from.x},n.to={height:i.height*r.to.y,width:i.width*r.to.x,outerHeight:i.height*r.to.y,outerWidth:i.width*r.to.x},r.from.y!==r.to.y&&(n.from=e.effects.setTransition(n,h,r.from.y,n.from),n.to=e.effects.setTransition(n,h,r.to.y,n.to)),r.from.x!==r.to.x&&(n.from=e.effects.setTransition(n,d,r.from.x,n.from),n.to=e.effects.setTransition(n,d,r.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){p&&e.effects.restore(n,c)})})),s.animate(s.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===s.to.opacity&&s.css("opacity",s.from.opacity),"hide"===f&&s.hide(),e.effects.restore(s,y),p||("static"===v?s.css({position:"relative",top:s.to.top,left:s.to.left}):e.each(["top","left"],function(e,t){s.css(t,function(t,n){var i=parseInt(n,10),o=e?s.to.left:s.to.top;return"auto"===n?o+"px":i+o+"px"})})),e.effects.removeWrapper(s),n()}})}}(jQuery),function(e){e.effects.effect.shake=function(t,n){var i,o=e(this),r=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(o,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,u=2*c+1,h=Math.round(t.duration/u),d="up"===a||"down"===a?"top":"left",f="up"===a||"left"===a,p={},m={},g={},v=o.queue(),y=v.length;for(e.effects.save(o,r),o.show(),e.effects.createWrapper(o),p[d]=(f?"-=":"+=")+l,m[d]=(f?"+=":"-=")+2*l,g[d]=(f?"-=":"+=")+2*l,o.animate(p,h,t.easing),i=1;c>i;i++)o.animate(m,h,t.easing).animate(g,h,t.easing);o.animate(m,h,t.easing).animate(p,h/2,t.easing).queue(function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),n()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),o.dequeue()}}(jQuery),function(e){e.effects.effect.slide=function(t,n){var i,o=e(this),r=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(o,t.mode||"show"),a="show"===s,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,h={};e.effects.save(o,r),o.show(),i=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(o).css({overflow:"hidden"}),a&&o.css(c,u?isNaN(i)?"-"+i:-i:i),h[c]=(a?u?"+=":"-=":u?"-=":"+=")+i,o.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),n()}})}}(jQuery),function(e){e.effects.effect.transfer=function(t,n){var i=e(this),o=e(t.to),r="fixed"===o.css("position"),s=e("body"),a=r?s.scrollTop():0,l=r?s.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},h=i.offset(),d=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:h.top-a,left:h.left-l,height:i.innerHeight(),width:i.innerWidth(),position:r?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){d.remove(),n()})}}(jQuery),function(e){var t=!1;e.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()
},"click .ui-menu-item:has(a)":function(n){var i=e(n.target).closest(".ui-menu-item");!t&&i.not(".ui-state-disabled").length&&(t=!0,this.select(n),i.has(".ui-menu").length?this.expand(n):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(n){e(n.target).closest(".ui-menu").length||this.collapseAll(n),t=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,o,r,s,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,o=this.previousFilter||"",r=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),r===o?s=!0:r=o+r,a=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),i=s&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(r=String.fromCharCode(t.keyCode),a=new RegExp("^"+n(r),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),i.length?(this.focus(t,i),i.length>1?(this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.prev("a"),o=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(o),t.attr("aria-labelledby",i.attr("id"))}),t=i.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(e,t){var n,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,o,r,s,a;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-n-i,r=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=t.height(),0>o?this.activeMenu.scrollTop(r+o):o+a>s&&this.activeMenu.scrollTop(r+o-s+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(n,i)},nextPage:function(t){var n,i,o;return this.active?(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i-o<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var n,i,o;return this.active?(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+o>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),function(e,t){function n(e,t,n){return[parseInt(e[0],10)*(d.test(e[0])?t/100:1),parseInt(e[1],10)*(d.test(e[1])?n/100:1)]}function i(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var o,r=Math.max,s=Math.abs,a=Math.round,l=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+%?/,h=/^\w+/,d=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(o!==t)return o;var n,i,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return e("body").append(r),n=s.offsetWidth,r.css("overflow","scroll"),i=s.offsetWidth,n===i&&(i=r[0].clientWidth),r.remove(),o=n-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,r="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:o?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var o,d,p,m,g,v=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=v[0],_=(t.collision||"flip").split(" "),x={};return 9===w.nodeType?(d=v.width(),p=v.height(),m={top:0,left:0}):e.isWindow(w)?(d=v.width(),p=v.height(),m={top:v.scrollTop(),left:v.scrollLeft()}):w.preventDefault?(t.at="left top",d=p=0,m={top:w.pageY,left:w.pageX}):(d=v.outerWidth(),p=v.outerHeight(),m=v.offset()),g=e.extend({},m),e.each(["my","at"],function(){var e,n,i=(t[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",e=u.exec(i[0]),n=u.exec(i[1]),x[this]=[e?e[0]:0,n?n[0]:0],t[this]=[h.exec(i[0])[0],h.exec(i[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===t.at[0]?g.left+=d:"center"===t.at[0]&&(g.left+=d/2),"bottom"===t.at[1]?g.top+=p:"center"===t.at[1]&&(g.top+=p/2),o=n(x.at,d,p),g.left+=o[0],g.top+=o[1],this.each(function(){var l,c,u=e(this),h=u.outerWidth(),f=u.outerHeight(),w=i(this,"marginLeft"),C=i(this,"marginTop"),E=h+w+i(this,"marginRight")+b.width,S=f+C+i(this,"marginBottom")+b.height,T=e.extend({},g),k=n(x.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?T.left-=h:"center"===t.my[0]&&(T.left-=h/2),"bottom"===t.my[1]?T.top-=f:"center"===t.my[1]&&(T.top-=f/2),T.left+=k[0],T.top+=k[1],e.support.offsetFractions||(T.left=a(T.left),T.top=a(T.top)),l={marginLeft:w,marginTop:C},e.each(["left","top"],function(n,i){e.ui.position[_[n]]&&e.ui.position[_[n]][i](T,{targetWidth:d,targetHeight:p,elemWidth:h,elemHeight:f,collisionPosition:l,collisionWidth:E,collisionHeight:S,offset:[o[0]+k[0],o[1]+k[1]],my:t.my,at:t.at,within:y,elem:u})}),e.fn.bgiframe&&u.bgiframe(),t.using&&(c=function(e){var n=m.left-T.left,i=n+d-h,o=m.top-T.top,a=o+p-f,l={target:{element:v,left:m.left,top:m.top,width:d,height:p},element:{element:u,left:T.left,top:T.top,width:h,height:f},horizontal:0>i?"left":n>0?"right":"center",vertical:0>a?"top":o>0?"bottom":"middle"};h>d&&s(n+i)<d&&(l.horizontal="center"),f>p&&s(o+a)<p&&(l.vertical="middle"),l.important=r(s(n),s(i))>r(s(o),s(a))?"horizontal":"vertical",t.using.call(this,e,l)}),u.offset(e.extend(T,{using:c}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,c=a+t.collisionWidth-s-o;t.collisionWidth>s?l>0&&0>=c?(n=e.left+l+t.collisionWidth-s-o,e.left+=l-n):e.left=c>0&&0>=l?o:l>c?o+s-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=r(e.left-a,e.left)},top:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-s-o;t.collisionHeight>s?l>0&&0>=c?(n=e.top+l+t.collisionHeight-s-o,e.top+=l-n):e.top=c>0&&0>=l?o:l>c?o+s-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=r(e.top-a,e.top)}},flip:{left:function(e,t){var n,i,o=t.within,r=o.offset.left+o.scrollLeft,a=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,h=c+t.collisionWidth-a-l,d="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,f="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];0>u?(n=e.left+d+f+p+t.collisionWidth-a-r,(0>n||n<s(u))&&(e.left+=d+f+p)):h>0&&(i=e.left-t.collisionPosition.marginLeft+d+f+p-l,(i>0||s(i)<h)&&(e.left+=d+f+p))},top:function(e,t){var n,i,o=t.within,r=o.offset.top+o.scrollTop,a=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,h=c+t.collisionHeight-a-l,d="top"===t.my[1],f=d?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(i=e.top+f+p+m+t.collisionHeight-a-r,e.top+f+p+m>u&&(0>i||i<s(u))&&(e.top+=f+p+m)):h>0&&(n=e.top-t.collisionPosition.marginTop+f+p+m-l,e.top+f+p+m>h&&(n>0||s(n)<h)&&(e.top+=f+p+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,i,o,r,s=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in i)t.style[r]=i[r];t.appendChild(a),n=s||document.documentElement,n.insertBefore(t,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=e(a).offset().left,e.support.offsetFractions=o>10&&11>o,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(i){if(!i||!i.offset)return n.call(this,i);var o=i.offset.split(" "),r=i.at.split(" ");return 1===o.length&&(o[1]=o[0]),/^\d/.test(o[0])&&(o[0]="+"+o[0]),/^\d/.test(o[1])&&(o[1]="+"+o[1]),1===r.length&&(/left|center|right/.test(r[0])?r[1]="center":(r[1]=r[0],r[0]="center")),n.call(this,e.extend(i,{at:r[0]+o[0]+" "+r[1]+o[1],offset:t}))}}(jQuery)}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(e,t){"value"===e&&(this.options.value=t,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(e,t)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var n,i,o=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",a=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(o.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),o.range&&(o.range===!0&&(o.values||(o.values=[this._valueMin(),this._valueMin()]),o.values.length&&2!==o.values.length&&(o.values=[o.values[0],o.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===o.range||"max"===o.range?" ui-slider-range-"+o.range:""))),i=o.values&&o.values.length||1,n=r.length;i>n;n++)a.push(s);this.handles=r.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){o.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){o.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(n){var i,o,r,s,a=e(n.target).data("ui-slider-handle-index");switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(n.target).addClass("ui-state-active"),i=this._start(n,a),i===!1))return}switch(s=this.options.step,o=r=this.options.values&&this.options.values.length?this.values(a):this.value(),n.keyCode){case e.ui.keyCode.HOME:r=this._valueMin();break;case e.ui.keyCode.END:r=this._valueMax();break;case e.ui.keyCode.PAGE_UP:r=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===this._valueMax())return;r=this._trimAlignValue(o+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===this._valueMin())return;r=this._trimAlignValue(o-s)}this._slide(n,a,r)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,o,r,s,a,l,c,u=this,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-u.values(t));o>n&&(o=n,r=e(this),s=t)}),h.range===!0&&this.values(1)===h.min&&(s+=1,r=e(this.handles[s])),a=this._start(t,s),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=s,r.addClass("ui-state-active").focus(),l=r.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-r.width()/2,top:t.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,o,r;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),o=this._valueMax()-this._valueMin(),r=this._valueMin()+i*o,this._trimAlignValue(r)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,o,r;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(o=this.values(),o[t]=n,r=this._trigger("slide",e,{handle:this.handles[t],value:n,values:o}),i=this.values(t?0:1),r!==!1&&this.values(t,n,!0))):n!==this.value()&&(r=this._trigger("slide",e,{handle:this.handles[t],value:n}),r!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,n){var i,o,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,o=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(o[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,n){var i,o=0;switch(e.isArray(this.options.values)&&(o=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;o>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,o,r,s=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:a.animate}))),t=n}):(i=this.value(),o=this._valueMin(),r=this._valueMax(),n=r!==o?100*((i-o)/(r-o)):0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:a.animate}))}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},n=this.element;return e.each(["min","max","step"],function(e,i){var o=n.attr(i);void 0!==o&&o.length&&(t[i]=o)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var n=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,n.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,i=this.options;return t=null!==i.min?i.min:0,n=e-t,n=Math.round(n/i.step)*i.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==i.max&&e>i.max?i.max:null!==i.min&&e<i.min?i.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(n)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._spin((e||1)*-this.options.step)},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(t(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function n(){return++o}function i(e){return e.hash.length>1&&e.href.replace(r,"")===location.href.replace(r,"").replace(/\s/g,"%20")}var o=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options,i=n.active,o=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()
}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),null===i&&(o&&this.tabs.each(function(t,n){return e(n).attr("aria-controls")===o?(i=t,!1):void 0}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=n.collapsible?!1:0)),n.active=i,!n.collapsible&&n.active===!1&&this.anchors.length&&(n.active=0),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(this.options.active):e(),this._refresh(),this.active.length&&this.load(n.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),i=this.tabs.index(n),o=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(i),void 0;case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(i===this.options.active?!1:i),void 0;default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,o),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,n){function i(){return t>o&&(t=0),0>t&&(t=o),t}for(var o=this.tabs.length-1;-1!==e.inArray(i(),this.options.disabled);)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):"disabled"===e?(this._setupDisabled(t),void 0):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t),void 0)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+n()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,o){var r,s,a,l=e(o).uniqueId().attr("id"),c=e(o).closest("li"),u=c.attr("aria-controls");i(o)?(r=o.hash,s=t.element.find(t._sanitizeSelector(r))):(a=t._tabId(c),r="#"+a,s=t.element.find(r),s.length||(s=t._createPanel(a),s.insertAfter(t.panels[n-1]||t.tablist)),s.attr("aria-live","polite")),s.length&&(t.panels=t.panels.add(s)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":r.substring(1),"aria-labelledby":l}),s.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n,i=0;n=this.tabs[i];i++)t===!0||-1!==e.inArray(i,t)?e(n).addClass("ui-state-disabled").attr("aria-disabled","true"):e(n).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,i,o=this.element.parent();"fill"===t?(e.support.minHeight||(i=o.css("overflow"),o.css("overflow","hidden")),n=o.height(),this.element.siblings(":visible").each(function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(n-=t.outerHeight(!0))}),i&&o.css("overflow",i),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,i=this.active,o=e(t.currentTarget),r=o.closest("li"),s=r[0]===i[0],a=s&&n.collapsible,l=a?e():this._getPanelForTab(r),c=i.length?this._getPanelForTab(i):e(),u={oldTab:i,oldPanel:c,newTab:a?e():r,newPanel:l};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||s&&!n.collapsible||this._trigger("beforeActivate",t,u)===!1||(n.active=a?!1:this.tabs.index(r),this.active=s?e():r,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(r),t),this._toggle(t,u))},_toggle:function(t,n){function i(){r.running=!1,r._trigger("activate",t,n)}function o(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),s.length&&r.options.show?r._show(s,r.options.show,i):(s.show(),i())}var r=this,s=n.newPanel,a=n.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),o()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),s.length&&a.length?n.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),n=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(n){var i=this.options.disabled;i!==!1&&(n===t?i=!1:(n=this._getIndex(n),i=e.isArray(i)?e.map(i,function(e){return e!==n?e:null}):e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(i))},disable:function(n){var i=this.options.disabled;if(i!==!0){if(n===t)i=!0;else{if(n=this._getIndex(n),-1!==e.inArray(n,i))return;i=e.isArray(i)?e.merge([n],i).sort():[n]}this._setupDisabled(i)}},load:function(t,n){t=this._getIndex(t);var o=this,r=this.tabs.eq(t),s=r.find(".ui-tabs-anchor"),a=this._getPanelForTab(r),l={tab:r,panel:a};i(s[0])||(this.xhr=e.ajax(this._ajaxSettings(s,n,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(r.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){a.html(e),o._trigger("load",n,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&o.panels.stop(!1,!0),r.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===o.xhr&&delete o.xhr},1)})))},_ajaxSettings:function(t,n,i){var o=this;return{url:t.attr("href"),beforeSend:function(t,r){return o._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:r},i))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}}),e.uiBackCompat!==!1&&(e.ui.tabs.prototype._ui=function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},e.widget("ui.tabs",e.ui.tabs,{url:function(e,t){this.anchors.eq(e).attr("href",t)}}),e.widget("ui.tabs",e.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var t=this;this._on({tabsbeforeload:function(n,i){return e.data(i.tab[0],"cache.tabs")?(n.preventDefault(),void 0):(i.jqXHR.success(function(){t.options.cache&&e.data(i.tab[0],"cache.tabs",!0)}),void 0)}})},_ajaxSettings:function(t,n,i){var o=this.options.ajaxOptions;return e.extend({},o,{error:function(e,t){try{o.error(e,t,i.tab.closest("li").index(),i.tab[0])}catch(n){}}},this._superApply(arguments))},_setOption:function(e,t){"cache"===e&&t===!1&&this.anchors.removeData("cache.tabs"),this._super(e,t)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(e){this.anchors.eq(e).removeData("cache.tabs"),this._superApply(arguments)}}),e.widget("ui.tabs",e.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),e.widget("ui.tabs",e.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(e,t){if(e.target===this.element[0]&&this.options.spinner){var n=t.tab.find("span"),i=n.html();n.html(this.options.spinner),t.jqXHR.complete(function(){n.html(i)})}}})}}),e.widget("ui.tabs",e.ui.tabs,{options:{enable:null,disable:null},enable:function(t){var n,i=this.options;(t&&i.disabled===!0||e.isArray(i.disabled)&&-1!==e.inArray(t,i.disabled))&&(n=!0),this._superApply(arguments),n&&this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t]))},disable:function(t){var n,i=this.options;(t&&i.disabled===!1||e.isArray(i.disabled)&&-1===e.inArray(t,i.disabled))&&(n=!0),this._superApply(arguments),n&&this._trigger("disable",null,this._ui(this.anchors[t],this.panels[t]))}}),e.widget("ui.tabs",e.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(n,i,o){o===t&&(o=this.anchors.length);var r,s,a=this.options,l=e(a.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,i)),c=n.indexOf("#")?this._tabId(l):n.replace("#","");return l.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),l.attr("aria-controls",c),r=o>=this.tabs.length,s=this.element.find("#"+c),s.length||(s=this._createPanel(c),r?o>0?s.insertAfter(this.panels.eq(-1)):s.appendTo(this.element):s.insertBefore(this.panels[o])),s.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),r?l.appendTo(this.tablist):l.insertBefore(this.tabs[o]),a.disabled=e.map(a.disabled,function(e){return e>=o?++e:e}),this.refresh(),1===this.tabs.length&&a.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[o],this.panels[o])),this},remove:function(t){t=this._getIndex(t);var n=this.options,i=this.tabs.eq(t).remove(),o=this._getPanelForTab(i).remove();return i.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e){return e!==t}),function(e){return e>=t?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(i.find("a")[0],o[0])),this}}),e.widget("ui.tabs",e.ui.tabs,{length:function(){return this.anchors.length}}),e.widget("ui.tabs",e.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(t){var i=t.is("li")?t.find("a[href]"):t;return i=i[0],e(i).closest("li").attr("aria-controls")||i.title&&i.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+n()}}),e.widget("ui.tabs",e.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(t){return e(this.options.panelTemplate).attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),e.widget("ui.tabs",e.ui.tabs,{_create:function(){var e=this.options;null===e.active&&e.selected!==t&&(e.active=-1===e.selected?!1:e.selected),this._super(),e.selected=e.active,e.selected===!1&&(e.selected=-1)},_setOption:function(e,t){if("selected"!==e)return this._super(e,t);var n=this.options;this._super("active",-1===t?!1:t),n.selected=n.active,n.selected===!1&&(n.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),e.widget("ui.tabs",e.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(e,t,n){var i,o,r=this._superApply(arguments);return r?("beforeActivate"===e?(i=n.newTab.length?n.newTab:n.oldTab,o=n.newPanel.length?n.newPanel:n.oldPanel,r=this._super("select",t,{tab:i.find(".ui-tabs-anchor")[0],panel:o[0],index:i.closest("li").index()})):"activate"===e&&n.newTab.length&&(r=this._super("show",t,{tab:n.newTab.find(".ui-tabs-anchor")[0],panel:n.newPanel[0],index:n.newTab.closest("li").index()})),r):!1}}),e.widget("ui.tabs",e.ui.tabs,{select:function(e){if(e=this._getIndex(e),-1===e){if(!this.options.collapsible||-1===this.options.selected)return;e=this.options.selected}this.anchors.eq(e).trigger(this.options.event+this.eventNamespace)}}),function(){var t=0;e.widget("ui.tabs",e.ui.tabs,{options:{cookie:null},_create:function(){var e,t=this.options;null==t.active&&t.cookie&&(e=parseInt(this._cookie(),10),-1===e&&(e=!1),t.active=e),this._super()},_cookie:function(n){var i=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++t)];return arguments.length&&(i.push(n===!1?-1:n),i.push(this.options.cookie)),e.cookie.apply(null,i)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),e.widget("ui.tabs",e.ui.tabs,{_trigger:function(t,n,i){var o=e.extend({},i);return"load"===t&&(o.panel=o.panel[0],o.tab=o.tab.find(".ui-tabs-anchor")[0]),this._super(t,n,o)}}),e.widget("ui.tabs",e.ui.tabs,{options:{fx:null},_getFx:function(){var t,n,i=this.options.fx;return i&&(e.isArray(i)?(t=i[0],n=i[1]):t=n=i),i?{show:n,hide:t}:null},_toggle:function(e,t){function n(){o.running=!1,o._trigger("activate",e,t)}function i(){t.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&a.show?r.animate(a.show,a.show.duration,function(){n()}):(r.show(),n())}var o=this,r=t.newPanel,s=t.oldPanel,a=this._getFx();return a?(o.running=!0,s.length&&a.hide?s.animate(a.hide,a.hide.duration,function(){t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),i()}):(t.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),i()),void 0):this._super(e,t)}}))}(jQuery),function(e){function t(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))}function n(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),o=e.inArray(n,i);-1!==o&&i.splice(o,1),t.removeData("ui-tooltip-id"),i=e.trim(i.join(" ")),i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")}var i=0;e.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return e(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var i=this;return"disabled"===t?(this[n?"_disable":"_enable"](),this.options[t]=n,void 0):(this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){i._updateContent(t)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(n,i){var o=e.Event("blur");o.target=o.currentTarget=i[0],t.close(o,!0)}),this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=e(this);i.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._updateContent(i,t))},_updateContent:function(e,t){var n,i=this.options.content,o=this,r=t?t.type:null;return"string"==typeof i?this._open(t,e,i):(n=i.call(e[0],function(n){e.data("ui-tooltip-open")&&o._delay(function(){t&&(t.type=r),this._open(t,e,n)})}),n&&this._open(t,e,n),void 0)},_open:function(n,i,o){function r(e){c.of=e,s.is(":hidden")||s.position(c)}var s,a,l,c=e.extend({},this.options.position);if(o){if(s=this._find(i),s.length)return s.find(".ui-tooltip-content").html(o),void 0;i.is("[title]")&&(n&&"mouseover"===n.type?i.attr("title",""):i.removeAttr("title")),s=this._tooltip(i),t(i,s.attr("id")),s.find(".ui-tooltip-content").html(o),this.options.track&&n&&/^mouse/.test(n.type)?(this._on(this.document,{mousemove:r}),r(n)):s.position(e.extend({of:i},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(l=setInterval(function(){s.is(":visible")&&(r(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",n,{tooltip:s}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=i[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}},n&&"mouseover"!==n.type||(a.mouseleave="close"),n&&"focusin"!==n.type||(a.focusout="close"),this._on(!0,i,a)}},close:function(t){var i=this,o=e(t?t.currentTarget:this.element),r=this._find(o);this.closing||(o.data("ui-tooltip-title")&&o.attr("title",o.data("ui-tooltip-title")),n(o),r.stop(!0),this._hide(r,this.options.hide,function(){i._removeTooltip(e(this))}),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete i.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:r}),this.closing=!1)},_tooltip:function(t){var n="ui-tooltip-"+i++,o=e("<div>").attr({id:n,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(o),o.appendTo(this.document[0].body),e.fn.bgiframe&&o.bgiframe(),this.tooltips[n]=t,o},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,i){var o=e.Event("blur");o.target=o.currentTarget=i[0],t.close(o,!0),e("#"+n).remove(),i.data("ui-tooltip-title")&&(i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))})}})}(jQuery),window.Modernizr=function(e,t,n){function i(){f.input=function(e){for(var t=0,n=e.length;n>t;t++)k[e[t]]=e[t]in b;return k}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),f.inputtypes=function(e){for(var i,o,r,s=0,a=e.length;a>s;s++)b.setAttribute("type",o=e[s]),i="text"!==b.type,i&&(b.value=w,b.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(o)&&b.style.WebkitAppearance!==n?(m.appendChild(b),r=t.defaultView,i=r.getComputedStyle&&"textfield"!==r.getComputedStyle(b,null).WebkitAppearance&&0!==b.offsetHeight,m.removeChild(b)):/^(search|tel)$/.test(o)||(/^(url|email)$/.test(o)?i=b.checkValidity&&b.checkValidity()===!1:/^color$/.test(o)?(m.appendChild(b),m.offsetWidth,i=b.value!=w,m.removeChild(b)):i=b.value!=w)),T[e[s]]=!!i;return T}("search tel url email datetime date month week time datetime-local number range color".split(" "))}function o(e,t){var n=e.charAt(0).toUpperCase()+e.substr(1),i=(e+" "+C.join(n+" ")+n).split(" ");return r(i,t)}function r(e,t){for(var i in e)if(y[e[i]]!==n)return"pfx"==t?e[i]:!0;return!1}function s(e,t){return!!~(""+e).indexOf(t)}function a(e,t){return typeof e===t}function l(e,t){return c(x.join(e+";")+(t||""))}function c(e){y.cssText=e}var u,h,d="2.0.6",f={},p=!0,m=t.documentElement,g=(t.head||t.getElementsByTagName("head")[0],"modernizr"),v=t.createElement(g),y=v.style,b=t.createElement("input"),w=":)",_=Object.prototype.toString,x=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),C="Webkit Moz O ms Khtml".split(" "),E={svg:"http://www.w3.org/2000/svg"},S={},T={},k={},I=[],N=function(e,n,i,o){var r,s,a,l=t.createElement("div");if(parseInt(i,10))for(;i--;)a=t.createElement("div"),a.id=o?o[i]:g+(i+1),l.appendChild(a);return r=["&shy;","<style>",e,"</style>"].join(""),l.id=g,l.innerHTML+=r,m.appendChild(l),s=n(l,e),l.parentNode.removeChild(l),!!s},P=function(t){if(e.matchMedia)return matchMedia(t).matches;var n;return N("@media "+t+" { #"+g+" { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),n},A=function(){function e(e,o){o=o||t.createElement(i[e]||"div"),e="on"+e;var r=e in o;return r||(o.setAttribute||(o=t.createElement("div")),o.setAttribute&&o.removeAttribute&&(o.setAttribute(e,""),r=a(o[e],"function"),a(o[e],n)||(o[e]=n),o.removeAttribute(e))),o=null,r}var i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),D={}.hasOwnProperty;h=a(D,n)||a(D.call,n)?function(e,t){return t in e&&a(e.constructor.prototype[t],n)}:function(e,t){return D.call(e,t)},function(n,i){var o=n.join(""),r=i.length;N(o,function(n,i){for(var o=t.styleSheets[t.styleSheets.length-1],s=o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"",a=n.childNodes,l={};r--;)l[a[r].id]=a[r];f.touch="ontouchstart"in e||9===l.touch.offsetTop,f.csstransforms3d=9===l.csstransforms3d.offsetLeft,f.generatedcontent=l.generatedcontent.offsetHeight>=1,f.fontface=/src/i.test(s)&&0===s.indexOf(i.split(" ")[0])},r,i)}(['@font-face {font-family:"font";src:url("https://")}',["@media (",x.join("touch-enabled),("),g,")","{#touch{top:9px;position:absolute}}"].join(""),["@media (",x.join("transform-3d),("),g,")","{#csstransforms3d{left:9px;position:absolute}}"].join(""),['#generatedcontent:after{content:"',w,'";visibility:hidden}'].join("")],["fontface","touch","csstransforms3d","generatedcontent"]),S.flexbox=function(){function e(e,t,n,i){e.style.cssText=x.join(t+":"+n+";")+(i||"")}function n(e,t,n,i){t+=":",e.style.cssText=(t+x.join(n+";"+t)).slice(0,-t.length)+(i||"")}var i=t.createElement("div"),o=t.createElement("div");n(i,"display","box","width:42px;padding:0;"),e(o,"box-flex","1","width:10px;"),i.appendChild(o),m.appendChild(i);var r=42===o.offsetWidth;return i.removeChild(o),m.removeChild(i),r},S.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},S.canvastext=function(){return!!f.canvas&&!!a(t.createElement("canvas").getContext("2d").fillText,"function")},S.webgl=function(){return!!e.WebGLRenderingContext},S.touch=function(){return f.touch},S.geolocation=function(){return!!navigator.geolocation},S.postmessage=function(){return!!e.postMessage},S.websqldatabase=function(){var t=!!e.openDatabase;return t},S.indexedDB=function(){for(var t=-1,n=C.length;++t<n;)if(e[C[t].toLowerCase()+"IndexedDB"])return!0;return!!e.indexedDB},S.hashchange=function(){return A("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},S.history=function(){return!!e.history&&!!history.pushState},S.draganddrop=function(){return A("dragstart")&&A("drop")},S.websockets=function(){for(var t=-1,n=C.length;++t<n;)if(e[C[t]+"WebSocket"])return!0;return"WebSocket"in e},S.rgba=function(){return c("background-color:rgba(150,255,150,.5)"),s(y.backgroundColor,"rgba")},S.hsla=function(){return c("background-color:hsla(120,40%,100%,.5)"),s(y.backgroundColor,"rgba")||s(y.backgroundColor,"hsla")},S.multiplebgs=function(){return c("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(y.background)},S.backgroundsize=function(){return o("backgroundSize")},S.borderimage=function(){return o("borderImage")},S.borderradius=function(){return o("borderRadius")},S.boxshadow=function(){return o("boxShadow")},S.textshadow=function(){return""===t.createElement("div").style.textShadow},S.opacity=function(){return l("opacity:.55"),/^0.55$/.test(y.opacity)},S.cssanimations=function(){return o("animationName")},S.csscolumns=function(){return o("columnCount")},S.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return c((e+x.join(t+e)+x.join(n+e)).slice(0,-e.length)),s(y.backgroundImage,"gradient")},S.cssreflections=function(){return o("boxReflect")},S.csstransforms=function(){return!!r(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},S.csstransforms3d=function(){var e=!!r(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);return e&&"webkitPerspective"in m.style&&(e=f.csstransforms3d),e},S.csstransitions=function(){return o("transitionProperty")},S.fontface=function(){return f.fontface},S.generatedcontent=function(){return f.generatedcontent},S.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType){n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"');var i='video/mp4; codecs="avc1.42E01E';n.h264=e.canPlayType(i+'"')||e.canPlayType(i+', mp4a.40.2"'),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"')}}catch(o){}return n},S.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"'),n.mp3=e.canPlayType("audio/mpeg;"),n.wav=e.canPlayType('audio/wav; codecs="1"'),n.m4a=e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;"))}catch(i){}return n},S.localstorage=function(){try{return!!localStorage.getItem}catch(e){return!1}},S.sessionstorage=function(){try{return!!sessionStorage.getItem}catch(e){return!1}},S.webworkers=function(){return!!e.Worker},S.applicationcache=function(){return!!e.applicationCache},S.svg=function(){return!!t.createElementNS&&!!t.createElementNS(E.svg,"svg").createSVGRect},S.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==E.svg},S.smil=function(){return!!t.createElementNS&&/SVG/.test(_.call(t.createElementNS(E.svg,"animate")))},S.svgclippaths=function(){return!!t.createElementNS&&/SVG/.test(_.call(t.createElementNS(E.svg,"clipPath")))};for(var M in S)h(S,M)&&(u=M.toLowerCase(),f[u]=S[M](),I.push((f[u]?"":"no-")+u));return f.input||i(),f.addTest=function(e,t){if("object"==typeof e)for(var i in e)h(e,i)&&f.addTest(i,e[i]);else{if(e=e.toLowerCase(),f[e]!==n)return;t="boolean"==typeof t?t:!!t(),m.className+=" "+(t?"":"no-")+e,f[e]=t}return f},c(""),v=b=null,e.attachEvent&&function(){var e=t.createElement("div");return e.innerHTML="<elem></elem>",1!==e.childNodes.length}()&&function(e,t){function i(e){for(var t=-1;++t<l;)e.createElement(a[t])}e.iepp=e.iepp||{};var o,r=e.iepp,s=r.html5elements||"abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",a=s.split("|"),l=a.length,c=new RegExp("(^|\\s)("+s+")","gi"),u=new RegExp("<(/*)("+s+")","gi"),h=/^\s*[\{\}]\s*$/,d=new RegExp("(^|[^\\n]*?\\s)("+s+")([^\\n]*)({[\\n\\w\\W]*?})","gi"),f=t.createDocumentFragment(),p=t.documentElement,m=p.firstChild,g=t.createElement("body"),v=t.createElement("style"),y=/print|all/;r.getCSS=function(e,t){if(e+""===n)return"";for(var i,o=-1,s=e.length,a=[];++o<s;)i=e[o],i.disabled||(t=i.media||t,y.test(t)&&a.push(r.getCSS(i.imports,t),i.cssText),t="all");return a.join("")},r.parseCSS=function(e){for(var t,n=[];null!=(t=d.exec(e));)n.push(((h.exec(t[1])?"\n":t[1])+t[2]+t[3]).replace(c,"$1.iepp_$2")+t[4]);return n.join("\n")},r.writeHTML=function(){var e=-1;for(o=o||t.body;++e<l;)for(var n=t.getElementsByTagName(a[e]),i=n.length,r=-1;++r<i;)n[r].className.indexOf("iepp_")<0&&(n[r].className+=" iepp_"+a[e]);f.appendChild(o),p.appendChild(g),g.className=o.className,g.id=o.id,g.innerHTML=o.innerHTML.replace(u,"<$1font")},r._beforePrint=function(){v.styleSheet.cssText=r.parseCSS(r.getCSS(t.styleSheets,"all")),r.writeHTML()},r.restoreHTML=function(){g.innerHTML="",p.removeChild(g),p.appendChild(o)},r._afterPrint=function(){r.restoreHTML(),v.styleSheet.cssText=""},i(t),i(f),r.disablePP||(m.insertBefore(v,m.firstChild),v.media="print",v.className="iepp-printshim",e.attachEvent("onbeforeprint",r._beforePrint),e.attachEvent("onafterprint",r._afterPrint))}(e,t),f._version=d,f._prefixes=x,f._domPrefixes=C,f.mq=P,f.hasEvent=A,f.testProp=function(e){return r([e])},f.testAllProps=o,f.testStyles=N,f.prefixed=function(e){return o(e,"pfx")},m.className=m.className.replace(/\bno-js\b/,"")+(p?" js "+I.join(" "):""),f}(this,this.document),function(e,t){function n(){y(!0)}if(e.respond={},respond.update=function(){},respond.mediaQueriesSupported=t,!t){var i,o,r=e.document,s=r.documentElement,a=[],l=[],c=[],u={},h=30,d=r.getElementsByTagName("head")[0]||s,f=d.getElementsByTagName("link"),p=[],m=function(){for(var t,n,i,o,r=f,s=r.length,a=0;s>a;a++)t=r[a],n=t.href,i=t.media,o=t.rel&&"stylesheet"===t.rel.toLowerCase(),!!n&&o&&!u[n]&&(/^([a-zA-Z]+?:(\/\/)?(www\.)?)/.test(n)&&n.replace(RegExp.$1,"").split("/")[0]!==e.location.host?u[n]=!0:p.push({href:n,media:i}));
g()},g=function(){if(p.length){var e=p.shift();b(e.href,function(t){v(t,e.href,e.media),u[e.href]=!0,g()})}},v=function(e,t,n){var i,o,r,s,c,u=e.match(/@media[^\{]+\{([^\{\}]+\{[^\}\{]+\})+/gi),h=u&&u.length||0,t=t.substring(0,t.lastIndexOf("/")),d=function(e){return e.replace(/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,"$1"+t+"$2$3")},f=!h&&n,p=0;for(t.length&&(t+="/"),f&&(h=1);h>p;p++)for(i=0,f?(o=n,l.push(d(e))):(o=u[p].match(/@media ([^\{]+)\{([\S\s]+?)$/)&&RegExp.$1,l.push(RegExp.$2&&d(RegExp.$2))),s=o.split(","),c=s.length;c>i;i++)r=s[i],a.push({media:r.match(/(only\s+)?([a-zA-Z]+)(\sand)?/)&&RegExp.$2,rules:l.length-1,minw:r.match(/\(min\-width:[\s]*([\s]*[0-9]+)px[\s]*\)/)&&parseFloat(RegExp.$1),maxw:r.match(/\(max\-width:[\s]*([\s]*[0-9]+)px[\s]*\)/)&&parseFloat(RegExp.$1)});y()},y=function(e){var t="clientWidth",n=s[t],u="CSS1Compat"===r.compatMode&&n||r.body[t]||n,p={},m=r.createDocumentFragment(),g=f[f.length-1],v=(new Date).getTime();if(e&&i&&h>v-i)clearTimeout(o),o=setTimeout(y,h);else{i=v;for(var b in a){var w=a[b];(!w.minw&&!w.maxw||(!w.minw||w.minw&&u>=w.minw)&&(!w.maxw||w.maxw&&u<=w.maxw))&&(p[w.media]||(p[w.media]=[]),p[w.media].push(l[w.rules]))}for(var b in c)c[b]&&c[b].parentNode===d&&d.removeChild(c[b]);for(var b in p){var _=r.createElement("style"),x=p[b].join("\n");_.type="text/css",_.media=b,_.styleSheet?_.styleSheet.cssText=x:_.appendChild(r.createTextNode(x)),m.appendChild(_),c.push(_)}d.insertBefore(m,g.nextSibling)}},b=function(e,t){var n=w();if(n){if(n.open("GET",e,!0),n.onreadystatechange=function(){4==n.readyState&&(200==n.status||304==n.status)&&t(n.responseText)},4==n.readyState)return;n.send()}},w=function(){for(var e=!1,t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new XMLHttpRequest}],n=t.length;n--;){try{e=t[n]()}catch(i){continue}break}return function(){return e}}();m(),respond.update=m,e.addEventListener?e.addEventListener("resize",n,!1):e.attachEvent&&e.attachEvent("onresize",n)}}(this,Modernizr.mq("only all")),function(e,t,n){function i(e){return!e||"loaded"==e||"complete"==e}function o(){for(var e=1,t=-1;v.length-++t&&(!v[t].s||(e=v[t].r)););e&&a()}function r(e){var n,r=t.createElement("script");r.src=e.s,r.onreadystatechange=r.onload=function(){!n&&i(r.readyState)&&(n=1,o(),r.onload=r.onreadystatechange=null)},p(function(){n||(n=1,o())},d.errorTimeout),e.e?r.onload():m.parentNode.insertBefore(r,m)}function s(e){var n,i=t.createElement("link");if(i.href=e.s,i.rel="stylesheet",i.type="text/css",e.e||!C&&!b)i.onload=function(){n||(n=1,p(function(){o()},0))},e.e&&i.onload();else{var r=function(e){p(function(){if(!n)try{e.sheet.cssRules.length?(n=1,o()):r(e)}catch(t){1e3==t.code||"security"==t.message||"denied"==t.message?(n=1,p(function(){o()},0)):r(e)}},0)};r(i)}p(function(){n||(n=1,o())},d.errorTimeout),!e.e&&m.parentNode.insertBefore(i,m)}function a(){var e=v.shift();y=1,e?e.t?p(function(){"c"==e.t?s(e):r(e)},0):(e(),o()):y=0}function l(e,n,r,s,l,c){function u(){!f&&i(h.readyState)&&(g.r=f=1,!y&&o(),h.onload=h.onreadystatechange=null,p(function(){_.removeChild(h)},0))}var h=t.createElement(e),f=0,g={t:r,s:n,e:c};h.src=h.data=n,!w&&(h.style.display="none"),h.width=h.height="0","object"!=e&&(h.type=r),h.onload=h.onreadystatechange=u,"img"==e?h.onerror=u:"script"==e&&(h.onerror=function(){g.e=g.r=1,a()}),v.splice(s,0,g),_.insertBefore(h,w?null:m),p(function(){f||(_.removeChild(h),g.r=g.e=f=1,o())},d.errorTimeout)}function c(e,t,n){var i="c"==t?T:S;return y=0,t=t||"j",N(e)?l(i,e,t,this.i++,f,n):(v.splice(this.i++,0,e),1==v.length&&a()),this}function u(){var e=d;return e.loader={load:c,i:0},e}var h,d,f=t.documentElement,p=e.setTimeout,m=t.getElementsByTagName("script")[0],g={}.toString,v=[],y=0,b="MozAppearance"in f.style,w=b&&!!t.createRange().compareNode,_=w?f:m.parentNode,x=e.opera&&"[object Opera]"==g.call(e.opera),C="webkitAppearance"in f.style,E=C&&"async"in t.createElement("script"),S=b?"object":x||E?"img":"script",T=C?"img":S,k=Array.isArray||function(e){return"[object Array]"==g.call(e)},I=function(e){return Object(e)===e},N=function(e){return"string"==typeof e},P=function(e){return"[object Function]"==g.call(e)},A=[],D={};d=function(e){function t(e){var t,n,i=e.split("!"),o=A.length,r=i.pop(),s=i.length,a={url:r,origUrl:r,prefixes:i};for(n=0;s>n;n++)t=D[i[n]],t&&(a=t(a));for(n=0;o>n;n++)a=A[n](a);return a}function i(e,i,o,r,s){var a=t(e),l=a.autoCallback;if(!a.bypass){if(i&&(i=P(i)?i:i[e]||i[r]||i[e.split("/").pop().split("?")[0]]),a.instead)return a.instead(e,i,o,r,s);o.load(a.url,a.forceCSS||!a.forceJS&&/css$/.test(a.url)?"c":n,a.noexec),(P(i)||P(l))&&o.load(function(){u(),i&&i(a.origUrl,s,r),l&&l(a.origUrl,s,r)})}}function o(e,t){function n(e){if(N(e))i(e,l,t,0,r);else if(I(e))for(o in e)e.hasOwnProperty(o)&&i(e[o],l,t,o,r)}var o,r=!!e.test,s=r?e.yep:e.nope,a=e.load||e.both,l=e.callback;n(s),n(a),e.complete&&t.load(e.complete)}var r,s,a=this.yepnope.loader;if(N(e))i(e,0,a,0);else if(k(e))for(r=0;r<e.length;r++)s=e[r],N(s)?i(s,0,a,0):k(s)?d(s):I(s)&&o(s,a);else I(e)&&o(e,a)},d.addPrefix=function(e,t){D[e]=t},d.addFilter=function(e){A.push(e)},d.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",h=function(){t.removeEventListener("DOMContentLoaded",h,0),t.readyState="complete"},0)),e.yepnope=u()}(this,this.document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},/* ===================================================
 * bootstrap-transition.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}()})}(window.jQuery),/* ==========================================================
 * bootstrap-affix.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#affix
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,n=e(document).height(),i=this.$window.scrollTop(),o=this.$element.offset(),r=this.options.offset,s=r.bottom,a=r.top,l="affix affix-top affix-bottom";"object"!=typeof r&&(s=a=r),"function"==typeof a&&(a=r.top()),"function"==typeof s&&(s=r.bottom()),t=null!=this.unpin&&i+this.unpin<=o.top?!1:null!=s&&o.top+this.$element.height()>=n-s?"bottom":null!=a&&a>=i?"top":!1,this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?o.top-i:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var i=e(this),o=i.data("affix"),r="object"==typeof n&&n;o||i.data("affix",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),/* ==========================================================
 * bootstrap-alert.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#alerts
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){i.trigger("closed").remove()}var i,o=e(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=o.hasClass("alert")?o:o.parent()),i.trigger(t=e.Event("close")),t.isDefaultPrevented()||(i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,n):n())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),o=i.data("alert");o||i.data("alert",o=new n(this)),"string"==typeof t&&o[t].call(i)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),/* ============================================================
 * bootstrap-button.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,i=n.data(),o=n.is("input")?"val":"html";e+="Text",i.resetText||n.data("resetText",n[o]()),n[o](i[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),o=i.data("button"),r="object"==typeof n&&n;o||i.data("button",o=new t(this,r)),"toggle"==n?o.toggle():n&&o.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),/* ==========================================================
 * bootstrap-carousel.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#carousel
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var n=this.getActiveIndex(),i=this;if(!(t>this.$items.length-1||0>t))return this.sliding?this.$element.one("slid",function(){i.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,n){var i,o=this.$element.find(".item.active"),r=n||o[t](),s=this.interval,a="next"==t?"left":"right",l="next"==t?"first":"last",c=this;if(this.sliding=!0,s&&this.pause(),r=r.length?r:this.$element.find(".item")[l](),i=e.Event("slide",{relatedTarget:r[0],direction:a}),!r.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(c.$indicators.children()[c.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;r.addClass(t),r[0].offsetWidth,o.addClass(a),r.addClass(a),this.$element.one(e.support.transition.end,function(){r.removeClass([t,a].join(" ")).addClass("active"),o.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var i=e(this),o=i.data("carousel"),r=e.extend({},e.fn.carousel.defaults,"object"==typeof n&&n),s="string"==typeof n?n:r.slide;o||i.data("carousel",o=new t(this,r)),"number"==typeof n?o.to(n):s?o[s]():r.interval&&o.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,i,o=e(this),r=e(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=e.extend({},r.data(),o.data());r.carousel(s),(i=o.attr("data-slide-to"))&&r.data("carousel").pause().to(i).cycle(),t.preventDefault()})}(window.jQuery),/* =============================================================
 * bootstrap-collapse.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,i,o;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(o=i.data("collapse"),o&&o.transitioning)return;i.collapse("hide"),o||i.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,i){var o=this,r=function(){"show"==n.type&&o.reset(),o.transitioning=0,o.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,r):r())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),o=i.data("collapse"),r=e.extend({},e.fn.collapse.defaults,i.data(),"object"==typeof n&&n);o||i.data("collapse",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),o=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),r=e(o).data("collapse")?"toggle":i.data();i[e(o).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(o).collapse(r)})}(window.jQuery),/* ============================================================
 * bootstrap-dropdown.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";function t(){e(i).each(function(){n(e(this)).removeClass("open")})}function n(t){var n,i=t.attr("data-target");return i||(i=t.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&e(i),n&&n.length||(n=t.parent()),n}var i="[data-toggle=dropdown]",o=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};o.prototype={constructor:o,toggle:function(){var i,o,r=e(this);if(!r.is(".disabled, :disabled"))return i=n(r),o=i.hasClass("open"),t(),o||i.toggleClass("open"),r.focus(),!1},keydown:function(t){var o,r,s,a,l;if(/(38|40|27)/.test(t.keyCode)&&(o=e(this),t.preventDefault(),t.stopPropagation(),!o.is(".disabled, :disabled"))){if(s=n(o),a=s.hasClass("open"),!a||a&&27==t.keyCode)return 27==t.which&&s.find(i).focus(),o.click();r=e("[role=menu] li:not(.divider):visible a",s),r.length&&(l=r.index(r.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<r.length-1&&l++,~l||(l=0),r.eq(l).focus())}}};var r=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("dropdown");i||n.data("dropdown",i=new o(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",i,o.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",o.prototype.keydown)}(window.jQuery),/* =========================================================
 * bootstrap-modal.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var i=e(this),o=i.data("modal"),r=e.extend({},e.fn.modal.defaults,i.data(),"object"==typeof n&&n);o||i.data("modal",o=new t(this,r)),"string"==typeof n?o[n]():r.show&&o.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),o=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),n.data());t.preventDefault(),o.modal(r).one("hide",function(){n.focus()})})}(window.jQuery),/* =============================================================
 * bootstrap-scrollspy.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#scrollspy
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================== */
!function(e){"use strict";function t(t,n){var i,o=e.proxy(this.process,this),r=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=r.on("scroll.scroll-spy.data-api",o),this.selector=(this.options.target||(i=e(t).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,n=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),o=/^#\w/.test(i)&&e(i);return o&&o.length&&[[o.position().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),o=this.offsets,r=this.targets,s=this.activeTarget;if(t>=i)return s!=(e=r.last()[0])&&this.activate(e);for(e=o.length;e--;)s!=r[e]&&t>=o[e]&&(!o[e+1]||t<=o[e+1])&&this.activate(r[e])},activate:function(t){var n,i;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var i=e(this),o=i.data("scrollspy"),r="object"==typeof n&&n;o||i.data("scrollspy",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),/* ========================================================
 * bootstrap-tab.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */
!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,n,i,o=this.element,r=o.closest("ul:not(.dropdown-menu)"),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),o.parent("li").hasClass("active")||(t=r.find(".active:last a")[0],i=e.Event("show",{relatedTarget:t}),o.trigger(i),i.isDefaultPrevented()||(n=e(s),this.activate(o.parent("li"),r),this.activate(n,n.parent(),function(){o.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,n,i){function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var r=n.find("> .active"),s=i&&e.support.transition&&r.hasClass("fade");s?r.one(e.support.transition.end,o):o(),r.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var i=e(this),o=i.data("tab");o||i.data("tab",o=new t(this)),"string"==typeof n&&o[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),/* ===========================================================
 * bootstrap-tooltip.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,i){var o,r,s,a,l;for(this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.enabled=!0,s=this.options.trigger.split(" "),l=s.length;l--;)a=s[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=a&&(o="hover"==a?"mouseenter":"focus",r="hover"==a?"mouseleave":"blur",this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n,i=e.fn[this.type].defaults,o={};return this._options&&e.each(this._options,function(e,t){i[e]!=t&&(o[e]=t)},this),n=e(t.currentTarget)[this.type](o).data(this.type),n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var t,n,i,o,r,s,a=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),i=t[0].offsetWidth,o=t[0].offsetHeight,r){case"bottom":s={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":s={top:n.top-o,left:n.left+n.width/2-i/2};break;case"left":s={top:n.top+n.height/2-o/2,left:n.left-i};break;case"right":s={top:n.top+n.height/2-o/2,left:n.left+n.width}}this.applyPlacement(s,r),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n,i,o,r,s=this.tip(),a=s[0].offsetWidth,l=s[0].offsetHeight;s.offset(e).addClass(t).addClass("in"),n=s[0].offsetWidth,i=s[0].offsetHeight,"top"==t&&i!=l&&(e.top=e.top+l-i,r=!0),"bottom"==t||"top"==t?(o=0,e.left<0&&(o=-2*e.left,e.left=0,s.offset(e),n=s[0].offsetWidth,i=s[0].offsetHeight),this.replaceArrow(o-a+n,n,"left")):this.replaceArrow(i-l,i,"top"),r&&s.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var n=this.tip(),i=e.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),o=i.data("tooltip"),r="object"==typeof n&&n;o||i.data("tooltip",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),/* ===========================================================
 * bootstrap-popover.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#popovers
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================== */
!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=("function"==typeof n.content?n.content.call(t[0]):n.content)||t.attr("data-content")},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var i=e(this),o=i.data("popover"),r="object"==typeof n&&n;o||i.data("popover",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),/* =============================================================
 * bootstrap-typeahead.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#typeahead
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */
!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,n=[],i=[],o=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?i.push(t):o.push(t):n.push(t);return n.concat(i,o)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,i){return t=e(n.options.item).attr("data-value",i),t.find("a").html(n.highlighter(i)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.next();n.length||(n=e(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var i=e(this),o=i.data("typeahead"),r="object"==typeof n&&n;o||i.data("typeahead",o=new t(this,r)),"string"==typeof n&&o[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var t=e(this);t.data("typeahead")||t.typeahead(t.data())})}(window.jQuery),/**
 * bootstrap-multiselect.js 1.0.0
 * https://github.com/davidstutz/bootstrap-multiselect
 *
 * Copyright 2012 David Stutz
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e){"use strict";function t(t,n){this.options=this.getOptions(n),this.select=e(t),this.select.attr("multiple")||this.select.attr("multiple",!0),this.container=e(this.options.buttonContainer).append('<button type="button" class="multiselect dropdown-toggle '+this.options.buttonClass+'" data-toggle="dropdown">'+this.options.buttonText(e("option:selected",t))+"</button>").append('<ul class="dropdown-menu"></ul>'),this.options.buttonWidth&&e("button",this.container).css({width:this.options.buttonWidth}),this.options.maxHeight&&e("ul",this.container).css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.buildDrowdown(t,this.options),this.select.hide().after(this.container)}"undefined"!=typeof ko&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect&&(ko.bindingHandlers.multiselect={init:function(t){var n=e(t).data("multiselect");if(!n)throw new Error("Bootstrap-multiselect's multiselect() has to be called on element before applying the Knockout View model!");var i=n.options.onChange;n.options.onChange=function(n,o){return e(t).data("blockRefresh",!0),e(t).trigger("change"),i(n,o)}},update:function(t){var n=e(t).data("blockRefresh")||!1;n||e(t).multiselect("rebuild"),e.data(t,"blockRefresh",!1)}}),t.prototype={defaults:{buttonText:function(t){if(0==t.length)return'None selected <b class="caret"></b>';if(t.length>3)return t.length+' selected <b class="caret"></b>';var n="";return t.each(function(){n+=e(this).text()+", "}),n.substr(0,n.length-2)+' <b class="caret"></b>'},onChange:function(){},buttonClass:"btn",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:400},isMobile:function(){return navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i)},constructor:t,buildDrowdown:function(){e("option",this.select).each(e.proxy(function(t,n){e(n).is(":selected")&&(e(n).attr("selected","selected"),e(n).prop("selected","selected")),e("ul",this.container).append('<li><a href="javascript:void(0);" style="padding:0;"><label style="margin:0;padding:3px 20px 3px 20px;width:100%;height:100%;cursor:pointer;"><input style="margin-bottom:5px;" type="checkbox" value="'+e(n).val()+'" /> '+e(n).text()+"</label</a></li>");var i=e(n).prop("selected")||!1,o=e('ul li input[value="'+e(n).val()+'"]',this.container);e(n).is(":disabled")&&o.attr("disabled","disabled").prop("disabled","disabled").parents("li").addClass("disabled"),o.prop("checked",i),i&&o.parents("li").addClass("active")},this)),e('ul li input[type="checkbox"]',this.container).on("change",e.proxy(function(t){var n=e(t.target).prop("checked")||!1;n?e(t.target).parents("li").addClass("active"):e(t.target).parents("li").removeClass("active");var i=e('option[value="'+e(t.target).val()+'"]',this.select);n?(i.attr("selected","selected"),i.prop("selected","selected")):i.removeAttr("selected");var o=e("option:selected",this.select);e("button",this.container).html(this.options.buttonText(o)),this.options.onChange(i,n)},this)),e("ul li a",this.container).on("click",function(e){e.stopPropagation()})},destroy:function(){this.container.remove(),this.select.show()},refresh:function(){e("option",this.select).each(e.proxy(function(t,n){e(n).is(":selected")?(e('ul li input[value="'+e(n).val()+'"]',this.container).prop("checked",!0),e('ul li input[value="'+e(n).val()+'"]',this.container).parents("li").addClass("active")):(e('ul li input[value="'+e(n).val()+'"]',this.container).prop("checked",!1),e('ul li input[value="'+e(n).val()+'"]',this.container).parents("li").removeClass("active"))},this)),e("button",this.container).html(this.options.buttonText(e("option:selected",this.select)))},rebuild:function(){e("ul",this.container).html(""),this.buildDrowdown(this.select,this.options)},getOptions:function(t){return e.extend({},this.defaults,t)}},e.fn.multiselect=function(n){return this.each(function(){var i=e(this).data("multiselect"),o="object"==typeof n&&n;i||e(this).data("multiselect",i=new t(this,o)),"string"==typeof n&&i[n]()})}}(window.jQuery);var I18n=I18n||{};I18n.defaultLocale="en",I18n.fallbacks=!1,I18n.defaultSeparator=".",I18n.locale=null,I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,I18n.isValidNode=function(e,t,n){return null!==e[t]&&e[t]!==n},I18n.lookup=function(e,t){var n,t=t||{},i=e,o=this.prepareOptions(I18n.translations),r=o[t.locale||I18n.currentLocale()],t=this.prepareOptions(t);if(r){for("object"==typeof e&&(e=e.join(this.defaultSeparator)),t.scope&&(e=t.scope.toString()+this.defaultSeparator+e),e=e.split(this.defaultSeparator);e.length>0;)if(n=e.shift(),r=r[n],!r){I18n.fallbacks&&!t.fallback&&(r=I18n.lookup(i,this.prepareOptions({locale:I18n.defaultLocale,fallback:!0},t)));break}return!r&&this.isValidNode(t,"defaultValue")&&(r=t.defaultValue),r}},I18n.prepareOptions=function(){for(var e,t={},n=arguments.length,i=0;n>i;i++)if(e=arguments[i])for(var o in e)this.isValidNode(t,o)||(t[o]=e[o]);return t},I18n.interpolate=function(e,t){t=this.prepareOptions(t);var n,i,o,r=e.match(this.PLACEHOLDER);if(!r)return e;for(var s=0;n=r[s];s++)o=n.replace(this.PLACEHOLDER,"$1"),i=t[o],this.isValidNode(t,o)||(i="[missing "+n+" value]"),regex=new RegExp(n.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(regex,i);return e},I18n.translate=function(e,t){t=this.prepareOptions(t);var n=this.lookup(e,t);try{return"object"==typeof n?"number"==typeof t.count?this.pluralize(t.count,e,t):n:this.interpolate(n,t)}catch(i){return this.missingTranslation(e)}},I18n.localize=function(e,t){switch(e){case"currency":return this.toCurrency(t);case"number":return e=this.lookup("number.format"),this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:return e.match(/^(date|time)/)?this.toTime(e,t):t.toString()}},I18n.parseDate=function(e){var t,n;if("object"==typeof e)return e;if(t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/)){for(var i=1;6>=i;i++)t[i]=parseInt(t[i],10)||0;t[2]-=1,n=t[7]?new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6])):new Date(t[1],t[2],t[3],t[4],t[5],t[6])}else"number"==typeof e?(n=new Date,n.setTime(e)):e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(n=new Date,n.setTime(Date.parse(e))):(n=new Date,n.setTime(Date.parse(e)));return n},I18n.toTime=function(e,t){var n=this.parseDate(t),i=this.lookup(e);return n.toString().match(/invalid/i)?n.toString():i?this.strftime(n,i):n.toString()},I18n.strftime=function(e,t){var n=this.lookup("date");if(!n)return e.toString();n.meridian=n.meridian||["AM","PM"];var i=e.getDay(),o=e.getDate(),r=e.getFullYear(),s=e.getMonth()+1,a=e.getHours(),l=a,c=a>11?1:0,u=e.getSeconds(),h=e.getMinutes(),d=e.getTimezoneOffset(),f=Math.floor(Math.abs(d/60)),p=Math.abs(d)-60*f,m=(d>0?"-":"+")+(f.toString().length<2?"0"+f:f)+(p.toString().length<2?"0"+p:p);l>12?l-=12:0===l&&(l=12);var g=function(e){var t="0"+e.toString();return t.substr(t.length-2)},v=t;return v=v.replace("%a",n.abbr_day_names[i]),v=v.replace("%A",n.day_names[i]),v=v.replace("%b",n.abbr_month_names[s]),v=v.replace("%B",n.month_names[s]),v=v.replace("%d",g(o)),v=v.replace("%e",o),v=v.replace("%-d",o),v=v.replace("%H",g(a)),v=v.replace("%-H",a),v=v.replace("%I",g(l)),v=v.replace("%-I",l),v=v.replace("%m",g(s)),v=v.replace("%-m",s),v=v.replace("%M",g(h)),v=v.replace("%-M",h),v=v.replace("%p",n.meridian[c]),v=v.replace("%S",g(u)),v=v.replace("%-S",u),v=v.replace("%w",i),v=v.replace("%y",g(r)),v=v.replace("%-y",g(r).replace(/^0+/,"")),v=v.replace("%Y",r),v=v.replace("%z",m)},I18n.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var n,i,o=0>e,r=Math.abs(e).toFixed(t.precision).toString(),s=r.split("."),a=[];for(e=s[0],n=s[1];e.length>0;)a.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);if(i=a.join(t.delimiter),t.precision>0&&(i+=t.separator+s[1]),o&&(i="-"+i),t.strip_insignificant_zeros){var l={separator:new RegExp(t.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};i=i.replace(l.zeros,"").replace(l.separator,"")}return i},I18n.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),e=this.toNumber(e,t),e=t.format.replace("%u",t.unit).replace("%n",e)},I18n.toHumanSize=function(e,t){for(var n,i,o=1024,r=e,s=0;r>=o&&4>s;)r/=o,s+=1;return 0===s?(n=this.t("number.human.storage_units.units.byte",{count:r}),i=0):(n=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][s]),i=0===r-Math.floor(r)?0:1),t=this.prepareOptions(t,{precision:i,format:"%n%u",delimiter:""}),e=this.toNumber(r,t),e=t.format.replace("%u",n).replace("%n",e)},I18n.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),e=this.toNumber(e,t),e+"%"},I18n.pluralize=function(e,t,n){var i;try{i=this.lookup(t,n)}catch(o){}if(!i)return this.missingTranslation(t);var r;switch(n=this.prepareOptions(n),n.count=e.toString(),Math.abs(e)){case 0:r=this.isValidNode(i,"zero")?i.zero:this.isValidNode(i,"none")?i.none:this.isValidNode(i,"other")?i.other:this.missingTranslation(t,"zero");break;case 1:r=this.isValidNode(i,"one")?i.one:this.missingTranslation(t,"one");break;default:r=this.isValidNode(i,"other")?i.other:this.missingTranslation(t,"other")}return this.interpolate(r,n)},I18n.missingTranslation=function(){for(var e='[missing "'+this.currentLocale(),t=arguments.length,n=0;t>n;n++)e+="."+arguments[n];return e+='" translation]'},I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale},I18n.t=I18n.translate,I18n.l=I18n.localize,I18n.p=I18n.pluralize;var I18n=I18n||{};I18n.translations={en:{date:{formats:{"default":"%Y-%m-%d","short":"%b %d","long":"%B %d, %Y"},day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],order:["year","month","day"]},time:{formats:{"default":"%a, %d %b %Y %H:%M:%S %z","short":"%d %b %H:%M","long":"%B %d, %Y %H:%M"},am:"am",pm:"pm",ago:"%{time} ago"},support:{array:{words_connector:", ",two_words_connector:" and ",last_word_connector:", and "}},errors:{format:"%{attribute} %{message}",messages:{inclusion:"is not included in the list",exclusion:"is reserved",invalid:"is invalid",confirmation:"doesn't match confirmation",accepted:"must be accepted",empty:"can't be empty",blank:"can't be blank",too_long:"is too long (maximum is %{count} characters)",too_short:"is too short (minimum is %{count} characters)",wrong_length:"is the wrong length (should be %{count} characters)",not_a_number:"is not a number",not_an_integer:"must be an integer",greater_than:"must be greater than %{count}",greater_than_or_equal_to:"must be greater than or equal to %{count}",equal_to:"must be equal to %{count}",less_than:"must be less than %{count}",less_than_or_equal_to:"must be less than or equal to %{count}",odd:"must be odd",even:"must be even",carrierwave_processing_error:"failed to be processed",carrierwave_integrity_error:"is not of an allowed file type",carrierwave_download_error:"could not be downloaded",extension_white_list_error:"You are not allowed to upload %{extension} files, allowed types: %{allowed_types}",extension_black_list_error:"You are not allowed to upload %{extension} files, prohibited types: %{prohibited_types}",rmagick_processing_error:"Failed to manipulate with rmagick, maybe it is not an image? Original Error: %{e}",mime_types_processing_error:"Failed to process file with MIME::Types, maybe not valid content-type? Original Error: %{e}",mini_magick_processing_error:"Failed to manipulate with MiniMagick, maybe it is not an image? Original Error: %{e}",in_between:"must be in between %{min} and %{max}",already_confirmed:"was already confirmed, please try signing in",confirmation_period_expired:"needs to be confirmed within %{period}, please request a new one",expired:"has expired, please request a new one",not_found:"not found",not_locked:"was not locked",not_saved:{one:"1 error prohibited this %{resource} from being saved:",other:"%{count} errors prohibited this %{resource} from being saved:"}}},activerecord:{errors:{messages:{taken:"has already been taken",record_invalid:"Validation failed: %{errors}"},models:{room:{attributes:{name:{taken:"is taken"}}}}},attributes:{contact:{relation_ids:"Roles"},"relation/custom":{name:"Name"},user:{email:"Email",name:"Name",password:"Password",password_confirmation:"Confirm password",remember_me:"Remember me"},document:{title:"Title"},event:{title:"Title",room:"Room",frequency:"Frequency"},room:{name:"Name"},"site/client":{callback_url:"Callback URL",id:"Client ID",name:"Name",secret:"Client Secret",url:"URL"}},models:{document:"File",event:"event",room:"room"}},number:{format:{separator:".",delimiter:",",precision:3,significant:!1,strip_insignificant_zeros:!1},currency:{format:{format:"%u%n",unit:"$",separator:".",delimiter:",",precision:2,significant:!1,strip_insignificant_zeros:!1}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}},human:{format:{delimiter:"",precision:3,significant:!0,strip_insignificant_zeros:!0},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},kb:"KB",mb:"MB",gb:"GB",tb:"TB"}},decimal_units:{format:"%n %u",units:{unit:"",thousand:"Thousand",million:"Million",billion:"Billion",trillion:"Trillion",quadrillion:"Quadrillion"}}}},datetime:{distance_in_words:{half_a_minute:"half a minute",less_than_x_seconds:{one:"less than 1 second",other:"less than %{count} seconds"},x_seconds:{one:"1 second",other:"%{count} seconds"},less_than_x_minutes:{one:"less than a minute",other:"less than %{count} minutes"},x_minutes:{one:"1 minute",other:"%{count} minutes"},about_x_hours:{one:"about 1 hour",other:"about %{count} hours"},x_days:{one:"1 day",other:"%{count} days"},about_x_months:{one:"about 1 month",other:"about %{count} months"},x_months:{one:"1 month",other:"%{count} months"},about_x_years:{one:"about 1 year",other:"about %{count} years"},over_x_years:{one:"over 1 year",other:"over %{count} years"},almost_x_years:{one:"almost 1 year",other:"almost %{count} years"}},prompts:{year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",second:"Seconds"}},helpers:{select:{prompt:"Please select"},submit:{create:"Create %{model}",update:"Update %{model}",submit:"Save %{model}",relation_custom:{create:"Save",update:"Update"}},button:{create:"Create %{model}",update:"Update %{model}",submit:"Save %{model}"}},flash:{actions:{create:{notice:"%{resource_name} was successfully created."},update:{notice:"%{resource_name} was successfully updated."},destroy:{notice:"%{resource_name} was successfully destroyed.",alert:"%{resource_name} could not be destroyed."}}},post:{input:"Share your thoughts here!",confirm_delete:"Delete post?",form:{title:"Post"},name:"post",one:"a post",other:"posts",title:{one:"Post",other:"Posts"}},mailboxer:{message_mailer:{subject_new:"%{subject}",subject_reply:"%{subject}",has_sent_new:{event:"has sent a new message to %{receiver}",group:"has sent a new message to %{receiver}",user:"has sent you a new message"},has_sent_reply:{event:"has sent a reply to %{receiver}",group:"has sent a reply to %{receiver}",user:"has sent you a reply"}},notification_mailer:{subject:"%{subject}"},"delete":"Delete",delete_confirm:"Do you want to move '%{object}' to trash?",form:{body:"Body",recipients:"Recipients",subject:"Subject"},mark_as_read:"Mark as read",reply:"Reply",send:"Send message",sent:"Your message was sent"},devise:{confirmations:{confirmed:"Your account was successfully confirmed. You are now signed in.",send_instructions:"You will receive an email with instructions about how to confirm your account in a few minutes.",send_paranoid_instructions:"If your email address exists in our database, you will receive an email with instructions about how to confirm your account in a few minutes."},failure:{already_authenticated:"You are already signed in.",inactive:"Your account was not activated yet.",invalid:"Invalid email or password.",invalid_token:"Invalid authentication token.",locked:"Your account is locked.",not_found_in_database:"Invalid email or password.",timeout:"Your session expired, please sign in again to continue.",unauthenticated:"You need to sign in or sign up before continuing.",unconfirmed:"You have to confirm your account before continuing."},mailer:{confirmation_instructions:{subject:"Confirmation instructions"},reset_password_instructions:{subject:"Reset password instructions"},unlock_instructions:{subject:"Unlock Instructions"}},omniauth_callbacks:{failure:'Could not authenticate you from %{kind} because "%{reason}".',success:"Successfully authenticated from %{kind} account."},passwords:{no_token:"You can't access this page without coming from a password reset email. If you do come from a password reset email, please make sure you used the full URL provided.",send_instructions:"You will receive an email with instructions about how to reset your password in a few minutes.",send_paranoid_instructions:"If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes.",updated:"Your password was changed successfully. You are now signed in.",updated_not_active:"Your password was changed successfully.",confirm:"Confirm password",forgot:"Forgot your password?",instructions:"Type the email address bound to your account and we will sent you instructions to change it:",update:"Change your password"},registrations:{destroyed:"Bye! Your account was successfully cancelled. We hope to see you again soon.",signed_up:"Welcome! You have signed up successfully.",signed_up_but_inactive:"You have signed up successfully. However, we could not sign you in because your account is not yet activated.",signed_up_but_locked:"You have signed up successfully. However, we could not sign you in because your account is locked.",signed_up_but_unconfirmed:"A message with a confirmation link has been sent to your email address. Please open the link to activate your account.",update_needs_confirmation:"You updated your account successfully, but we need to verify your new email address. Please check your email and click on the confirm link to finalize confirming your new email address.",updated:"You updated your account successfully."},sessions:{signed_in:"Signed in successfully.",signed_out:"Signed out successfully."},unlocks:{send_instructions:"You will receive an email with instructions about how to unlock your account in a few minutes.",send_paranoid_instructions:"If your account exists, you will receive an email with instructions about how to unlock it in a few minutes.",unlocked:"Your account has been unlocked successfully. Please sign in to continue."},links:{sign_in:"Sign in",sign_up:"Sign up",forgot_password:"Forgot you password?",confirmation_instructions:"Didn't receive confirmation instructions?",unlock_instructions:"Didn't receive unlock instructions?",sign_in_with:"Sign in with %{provider}"}},actor:{name:"Name"},avatar:{crop_image:"Crop the uploaded image",crop_submit:"Crop image",destroy:"Delete avatar",destroy_sure:"Are you sure you wan't to delete the selected avatar?",error:{no_file:"You have to select a file",no_image_file:"The file you uploaded isn't valid, it must be an image file",no_width:"The selection must not be empty"},list:"You have these avatars","new":"Create a new avatar",new_short:"New avatar",no_avatars:"You haven't any avatar, plesase create a new one.",one:"Avatar",other:"Avatars",original:"Original image",preview:"Preview",profile_change:"Change your avatar",set_default:"Set as default",set_default_sure:"Are you sure you wan't to set this avatar as default?",text:{"new":"... or upload a new one",use:"Use your saved avatars ..."},upload:"Upload"},views:{pagination:{first:"&laquo; First",last:"Last &raquo;",previous:"&lsaquo; Prev",next:"Next &rsaquo;",truncate:"..."}},language_name:"English",action:{send:"Send",accept:"Accept"},account:{cancel:"Cancel account",edit:"Edit account",email:{change:"Change email address"},lang:{change:"Change language"},one:"Account",password:{change:"Change password","new":"New password",retype:"Retype new password"},applications:"Applications"},activity:{audience:{hidden:{summary:"Restricted",full:"Shared with contacts of %{audience}"},"public":{summary:"Public",full:"Shared with all the Internet"},show:"Show",visible:{summary:"Restricted",full:"Shared with %{audience}"}},confirm_delete:"Delete activity?","delete":"Delete",last:"Last Activities",like:"I like",like_sentence:{one:"%{likers} likes this",other:"%{likers} like this",more:null},one:"Activity",other:"Activities",privacy:{contact:{myself:{group:"All members",user:"Your contacts"},outside:{group:"Members of %{receiver}",user:"Contacts of %{receiver}"}},relation:{one:"%{count} group",other:"%{count} groups"}},sending:"Sending",share:"Share",stream:{atom_title:"Activity Stream from %{subject}",title:{follow:"%{author} added %{activity_object} as contact",like:"%{author} likes %{activity_object}","make-friend":"%{author} also added %{activity_object} as contact",post:"%{author} posted %{activity_object}",updated:"%{author} posted %{activity_object}"}},title:"Activities",to_comment:"Comment",unlike:"I do not like anymore",verb:{follow:{User:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact."},Group:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact."},RemoteSubject:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact.",notification:{subject:"%{name} added you as contact.",body:"%{name} added you as contact."}}},like:{User:{title:"%{subject} is a fan of %{contact}.",message:"%{name} is now your fan."},Group:{title:"%{subject} is a fan of %{contact}.",message:"%{name} is now your fan."},RemoteSubject:{title:"%{subject} is a fan of %{contact}.",message:"%{name} is now your fan.",notification:{subject:"%{name} is now your fan.",body:"%{name} is now your fan."}}},join:{one:"%{sender} joined the %{title} %{thing}."},"make-friend":{User:{title:"%{subject} and %{contact} are now connected.",message:"%{name} also added you as contact."},Group:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact."},RemoteSubject:{title:"%{subject} and %{contact} are now connected.",message:"%{name} also added you as contact.",notification:{subject:"%{name} also added you as contact.",body:"%{name} also added you as contact."}}},post:{title:{other_wall:"%{sender} → %{receiver}"},RemoteSubject:{notification:{subject:"%{name} has posted something(%{direct_object}) in your wall",body:"%{name} has posted something(%{direct_object}) in your wall"}}},update:{RemoteSubject:{notification:{subject:"%{name} has updated %{direct_object} in your wall",body:"%{name} has updated something(%{direct_object}) in your wall"}}}}},activity_action:{follow:"Follow",sentence:{follow:{one:"%{followers} follows this",other:"%{followers} follow this"},more:{one:"%{count} more person",other:"%{count} more people"}},unfollow:"Unfollow"},ajax:{error:"There was an error in the remote server"},browse:"Browse",button:{cancel:"Cancel",create:"Create",save:"Save",update:"Update"},cheesecake:{changes:{details:"Change details",none:"No changes",save:"Save changes",saving:"Saving..."},form:{editing:"Editing",fields:{color:"Color",name:"Name",permissions:"Permissions",subsector:"Subsector"}},select:{hint:"Select by clicking the portraits"}},comment:{input:"Write a comment...",confirm_delete:"Delete comment?",name:"comment",one:"a comment",other:"comments",title:{one:"Comment",other:"Comments"},view_all:"View all comments (%{count})"},contact:{all_n:"All contacts (%{count})",confirm_delete:"Remove contact?",current:"Current","delete":"Delete",edit:{title:"Edit contact to %{name}",submit:"Edit contact"},empty:'You have not added anybody yet. What about <a href="%{explore}">exploring</a>?',error_count:{one:"1 error prohibited this contact from being saved:",other:"%{count} errors prohibited this contact from being saved:"},follow:"Follow",following:"Following",graph:{one:"Graph",empty:"We're sorry but you don't have any contacts yet. You can try the search box to look for somebody!"},in_common:{one:"1 contact in common",other:"%{count} contacts in common"},n:{one:"%{count} contact",other:"%{count} contacts"},"new":{button:{zero:"Add",one:"%{count} role",other:"%{count} roles"},link:"+ Add contact",title:"Add %{name} to your contacts",menu:"Add contact",submit:"Add Contact"},one:"Contact",other:"Contacts",pending:{other:"Added you",all:"All",all_n:"See all pending requests (%{count})"},received:"Received",relation:{one:"Contact type","new":"New type"},reply:{link:"+ Reply contact",title:"Reply contact request to %{name}",submit:"Reply contact"},saving:"Saving...",sent:"Added",suggestion:{one:"Suggestion",other:"Suggestions",all:"All"},type:{"new":"+ New type"},unfollow:"Unfollow",view_all:"View all..."},copyright:"2013 Copyright - All rights reserved",counter:{like:{one:'<span class="counter">%{count}</span> like',other:'<span class="counter">%{count}</span> likes'},view:{one:'<span class="counter">%{count}</span> view',other:'<span class="counter">%{count}</span> views'}},"delete":{confirm:"Delete %{element}}?"},dropdown:{notifications:"Notifications",privacy:"Privacy",settings:"Settings"},explore:{explore:{most_followed:"Most followed",most_popular:"Most popular"},header:{explore:"Explore",participants:"Participants",resources:"Resources",timeline:"Timeline",tags:"Tags",search:"Search"},link:"Explore",or:"or Explore",participants:{last_active:"Last active",last_registered:"Last registered",most_members:"Most members",registered_since:"since %{time}"},resources:{last_uploaded:"Last uploaded",most_visited:"Most viewed",uploaded_since:"since %{time}"},search:{title:"Advanced search",placeholder:"looking for...",submit:"Search"}},follower:{follower:{title:"Followers"},following:{title:"Followings"},n:{one:"1 follower",other:"%{count} followers"}},forgot_password:"Forgot you password?",frontpage:{main_title:"Social Stream, the core for building distributed social network websites.",presentation:{modular:{header:"Modular",p:'Available <a href="https://github.com/ging/social_stream#social-stream-components">Social Stream components</a> provide your application only with the features you need in your social network. Just add your desired gems to your Gemfile'},flexible:{header:"Flexible",p:'Completely customize your social network <a href="https://github.com/ging/social_stream/wiki/How-to-change-controllers%2C-models%2C-views%2C-assets-and-locales">changing any Social Stream component</a>, <a href="https://github.com/ging/social_stream/wiki/How-to-add-new-activity-objects">adding new activity objects</a> or changing the CSS using <a href="http://sass-lang.com/">Sass</a>'},community:{header:"Community",p:'Social Stream enjoys a growing community of developers. Feel free to drop a message at <a href="http://groups.google.com/group/social-stream">Social Stream\'s Google group</a> or <a href="http://stackoverflow.com/questions/tagged/social-stream">StackOverflow</a> if you have problems. <a href="https://github.com/ging/social_stream/issues/new">Open an issue</a> if you find a defect. Pull request are very welcomed!'}},stats:"%{users} users and %{groups} groups registered"},group:{one:"group",other:"groups",all:"All groups",all_n:"All groups (%{count})",by:"By groups",destroy:{one:"Destroy group",explanation:"All the activities, information and contacts of this group will be destroyed!",go_ahead:"Yes, I am sure. Destroy all!",last_confirm:"This is your last chance. Are you really sure?"},form:{title:"Group"},input:"What is the name of the group?",last:"Last groups",my:"My groups",n:{one:"%{count} group",other:"%{count} groups"},"new":{link:"New group",name:"Name",description:"Description",participants:"Participants",title:"New group"},cloud:"Group tag cloud",most:{followed:"Most followed",liked:"Most liked"},tags:"Tags",title:{one:"Group",other:"Groups"},view_all:"View all..."},header:{icon:{contacts:"Contacts",home:"Home",messages:"Messages",repository:"Repository",calendar:"Calendar"}},help:"Help",home:"Home",inbox:{one:"Inbox"},invitation:{"e-mails":"E-mail addresses",error:"Your request was unprocessable. Make sure you wrote correct e-mail addresses.",invited:"%{sender} has invited you to %{site}!",join:"Invite other people to join %{site}!",join_me:"Join me at %{site}!",one:"Invitation",other:"Invitations",toolbar:"Invite",success:"Your invitations have successfully been sent",text:"Write your own message"},layout:{more:"See more (%{count})"},like:{n:{one:"%{count} like",other:"%{count} likes"}},location:{message:"You are here > %{location}",base:"You are here",separator:" > "},menu:{options:"Menu Options",information:"Information",wall:"Wall"},message:{answer:"Write your answer",inbox:"Inbox",look:"Take a look at this conversation","new":"New Message",one:"Message",other:"Messages",participants:"Participants",send:"Send a message",sentbox:"Sentbox",trash:"Trash"},notification:{all_text:"Read the whole text at %{url}",confirm:"Confirm %{sender} as contact?","default":"You have a new notification",destroy_sure:"Do you want to delete this notification?",fan:"%{sender} is now %{whose} fan.",follow:{group:"%{sender} added %{who} as contact.",user:"%{sender} added %{who} as contact."},hello:"Hi %{receiver},",like:{group:"%{sender} likes %{whose} %{thing}.",user:"%{sender} likes %{whose} %{thing}."},look:"Take a look at %{sender}'s profile",makefriend:{group:"%{sender} also added %{who} as contact.",user:"%{sender} also added %{who} as contact."},one:"Notification",other:"Notifications",post:{group:"%{title} -- by %{sender} in %{whose} wall",user:"%{title} -- by %{sender} in %{whose} wall"},read:"Mark as read",read_all:"Mark all as read",unread:"Mark as unread",update:{group:"%{sender} updated %{thing} in %{whose} wall.",user:"%{sender} updated %{thing} in %{whose} wall."},visit:"Visit %{url} and check all your notifications.",watch:"Watch it at %{url}",watch_it:"Watch it!",who:{group:"%{name}",user:"you"},whose:{group:"%{receiver}'s",user:"your"}},preposition:{and:"and","true":"on"},profile:{one:"Profile",age:"Age",is_on:"is on",must_be_signed_id:"You must be signed in",group:{about:"About us",birthday:"Anniversary",experience:"Area of expertise",info:"Group information",tags:"Group tags"},user:{about:"About me",birthday:"Birthday",experience:"Experience",info:"Personal information",tags:"User tags"},actualcity:"Actual City",address:"Address",contact:"Contact information",country:"Country",email:"E-mail",empty:"These fields are empty. Please, update them.",fax:"Fax",mobile:"Mobile",organization:"Organization",phone:"Phone",profile:"Edit profile",tags:{"default":"social, stream,",other:"Tags"},website:"Website",update:{error:"Please, check the format of your profile:",success:"Your profile has been updated"}},"public":{other:"Everybody"},permission:{description:{"default":{brief:{create:{activity:"Post to your wall"},follow:{nil:"Follow their activity"},read:{activity:"Read your wall"},represent:{nil:"Administrate"},notify:{nil:"Notify"}},detailed:{create:{activity:{positive:"They WILL BE ABLE to post new activities to your wall",negative:"They WILL NOT BE ABLE to post new activities to your wall"}},follow:{nil:{positive:"Activities of the contacts at %{relation} WILL APPEAR in your home wall",negative:"Activities of the contacts at %{relation} WILL APPEAR in your home wall"}},read:{activity:{positive:"They WILL BE ABLE to read posts in your wall, except those shared with specific contacts",negative:"They WILL NOT BE ABLE to read posts in your wall, except those marked as public"}},represent:{nil:{positive:"They WILL BE ABLE to change session and act as %{name}",negative:"They WILL NOT BE ABLE to change session and act as %{name}"}},notify:{nil:{positive:"Activities WILL BE notified to contacts at %{name}",negative:"Activities WILL NOT BE notified to contacts at %{name}"}}}}},of_relation:{choose:"Permissions in <strong>%{name}</strong> role"},postit:"Manage the permissions of your contacts and create new roles",public_info:"Read your public information"},privacy:{intro:"Contacts at <strong>%{relation}</strong> level are only allowed to:",rule:{add:"Add",title:"Privacy rules",saved:"Privacy rules saved"}},relation_custom:{confirm_delete:"Delete this role?","delete":"Delete",edit:"Change name",list:{title:"Roles"},"new":"+ New role",title:"Privacy"},relation_public:{name:"Public"},repository:{filter:"filter",title:"Repository",order:{by:"Order by",last_modified:"Last modified",most_popular:"Most popular"}},representation:{notice:"Your session has changed. Now you are acting on behalf of %{subject}. Use the top-right menu to return to your session","switch":"Switch session"},required:"(*) These fields are required",search:{all_results:"Search all %{subject} (%{count})",at_least:{one:"Write at least %{count} character",other:"Write at least %{count} characters"},global:{name:"Global search",first_result:{more:"Showing the first %{count} results.",one:"Showing the first result."},query:"See more results for %{query} >"},name:"Search",no_subject_found:"No %{subject} was found.",nothing:"Nothing found",searching:"Searching: %{query}",show_all:"All",write:"Write your query ...",wrong:"There seems to be a problem with the search engine"},settings:{api_key:{briefing:"Manage your API key",confirm:"Are you sure?",empty:"Empty Token",explanation:"This is your API key",name:"API Key",regenerate:"Regenerate API key"},cancel_account:{briefing:"Lets you cancel your account"},email_change:{briefing:"Change your email"},lang_change:{briefing:"Change your language",name:"Change your language"},error:"Some errors raised when saving your changes","for":"Settings for",main:"Settings",manage:{name:"Admin Contacts",briefing:"Settings for contacts",explanation:"Change contacts permissions"},notifications:{briefing:"Settings about notifications behaviour and mail alerts",name:"Notifications",by_email:{name:"Send me an email when I receive a notification",always:"Always",never:"Never"}},one:"Settings",password_change:{briefing:"Change your password"},success:"Your settings were correctly changed"},share:"Share",sign_in:"Sign in",sign_out:"Sign out",sign_up:"Sign up",site:{name:"Social Stream",client:{added:"Added sites",index:{title:"Client sites"},"new":{link:"Add site",title:"Register new client site"}}},subject:{this_is_you:"This is you!"},sure:"Are you sure?",unknown:"Unknown",user:{all:"All users",all_n:"All users (%{count})",by:"By Users",one:"user",other:"users",title:{one:"User",other:"Users"}},welcome:"Welcome to %{site}!",lang:{browser:"Auto-detect browser language",none:"Language independent content"},audio:{confirm_delete:"Delete audio?",title:{one:"Audio",other:"Audios"},mine:"My audios",name:"audio",not_mine:"Audios",one:"an audio",other:"audios",processing:"Processing audio clip. Please wait..."},details:{msg:"See details..."},document:{actions:{"delete":"Delete",details:"Details",download:"Download",edit:"Edit"},all:"All files",by:"by %{author}",confirm_delete:"Delete file?",description:{input:"Add a description here"},filter:"filter",form:{title:"File"},info:{author:"Author",date:{created_at:"Created at",updated_at:"Updated at"},description:"Description",file:"File",size:"Size",tags:"Tags",title:"Title"},mine:"My files",name:"file","new":{link:"Add file",title:"New file"},new_activity:{attach:"Attach file"},not_mine:"Files",one:"a file",other:"files",scope:{network:"Network",own:"Own"},simple_all:"All",title:{input:"File title",one:"File",other:"Files"}},picture:{confirm_delete:"Delete picture?",mine:"My pictures",name:"picture",not_mine:"Pictures",one:"a picture",other:"pictures",title:{one:"Picture",other:"Pictures"}},resource:{all:"All Resources",confirm_delete:"Delete resource?",title:"Resources",mine:"My resources",not_mine:"Resources"},video:{confirm_delete:"Delete video?",mine:"My videos",name:"video",not_mine:"Videos",one:"a video",other:"videos",processing:"Processing video. Please, wait...",title:{one:"Video",other:"Videos"}},scheduler:{frequency:{one_off:{form:{message:"Event does not have recurrence",option:"one-off"}},daily:{description:{one:"Every day",other:"Every %{count} days"},form:{option:"daily"}},weekly:{description:{one:"Every %{week_days}",other:"Every %{week_days} on %{count} weeks"},form:{every_week:"Every %{form_field} week(s) on the following days:",option:"weekly"}},monthly:{description:{one:"The %{week_day_order} %{week_day} of the month",other:"The %{week_day_order} %{week_day} of every %{count} months",week_day_order:{1:"first",2:"second",3:"third","-1":"last"}},form:{option:"monthly",week_day:"The %{order_field} %{week_field} of every %{interval_field} month(s)",week_day_order_option:{1:"first",2:"second",3:"third","-1":"last"}}}}},boxy:{close_text:"[close]"},event:{activity_action:{follow:"Follow",sentence:{one:"%{followers} follows this",other:"%{followers} follow this"},unfollow:"Unfollow"},calendar:"Calendar",confirm_delete:"Delete event?",modal:{view_in_calendar:"View in calendar"},name:"event","new":{title:"New event"},one:"an event",other:"events",popover:{title:"Events on %{date}"},poster:{button:"Upload",update:"Upload poster"},title:{one:"Event",other:"Events"},wall_post:"Published an event: %{title}"},room:{confirm_delete:"Delete room?","delete":"Delete",settings:{title:"Rooms",description:"Rooms available for event celebration"},watermark:{name:"New room"}},linkser:{title:"Linkser"},link:{by:"by %{author}",confirm_delete:"Delete link?",errors:{loading:"Error loading",only_webs:"Only webpages are supported"},form:{title:"Link"},input:"Write the web address",name:"link",one:"a link",other:"links",title:"Links"},chat:{connecting:"Connecting",reconnecting:"Reconnecting",disconnected:"Disconnected",unableconnect:"Out of Service",title:"Chat",password:"Password",zerousers:"No users connected",search:"Search contacts",zerocontacts:"No contacts found",status:{choose:"Choose status",available:"Available",away:"Away",dnd:"Busy",offline:"Offline"},settings:{title:"Enable and configure Social Stream Chat",checkbox:"Enable or disable Social Stream Chat",update:"Update Settings"},notify:{offline:"You are offline",guestOffline:"{{name}} is offline"},videochat:{disconnected:"Videochat disconnected",disconnecting:"Videochat disconnecting...",negotiating:"Negotiating...",connectingWait:"Connecting...",connecting:"Connecting to the server...",waiting:"Waiting for response...",establishing:"Establishing...",connnected:"Videochat connected.",unable:"Unable to init videochat.",serverIssue:"Server Error: Invalid response",call:"{{name}} wants to start a video call",rejected:"{{name}} has rejected your call",rejectedBusy:"{{name}} is busy",accept:"Accept",deny:"Deny",clientIssue:"{{name}}'s client not support videochat",guestOffline:"Unable to connect. {{name}} is offline",offline:"Unable to connect. You are offline",cancel:"{{name}} cancel the videocall",requirements:"You don't have the minimum requirements to run videocall application. Please upgrade to the latest version of Flash."},muc:{group:"{{group}} group",join:"{{nick}} joined in the room.",leave:"{{nick}} has left the room.",occupants:"Occupants",joining:"Joining...",joinError:"You can't join in the room \n {{errorMsg}}",offline:"You are offline"},game:{call:"{{name}} wants to play a {{game}} game",accept:"Accept",deny:"Deny",offline:"Unable to connect. You are offline",guestOffline:"Unable to connect. {{name}} is offline",unable:"Unable to init game.",rejected:"{{name}} has rejected your invitation",rejectedBusy:"{{name}} is busy",cancel:"{{name}} cancel the invitation",finish:"{{name}} close the game",waiting:"Waiting for response...",unknown:"Unknown response",clientIssue:"{{name}}'s client not support games"}},authorization:{form:{accept:"Accept",cancel:"Cancel"},"new":{title:"Authorize %{client}?",permission:{title:"The site %{client} will be able to:"}}},hello:"Hello world"},es:{post:{input:"Comparte tus ideas...",confirm_delete:"¿Borrar texto?",form:{title:"Texto"},name:"publicación",one:"una publicación",other:"publicaciones",title:{one:"Texto",other:"Textos"}},actor:{name:"Nombre"},avatar:{crop_image:"Recorta la imagen",crop_submit:"Recortar",destroy:"Borrar avatar",destroy_sure:"¿Borrar el avatar seleccionado?",error:{no_file:"Tienes que seleccionar un fichero",no_image_file:"El fichero no es válido, tiene que ser una imagen",no_width:"La selección no puede estar vacía"},list:"Tienes estos avatars","new":"Crear un nuevo avatar",new_short:"Nuevo avatar",no_avatars:"No tienes ningún avatar, ¡crea uno!",one:"Avatar",other:"Avatares",original:"Imagen original",preview:"Vista previa",profile_change:"Cambia tu avatar",set_default:"Seleccionar",set_default_sure:"¿Seleccionar este avatar?",text:{"new":"... o sube uno nuevo",use:"Usa uno de tus avatares..."},upload:"Subir"},errors:{messages:{expired:"ha expirado, por favor solicita una nueva",not_found:"no se encontró",already_confirmed:"ya fue confirmado, por favor intenta iniciar sesión",not_locked:"no estaba bloqueado",not_saved:{one:"Un error ocurrió al tratar de guardar %{resource}:",other:"%{count} errores ocurrieron al tratar de guardar %{resource}:"},accepted:"debe ser aceptado",blank:"no puede estar en blanco",confirmation:"no coincide con la confirmación",empty:"no puede estar vacío",equal_to:"debe ser igual a %{count}",even:"debe ser par",exclusion:"está reservado",greater_than:"debe ser mayor que %{count}",greater_than_or_equal_to:"debe ser mayor que o igual a %{count}",inclusion:"no está incluido en la lista",invalid:"no es válido",less_than:"debe ser menor que %{count}",less_than_or_equal_to:"debe ser menor que o igual a %{count}",not_a_number:"no es un número",not_an_integer:"debe ser un entero",odd:"debe ser impar",record_invalid:"La validación falló: %{errors}",taken:"ya está en uso",too_long:"es demasiado largo (%{count} caracteres máximo)",too_short:"es demasiado corto (%{count} caracteres mínimo)",wrong_length:"no tiene la longitud correcta (%{count} caracteres exactos)"},format:"%{attribute} %{message}",template:{body:"Se encontraron problemas con los siguientes campos:",header:{one:"No se pudo guardar este/a %{model} porque se encontró 1 error",other:"No se pudo guardar este/a %{model} porque se encontraron %{count} errores"}}},devise:{failure:{already_authenticated:"Ya has iniciado una sesión.",unauthenticated:"Tienes que iniciar sesión o registrarte para poder continuar.",unconfirmed:"Tienes que confirmar tu cuenta para poder continuar.",locked:"Tu cuenta está bloqueada.",invalid:"Contraseña o Correo inválidos.",invalid_token:"Código de autenticación inválido.",timeout:"Tu sesión expiró, por favor inicia sesión nuevamente para continuar.",inactive:"Tu cuenta aún no ha sido activada."},sessions:{link:"Iniciar Sesión",signed_in:"Sesión iniciada.",signed_out:"Sesión finalizada."},passwords:{link:"¿Olvidaste tu contraseña?",send_instructions:"Vas a recibir un correo con instrucciones sobre cómo resetear tu contraseña en unos pocos minutos.",updated:"Tu contraseña fue cambiada. Ya iniciaste sesión.",send_paranoid_instructions:"Si tu Correo existe en nuestra base de datos, vas a recibir un correo con instrucciones sobre cómo resetear tu contraseña en tu bandeja de entrada.",confirm:"Confirmar contraseña",forgot:"¿Olvidaste tu contraseña?",instructions:"Introduce el correo electrónico y te mandaremos instrucciones para cambiarlo",update:"Cambiar contraseña"},confirmations:{link:"¿No recibiste instrucciones de confirmación?",send_instructions:"Vas a recibir un correo con instrucciones sobre cómo confirmar tu cuenta en unos pocos minutos.",send_paranoid_instructions:"Si tu Correo existe en nuestra base de datos, vas a recibir un correo con instrucciones sobre cómo confirmar tu cuenta en unos pocos minutos.",confirmed:"Tu cuenta fue confirmada. Ya iniciaste sesión."},registrations:{link:"Crear cuenta",signed_up:"Bienvenido. Tu cuenta fue creada.",inactive_signed_up:"Tu cuenta fue creada. Sin embargo, no podemos iniciar tu sesión porque tu cuenta está %{reason}.",updated:"Tu cuenta fue actualizada.",destroyed:"Fue grato tenerte con nosotros. Tu cuenta fue cancelada."},unlocks:{link:"¿No recibiste instrucciones para desbloquear?",send_instructions:"Vas a recibir instrucciones para desbloquear tu cuenta en unos pocos minutos.",send_paranoid_instructions:"Si tu cuenta existe, vas a recibir instrucciones para desbloquear tu cuenta en unos pocos minutos.",unlocked:"Tu cuenta fue desbloqueada. Ya iniciaste sesión."},omniauth_callbacks:{success:"Has sido autorizado satisfactoriamente de la cuenta %{kind}.",failure:'No has sido autorizado en la cuenta %{kind} porque "%{reason}".'},mailer:{confirmation_instructions:{subject:"Instrucciones de confirmación"},reset_password_instructions:{subject:"Instrucciones de recuperación de contraseña"},unlock_instructions:{subject:"Instrucciones para desbloquear"}},links:{sign_in:"Entrar",sign_up:"Registrarse",forgot_password:"¿Olvidaste tu contraseña?",confirmation_instructions:"¿No recibiste instrucciones de confirmación?",unlock_instructions:"¿No recibiste instrucciones de desbloqueo?",sign_in_with:"Entrar con %{provider}"}},language_name:"Español",action:{send:"Enviar",accept:"Aceptar"},account:{cancel:"Cancelar lar cuenta",edit:"Editar cuenta",email:{change:"Cambiar dirección de correo"},lang:{change:"Cambiar idioma"},one:"Cuenta",password:{change:"Cambiar contraseña","new":"Nueva contraseña",retype:"Repetir nueva contraseña"},applications:"Aplicaciones"},activerecord:{attributes:{contact:{relation_ids:"Los roles"},"relation/custom":{name:"Nombre"},user:{email:"Correo",name:"Nombre",password:"Contraseña",password_confirmation:"Confirmar contraseña",remember_me:"Recuérdame"},document:{title:"Título"},event:{title:"Título",room:"Espacio",frequency:"Repetición"},room:{name:"Nombre"},"site/client":{callback_url:"Callback URL",id:"Client ID",name:"Nombre",secret:"Client Secret",url:"URL"}},models:{document:"Fichero",event:"evento",room:"espacio"},errors:{models:{room:{attributes:{name:{taken:"está repetido"}}}}}},activity:{audience:{hidden:{summary:"Restringido",full:"Compartido con contactos de %{audience}"},"public":{summary:"Público",full:"Accesible por toda Internet"},show:"Mostrar",visible:{summary:"Restringido",full:"Compartido con %{audience}"}},confirm_delete:"¿Borrar actividad?","delete":"Borrar",last:"Últimas actividades",like:"Me gusta",like_sentence:{one:"A %{likers} le gusta esto",other:"A %{likers} les gusta esto",more:null},one:"Actividad",other:"Actividades",privacy:{contact:{myself:{group:"Todos los integrantes",user:"Tus contactos"},outside:{group:"Integrantes de %{receiver}",user:"Contactos de %{receiver}"}},relation:{one:"%{count} grupo",other:"%{count} grupos"}},sending:"Enviando",share:"Compartir",stream:{atom_title:"Actividades de %{subject}",title:{follow:"%{author} añadió a %{activity_object} como contacto",like:"A %{author} le gusta %{activity_object}","make-friend":"%{author} también añadió a %{activity_object} como contacto",post:"%{author} publicó %{activity_object}",updated:"%{author} actualizó %{activity_object}"}},title:"Actividades",to_comment:"Comentar",unlike:"Ya no me gusta",verb:{follow:{User:{title:"%{subject} añadió %{contact} como contacto.",message:"%{name} te añadió como contacto."},Group:{title:"%{subject} se unió al grupo %{contact}.",message:"%{name} te añadió como contacto."}},like:{User:{title:"%{subject} es fan de %{contact}.",message:"%{name} es tu fan."},Group:{title:"%{subject} es fan de %{contact}.",message:"%{name} es tu fan."}},"make-friend":{User:{title:"%{subject} y %{contact} ahora están conectados.",message:"%{name} también te añadió como su contacto."},Group:{title:"%{subject} añadió a %{contact}.",message:"%{name} te añadió."}},post:{title:{other_wall:"%{sender} → %{receiver}"}},join:{one:"%{sender} joined the %{title} %{thing}."}}},activity_action:{follow:"Seguir",sentence:{follow:{one:"%{count} sigue esto",other:"%{count} siguen esto"},more:{one:"%{count} persona más",other:"%{count} personas más"}},unfollow:"Dejar de seguir"},ajax:{error:"Ha habido un error en el servidor remoto"},browse:"Descubrir",button:{cancel:"Cancelar",create:"Crear",save:"Guardar",update:"Actualizar"},cheesecake:{changes:{details:"Cambios detallados",none:"Sin cambios",save:"Guardar cambios",saving:"Guardando..."},form:{editing:"Editando",fields:{color:"Color",name:"Nombre",permissions:"Permisos",subsector:"Subsector"}},select:{hint:"Selecciona haciendo click en los retratos"}},comment:{input:"Comentar...",confirm_delete:"¿Borrar commentario?",name:"comentario",one:"un comentario",other:"comentarios",view_all:"Ver todos los comentarios (%{count})",title:{one:"Comentario",other:"Comentarios"}},contact:{all_n:"Todos los contactos (%{count})",confirm_delete:"¿Borrar contacto?",current:"Actuales","delete":"Borrar",edit:{title:"Editar contacto con %{name}",submit:"Editar contacto"},empty:'Aún no has añadido a nadie. ¿Qué te parece <a href="%{explore}">explorar</a>?',error_count:{one:"1 error impidió que se guardara este contacto:",other:"%{count} errores impidieron que se guardara este contacto"},follow:"Seguir",following:"Siguiendo",graph:{one:"Gráfico",empty:"Lo sentimos pero aún no tienes contactos, pero ¡puedes probar a buscar en la caja de búsqueda!"},in_common:{one:"1 contacto en común",other:"%{count} contactos en común"},n:{one:"%{count} contacto",other:"%{count} contactos"},"new":{button:{zero:"Añadir",one:"%{count} rol",other:"%{count} roles"},link:"+ Añadir contacto",title:"Añadir a %{name} como contacto",menu:"Añadir contacto",submit:"Añadir"},one:"Contacto",other:"Contactos",pending:{other:"Te añadieron",all:"Todos",all_n:"Ver todas los contactos pendientes (%{count})"},received:"Recibidos",relation:{one:"Tipo de contacto","new":"Nuevo tipo"},reply:{link:"+ Responder contacto",title:"Responder contacto con %{name}",submit:"Responder contacto"},saving:"Guardando...",sent:"Añadidos",suggestion:{one:"Sugerencia",other:"Sugerencias",all:"Todas"},type:{"new":"+ Nuevo tipo"},unfollow:"Dejar de seguir",view_all:"Ver todos..."},copyright:"2013 Copyright - Derechos reservados",counter:{like:{one:'<span class="counter">%{count}</span> fan',other:'<span class="counter">%{count}</span> fans'},view:{one:'<span class="counter">%{count}</span> vista',other:'<span class="counter">%{count}</span> vistas'}},"delete":{confirm:"¿Borrar %{element}}?"},dropdown:{notifications:"Notificaciones",privacy:"Privacidad",settings:"Ajustes"},explore:{explore:{most_followed:"Más seguidos",most_popular:"Más populares"},header:{explore:"Explorar",participants:"Participantes",resources:"Recursos",timeline:"Linea temporal",tags:"Etiquetas",search:"Buscar"},link:"Explora",or:"o Explora",participants:{last_active:"Últimos activos",last_registered:"Últimos registrados",most_members:"Más integrantes",registered_since:"desde el %{time}"},resources:{last_uploaded:"Últimos subidos",most_visited:"Más vistos",uploaded_since:"desde el %{time}"},search:{placeholder:"buscando...",submit:"Buscar",title:"Búsqueda avanzada"}},follower:{follower:{title:"Seguidores"},following:{title:"Siguiendo"},n:{one:"1 seguidor/a",other:"%{count} seguidores"}},forgot_password:"¿Olvidaste tu contraseña?",frontpage:{main_title:"Social Stream, el núcleo para construir webs con características de red social distribuída",presentation:{modular:{header:"Modular",p:'Los <a href="https://github.com/ging/social_stream#social-stream-components">componentes de Social Stream</a> disponibles aportan solo las características que necesitas para tu red social. Simplemente añade las gemas que necesites a tu Gemfile'},flexible:{header:"Flexible",p:'Personaliza completamente tu red social <a href="https://github.com/ging/social_stream/wiki/How-to-change-controllers%2C-models%2C-views%2C-assets-and-locales">cambiando cualquier componente de Social Stream</a>, <a href="https://github.com/ging/social_stream/wiki/How-to-add-new-activity-objects">añadiendo nuevas actividades</a> o cambiando el CSS con <a href="http://sass-lang.com/">SASS</a>'},community:{header:"Comunidad",p:'Social Stream disfruta de una comunidad creciente de desarrolladores. No dudes en dejar un mensaje en <a href="http://groups.google.com/group/social-stream">el Google group de Social Stream</a> o <a href="http://stackoverflow.com/questions/tagged/social-stream">StackOverflow</a> si te encuentras con problemas. <a href="https://github.com/ging/social_stream/issues/new">Abre un reporte</a> si encutras algún fallo. ¡Los pull request son muy bienvenidos!'}},stats:"%{users} personas and %{groups} grupos registrados"},group:{one:"grupo",other:"grupos",all:"Todos los grupos",all_n:"Todos los grupos (%{count})",by:"Por grupos",destroy:{one:"Destruir grupo",explanation:"¡Todas las actividades, información y contactos de este grupo serán destruídos!",go_ahead:"Sí, estoy seguro/a. ¡Destruirlo todo!",last_confirm:"Es tu última oportunidad. ¿Realmente estás seguro/a?"},form:{title:"Grupo"},input:"¿Cuál es el nombre del grupo?",last:"Últimos grupos",my:"Mis grupos",n:{one:"%{count} grupo",other:"%{count} groupos"},"new":{link:"Nuevo grupo",name:"Nombre",description:"Descripción",participants:"Participantes",title:"Nuevo grupo"},cloud:"Nube de etiquetas de grupos",most:{followed:"Más seguidos",liked:"Más populares"},tags:"Etiquetas",title:{one:"Grupo",other:"Grupos"},view_all:"Ver todos..."},header:{icon:{contacts:"Contactos",home:"Inicio",messages:"Mensajes",repository:"Repositorio",calendar:"Calendar"}},help:"Ayuda",helpers:{submit:{relation_custom:{create:"Guardar",update:"Guardar"},create:"Crear %{model}",submit:"Guardar %{model}",update:"Actualizar %{model}"},select:{prompt:"Por favor seleccione"}},home:"Inicio",inbox:{one:"Entrada"},invitation:{"e-mails":"Correo electrónico",error:"No se pudo atender a la petición. Asegurate de haber escrito una dirección de correo correcta",invited:"%{sender} te ha invitado a %{site}",join:"¡Invita a otras personas a unirse a %{site}!",join_me:"¡Únete a mi en %{site}!",one:"Invitación",other:"Invitaciones",toolbar:"Invitar",success:"Se han enviado tus invitaciones",text:"Escribe tu mensaje"},layout:{more:"Ver más (%{count})"},like:{n:{one:"1 fan",other:"%{count} fans"}},location:{message:"Estás aquí > %{location}",base:"Estás aquí",separator:" > "},mailboxer:{"delete":"Borrar",delete_confirm:"¿Quieres enviar '%{object}' a la papelera?",form:{body:"Mensaje",recipients:"Para",subject:"Asunto"},mark_as_read:"Marcar como leido",message_mailer:{has_sent_new:{event:"ha mandado un nuevo mensaje a %{receiver}",group:"ha mandado un nuevo mensaje a %{receiver}",user:"te ha mandado un nuevo mensaje"},has_sent_reply:{event:"ha mandado una respuesta a %{receiver}",group:"ha mandado una respuesta a %{receiver}",user:"te ha mandado una respuesta"},subject_new:"%{subject}",subject_reply:"%{subject}"},notification_mailer:{subject:"%{subject}"},reply:"Contestar",send:"Enviar mensaje",sent:"Tu mensaje fue enviado"},menu:{options:"Opciones",information:"Información",wall:"Muro"},message:{answer:"Responder",inbox:"Entrada",look:"Échale un vistazo a esta conversación","new":"Nuevo mensaje",one:"Mensaje",other:"Mensajes",participants:"Participantes",send:"Enviar un mensaje",sentbox:"Salida",trash:"Papelera"},notification:{all_text:"Lee el texto entero en %{url}",confirm:"¿Confirmar contacto con %{sender}?","default":"Tienes una nueva notificación",destroy_sure:"¿Borrar notificación?",fan:"%{sender} es ahora fan %{whose}.",follow:{group:"%{sender} añadió a %{who} como contacto.",user:"%{sender} te añadió como contacto."},hello:"Hola %{receiver},",like:{group:"A %{sender} le gusta el %{thing} %{whose}.",user:"A %{sender} le gusta tu %{thing}."},look:"Echa un vistazo al perfil de %{sender}",makefriend:{group:"%{sender} también añadió a %{who} como contacto.",user:"%{sender} también te añadió como contacto."},one:"Notificación",other:"Notificaciones",post:{group:"%{title} -- por %{sender} en el muro %{whose}",user:"%{title} -- por %{sender} en tu muro"},read:"Marcar como leída",read_all:"Marcar todas como leídas",unread:"Marcar como no leídas",update:{group:"%{sender} actualizó %{thing} en el muro %{whose}.",user:"%{sender} actualizó %{thing} en tu muro."},visit:"Visita %{url} y comprueba todas tus notificaciones.",watch:"Échale un vistazo en %{url}",watch_it:"¡Échale un vistazo!",who:{group:"%{name}",user:"tú"},whose:{group:"de %{receiver}",user:"tuyo"}},preposition:{and:"y","true":"on"},profile:{one:"Perfil",age:"Edad",is_on:"esta en",must_be_signed_id:"Debes identificarte",group:{about:"Sobre nosotros/as",birthday:"Aniversario",experience:"Temas que se trabajan",info:"Información sobre el grupo",tags:"Etiquetas del grupo"},user:{about:"Sobre mí",birthday:"Cumpleaños",experience:"Intereses",info:"Información personal",tags:"Etiquetas"},actualcity:"Ciudad actual",address:"Dirección",contact:"Información de contacto",country:"País",email:"Correo electrónico",empty:"Estos campos están vacíos. ¡Actualízalos!",fax:"Fax",mobile:"Móvil",organization:"Organización",phone:"Teléfono",profile:"Editar perfil",tags:{"default":"social, stream,",other:"Etiquetas"},website:"Sitio web",update:{error:"Por favor, comprueba el formato de tu perfil:",success:"Tu perfil se ha actualizado"}},"public":{other:"Todo el mundo"},permission:{description:{"default":{brief:{create:{activity:"Publicar en vuestro muro"},follow:{nil:"Seguir su actividad"},read:{activity:"Leer vuestro muro"},represent:{nil:"Administrar"},notify:{nil:"Notificar"}},detailed:{create:{activity:{positive:"Los contactos en %{relation} PODRÁN publicar actividades en vuestro muro",negative:"Los contactos en %{relation} NO PODRÁN publicar actividades en vuestro muro"}},follow:{nil:{positive:"Las actividades de los contactos en %{relation} APARECERÁN en vuestra página de inicio",negative:"Las actividades de los contactos en %{relation} NO APARECERÁN en vuestra página de inicio"}},read:{activity:{positive:"Los contactos en %{relation} PODRÁN leer las publicaciones que aparezcan en vuestro muro, salvo las que compartáis solo con otros roles",negative:"Los contactos en %{relation} NO PODRÁN leer las publicaciones que aparezcan en vuestro muro, salvo las que marques como públicas"}},represent:{nil:{positive:"Los contactos en %{relation} PODRÁN cambiar sesión para actuar en nombre de %{name}",negative:"Los contactos en %{relation} NO PODRÁN cambiar sesión para actuar en nombre de %{name}"}},notify:{nil:{positive:"Las actividades SE NOTIFICARÁN a los contactos en %{relation}",negative:"Las actividades NO SE NOTIFICARÁN a los contactos en %{relation}"}}}},user:{brief:{create:{activity:"Publicar en tu muro"},read:{activity:"Leer tu muro"},represent:{nil:"Administrarte"},notify:{nil:"Notificarles"}},detailed:{create:{activity:{positive:"Los contactos en %{relation} PODRÁN publicar actividades en tu muro",negative:"Los contactos en %{relation} NO PODRÁN publicar actividades en tu muro"}},follow:{nil:{positive:"Las actividades de los contactos en %{relation} APARECERÁN en tu página de inicio",negative:"Las actividades de los contactos en %{relation} NO APARECERÁN en tu página de inicio"}},read:{activity:{positive:"Los contactos en %{relation} PODRÁN leer las publicaciones que aparezcan en tu muro, salvo las que compartáis solo con otros roles",negative:"Los contactos en %{relation} NO PODRÁN leer las publicaciones que aparezcan en tu muro, salvo las que marques como públicas"}},represent:{nil:{positive:"Los contactos en %{relation} PODRÁN cambiar sesión para actuar en tu nombre",negative:"Los contactos en %{relation} NO PODRÁN cambiar sesión para actuar en tu nombre"}}}}},of_relation:{choose:"Permisos para <strong>%{name}</strong>"},postit:"Gestiona los permisos de tus contactos y crea nuevos roles",public_info:"Acceder a tu información pública"},privacy:{intro:"Los contactos en <strong>%{relation}</strong>:",rule:{add:"Añadir",title:"Reglas de privacidad",saved:"Reglas de privacidad guardadas"}},relation_custom:{confirm_delete:"¿Borrar este rol?","delete":"Borrar",edit:"Cambiar nombre",list:{title:"Roles"},"new":"+ Nuevo rol",title:"Privacidad"},relation_public:{name:"Público"},repository:{filter:"filtrar",title:"Repositorio",order:{by:"Ordenar por",last_modified:"Última modificación",most_popular:"Popularidad"}},representation:{notice:"Tu sesión ha cambiado. Ahora actúas en nombre de %{subject}. Para regresar a tu sessión, utiliza el menú de arriba a la derecha","switch":"Cambiar sessión"},required:"(*) Estos campos son obligatorios",search:{at_least:{one:"Escribe al menos %{count} letra",other:"Escribe al menos %{count} letras"},global:{name:"Búsqueda global",first_result:{more:"Mostrando los primeros %{count} resultados.",one:"Mostrando el primer resultado"},query:"Más resultados para %{query} >"},name:"Buscar",no_subject_found:"No se encontró a %{subject}.",nothing:"No se ha econtrado nada.",searching:"Buscando: %{query}",show_all:"Todos",write:"Escribe tu búsqueda...",wrong:"Parece que hay un problema con el motor de búsqueda",all_results:"Search all %{subject} (%{count})"},settings:{api_key:{briefing:"Gestiona tu clave API",confirm:"¿Estás seguro?",empty:"Token vacío",explanation:"Ésta es tu clave API",name:"Clave API",regenerate:"Regenerar clave API"},cancel_account:{briefing:"Te permite cancelar tu cuenta"},email_change:{briefing:"Cambia tu email"},lang_change:{briefing:"Cambia tu idioma",name:"Cambia tu idioma"},error:"Hubo errores al guardar los cambios","for":"Ajustes para",main:"Ajustes",manage:{name:"Administrar contactos",briefing:"Ajustes de contactos",explanation:"Cambiar los permisos de contactos"},notifications:{briefing:"Ajustes sobre notificaciones y alertas por correo",name:"Notificaciones",by_email:{name:"Mandarme un correo cuando me llega una notificación",always:"Siempre",never:"Nunca"}},one:"Ajustes",password_change:{briefing:"Cambia tu contraseña"},success:"Ajustes guardados con éxito"},share:"Compartir",sign_in:"Ingresar",sign_out:"Salir",sign_up:"Registrarse",site:{name:"Social Stream",client:{added:"Sitios añadidos",index:{title:"Sitios"},"new":{link:"Añadir sitio",title:"Registrar nuevo sitio"}}},subject:{this_is_you:"¡Eres tú!"},sure:"¿Confirmar?",time:{ago:"hace %{time}",am:"am",formats:{"default":"%A, %d de %B de %Y %H:%M:%S %z","long":"%d de %B de %Y %H:%M","short":"%d de %b %H:%M"},pm:"pm"},unknown:"Desconocido",user:{all:"Todos los usuarios",all_n:"Todos los usuarios (%{count})",by:"Por usuarios",one:"usuario",other:"usuarios",title:{one:"Usuario",other:"Usuarios"}},welcome:"¡Bienvenid@ a %{site}!",lang:{browser:"Autodetectar el idioma del navegador",none:"Contenido independiente del idioma"},date:{abbr_day_names:["dom","lun","mar","mié","jue","vie","sáb"],abbr_month_names:[null,"ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],day_names:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],formats:{"default":"%d/%m/%Y","long":"%d de %B de %Y","short":"%d de %b"},month_names:[null,"enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],order:["day","month","year"]},datetime:{distance_in_words:{about_x_hours:{one:"alrededor de 1 hora",other:"alrededor de %{count} horas"},about_x_months:{one:"alrededor de 1 mes",other:"alrededor de %{count} meses"},about_x_years:{one:"alrededor de 1 año",other:"alrededor de %{count} años"},almost_x_years:{one:"casi 1 año",other:"casi %{count} años"},half_a_minute:"medio minuto",less_than_x_minutes:{one:"menos de 1 minuto",other:"menos de %{count} minutos"},less_than_x_seconds:{one:"menos de 1 segundo",other:"menos de %{count} segundos"},over_x_years:{one:"más de 1 año",other:"más de %{count} años"},x_days:{one:"1 día",other:"%{count} días"},x_minutes:{one:"1 minuto",other:"%{count} minutos"},x_months:{one:"1 mes",other:"%{count} meses"},x_seconds:{one:"1 segundo",other:"%{count} segundos"}},prompts:{day:"Día",hour:"Hora",minute:"Minutos",month:"Mes",second:"Segundos",year:"Año"}},number:{currency:{format:{delimiter:".",format:"%n %u",precision:2,separator:",",significant:!1,strip_insignificant_zeros:!1,unit:"€"}},format:{delimiter:".",precision:3,separator:",",significant:!1,strip_insignificant_zeros:!1},human:{decimal_units:{format:"%n %u",units:{billion:"mil millones",million:"millón",quadrillion:"mil billones",thousand:"mil",trillion:"billón",unit:""}},format:{delimiter:"",precision:1,significant:!0,strip_insignificant_zeros:!0},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},gb:"GB",kb:"KB",mb:"MB",tb:"TB"}}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}}},support:{array:{last_word_connector:", y ",two_words_connector:" y ",words_connector:", "}},audio:{confirm_delete:"¿Borrar audios?",mine:"Mis audios",name:"archivo de audio",not_mine:"Audios",one:"un archivo de audio",other:"audios",processing:"Procesando fichero de audio. Espere, por favor...",title:{one:"Audio",other:"Audios"}},details:{msg:"Ver detalles..."},document:{actions:{"delete":"Borrar",details:"Detalles",download:"Descargar",edit:"Editar"},all:"Todos los ficheros",by:"por %{author}",confirm_delete:"¿Borrar fichero?",description:{input:"Añade una descripción aquí"},filter:"filtrar",form:{title:"Fichero"},info:{author:"Autor",date:{created_at:"Creado",updated_at:"Última modificación"},description:"Descripción",file:"Fichero",title:"Título",size:"Size",tags:"Tags"},mine:"Mis ficheros",name:"fichero","new":{link:"Añadir fichero",title:"Nuevo fichero"},new_activity:{attach:"Adjuntar fichero"},not_mine:"Ficheros",one:"un fichero",other:"ficheros",scope:{network:"Red",own:"Propios"},simple_all:"Todos",title:{input:"Título del fichero",one:"Fichero",other:"Ficheros"}},picture:{confirm_delete:"¿Borrar imagen?",mine:"Mis imágenes",name:"imagen",not_mine:"Imágenes",one:"una imagen",other:"imagenes",title:{one:"Imagen",other:"Imágenes"}},resource:{all:"Todos los recursos",confirm_delete:"¿Borrar recursos?",title:"Recursos",mine:"Mis recursos",not_mine:"Recursos"},video:{confirm_delete:"¿Borrar vídeo?",mine:"Mis vídeos",name:"vídeo",not_mine:"Vídeos",one:"un vídeo",other:"videos",processing:"Procesando vídeo. Espere, por favor...",title:{one:"Vídeo",other:"Vídeos"}},scheduler:{frequency:{one_off:{form:{message:"La actividad no se volverá a repetir",option:"ninguna"}},daily:{description:{one:"Todos los días",other:"Cada %{count} días"},form:{option:"diaria"}},weekly:{description:{one:"Todos los %{week_days}",other:"Los %{week_days} de cada %{count} semanas"},form:{every_week:"Cada %{form_field} semana(s) en los siguientes días:",option:"semanal"}},monthly:{description:{one:"El %{week_day_order} %{week_day} del mes",other:"El %{week_day_order} %{week_day} de cada %{count} meses",week_day_order:{1:"primer",2:"segundo",3:"tercer","-1":"último"}},form:{option:"mensual",week_day:"El %{order_field} %{week_field} de cada %{interval_field} mes(es)",week_day_order_option:{1:"primer",2:"segundo",3:"tercer","-1":"último"}}}}},boxy:{close_text:"[cerrar]"},event:{activity_action:{follow:"Me lo apunto",sentence:{one:"%{followers} follows this",other:"%{followers} follow this"},unfollow:"Desapuntar"},calendar:"Calendario",confirm_delete:"¿Borrar evento?",modal:{view_in_calendar:"Ver en el calendario"},name:"evento","new":{title:"Nuevo evento"},one:"un evento",other:"eventos",popover:{title:"Eventos el %{date}"},poster:{button:"Subir",update:"Subir cartel"},title:{one:"Evento",other:"Eventos"},wall_post:"Publicó un evento: %{title}"},room:{confirm_delete:"¿Borrar espacio?","delete":"Borrar",settings:{title:"Espacios",description:"Salas disponibles para la realización de eventos"},watermark:{name:"Nuevo espacio"}},linkser:{title:"Linkser"},link:{by:"por %{author}",confirm_delete:"¿Borrar enlace?",errors:{loading:"Error cargando",only_webs:"Solo puedes compartir págnas web"},form:{title:"Enlace"},input:"Escribe una dirección",name:"enlace",one:"un enlace",other:"enlaces",title:"Enlaces"},chat:{connecting:"Conectando",reconnecting:"Reconectando",disconnected:"Desconectado",unableconnect:"Fuera de servicio",title:"Chat",password:"Contraseña",zerousers:"No hay contactos conectados",search:"Buscar contactos",zerocontacts:"No se encontró ningún contacto",status:{choose:"Establecer estado",available:"Disponible",away:"Ausente",dnd:"No molestar",offline:"Desconectado"},settings:{title:"Activación y configuración del chat de Social Stream",checkbox:"Activar o desactivar chat",update:"Guardar configuración"},notify:{offline:"Estás desconectado",guestOffline:"{{name}} está desconectado"},videochat:{disconnected:"Videochat desconectado",disconnecting:"Videochat desconectando...",negotiating:"Negociando...",connectingWait:"Conectando...",connecting:"Conectando con el servidor...",waiting:"Esperando respuesta...",establishing:"Estableciendo conexión...",connnected:"Videochat conectado",unable:"Imposible iniciar videochat",serverIssue:"Error del servidor: Respuesta inválida",call:"{{name}} quiere iniciar una videollamada",rejected:"{{name}} ha rechazado tu llamada",rejectedBusy:"{{name}} está ocupado",accept:"Aceptar",deny:"Rechazar",clientIssue:"El cliente de {{name}} no soporta videochat",guestOffline:"Imposible conectar. {{name}} está desconectado",offline:"Imposible conectar. Estás desconectado",cancel:"{{name}} canceló la videollamada",requirements:"No tienes los requisitos minimos para iniciar la aplicación de videoconferencia. Por favor, actualiza a la última versión de Flash."},muc:{group:"Grupo {{group}}",join:"{{nick}} ha entrado en la sala.",leave:"{{nick}} se ha ido de la sala.",occupants:"Miembros",joining:"Accediendo...",joinError:"No se pudo acceder a la sala.  \n {{errorMsg}}",offline:"Estás desconectado"},game:{call:"{{name}} quiere iniciar una partida de {{game}}",accept:"Aceptar",deny:"Rechazar",offline:"Imposible conectar. Estás desconectado",guestOffline:"Imposible conectar. {{name}} está desconectado",unable:"Imposible iniciar partida.",rejected:"{{name}} ha rechazado tu invitación",rejectedBusy:"{{name}} está ocupado",cancel:"{{name}} canceló la partida",finish:"{{name}} ha cerrado el juego",waiting:"Esperando respuesta...",unknown:"Respuesta desconocida",clientIssue:"El cliente de {{name}} no tiene juegos"}},authorization:{form:{accept:"Accept",cancel:"Cancel"},"new":{title:"Authorize %{client}?",permission:{title:"The site %{client} will be able to:"}}}},pt:{language_name:"Português",actor:{name:"Nome"},action:{send:"Enviar",accept:"Aceitar"},account:{cancel:"Cancelar a conta",edit:"Editar a conta",email:{change:"Mudar endereço de email"},lang:{change:"Mudar idioma"},one:"Conta",password:{change:"Mudar senha","new":"Nova senha",retype:"Repetir nova senha"}},activerecord:{attributes:{contact:{relation_ids:"Tipo de contato"},"relation/custom":{name:"Nome"},user:{email:"Email",name:"Nome",password:"Senha",password_confirmation:"Confirmar senha",remember_me:"Lembrar-me"}}},activity:{audience:{hidden:{summary:"Restrito",full:"Compartilhado com contatos de %{audience}"},"public":{summary:"Público",full:"Acessível por toda Internet"},visible:{summary:"Restrito",full:"Compartilhado com %{audience}"},show:"Show"},confirm_delete:"Apagar atividade?","delete":"Apagar",last:"Últimas Atividades",like:"Curtir",one:"Atividade",other:"Atividades",privacy:{contact:{myself:{group:"All members",user:"Your contacts"},outside:{group:"Members of %{receiver}",user:"Contacts of %{receiver}"}},relation:{one:"%{count} group",other:"%{count} groups"}},sending:"Enviando",title:"Atividades",to_comment:"Comentário",unlike:"Curtir (desfazer)",verb:{follow:{User:{title:"%{subject} adicionou %{contact} como contato.",message:"%{name} adicionou você como contato."},Group:{title:"%{subject} adicionou %{contact} como contato.",message:"%{name} adicionou você como contato."}},like:{User:{title:"%{subject} é fã de %{contact}.",message:"%{name} agora é seu fã."},Group:{title:"%{subject} é fã de %{contact}.",message:"%{name} agora é seu fã."}},"make-friend":{User:{title:"%{subject} e %{contact} estão agora conectados.",message:"%{name} também adicionou você como contato."},Group:{title:"%{subject} adicionou %{contact} como contato.",message:"%{name} adicionou você como contato."}},post:{title:{other_wall:"%{sender} → %{receiver}"}},join:{one:"%{sender} joined the %{title} %{thing}."}},like_sentence:{one:"%{likers} likes this",other:"%{likers} like this",more:null},share:"Share",stream:{atom_title:"Activity Stream from %{subject}",title:{follow:"%{author} added %{activity_object} as contact",like:"%{author} likes %{activity_object}","make-friend":"%{author} also added %{activity_object} as contact",post:"%{author} posted %{activity_object}",updated:"%{author} posted %{activity_object}"}}},browse:"Browse",button:{cancel:"Cancelar",create:"Criar",save:"Salvar",update:"Atualizar"},cheesecake:{changes:{details:"Alterar detalhes",none:"Sem alterações",save:"Salvar alterações",saving:"Salvando..."},form:{editing:"Editando",fields:{color:"Cor",name:"Nome",permissions:"Permissões",subsector:"Segmento"}},select:{hint:"Selecione clicando nos retratos"}},comment:{input:"Escreva um comentário...",confirm_delete:"Excluir comentário?",name:"comentário",one:"um comentário",view_all:"Veja todos comentários",other:"comments",title:{one:"Comment",other:"Comments"}},contact:{all_n:"Todos os contatos (%{count})",confirm_delete:"Excluir contato?",current:"Atual","delete":"Excluir",edit:{title:"Editar contato com %{name}",submit:"Editar contato"},error_count:{one:"1 erro impediu que este contato fosse salvo:",other:"%{count} erros impediram que este contato fosse salvo:"},graph:{one:"Gráfico",empty:"Lamentamos, mas você não tem nenhum contato ainda. Você pode tentar a caixa de pesquisa para procurar alguém!"},in_common:{one:"1 contato em comum",other:"%{count} contatos em comum"},"new":{link:"+ Adicionar contato",title:"Adicionar %{name} aos seus contatos",menu:"Adicionar contato",submit:"Adicionar",button:{zero:"Add",one:"%{count} role",other:"%{count} roles"}},one:"Contato",other:"Contatos",pending:{other:"Pendente",all:"Todos",all_n:"Veja todos os contatos pendentes (%{count})"},relation:{one:"Tipo de contato","new":"Novo tipo"},reply:{link:"+ Responder contato",title:"Responder pedido de contato para %{name}",submit:"Responder contato"},suggestion:{one:"Sugestão",other:"Sugestões",all:"Todas"},type:{"new":"+ Novo tipo"},empty:'You have not added anybody yet. What about <a href="%{explore}">exploring</a>?',follow:"Follow",following:"Following",n:{one:"%{count} contact",other:"%{count} contacts"},received:"Received",saving:"Saving...",sent:"Added",unfollow:"Unfollow",view_all:"View all..."},copyright:"2010 Copyright - todos direitos reservados","delete":{confirm:"Apagar %{element}}?"},devise:{links:{sign_in:"Entrar",sign_up:"Registrar",forgot_password:"Esqueceu sua senha?",confirmation_instructions:"Não recebeu instruções de confirmação?",unlock_instructions:"Não recebeu instruções para desbloquear?",sign_in_with:"Entrar com %{provider}"},passwords:{confirm:"Confirmar senha",forgot:"Esqueceu sua senha?",instructions:"Digite o endereço de e-mail vinculado a sua conta e nós lhe enviaremos instruções para alterá-la:",update:"Mude sua senha"}},follower:{n:{one:"1 seguidor",other:"%{count} seguidores"},follower:{title:"Followers"},following:{title:"Followings"}},forgot_password:"Esqueceu sua senha?",frontpage:{main_title:"Social Stream é a base para a construção de sites de rede social.",stats:"%{users} usuários e %{groups} grupos registrados",presentation:{modular:{header:"Modular",p:'Available <a href="https://github.com/ging/social_stream#social-stream-components">Social Stream components</a> provide your application only with the features you need in your social network. Just add your desired gems to your Gemfile'},flexible:{header:"Flexible",p:'Completely customize your social network <a href="https://github.com/ging/social_stream/wiki/How-to-change-controllers%2C-models%2C-views%2C-assets-and-locales">changing any Social Stream component</a>, <a href="https://github.com/ging/social_stream/wiki/How-to-add-new-activity-objects">adding new activity objects</a> or changing the CSS using <a href="http://sass-lang.com/">Sass</a>'},community:{header:"Community",p:'Social Stream enjoys a growing community of developers. Feel free to drop a message at <a href="http://groups.google.com/group/social-stream">Social Stream\'s Google group</a> or <a href="http://stackoverflow.com/questions/tagged/social-stream">StackOverflow</a> if you have problems. <a href="https://github.com/ging/social_stream/issues/new">Open an issue</a> if you find a defect. Pull request are very welcomed!'}}},group:{one:"Grupo",other:"Grupos",all:"Todos os grupos",all_n:"Todos os grupos (%{count})",by:"Por grupos",destroy:{one:"Excluir grupo",explanation:"Todas as atividades, informações e contatos deste grupo serão excluídos!",go_ahead:"Sim, tenho certeza. Excluir tudo!",last_confirm:"Esta é sua última chance. Você realmente tem certeza?"},form:{title:"Grupo"},input:"Qual o nome do grupo?",last:"Últimos grupos",my:"Meus grupos","new":{link:"Novo grupo",name:"Nome",description:"Descrição",participants:"Participantes",title:"Novo grupo"},cloud:"Nuvem de tags de grupos",most:{followed:"Mais seguidos",liked:"Mais populares"},tags:"Tags",n:{one:"%{count} group",other:"%{count} groups"},title:{one:"Group",other:"Groups"},view_all:"View all..."},help:"Ajuda",helpers:{submit:{relation_custom:{create:"Salvar",update:"Atualizar"},create:"Criar %{model}",submit:"Salvar %{model}",update:"Atualizar %{model}"},select:{prompt:"Por favor selecione"}},home:"Página inicial",inbox:{one:"Entrada"},invitation:{"e-mails":"Correio eletrônico",error:"Sua solicitação não foi processada. Certifique-se de que você escreveu os endereços de correio eletrônico corretamente.",invited:"%{sender} convidou você para %{site}!",join:"Convide outras pessoas para se juntar ao %{site}!",join_me:"Junte-se a mim no %{site}!",one:"Convite",other:"Convites",toolbar:"Convidar",success:"Seus convites foram enviados com sucesso",text:"Escreva sua mensagem"},like:{n:{one:"1 fã",other:"%{count} fãs"}},location:{message:"Você está aqui > %{location}",base:"Você está aqui",separator:" > "},mailboxer:{"delete":"Excluir",delete_confirm:"Você quer mover '%{object}' para o lixo?",form:{body:"Mensagem",recipients:"Para",subject:"Assunto"},mark_as_read:"Marcar como lido",message_mailer:{has_sent_new:{event:"enviou uma nova mensagem para %{receiver}",group:"enviou uma nova mensagem para %{receiver}",user:"enviou-lhe uma nova mensagem"},has_sent_reply:{event:"enviou uma resposta para %{receiver}",group:"enviou uma resposta para %{receiver}",user:"enviou-lhe uma resposta"},subject_new:"%{subject}",subject_reply:"%{subject}"},notification_mailer:{subject:"%{subject}"},reply:"Responder",send:"Enviar mensagem",sent:"Sua mensagem foi enviada"},menu:{options:"Opções",information:"Informação",wall:"Mural"},message:{answer:"Escreva sua resposta",inbox:"Entrada",look:"Dê uma olhada nesta conversa","new":"Nova mensagem",one:"Mensagem",other:"Mensagens",participants:"Participantes",send:"Enviar uma mensagem",sentbox:"Enviadas",trash:"Lixeira"},notification:{all_text:"Leia o texto todo em %{url}",confirm:"Confirmar %{sender} como contato?","default":"Você tem uma nova notificação",destroy_sure:"Você deseja excluir esta notificação?",fan:"%{sender} é agora %{whose} fã.",follow:{group:"%{sender} adicionado %{who} como contato.",user:"%{sender} adicionado %{who} como contato."},hello:"Olá %{receiver},",like:{group:"%{sender} curte %{whose} %{thing}.",user:"%{sender} curte %{whose} %{thing}."},look:"Dê uma olhada no mural de %{sender}",makefriend:{group:"%{sender} também adicionou %{who} como contato.",user:"%{sender} também adicionou %{who} como contato."},one:"Notificação",other:"Notificações",post:{group:"%{title} -- por %{sender} no mural %{whose}",user:"%{title} -- por %{sender} no seu mural"},read:"Marcar como lida",read_all:"Marcar todas como lidas",unread:"Marcar como não lida",update:{group:"%{sender} atualizou %{thing} no mural %{whose}.",user:"%{sender} atualizou %{thing} no seu mural."},visit:"Visite %{url} e confira todas as suas notificações.",watch:"Dê uma olhada em %{url}",watch_it:"Confira!",who:{group:"%{name}",user:"você"},whose:{group:"%{receiver}'s",user:"seu"}},post:{confirm_delete:"Excluir postagem?",form:{title:"Postagem"},input:"O que você está fazendo?",name:"postagem",one:"uma postagem",title:{one:"Post",other:"Posts"},other:"%{count} postagens"},preposition:{and:"e","true":"em"},profile:{one:"Perfil",age:"Idade",is_on:"está em",must_be_signed_id:"Você precisa efetuar login",group:{about:"Sobre nós",birthday:"Anniversary",experience:"Área de especialização",info:"Informação sobre o grupo",tags:"Tags do grupo"},user:{about:"Sobre mim",birthday:"Aniversário",experience:"Interesses",info:"Informação pessoal",tags:"Tags do usuário"},actualcity:"Cidade atual",address:"Enderesso",contact:"Informção de contato",country:"País",email:"E-mail",empty:"Estes campos estão vazios. Por favor, atualize-os.",fax:"Fax",mobile:"Celular",organization:"Organização",phone:"Telefone",profile:"Editar perfil",tags:{"default":"social, stream,",other:"Tags"},website:"Website",update:{error:"Por favor, verifique o formato do seu perfil",success:"Seu perfil foi atualizado"}},"public":{other:"Todos"},permission:{description:{"default":{brief:{create:{activity:"Publicar em seu mural"},follow:{nil:"Seguir atividade deles"},read:{activity:"Ler seu mural"},represent:{nil:"Administrar"},notify:{nil:"Notificar"}},detailed:{create:{activity:{positive:"SERÃO CAPAZES DE postar novas atividades em seu mural",negative:"NÃO SERÃO CAPAZES DE postar novas atividades em seu mural"}},follow:{nil:{positive:"As atividades dos contatos em %{relation} IRÃO APARECER em seu mural",negative:"As atividades dos contatos em %{relation} NÃO IRÃO APARECER em seu mural"}},read:{activity:{positive:"SERÃO CAPAZES de ler as mensagens em seu mural, exceto aquelas compartilhadas com contatos específicos",negative:"NÃO SERÃO CAPAZES de ler as mensagens em seu mural, exceto aquelas compartilhadas com contatos específicos"}},represent:{nil:{positive:"SERÃO CAPAZES de mudar de sessão e agir como %{subject}",negative:"NÃO SERÃO CAPAZES de mudar de sessão e agir como %{subject}"}},notify:{nil:{positive:"As atividades SERÃO notificados para contatos em %{name}",negative:"As atividades NÃO SERÃO notificados para contatos em %{name}"}}}}},of_relation:{choose:"2. Permissões para <strong>%{name}</strong>"},postit:"Manage the permissions of your contacts and create new roles"},privacy:{intro:"Os contatos em <strong>%{relation}</strong>:",rule:{add:"Adicionar",title:"Regras de privacidade",saved:"Regras de privacidade salvas"}},relation_custom:{confirm_delete:"Excluir esse relação?","delete":"Excluir",edit:"Mudar nome","new":"+ Nova relação",title:"Privacidade & contexto",list:{title:"Roles"}},relation_public:{name:"Publico"},representation:{notice:"Sua sessão foi alterada. Agora você está agindo em nome de %{subject}. Use o menu superior direito para retornar à sua sessão","switch":"Alterne sessão"},required:"(*) Estes campos são obrigatórios",search:{all_results:"Pesquisar todos os %{subject} (%{count})",at_least:{one:"Write at least %{count} character",other:"Write at least %{count} characters"},global:{name:"Pesquisa global",first_result:{more:"Mostrando os primeiros %{count} resultados.",one:"Mostrando o primeiro resultado."},query:"Veja mais resultados para %{query} >"},name:"Search",no_subject_found:"Nenhum %{subject} foi encontrado.",nothing:"Nada foi encontrado",searching:"Pesquisando: %{query}",show_all:"Todos",write:"Escreva sua pesquisa ...",wrong:"Parece haver um problema com o mecanismo de pesquisa"},settings:{api_key:{briefing:"Gerenciar a sua chave da API",confirm:"Você tem certeza?",empty:"Token vazio",explanation:"Esta é sua chave da API",name:"Chave da API",regenerate:"Regerar chave da API"},cancel_account:{briefing:"Permite que você cancele sua conta"},email_change:{briefing:"Mude o seu e-mail"},lang_change:{briefing:"Alterar o idioma",name:"Alterar o idioma"},error:"Alguns erros gerados ao salvar suas alterações","for":"Configurações para",main:"Configurações",manage:{name:"Administrar Contatos",briefing:"Configuração para contatos",explanation:"Mudar as permissões dos contatos"},notifications:{briefing:"Configurações de notificações alertas de email",name:"Notificaões",by_email:{name:"Envie-me um email quando eu receber uma notificação",always:"Sempre",never:"Nunca"}},one:"Configurações",password_change:{briefing:"Mude sua senha"},success:"Suas configurações foram alteradas corretamente"},share:"Compartilhar",sign_in:"Entrar",sign_out:"Sair",sign_up:"Cadastrar-se",site:{name:"Social Stream"},subject:{this_is_you:"Este é você!"},sure:"Você tem certeza?",time:{ago:"%{time} atrás",am:"",formats:{"default":"%A, %d de %B de %Y, %H:%M h","long":"%A, %d de %B de %Y, %H:%M h","short":"%d/%m, %H:%M h"},pm:""},unknown:"Desconhecido",user:{by:"Por usuários",one:"Usuário",other:"Usuários",all:"Todos os usuários",all_n:"Todos os usuários (%{count})",title:{one:"User",other:"Users"}},welcome:"Bem-vindo ao %{site}!",lang:{browser:"Auto-detecção do idioma do navegador",none:"Conteúdo independente da linguagem"},activity_action:{follow:"Follow",sentence:{follow:{one:"%{followers} follows this",other:"%{followers} follow this"},more:{one:"%{count} more person",other:"%{count} more people"}},unfollow:"Unfollow"},ajax:{error:"There was an error in the remote server"},counter:{like:{one:'<span class="counter">%{count}</span> like',other:'<span class="counter">%{count}</span> likes'},view:{one:'<span class="counter">%{count}</span> view',other:'<span class="counter">%{count}</span> views'}},dropdown:{notifications:"Notifications",privacy:"Privacy",settings:"Settings"},explore:{explore:{most_followed:"Most followed",most_popular:"Most popular"},header:{explore:"Explore",participants:"Participants",resources:"Resources",timeline:"Timeline",tags:"Tags",search:"Search"},link:"Explore",or:"or Explore",participants:{last_active:"Last active",last_registered:"Last registered",most_members:"Most members",registered_since:"since %{time}"},resources:{last_uploaded:"Last uploaded",most_visited:"Most viewed",uploaded_since:"since %{time}"},search:{title:"Advanced search",placeholder:"looking for...",submit:"Search"}},header:{icon:{contacts:"Contacts",home:"Home",messages:"Messages",repository:"Repository"}},layout:{more:"See more (%{count})"},repository:{filter:"filter",title:"Repository",order:{by:"Order by",last_modified:"Last modified",most_popular:"Most popular"}},date:{abbr_day_names:["dom","seg","ter","qua","qui","sex","sáb"],abbr_month_names:[null,"jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],day_names:["domingo","segunda","terça","quarta","quinta","sexta","sábado"],formats:{"default":"%d/%m/%Y","long":"%d de %B de %Y","short":"%d de %b"},month_names:[null,"janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],order:["dia","mês","ano"]},datetime:{distance_in_words:{about_x_hours:{one:"aproximadamente 1 hora",other:"aproximadamente %{count} horas"},about_x_months:{one:"aproximadamente 1 mês",other:"aproximadamente %{count} meses"},about_x_years:{one:"aproximadamente 1 ano",other:"aproximadamente %{count} anos"},almost_x_years:{one:"quase 1 ano",other:"quase %{count} anos"},half_a_minute:"meio minuto",less_than_x_minutes:{one:"menos de 1 minuto",other:"menos de %{count} minutos"},less_than_x_seconds:{one:"menos de 1 segundo",other:"menos de %{count} segundos"},over_x_years:{one:"mais de 1 ano",other:"mais de %{count} anos"},x_days:{one:"1 dia",other:"%{count} dias"},x_minutes:{one:"1 minuto",other:"%{count} minutos"},x_months:{one:"1 mês",other:"%{count} meses"},x_seconds:{one:"1 segundo",other:"%{count} segundos"}},prompts:{day:"Dia",hour:"Hora",minute:"Minuto",month:"Mês",second:"Segundo",year:"Ano"}},errors:{format:"%{attribute} %{message}",messages:{accepted:"deve ser aceito",blank:"não pode ficar em branco",confirmation:"não está de acordo com a confirmação",empty:"não pode ficar vazio",equal_to:"deve ser igual a %{count}",even:"deve ser par",exclusion:"não está disponível",greater_than:"deve ser maior que %{count}",greater_than_or_equal_to:"deve ser maior ou igual a %{count}",inclusion:"não está incluído na lista",invalid:"não é válido",less_than:"deve ser menor que %{count}",less_than_or_equal_to:"deve ser menor ou igual a %{count}",not_a_number:"não é um número",not_an_integer:"não é um número inteiro",odd:"deve ser ímpar",record_invalid:"A validação falhou: %{errors}",taken:"já está em uso",too_long:"é muito longo (máximo: %{count} caracteres)",too_short:"é muito curto (mínimo: %{count} caracteres)",wrong_length:"não possui o tamanho esperado (%{count} caracteres)"},template:{body:"Por favor, verifique o(s) seguinte(s) campo(s):",header:{one:"Não foi possível gravar %{model}: 1 erro",other:"Não foi possível gravar %{model}: %{count} erros."}}},number:{currency:{format:{delimiter:".",format:"%u %n",precision:2,separator:",",significant:!1,strip_insignificant_zeros:!1,unit:"R$"}},format:{delimiter:".",precision:3,separator:",",significant:!1,strip_insignificant_zeros:!1},human:{decimal_units:{format:"%n %u",units:{billion:"bilhão",million:"milhão",quadrillion:"quatrilhão",thousand:"mil",trillion:"trilhão",unit:""}},format:{delimiter:"",precision:2,significant:!0,strip_insignificant_zeros:!0},storage_units:{format:"%n %u",units:{"byte":{one:"Byte",other:"Bytes"},gb:"GB",kb:"KB",mb:"MB",tb:"TB"}}},percentage:{format:{delimiter:""}},precision:{format:{delimiter:""}}},support:{array:{last_word_connector:", e ",two_words_connector:" e",words_connector:", "}}},zh:{language_name:"中文",actor:{name:"姓名"},action:{send:"送出",accept:"接收"},account:{cancel:"取消帐号",edit:"编辑帐号",email:{change:"更改邮箱地址"},lang:{change:"切换语言"},one:"帐号",password:{change:"修改密码","new":"新密码",retype:"再次输入新密码"},applications:"Applications"},activerecord:{attributes:{contact:{relation_ids:"联系方式"},"relation/custom":{name:"姓名"},user:{email:"邮箱",name:"姓名",password:"密码",password_confirmation:"确定密码",remember_me:"记住我"},document:{title:"Title"},event:{title:"Title",room:"Room",frequency:"Frequency"},room:{name:"Name"},"site/client":{callback_url:"Callback URL",id:"Client ID",name:"Name",secret:"Client Secret",url:"URL"}},models:{document:"File",event:"event",room:"room"},errors:{models:{room:{attributes:{name:{taken:"is taken"}}}}}},activity:{audience:{hidden:{summary:"禁止",full:"连接分享 %{audience}"},"public":{summary:"公开",full:"分享给网络"},show:"展示",visible:{summary:"禁止",full:"分享 %{audience}"}},confirm_delete:"刪除活动?","delete":"删除",last:"次前活动",like:"我喜爱",like_sentence:{one:"%{likers} 喜欢这个",other:"%{likers} 喜欢这个"},one:"一个活动",other:"很多活动",privacy:{contact:{myself:{group:"所有成员All members",user:"您的联系人Your contacts"},outside:{group:"来自%{receiver}的成员Members of",user:"来自%{receiver}的联系人Contacts of"}},relation:{one:"%{count} 小组group",other:"%{count} 多个小组groups"}},sending:"传送中",stream:{atom_title:"%{subject}的活动流",title:{follow:"%{author}已加了%{activity_object}為关连",like:"%{author}喜欢%{activity_object}","make-friend":"%{author}还加了%{activity_object}为关连",post:"%{author}发布了%{activity_object}",updated:"%{author}更新了%{activity_object}"}},title:"活动",to_comment:"评论",unlike:"我不再喜欢了",verb:{follow:{User:{title:"%{subject} 已加 %{contact} 作为联络.",message:"%{name} 已加您作为联系人."},Group:{title:"%{subject} 已加 %{contact} 作为联络.",message:"%{name} 已加您作为联络."},RemoteSubject:{title:"%{subject} added %{contact} as contact.",message:"%{name} added you as contact.",notification:{subject:"%{name} added you as contact.",body:"%{name} added you as contact."}}},like:{User:{title:"%{subject} 已成为粉丝 %{contact}.",message:"%{name} 已成为你的粉丝."},Group:{title:"%{subject} 已成为粉丝 %{contact}.",message:"%{name} 已成为你的粉丝."},RemoteSubject:{title:"%{subject} is a fan of %{contact}.",message:"%{name} is now your fan.",notification:{subject:"%{name} is now your fan.",body:"%{name} is now your fan."}}},"make-friend":{User:{title:"%{subject} 和 %{contact} 现已連结.",message:"%{姓名} 已加您作为联系人."},Group:{title:"%{subject} 已加 %{contact} 联络.",message:"%{name} 已加您作为联系人."},RemoteSubject:{title:"%{subject} and %{contact} are now connected.",message:"%{name} also added you as contact.",notification:{subject:"%{name} also added you as contact.",body:"%{name} also added you as contact."}}},post:{title:{other_wall:"%{sender} → %{receiver}"},RemoteSubject:{notification:{subject:"%{name} has posted something(%{direct_object}) in your wall",body:"%{name} has posted something(%{direct_object}) in your wall"}}},join:{one:"%{sender} 加入了joined the %{title} %{thing}."},update:{RemoteSubject:{notification:{subject:"%{name} has updated %{direct_object} in your wall",body:"%{name} has updated something(%{direct_object}) in your wall"}}}},share:"分享Share"},activity_action:{follow:"关注",sentence:{follow:{one:"%{followers} 关注这个",other:"%{followers} 关注这个"},more:{one:"%{count} 一个人",other:"%{count} 再多些人"}},unfollow:"不再关注"},browse:"浏览",button:{cancel:"取消",create:"创建",save:"保存",update:"更新"},cheesecake:{changes:{details:"更改详情",none:"沒有更改",save:"保存更改",saving:"保存中..."},form:{editing:"编辑中...",fields:{color:"颜色",name:"姓名",permissions:"权限",subsector:"界别分组"}},select:{hint:"点击图片以便选择"}},comment:{input:"请填写评论...",confirm_delete:"删除评论?",name:"评论",one:"一篇评论",title:{one:"评论",other:"所有评论"},view_all:"查看所有评论 ",other:"评论comments"},contact:{all_n:"所有联系(%{count})",confirm_delete:"刪除联系?",current:"近期","delete":"刪除",edit:{title:"编辑联络 %{name}",submit:"编辑联络"},error_count:{one:"一个错误导致不能保存这个联络 :",other:"%{count} 有一些错误导致不能保存这个联络:"},follow:"关注",following:"关注中",graph:{one:"图片",empty:"对不起, 您沒有任何联系人. 您可以通过查找功能去查找可能认识的朋友!"},in_common:{one:"一个共同联系人",other:"%{count} 共同联系人"},"new":{link:"+ 加入联络",title:"加入 %{name} 到您的联系人列表",menu:"加入联络",submit:"加入联络",button:{zero:"添加Add",one:"%{count} 关系role",other:"%{count} 多个关系roles"}},one:"联络",other:"联系",pending:{other:"暂缓",all:"所有",all_n:"查看所有暂缓申请 (%{count})"},relation:{one:"联络类别","new":"新类别"},reply:{link:"+ 回复联系人",title:"回复联络申请至 %{name}",submit:"回复"},suggestion:{one:"建议",other:"建议",all:"所有"},type:{"new":"+ 新类别"},unfollow:"不再关注",empty:'您还没有添加任何人。You have not added anybody yet. What about <a href="%{explore}">随便看看exploring</a>怎么样?',n:{one:"%{count} 联系人contact",other:"%{count} 多个联系人contacts"},received:"已收到Received",saving:"保存中...Saving...",sent:"已经添加Added",view_all:"查看所有...View all..."},copyright:"2010 版权 - 版权所有","delete":{confirm:"刪除 %{element}}?"},devise:{links:{sign_in:"登录",sign_up:"注册",forgot_password:"忘了您的密码?",confirmation_instructions:"还没收到激活指引吗?",unlock_instructions:"还没收到解锁指引吗?",sign_in_with:"以 %{provider} 登录"},passwords:{confirm:"确认密码",forgot:"忘了?",instructions:"请输入你的帐号关联的邮箱, 以便我们给您发送更改指示:",update:"更改您的密码"}},follower:{follower:{title:"粉丝"},following:{title:"关注"},n:{one:"一个粉丝",other:"%{count} 粉丝"}},forgot_password:"忘了您的密码吗?",frontpage:{main_title:"社交视频互动是我们建立社交网的核心.",stats:"%{users} 用户 和 %{groups} 已注册的群组",presentation:{modular:{header:"模块Modular",p:'可用的Available <a href="https://github.com/ging/social_stream#social-stream-components">Social Stream配件Social Stream components</a> 只为您提供您社交网络所需要的功能。只需添加您喜欢的Gems到您的Gemfile.provide your application only with the features you need in your social network. Just add your desired gems to your Gemfile'},flexible:{header:"灵活灵便Flexible",p:'完全地个性化定制您的社交网络Completely customize your social network <a href="https://github.com/ging/social_stream/wiki/How-to-change-controllers%2C-models%2C-views%2C-assets-and-locales">更改任何一个Scial Stream组建changing any Social Stream component</a>, <a href="https://github.com/ging/social_stream/wiki/How-to-add-new-activity-objects">添加新的活动对象adding new activity objects</a> 或者使用CSS更改Sass.or changing the CSS using <a href="http://sass-lang.com/">Sass</a>'},community:{header:"社区Community",p:'Social Stream的开发者社区正在茁壮成长。如果您有什么问题，可以在<a href="http://groups.google.com/group/social-stream">Social Stream\'s Google group</a> 或者 <a href="http://stackoverflow.com/questions/tagged/social-stream">StackOverflow</a>给我们留言。 如果您发现有缺陷<a href="https://github.com/ging/social_stream/issues/new">提交一个问题</a>. 随时欢迎各种请求Pull request are very welcomed!'}}},group:{one:"群组",other:"群组",all:"所有群组",all_n:"所有群组 (%{count})",by:"被群组",destroy:{one:"删除群组",explanation:"所有和这个群组相关的活动的资料和联系会被删除!",go_ahead:"是, 我肯定. 删除所有東西!",last_confirm:"这是您最后机会. 您肯定吗?"},form:{title:"群组"},input:"这个群组叫什么名称?",last:"最後的群组",my:"我的群组","new":{link:"新群组",name:"名称",description:"描述",participants:"参与者",title:"新群组"},cloud:"群组标记云",most:{followed:"最多人关注",liked:"最受欢迎"},tags:"标记",title:{one:"群组",other:"群组们"},n:{one:"%{count} 群group",other:"%{count} 多个群groups"},view_all:"查看所有...View all..."},help:"帮助",helpers:{submit:{relation_custom:{create:"保存",update:"更新"}}},home:"主页",inbox:{one:"收件箱"},invitation:{"e-mails":"电子邮箱",error:"您的申请未能被处理. 请确定您的邮箱地址是否正确无误.",invited:"%{sender} 已邀请您到 %{site}!",join:"邀请其他人加入 %{site}!",join_me:"跟我一起在 %{site}!",one:"邀请",other:"邀请",toolbar:"邀请",success:"您的邀请已成功发送",text:"写上您的讯息"},like:{n:{one:"一个粉丝",other:"%{count} 粉丝们"}},location:{message:"您在此 > %{location}",base:"您在此",separator:" > "},mailboxer:{"delete":"刪除",delete_confirm:"您要把 '%{object}' 移除到垃圾桶?",form:{body:"主体",recipients:"收件人",subject:"主题"},mark_as_read:"标记已读",message_mailer:{has_sent_new:{event:"己发送新讯息 %{receiver}",group:"己发送新讯息 %{receiver}",user:"己给您发送新讯息"},has_sent_reply:{event:"已给您回复 %{receiver}",group:"已给您回复 %{receiver}",user:"已给您回复"},subject_new:"%{subject}",subject_reply:"%{subject}"},notification_mailer:{subject:"%{subject}"},reply:"回复",send:"发送讯息",sent:"您的讯息已发送"},menu:{options:"菜單选择",information:"个人资料",wall:"最新發佈"},message:{answer:"写上答案",inbox:"收件箱",look:"请留意这个对话","new":"新讯息",one:"讯息",other:"讯息",participants:"参与者",send:"发送讯息",sentbox:"寄件备份",trash:"垃圾桶"},notification:{all_text:"在 %{url} 阅读所有內容",confirm:"确定 %{sender} 作为联络?","default":"您有新通知",destroy_sure:"您是否想删除这个通知?",fan:"%{sender} 现在是 %{whose} 粉丝.",follow:{group:"%{sender} 已加到 %{who} 作为联络.",user:"%{sender} 已加到 %{who} 作为联络."},hello:"您好 %{receiver},",like:{group:"%{sender} 喜欢 %{whose} %{thing}.",user:"%{sender} 喜欢 %{whose} %{thing}."},look:"请看看这个 %{sender} 的最新发布",makefriend:{group:"%{sender} 另加至 %{who} 作为联络.",user:"%{sender} 另加至 %{who} 作为联络."},one:"通知",other:"通知",post:{group:"%{title} -- %{sender} 發佈給 %{whose} ",user:"%{title} -- %{sender} 發佈給 %{whose} "},read:"标记已读",read_all:"标记全部已读",unread:"标记未读",update:{group:"%{sender} 在 %{whose} 的最新发布已更新 %{thing} ",user:"%{sender} 在 %{whose} 的最新发布已更新 %{thing}"},visit:"浏览 %{url} 和检查您的所有通知.",watch:"在这里 %{url}查看这里",watch_it:"查看这里!",who:{group:"%{name}",user:"您"},whose:{group:"%{receiver} 的",user:"您的"}},post:{confirm_delete:"删除近況吗?",form:{title:"近況"},input:"您有什么近況?",name:"近況",one:"一条近況",title:{one:"近況",other:"近況"},other:"多个状态posts"},preposition:{and:"和","true":"在上"},profile:{one:"个人背景资料",age:"年齡",is_on:"有效",must_be_signed_id:"您必须持有有效证件",group:{about:"关于我们",birthday:"周年",experience:"经验范畴",info:"群组资料",tags:"群组标记"},user:{about:"关于我",birthday:"生日",experience:"经验",info:"个人资料",tags:"标记"},actualcity:"上课城市",address:"地址",contact:"联络资料",country:"国家",email:"邮箱",empty:"这些空格未填上. 请更新.",fax:"传真",mobile:"手机",organization:"组织",phone:"电话",profile:"编辑个人背景资料",tags:{"default":"社交, 视频,",other:"标记"},website:"网站",update:{error:"请重组您的个人背景资料:",success:"您的个人背景资料已更新"}},"public":{other:"大家"},permission:{description:{"default":{brief:{create:{activity:"贴到您的最新发布"},follow:{nil:"关注他们的活动"},read:{activity:"阅读您的最新发布"},represent:{nil:"管理"},notify:{nil:"通知"}},detailed:{create:{activity:{positive:"他们将会在您的最新发布标贴新的活动",negative:"他们不能在您的最新发布标贴新的活动"}},follow:{nil:{positive:"已有联系的活动 %{relation} 将出现在您主页的最新发布上",negative:"已有联系的活动 %{relation} 将不会出现在您主页的最新发布上"}},read:{activity:{positive:"他们能夠阅读在您的最新发布的內容, 除了那些有特別联系的分享",negative:"他们能夠阅读在您的最新发布的內容, 除了那些被标识为公开"}},represent:{nil:{positive:"他们将更改环节及作为 %{subject}",negative:"他们不能更改环节及作为 %{subject}"}},notify:{nil:{positive:"活动将会通知 %{name} 的联系",negative:"活动将不会通知 %{name} 的联系"}}}}},of_relation:{choose:"2. <strong>%{name}</strong>圈內的权限"},postit:"管理您联系人的权限和创建新的关系Manage the permissions of your contacts and create new roles",public_info:"Read your public information"},privacy:{intro:"拥有 <strong>%{relation}</strong>级别的联系只容许作出以下行为:",rule:{add:"加上",title:"私隐规则",saved:"私隐规则己保存"}},relation_custom:{confirm_delete:"删除这个圈子?","delete":"刪除",edit:"更改名称","new":"+ 新圈子",title:"私隐和內容",list:{title:"关系Roles"}},relation_public:{name:"公众"},representation:{notice:"您的环节已更改. 现在您以%{subject}的身份行动. 请使用右上角菜单回到您的环节","switch":"转换环节"},required:"(*) 以上空格必須填写",search:{all_results:"查找所有 %{subject} (%{count})",at_least:{one:"至少填写Write at least %{count}个字符 character",other:"至少填写Write at least %{count}个字符 characters"},global:{name:"全球搜查",first_result:{more:"展示首回 %{count} 结果.",one:"首回结果展示中."},query:"查看更多结果 %{query} >"},name:"搜索",no_subject_found:"沒有搜索到关于 %{subject} 的结果.",nothing:"沒有查询到任何结果",searching:"查找中: %{query}",show_all:"所有",write:"写下您的问题 ...",wrong:"搜查器发生了问题"},settings:{api_key:{briefing:"管理您的API钥匙",confirm:"您肯定吗?",empty:"沒有",explanation:"这是您的的 API 钥匙",name:"API 钥匙",regenerate:"重新获取 API 钥匙"},cancel_account:{briefing:"让您注销帐号"},email_change:{briefing:"更改您的邮箱"},lang_change:{briefing:"更改您的语言",name:"更改您的语言"},error:"当您保存更改时, 出现一些错误","for":"为....设定",main:"设定",manage:{name:"行政联络",briefing:"联系设定",explanation:"更改联系允许"},notifications:{briefing:"关于通知行为和邮件提示的设定",name:"通知",by_email:{name:"当我收到通知时发邮件给我",always:"经常",never:"永不"}},one:"设定",password_change:{briefing:"更改密码"},success:"您的设定已成功更改"},share:"分享Share",sign_in:"登录",sign_out:"退出",sign_up:"注册",site:{name:"Gocess.com",client:{added:"Added sites",index:{title:"Client sites"},"new":{link:"Add site",title:"Register new client site"}}},subject:{this_is_you:"这是您!"},sure:"您肯定吗?",time:{ago:"%{time} 之前"},unknown:"不明",user:{all:"所有用户",all_n:"所有用户 (%{count})",by:"被用户",one:"用户",other:"用户们",title:{one:"用户",other:"用户们"}},welcome:"欢迎来到 %{site}!",lang:{browser:"自动搜查浏览器语言",none:"语言自主內容"},ajax:{error:"远程服务器中存在错误There was an error in the remote server"},counter:{like:{one:'<span class="counter">%{count}</span> 喜欢like',other:'<span class="counter">%{count}</span> 喜欢likes'},view:{one:'<span class="counter">%{count}</span> view',other:'<span class="counter">%{count}</span> views'}},dropdown:{notifications:"通知Notifications",privacy:"隐私Privacy",settings:"设置Settings"},explore:{explore:{most_followed:"最多关注Most followed",most_popular:"最流行Most popular"},header:{explore:"浏览Explore",participants:"参与者Participants",resources:"资源Resources",timeline:"时间轴Timeline",tags:"标签Tags",search:"搜索Search"},link:"浏览Explore",or:"或者浏览or Explore",participants:{last_active:"最近上线Last active",last_registered:"最新注册Last registered",most_members:"最多成员Most members",registered_since:"从since %{time} 开始"},resources:{last_uploaded:"最新上传Last uploaded",most_visited:"最多查看Most viewed",uploaded_since:"从since %{time} 开始"},search:{title:"高级搜索Advanced search",placeholder:"寻找...looking for...",submit:"搜索Search"}},header:{icon:{contacts:"联系人Contacts",home:"主页Home",messages:"消息Messages",repository:"栈UnsureRepository",calendar:"Calendar"}},layout:{more:"查看更多See more (%{count})"},repository:{filter:"过滤器filter",title:"栈UnsureRepository",order:{by:"排序Order by",last_modified:"最近更新Last modified",most_popular:"最流行Most popular"}},audio:{confirm_delete:"Delete audio?",title:{one:"Audio",other:"Audios"},mine:"My audios",name:"audio",not_mine:"Audios",one:"an audio",other:"audios",processing:"Processing audio clip. Please wait..."},details:{msg:"See details..."},document:{actions:{"delete":"Delete",details:"Details",download:"Download",edit:"Edit"},all:"All files",by:"by %{author}",confirm_delete:"Delete file?",description:{input:"Add a description here"},filter:"filter",form:{title:"File"},info:{author:"Author",date:{created_at:"Created at",updated_at:"Updated at"},description:"Description",file:"File",size:"Size",tags:"Tags",title:"Title"},mine:"My files",name:"file","new":{link:"Add file",title:"New file"},new_activity:{attach:"Attach file"},not_mine:"Files",one:"a file",other:"files",scope:{network:"Network",own:"Own"},simple_all:"All",title:{input:"File title",one:"File",other:"Files"}},picture:{confirm_delete:"Delete picture?",mine:"My pictures",name:"picture",not_mine:"Pictures",one:"a picture",other:"pictures",title:{one:"Picture",other:"Pictures"}},resource:{all:"All Resources",confirm_delete:"Delete resource?",title:"Resources",mine:"My resources",not_mine:"Resources"},video:{confirm_delete:"Delete video?",mine:"My videos",name:"video",not_mine:"Videos",one:"a video",other:"videos",processing:"Processing video. Please, wait...",title:{one:"Video",other:"Videos"}},boxy:{close_text:"[close]"},event:{activity_action:{follow:"Follow",sentence:{one:"%{followers} follows this",other:"%{followers} follow this"},unfollow:"Unfollow"},calendar:"Calendar",confirm_delete:"Delete event?",modal:{view_in_calendar:"View in calendar"},name:"event","new":{title:"New event"},one:"an event",other:"events",popover:{title:"Events on %{date}"},poster:{button:"Upload",update:"Upload poster"},title:{one:"Event",other:"Events"},wall_post:"Published an event: %{title}"},room:{confirm_delete:"Delete room?","delete":"Delete",settings:{title:"Rooms",description:"Rooms available for event celebration"},watermark:{name:"New room"}},linkser:{title:"Linkser"},link:{by:"by %{author}",confirm_delete:"Delete link?",errors:{loading:"Error loading",only_webs:"Only webpages are supported"},form:{title:"Link"},input:"Write the web address",name:"link",one:"a link",other:"links",title:"Links"},chat:{connecting:"Connecting",reconnecting:"Reconnecting",disconnected:"Disconnected",unableconnect:"Out of Service",title:"Chat",password:"Password",zerousers:"No users connected",search:"Search contacts",zerocontacts:"No contacts found",status:{choose:"Choose status",available:"Available",away:"Away",dnd:"Busy",offline:"Offline"},settings:{title:"Enable and configure Social Stream Chat",checkbox:"Enable or disable Social Stream Chat",update:"Update Settings"},notify:{offline:"You are offline",guestOffline:"{{name}} is offline"},videochat:{disconnected:"Videochat disconnected",disconnecting:"Videochat disconnecting...",negotiating:"Negotiating...",connectingWait:"Connecting...",connecting:"Connecting to the server...",waiting:"Waiting for response...",establishing:"Establishing...",connnected:"Videochat connected.",unable:"Unable to init videochat.",serverIssue:"Server Error: Invalid response",call:"{{name}} wants to start a video call",rejected:"{{name}} has rejected your call",rejectedBusy:"{{name}} is busy",accept:"Accept",deny:"Deny",clientIssue:"{{name}}'s client not support videochat",guestOffline:"Unable to connect. {{name}} is offline",offline:"Unable to connect. You are offline",cancel:"{{name}} cancel the videocall",requirements:"You don't have the minimum requirements to run videocall application. Please upgrade to the latest version of Flash."},muc:{group:"{{group}} group",join:"{{nick}} joined in the room.",leave:"{{nick}} has left the room.",occupants:"Occupants",joining:"Joining...",joinError:"You can't join in the room \n {{errorMsg}}",offline:"You are offline"},game:{call:"{{name}} wants to play a {{game}} game",accept:"Accept",deny:"Deny",offline:"Unable to connect. You are offline",guestOffline:"Unable to connect. {{name}} is offline",unable:"Unable to init game.",rejected:"{{name}} has rejected your invitation",rejectedBusy:"{{name}} is busy",cancel:"{{name}} cancel the invitation",finish:"{{name}} close the game",waiting:"Waiting for response...",unknown:"Unknown response",clientIssue:"{{name}}'s client not support games"}},authorization:{form:{accept:"Accept",cancel:"Cancel"},"new":{title:"Authorize %{client}?",permission:{title:"The site %{client} will be able to:"}}}}};
var Flashy=Flashy||{};Flashy.message=function(e,t){var n=$("#flash");n.append($("<div/>").addClass("alert").addClass("alert-"+e).append($("<button/>").attr("type","button").addClass("close").attr("data-dismiss","alert").html("&times;")).append(t))},// Copyright 2011 Manufactura Independente (Ana Carvalho & Ricardo Lafuente)
noselect_style="-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;",position_style="position:absolute;top:0px;left:0px;right:0px;",$(document).ready(function(){$(".colorfont").css({position:"relative"}),$(".colorfont").html(function(){if($(".google-src-text").length>0)var e=$(this).find(".google-src-text").text(),t=$(this).text().replace(e,"");else var t=$(this).text();return'<span style="'+noselect_style+'">'+t+"</span>"+'<span class="colorfont-overlay" style="'+noselect_style+position_style+'">'+t+"</span>"+'<span style="color: rgba(0,0,0,0.0);'+position_style+'">'+t+"</span>"})}),/**
 * jquery.Jcrop.js v0.9.12
 * jQuery Image Cropping Plugin - released under MIT License 
 * Author: Kelly Hallman <khallman@gmail.com>
 * http://github.com/tapmodo/Jcrop
 * Copyright (c) 2008-2013 Tapmodo Interactive LLC {{{
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 *
 * }}}
 */
function(e){e.Jcrop=function(t,n){function i(e){return Math.round(e)+"px"}function o(e){return j.baseClass+"-"+e}function r(){return e.fx.step.hasOwnProperty("backgroundColor")}function s(t){var n=e(t).offset();return[n.left,n.top]}function a(e){return[e.pageX-R[0],e.pageY-R[1]]}function l(t){"object"!=typeof t&&(t={}),j=e.extend(j,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof j[t]&&(j[t]=function(){})})}function c(e,t,n){if(R=s(W),pt.setCursor("move"===e?e:e+"-resize"),"move"===e)return pt.activateHandlers(h(t),g,n);var i=ht.getFixed(),o=d(e),r=ht.getCorner(d(o));ht.setPressed(ht.getCorner(o)),ht.setCurrent(r),pt.activateHandlers(u(e,i),g,n)}function u(e,t){return function(n){if(j.aspectRatio)switch(e){case"e":n[1]=t.y+1;break;case"w":n[1]=t.y+1;break;case"n":n[0]=t.x+1;break;case"s":n[0]=t.x+1}else switch(e){case"e":n[1]=t.y2;break;case"w":n[1]=t.y2;break;case"n":n[0]=t.x2;break;case"s":n[0]=t.x2}ht.setCurrent(n),ft.update()}}function h(e){var t=e;return mt.watchKeys(),function(e){ht.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,ft.update()}}function d(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function f(e){return function(t){return j.disabled?!1:"move"!==e||j.allowMove?(R=s(W),it=!0,c(e,a(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function p(e,t,n){var i=e.width(),o=e.height();i>t&&t>0&&(i=t,o=t/e.width()*e.height()),o>n&&n>0&&(o=n,i=n/e.height()*e.width()),tt=e.width()/i,nt=e.height()/o,e.width(i).height(o)}function m(e){return{x:e.x*tt,y:e.y*nt,x2:e.x2*tt,y2:e.y2*nt,w:e.w*tt,h:e.h*nt}}function g(){var e=ht.getFixed();e.w>j.minSelect[0]&&e.h>j.minSelect[1]?(ft.enableHandles(),ft.done()):ft.release(),pt.setCursor(j.allowSelect?"crosshair":"default")}function v(e){if(j.disabled)return!1;if(!j.allowSelect)return!1;it=!0,R=s(W),ft.disableHandles(),pt.setCursor("crosshair");var t=a(e);return ht.setPressed(t),ft.update(),pt.activateHandlers(y,g,"touch"===e.type.substring(0,5)),mt.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function y(e){ht.setCurrent(e),ft.update()}function b(){var t=e("<div></div>").addClass(o("tracker"));return F&&t.css({opacity:0,backgroundColor:"white"}),t}function w(e){V.removeClass().addClass(o("holder")).addClass(e)}function _(e,t){function n(){window.setTimeout(y,h)}var i=e[0]/tt,o=e[1]/nt,r=e[2]/tt,s=e[3]/nt;if(!ot){var a=ht.flipCoords(i,o,r,s),l=ht.getFixed(),c=[l.x,l.y,l.x2,l.y2],u=c,h=j.animationDelay,d=a[0]-c[0],f=a[1]-c[1],p=a[2]-c[2],m=a[3]-c[3],g=0,v=j.swingSpeed;i=u[0],o=u[1],r=u[2],s=u[3],ft.animMode(!0);var y=function(){return function(){g+=(100-g)/v,u[0]=Math.round(i+g/100*d),u[1]=Math.round(o+g/100*f),u[2]=Math.round(r+g/100*p),u[3]=Math.round(s+g/100*m),g>=99.8&&(g=100),100>g?(C(u),n()):(ft.done(),ft.animMode(!1),"function"==typeof t&&t.call(gt))}}();n()}}function x(e){C([e[0]/tt,e[1]/nt,e[2]/tt,e[3]/nt]),j.onSelect.call(gt,m(ht.getFixed())),ft.enableHandles()}function C(e){ht.setPressed([e[0],e[1]]),ht.setCurrent([e[2],e[3]]),ft.update()}function E(){return m(ht.getFixed())}function S(){return ht.getFixed()}function T(e){l(e),M()}function k(){j.disabled=!0,ft.disableHandles(),ft.setCursor("default"),pt.setCursor("default")}function I(){j.disabled=!1,M()}function N(){ft.done(),pt.activateHandlers(null,null)}function P(){V.remove(),L.show(),L.css("visibility","visible"),e(t).removeData("Jcrop")}function A(e,t){ft.release(),k();var n=new Image;n.onload=function(){var i=n.width,o=n.height,r=j.boxWidth,s=j.boxHeight;W.width(i).height(o),W.attr("src",e),G.attr("src",e),p(W,r,s),$=W.width(),U=W.height(),G.width($).height(U),at.width($+2*st).height(U+2*st),V.width($).height(U),dt.resize($,U),I(),"function"==typeof t&&t.call(gt)},n.src=e}function D(e,t,n){var i=t||j.bgColor;j.bgFade&&r()&&j.fadeTime&&!n?e.animate({backgroundColor:i},{queue:!1,duration:j.fadeTime}):e.css("backgroundColor",i)}function M(e){j.allowResize?e?ft.enableOnly():ft.enableHandles():ft.disableHandles(),pt.setCursor(j.allowSelect?"crosshair":"default"),ft.setCursor(j.allowMove?"move":"default"),j.hasOwnProperty("trueSize")&&(tt=j.trueSize[0]/$,nt=j.trueSize[1]/U),j.hasOwnProperty("setSelect")&&(x(j.setSelect),ft.done(),delete j.setSelect),dt.refresh(),j.bgColor!=lt&&(D(j.shade?dt.getShades():V,j.shade?j.shadeColor||j.bgColor:j.bgColor),lt=j.bgColor),ct!=j.bgOpacity&&(ct=j.bgOpacity,j.shade?dt.refresh():ft.setBgOpacity(ct)),K=j.maxSize[0]||0,J=j.maxSize[1]||0,Z=j.minSize[0]||0,et=j.minSize[1]||0,j.hasOwnProperty("outerImage")&&(W.attr("src",j.outerImage),delete j.outerImage),ft.refresh()}var R,j=e.extend({},e.Jcrop.defaults),O=navigator.userAgent.toLowerCase(),F=/msie/.test(O),H=/msie [1-6]\./.test(O);"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof n&&(n={}),l(n);var B={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},L=e(t),q=!0;if("IMG"==t.tagName){if(0!=L[0].width&&0!=L[0].height)L.width(L[0].width),L.height(L[0].height);else{var z=new Image;z.src=L[0].src,L.width(z.width),L.height(z.height)}var W=L.clone().removeAttr("id").css(B).show();W.width(L.width()),W.height(L.height()),L.after(W).hide()}else W=L.css(B).show(),q=!1,null===j.shade&&(j.shade=!0);p(W,j.boxWidth,j.boxHeight);var $=W.width(),U=W.height(),V=e("<div />").width($).height(U).addClass(o("holder")).css({position:"relative",backgroundColor:j.bgColor}).insertAfter(L).append(W);j.addClass&&V.addClass(j.addClass);var G=e("<div />"),Q=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),Y=e("<div />").width("100%").height("100%").css("zIndex",320),X=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=ht.getFixed();j.onDblClick.call(gt,e)}).insertBefore(W).append(Q,Y);q&&(G=e("<img />").attr("src",W.attr("src")).css(B).width($).height(U),Q.append(G)),H&&X.css({overflowY:"hidden"});var K,J,Z,et,tt,nt,it,ot,rt,st=j.boundary,at=b().width($+2*st).height(U+2*st).css({position:"absolute",top:i(-st),left:i(-st),zIndex:290}).mousedown(v),lt=j.bgColor,ct=j.bgOpacity;R=s(W);var ut=function(){function e(){var e,t={},n=["touchstart","touchmove","touchend"],i=document.createElement("div");try{for(e=0;e<n.length;e++){var o=n[e];o="on"+o;var r=o in i;r||(i.setAttribute(o,"return;"),r="function"==typeof i[o]),t[n[e]]=r}return t.touchstart&&t.touchend&&t.touchmove}catch(s){return!1}}function t(){return j.touchSupport===!0||j.touchSupport===!1?j.touchSupport:e()}return{createDragger:function(e){return function(t){return j.disabled?!1:"move"!==e||j.allowMove?(R=s(W),it=!0,c(e,a(ut.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1):!1}},newSelection:function(e){return v(ut.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),ht=function(){function e(e){e=s(e),p=d=e[0],m=f=e[1]}function t(e){e=s(e),u=e[0]-p,h=e[1]-m,p=e[0],m=e[1]}function n(){return[u,h]}function i(e){var t=e[0],n=e[1];0>d+t&&(t-=t+d),0>f+n&&(n-=n+f),m+n>U&&(n+=U-(m+n)),p+t>$&&(t+=$-(p+t)),d+=t,p+=t,f+=n,m+=n}function o(e){var t=r();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function r(){if(!j.aspectRatio)return l();var e,t,n,i,o=j.aspectRatio,r=j.minSize[0]/tt,s=j.maxSize[0]/tt,u=j.maxSize[1]/nt,h=p-d,g=m-f,v=Math.abs(h),y=Math.abs(g),b=v/y;return 0===s&&(s=10*$),0===u&&(u=10*U),o>b?(t=m,n=y*o,e=0>h?d-n:n+d,0>e?(e=0,i=Math.abs((e-d)/o),t=0>g?f-i:i+f):e>$&&(e=$,i=Math.abs((e-d)/o),t=0>g?f-i:i+f)):(e=p,i=v/o,t=0>g?f-i:f+i,0>t?(t=0,n=Math.abs((t-f)*o),e=0>h?d-n:n+d):t>U&&(t=U,n=Math.abs(t-f)*o,e=0>h?d-n:n+d)),e>d?(r>e-d?e=d+r:e-d>s&&(e=d+s),t=t>f?f+(e-d)/o:f-(e-d)/o):d>e&&(r>d-e?e=d-r:d-e>s&&(e=d-s),t=t>f?f+(d-e)/o:f-(d-e)/o),0>e?(d-=e,e=0):e>$&&(d-=e-$,e=$),0>t?(f-=t,t=0):t>U&&(f-=t-U,t=U),c(a(d,f,e,t))}function s(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>$&&(e[0]=$),e[1]>U&&(e[1]=U),[Math.round(e[0]),Math.round(e[1])]}function a(e,t,n,i){var o=e,r=n,s=t,a=i;return e>n&&(o=n,r=e),t>i&&(s=i,a=t),[o,s,r,a]}function l(){var e,t=p-d,n=m-f;return K&&Math.abs(t)>K&&(p=t>0?d+K:d-K),J&&Math.abs(n)>J&&(m=n>0?f+J:f-J),et/nt&&Math.abs(n)<et/nt&&(m=n>0?f+et/nt:f-et/nt),Z/tt&&Math.abs(t)<Z/tt&&(p=t>0?d+Z/tt:d-Z/tt),0>d&&(p-=d,d-=d),0>f&&(m-=f,f-=f),0>p&&(d-=p,p-=p),0>m&&(f-=m,m-=m),p>$&&(e=p-$,d-=e,p-=e),m>U&&(e=m-U,f-=e,m-=e),d>$&&(e=d-U,m-=e,f-=e),f>U&&(e=f-U,m-=e,f-=e),c(a(d,f,p,m))}function c(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var u,h,d=0,f=0,p=0,m=0;return{flipCoords:a,setPressed:e,setCurrent:t,getOffset:n,moveOffset:i,getCorner:o,getFixed:r}}(),dt=function(){function t(e,t){p.left.css({height:i(t)}),p.right.css({height:i(t)})}function n(){return o(ht.getFixed())}function o(e){p.top.css({left:i(e.x),width:i(e.w),height:i(e.y)}),p.bottom.css({top:i(e.y2),left:i(e.x),width:i(e.w),height:i(U-e.y2)}),p.right.css({left:i(e.x2),width:i($-e.x2)}),p.left.css({width:i(e.x)})}function r(){return e("<div />").css({position:"absolute",backgroundColor:j.shadeColor||j.bgColor}).appendTo(f)}function s(){d||(d=!0,f.insertBefore(W),n(),ft.setBgOpacity(1,0,1),G.hide(),a(j.shadeColor||j.bgColor,1),ft.isAwake()?c(j.bgOpacity,1):c(1,1))}function a(e,t){D(h(),e,t)}function l(){d&&(f.remove(),G.show(),d=!1,ft.isAwake()?ft.setBgOpacity(j.bgOpacity,1,1):(ft.setBgOpacity(1,1,1),ft.disableHandles()),D(V,0,1))}function c(e,t){d&&(j.bgFade&&!t?f.animate({opacity:1-e},{queue:!1,duration:j.fadeTime}):f.css({opacity:1-e}))}function u(){j.shade?s():l(),ft.isAwake()&&c(j.bgOpacity)}function h(){return f.children()}var d=!1,f=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),p={top:r(),left:r().height(U),right:r().height(U),bottom:r()};return{update:n,updateRaw:o,getShades:h,setBgColor:a,enable:s,disable:l,resize:t,refresh:u,opacity:c}}(),ft=function(){function t(t){var n=e("<div />").css({position:"absolute",opacity:j.borderOpacity}).addClass(o(t));return Q.append(n),n}function n(t,n){var i=e("<div />").mousedown(f(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n}).addClass("ord-"+t);return ut.support&&i.bind("touchstart.jcrop",ut.createDragger(t)),Y.append(i),i}function r(e){var t=j.handleSize,i=n(e,k++).css({opacity:j.handleOpacity}).addClass(o("handle"));return t&&i.width(t).height(t),i}function s(e){return n(e,k++).addClass("jcrop-dragbar")}function a(e){var t;for(t=0;t<e.length;t++)P[e[t]]=s(e[t])}function l(e){var n,i;for(i=0;i<e.length;i++){switch(e[i]){case"n":n="hline";break;case"s":n="hline bottom";break;case"e":n="vline right";break;case"w":n="vline"}I[e[i]]=t(n)}}function c(e){var t;for(t=0;t<e.length;t++)N[e[t]]=r(e[t])}function u(e,t){j.shade||G.css({top:i(-t),left:i(-e)}),X.css({top:i(t),left:i(e)})}function h(e,t){X.width(Math.round(e)).height(Math.round(t))}function d(){var e=ht.getFixed();ht.setPressed([e.x,e.y]),ht.setCurrent([e.x2,e.y2]),p()}function p(e){return T?g(e):void 0}function g(e){var t=ht.getFixed();h(t.w,t.h),u(t.x,t.y),j.shade&&dt.updateRaw(t),T||y(),e?j.onSelect.call(gt,m(t)):j.onChange.call(gt,m(t))}function v(e,t,n){(T||t)&&(j.bgFade&&!n?W.animate({opacity:e},{queue:!1,duration:j.fadeTime}):W.css("opacity",e))}function y(){X.show(),j.shade?dt.opacity(ct):v(ct,!0),T=!0}function w(){C(),X.hide(),j.shade?dt.opacity(1):v(1),T=!1,j.onRelease.call(gt)}function _(){A&&Y.show()}function x(){return A=!0,j.allowResize?(Y.show(),!0):void 0}function C(){A=!1,Y.hide()}function E(e){e?(ot=!0,C()):(ot=!1,x())}function S(){E(!1),d()}var T,k=370,I={},N={},P={},A=!1;j.dragEdges&&e.isArray(j.createDragbars)&&a(j.createDragbars),e.isArray(j.createHandles)&&c(j.createHandles),j.drawBorders&&e.isArray(j.createBorders)&&l(j.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var D=b().mousedown(f("move")).css({cursor:"move",position:"absolute",zIndex:360});return ut.support&&D.bind("touchstart.jcrop",ut.createDragger("move")),Q.append(D),C(),{updateVisible:p,update:g,release:w,refresh:d,isAwake:function(){return T},setCursor:function(e){D.css("cursor",e)},enableHandles:x,enableOnly:function(){A=!0},showHandles:_,disableHandles:C,animMode:E,setBgOpacity:v,done:S}}(),pt=function(){function t(t){at.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",s).bind("touchend.jcrop",l):d&&e(document).bind("mousemove.jcrop",i).bind("mouseup.jcrop",o)}function n(){at.css({zIndex:290}),e(document).unbind(".jcrop")}function i(e){return u(a(e)),!1}function o(e){return e.preventDefault(),e.stopPropagation(),it&&(it=!1,h(a(e)),ft.isAwake()&&j.onSelect.call(gt,m(ht.getFixed())),n(),u=function(){},h=function(){}),!1}function r(e,n,i){return it=!0,u=e,h=n,t(i),!1}function s(e){return u(a(ut.cfilter(e))),!1}function l(e){return o(ut.cfilter(e))}function c(e){at.css("cursor",e)}var u=function(){},h=function(){},d=j.trackDocument;return d||at.mousemove(i).mouseup(o).mouseout(o),W.before(at),{activateHandlers:r,setCursor:c}}(),mt=function(){function t(){j.keySupport&&(r.show(),r.focus())}function n(){r.hide()}function i(e,t,n){j.allowMove&&(ht.moveOffset([t,n]),ft.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function o(e){if(e.ctrlKey||e.metaKey)return!0;rt=e.shiftKey?!0:!1;var t=rt?10:1;switch(e.keyCode){case 37:i(e,-t,0);break;case 39:i(e,t,0);break;case 38:i(e,0,-t);break;case 40:i(e,0,t);break;case 27:j.allowSelect&&ft.release();break;case 9:return!0}return!1}var r=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),s=e("<div />").css({position:"absolute",overflow:"hidden"}).append(r);return j.keySupport&&(r.keydown(o).blur(n),H||!j.fixedSupport?(r.css({position:"absolute",left:"-20px"}),s.append(r).insertBefore(W)):r.insertBefore(W)),{watchKeys:t}}();ut.support&&at.bind("touchstart.jcrop",ut.newSelection),Y.hide(),M(!0);var gt={setImage:A,animateTo:_,setSelect:x,setOptions:T,tellSelect:E,tellScaled:S,setClass:w,disable:k,enable:I,cancel:N,release:ft.release,destroy:P,focus:mt.watchKeys,getBounds:function(){return[$*tt,U*nt]},getWidgetSize:function(){return[$,U]},getScaleFactor:function(){return[tt,nt]},getOptions:function(){return j},ui:{holder:V,selection:X}};return F&&V.bind("selectstart",function(){return!1}),L.data("Jcrop",gt),gt},e.fn.Jcrop=function(t,n){var i;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),i=e.Jcrop(this,t),e.isFunction(n)&&n.call(i)}):(e(this).css({display:"block",visibility:"hidden"}),i=e.Jcrop(this,t),e.isFunction(n)&&n.call(i))}),this},e.Jcrop.Loader=function(t,n,i){function o(){s.complete?(r.unbind(".jcloader"),e.isFunction(n)&&n.call(s)):window.setTimeout(o,50)}var r=e(t),s=r[0];r.bind("load.jcloader",o).bind("error.jcloader",function(){r.unbind(".jcloader"),e.isFunction(i)&&i.call(s)}),s.complete&&e.isFunction(n)&&(r.unbind(".jcloader"),n.call(s))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(e){function t(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.ajaxSubmit=function(n){function i(){function i(){var t=d.attr("target"),n=d.attr("action");r.setAttribute("target",a),"POST"!=r.getAttribute("method")&&r.setAttribute("method","POST"),r.getAttribute("action")!=s.url&&r.setAttribute("action",s.url),s.skipEncodingOverride||d.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),s.timeout&&setTimeout(function(){f=!0,o()},s.timeout);var i=[];try{if(s.extraData)for(var u in s.extraData)i.push(e('<input type="hidden" name="'+u+'" value="'+s.extraData[u]+'" />').appendTo(r)[0]);l.appendTo("body"),c.attachEvent?c.attachEvent("onload",o):c.addEventListener("load",o,!1),r.submit()}finally{r.setAttribute("action",n),t?r.setAttribute("target",t):d.removeAttr("target"),e(i).remove()}}function o(){if(!u.aborted){var n=c.contentWindow?c.contentWindow.document:c.contentDocument?c.contentDocument:c.document;if(n&&n.location.href!=s.iframeSrc||f){c.detachEvent?c.detachEvent("onload",o):c.removeEventListener("load",o,!1);var i=!0;try{if(f)throw"timeout";var r="xml"==s.dataType||n.XMLDocument||e.isXMLDoc(n);if(t("isXml="+r),!r&&window.opera&&(null==n.body||""==n.body.innerHTML)&&--v)return t("requeing onLoad callback, DOM not available"),setTimeout(o,250),void 0;u.responseText=n.body?n.body.innerHTML:n.documentElement?n.documentElement.innerHTML:null,u.responseXML=n.XMLDocument?n.XMLDocument:n,u.getResponseHeader=function(e){var t={"content-type":s.dataType};return t[e]};var a=/(json|script)/.test(s.dataType);if(a||s.textarea){var d=n.getElementsByTagName("textarea")[0];if(d)u.responseText=d.value;else if(a){var p=n.getElementsByTagName("pre")[0],m=n.getElementsByTagName("body")[0];p?u.responseText=p.textContent:m&&(u.responseText=m.innerHTML)}}else"xml"!=s.dataType||u.responseXML||null==u.responseText||(u.responseXML=y(u.responseText));g=w(u,s.dataType,s)}catch(b){t("error caught:",b),i=!1,u.error=b,s.error&&s.error.call(s.context,u,"error",b),h&&e.event.trigger("ajaxError",[u,s,b])}u.aborted&&(t("upload aborted"),i=!1),i&&(s.success&&s.success.call(s.context,g,"success",u),h&&e.event.trigger("ajaxSuccess",[u,s])),h&&e.event.trigger("ajaxComplete",[u,s]),h&&!--e.active&&e.event.trigger("ajaxStop"),s.complete&&s.complete.call(s.context,u,i?"success":"error"),setTimeout(function(){l.removeData("form-plugin-onload"),l.remove(),u.responseXML=null},100)}}}var r=d[0];if(e(":input[name=submit],:input[id=submit]",r).length)return alert('Error: Form elements must not have name or id of "submit".'),void 0;var s=e.extend(!0,{},e.ajaxSettings,n);s.context=s.context||s;var a="jqFormIO"+(new Date).getTime(),l=e('<iframe id="'+a+'" name="'+a+'" src="'+s.iframeSrc+'" />'),c=l[0];l.css({position:"absolute",top:"-1000px",left:"-1000px"});var u={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){t("aborting upload...");var n="aborted";this.aborted=1,l.attr("src",s.iframeSrc),u.error=n,s.error&&s.error.call(s.context,u,"error",n),h&&e.event.trigger("ajaxError",[u,s,n]),s.complete&&s.complete.call(s.context,u,"error")}},h=s.global;if(h&&!e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[u,s]),s.beforeSend&&s.beforeSend.call(s.context,u,s)===!1)return s.global&&e.active--,void 0;if(!u.aborted){var f=0,p=r.clk;if(p){var m=p.name;m&&!p.disabled&&(s.extraData=s.extraData||{},s.extraData[m]=p.value,"image"==p.type&&(s.extraData[m+".x"]=r.clk_x,s.extraData[m+".y"]=r.clk_y))}s.forceSync?i():setTimeout(i,10);var g,v=50,y=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},b=e.parseJSON||function(e){return window.eval("("+e+")")},w=function(t,n,i){var o=t.getResponseHeader("content-type")||"",r="xml"===n||!n&&o.indexOf("xml")>=0,s=r?t.responseXML:t.responseText;return r&&"parsererror"===s.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(s=i.dataFilter(s,n)),"string"==typeof s&&("json"===n||!n&&o.indexOf("json")>=0?s=b(s):("script"===n||!n&&o.indexOf("javascript")>=0)&&e.globalEval(s)),s}}}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof n&&(n={success:n});var o=this.attr("action"),r="string"==typeof o?e.trim(o):"";r&&(r=(r.match(/^([^#]+)/)||[])[1]),r=r||window.location.href||"",n=e.extend(!0,{url:r,success:e.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var s={};if(this.trigger("form-pre-serialize",[this,n,s]),s.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var a,l,c=this.formToArray(n.semantic);if(n.data){n.extraData=n.data;for(a in n.data)if(n.data[a]instanceof Array)for(var u in n.data[a])c.push({name:a,value:n.data[a][u]});else l=n.data[a],l=e.isFunction(l)?l():l,c.push({name:a,value:l})}if(n.beforeSubmit&&n.beforeSubmit(c,this,n)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[c,this,n,s]),s.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var h=e.param(c);"GET"==n.type.toUpperCase()?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+h,n.data=null):n.data=h;var d=this,f=[];if(n.resetForm&&f.push(function(){d.resetForm()}),n.clearForm&&f.push(function(){d.clearForm()}),!n.dataType&&n.target){var p=n.success||function(){};f.push(function(t){var i=n.replaceTarget?"replaceWith":"html";e(n.target)[i](t).each(p,arguments)})}else n.success&&f.push(n.success);n.success=function(e,t,i){for(var o=n.context||n,r=0,s=f.length;s>r;r++)f[r].apply(o,[e,t,i||d,d])};var m=e("input:file",this).length>0,g="multipart/form-data",v=d.attr("enctype")==g||d.attr("encoding")==g;return n.iframe!==!1&&(m||n.iframe||v)?n.closeKeepAlive?e.get(n.closeKeepAlive,i):i():e.ajax(n),this.trigger("form-submit-notify",[this,n]),this},e.fn.ajaxForm=function(n){if(0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}).bind("click.form-plugin",function(t){var n=t.target,i=e(n);if(!i.is(":submit,input:image")){var o=i.closest(":submit");if(0==o.length)return;n=o[0]}var r=this;if(r.clk=n,"image"==n.type)if(void 0!=t.offsetX)r.clk_x=t.offsetX,r.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var s=i.offset();r.clk_x=t.pageX-s.left,r.clk_y=t.pageY-s.top}else r.clk_x=t.pageX-n.offsetLeft,r.clk_y=t.pageY-n.offsetTop;setTimeout(function(){r.clk=r.clk_x=r.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var n=[];if(0===this.length)return n;var i=this[0],o=t?i.getElementsByTagName("*"):i.elements;if(!o)return n;var r,s,a,l,c,u,h;for(r=0,u=o.length;u>r;r++)if(c=o[r],a=c.name)if(t&&i.clk&&"image"==c.type)c.disabled||i.clk!=c||(n.push({name:a,value:e(c).val()}),n.push({name:a+".x",value:i.clk_x},{name:a+".y",value:i.clk_y}));else if(l=e.fieldValue(c,!0),l&&l.constructor==Array)for(s=0,h=l.length;h>s;s++)n.push({name:a,value:l[s]});else null!==l&&"undefined"!=typeof l&&n.push({name:a,value:l});if(!t&&i.clk){var d=e(i.clk),f=d[0];a=f.name,a&&!f.disabled&&"image"==f.type&&(n.push({name:a,value:d.val()}),n.push({name:a+".x",value:i.clk_x},{name:a+".y",value:i.clk_y}))}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var i=this.name;if(i){var o=e.fieldValue(this,t);if(o&&o.constructor==Array)for(var r=0,s=o.length;s>r;r++)n.push({name:i,value:o[r]});else null!==o&&"undefined"!=typeof o&&n.push({name:this.name,value:o})}}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,o=this.length;o>i;i++){var r=this[i],s=e.fieldValue(r,t);null===s||"undefined"==typeof s||s.constructor==Array&&!s.length||(s.constructor==Array?e.merge(n,s):n.push(s))}return n},e.fieldValue=function(t,n){var i=t.name,o=t.type,r=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==o||"button"==o||("checkbox"==o||"radio"==o)&&!t.checked||("submit"==o||"image"==o)&&t.form&&t.form.clk!=t||"select"==r&&-1==t.selectedIndex))return null;if("select"==r){var s=t.selectedIndex;if(0>s)return null;for(var a=[],l=t.options,c="select-one"==o,u=c?s+1:l.length,h=c?s:0;u>h;h++){var d=l[h];if(d.selected){var f=d.value;if(f||(f=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),c)return f;a.push(f)}}return a}return e(t).val()},e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})},e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}})}}(jQuery),/*
 * jQuery File Upload Plugin 5.21.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(e){return e.serializeArray()},add:function(e,t){t.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date,this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=8*(t-this.loaded)*(1e3/i),this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:t.formData?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_onProgress:function(e,t){if(e.lengthComputable){var n,i,o=+new Date;if(t._time&&t.progressInterval&&o-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=o,n=t.total||this._getTotal(t.files),i=parseInt(e.loaded/e.total*(t.chunkSize||n),10)+(t.uploadedBytes||0),this._loaded+=i-(t.loaded||t.uploadedBytes||0),t.lengthComputable=!0,t.loaded=i,t.total=n,t.bitrate=t._bitrateTimer.getBitrate(o,i,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(o,this._loaded,t.bitrateInterval)})}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_initXHRData:function(t){var n,i=t.files[0],o=t.multipart||!e.support.xhrFileUpload,r=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:r,value:t.blob}):e.each(t.files,function(e,i){n.push({name:t.paramName[e]||r,value:i})})):(t.formData instanceof FormData?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"',n.append(r,t.blob,i.name)):e.each(t.files,function(e,i){(window.Blob&&i instanceof Blob||window.File&&i instanceof File)&&n.append(t.paramName[e]||r,i,i.name)})),t.data=n):(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(i.name)+'"',t.contentType=i.type,t.data=t.blob||i),t.blob=null},_initIframeSettings:function(t){t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&e("<a></a>").prop("href",t.url).prop("host")!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e,"iframe")},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",o=(t.prop("files")||[1]).length;o;)i.push(n),o-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var o=e.Deferred(),r=o.promise();return n=n||this.options.context||r,t===!0?o.resolveWith(n,i):t===!1&&o.rejectWith(n,i),r.abort=o.promise,this._enhancePromise(r)},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){var i,o,r=this,s=t.files[0],a=s.size,l=t.uploadedBytes=t.uploadedBytes||0,c=t.maxChunkSize||a,u=s.slice||s.webkitSlice||s.mozSlice,h=e.Deferred(),d=h.promise();return this._isXHRUpload(t)&&u&&(l||a>c)&&!t.data?n?!0:l>=a?(s.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,t.context,[null,"error",s.error])):(o=function(){var n=e.extend({},t);n.blob=u.call(s,l,l+c,s.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+a,r._initXHRData(n),r._initProgressListener(n),i=(r._trigger("chunksend",null,n)!==!1&&e.ajax(n)||r._getXHRPromise(!1,n.context)).done(function(i,s,c){l=r._getUploadedBytes(c)||l+n.chunkSize,(!n.loaded||n.loaded<n.total)&&r._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=s,n.jqXHR=c,r._trigger("chunkdone",null,n),r._trigger("chunkalways",null,n),a>l?o():h.resolveWith(n.context,[i,s,c])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,r._trigger("chunkfail",null,n),r._trigger("chunkalways",null,n),h.rejectWith(n.context,[e,t,i])})},this._enhancePromise(d),d.abort=function(){return i.abort()},o(),d):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer),this._active+=1,this._loaded+=t.uploadedBytes||0,this._total+=this._getTotal(t.files)},_onDone:function(t,n,i,o){if(!o.uploadedBytes&&(!this._isXHRUpload(o)||!o.loaded||o.loaded<o.total)){var r=this._getTotal(o.files)||1;this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r,total:r}),o)}o.result=t,o.textStatus=n,o.jqXHR=i,this._trigger("done",null,o)},_onFail:function(e,t,n,i){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,this._trigger("fail",null,i),i.recalculateProgress&&(this._loaded-=i.loaded||i.uploadedBytes||0,this._total-=i.total||this._getTotal(i.files))},_onAlways:function(e,t,n,i){this._active-=1,this._trigger("always",null,i),0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(t,n){var i,o,r,s,a=this,l=a._getAJAXSettings(n),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,i=i||((o||a._trigger("send",t,l)===!1)&&a._getXHRPromise(!1,l.context,o)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,n){a._onDone(e,t,n,l)}).fail(function(e,t,n){a._onFail(e,t,n,l)}).always(function(e,t,n){if(a._sending-=1,a._onAlways(e,t,n,l),l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var i,o=a._slots.shift();o;){if(i=o.state?"pending"===o.state():!o.isRejected()){o.resolve();break}o=a._slots.shift()}})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=e.Deferred(),this._slots.push(r),s=r.pipe(c)):s=this._sequence=this._sequence.pipe(c,c),s.abort=function(){return o=[void 0,"abort","abort"],i?i.abort():(r&&r.rejectWith(l.context,o),c())},this._enhancePromise(s)):c()},_onAdd:function(t,n){var i,o,r,s,a=this,l=!0,c=e.extend({},this.options,n),u=c.limitMultiFileUploads,h=this._getParamName(c);if((c.singleFileUploads||u)&&this._isXHRUpload(c))if(!c.singleFileUploads&&u)for(r=[],i=[],s=0;s<n.files.length;s+=u)r.push(n.files.slice(s,s+u)),o=h.slice(s,s+u),o.length||(o=h),i.push(o);else i=h;else r=[n.files],i=[h];return n.originalFiles=n.files,e.each(r||n.files,function(o,s){var c=e.extend({},n);return c.files=r?s:[s],c.paramName=i[o],c.submit=function(){return c.jqXHR=this.jqXHR=a._trigger("submit",t,this)!==!1&&a._onSend(t,this),this.jqXHR},l=a._trigger("add",t,c)}),l},_replaceFileInput:function(t){var n=t.clone(!0);e("<form></form>").append(n)[0].reset(),t.after(n).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,i){return i===t[0]?n[0]:i}),t[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,n){var i,o=this,r=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),r.resolve([e])};return n=n||"",t.isFile?t._file?(t._file.relativePath=n,r.resolve(t._file)):t.file(function(e){e.relativePath=n,r.resolve(e)},s):t.isDirectory?(i=t.createReader(),i.readEntries(function(e){o._handleFileTreeEntries(e,n+t.name+"/").done(function(e){r.resolve(e)}).fail(s)},s)):r.resolve([]),r.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n,i,o=t.prop("webkitEntries")||t.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if(n=e.makeArray(t.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(i=t.prop("value"),!i)return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(e){i.files=e,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",t,i)!==!1&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent.clipboardData,i=n&&n.items||[],o={files:[]};return e.each(i,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&o.files.push(n)}),this._trigger("paste",t,o)===!1||this._onAdd(t,o)===!1?!1:void 0},_onDrop:function(e){var t=this,n=e.dataTransfer=e.originalEvent.dataTransfer,i={};n&&n.files&&n.files.length&&e.preventDefault(),this._getDroppedFiles(n).always(function(n){i.files=n,t._trigger("drop",e,i)!==!1&&t._onAdd(e,i)})},_onDragOver:function(t){var n=t.dataTransfer=t.originalEvent.dataTransfer;return this._trigger("dragover",t)===!1?!1:(n&&-1!==e.inArray("Files",n.types)&&(n.dropEffect="copy",t.preventDefault()),void 0)},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=-1!==e.inArray(t,this._refreshOptionsList);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_create:function(){var t=this.options;e.extend(t,e(this.element[0].cloneNode(!1)).data()),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,o=this,r=e.Deferred(),s=r.promise();return s.abort=function(){return i=!0,n?n.abort():(r.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){i||(t.files=e,n=o._onSend(null,t).then(function(e,t,n){r.resolve(e,t,n)},function(e,t,n){r.reject(e,t,n)}))}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})});var AvatarForRails=AvatarForRails||function(e){var t=[],n=function(e){t.push(e)},i=function(){e.each(t,function(e,t){t()})},o=function(){e('input[name*="logo"]').fileupload({dataType:"json",progressall:function(t,n){var i=parseInt(100*(n.loaded/n.total),10);e("#avatar-progress .bar").css("width",i+"%")},done:r}),e("#avatar-progress .bar").css("width","0%")},r=function(e,t){t.result.redirect_path?window.location=t.result.redirect_path:t.result.crop?s(t.result.crop):Flashy.message("error",t.result.errors)},s=function(t){var n,i,o=e(".avatar-update");e("#avatar-progress .bar").css("width","0%"),o.html(t),n=o.find("img.avatar-crop"),i=parseInt(n.attr("data-aspect_ratio"),10),n.Jcrop({bgColor:"clear",bgOpacity:.6,setSelect:[0,0,200,200/i],aspectRatio:i,onSelect:a,onChange:a})},a=function(t){var n=e("img.avatar-crop"),i=n.width(),o=n.height();(0===t.w||0===t.h)&&(t.x=0,t.y=0),e('input[name*="logo_crop_x"]').val(t.x/i),e('input[name*="logo_crop_y"]').val(t.y/o),e('input[name*="logo_crop_w"]').val(t.w/i)};return n(o),{edit:i}}(jQuery),SocialStream=SocialStream||{};SocialStream.Callback=function(){this.registry={},this.handlers={}},SocialStream.Callback.prototype=function(e,t,n){var i=function(){var e=this,i=Array.prototype.slice.call(arguments),o=i.shift();this.registry[o]===n&&(this.registry[o]=[],this.handlers[o]=function(n){t.each(e.registry[o],function(e,t){t(n)})}),this.registry[o].push.apply(this.registry[o],i)},o=function(e){var t=this;for(var i in t.handlers)t.handlers.hasOwnProperty(i)&&(e[i]=t.handlers[i]);return e.callbackRegister=function(){var e=Array.prototype.slice.call(arguments),i=e.shift();t.register.apply(t,arguments),this[i]===n&&(this[i]=t.handlers[i])},e};return{extend:o,register:i}}(SocialStream,jQuery),SocialStream.Action=function(e,t){var n=new e.Callback,i=function(e){var t=e.follow;t&&(o(e).replaceWith(t.form),r(e).replaceWith(t.sentence))},o=function(e){return t(".follow_form-"+e.activity_object.id)},r=function(e){return t(".follow_sentence-"+e.activity_object.id)};return n.register("update",i),n.extend({followForms:o,followSentences:r})}(SocialStream,jQuery),SocialStream.Audience=function(e,t,n){var i=new e.Callback,o=function(e){var i=".audience",o=".audience-tooltip";e!==n&&(o="#"+e+" "+o,i="#"+e+" "+i),t(o).hide(),t(i).tooltip({html:!0,trigger:"click hover",title:function(){return t(this).siblings(o).html()}})};return i.register("index",o),i.extend({})}(SocialStream,jQuery),function(e){var t={className:"autosizejs",append:"",callback:!1},n="hidden",i="border-box",o="lineHeight",r='<textarea tabindex="-1" style="position:absolute; top:-9999px; left:-9999px; right:auto; bottom:auto; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden;"/>',s=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],a="oninput",l="onpropertychange",c=e(r)[0];c.setAttribute(a,"return"),e.isFunction(c[a])||l in c?(e(c).css(o,"99px"),"99px"===e(c).css(o)&&s.push(o),e.fn.autosize=function(o){return o=e.extend({},t,o||{}),this.each(function(){function t(){var e,t,i;u||(u=!0,c.value=d.value+o.append,c.style.overflowY=d.style.overflowY,i=parseInt(d.style.height,10),c.style.width=f.css("width"),c.scrollTop=0,c.scrollTop=9e4,e=c.scrollTop,t=n,e>m?(e=m,t="scroll"):p>e&&(e=p),e+=v,d.style.overflowY=t,i!==e&&(d.style.height=e+"px",b&&o.callback.call(d)),setTimeout(function(){u=!1},1))}var c,u,h,d=this,f=e(d),p=f.height(),m=parseInt(f.css("maxHeight"),10),g=s.length,v=0,y=d.value,b=e.isFunction(o.callback);if((f.css("box-sizing")===i||f.css("-moz-box-sizing")===i||f.css("-webkit-box-sizing")===i)&&(v=f.outerHeight()-f.height()),!f.data("mirror")&&!f.data("ismirror")){for(c=e(r).data("ismirror",!0).addClass(o.className)[0],h="none"===f.css("resize")?"none":"horizontal",f.data("mirror",e(c)).css({overflow:n,overflowY:n,wordWrap:"break-word",resize:h}),m=m&&m>0?m:9e4;g--;)c.style[s[g]]=f.css(s[g]);e("body").append(c),l in d?a in d?d[a]=d.onkeyup=t:d[l]=t:(d[a]=t,d.value="",d.value=y),e(window).resize(t),f.bind("autosize",t),t()}})}):e.fn.autosize=function(){return this}}(jQuery),SocialStream.Comment=function(e,t,n){var i=new e.Callback,o=["input[type=submit]"],r=[".avatar","textarea"],s=o.concat(r),a=function(e){t("#comments_activity_"+e.parentActivityId).append(e.html)},l=function(e){e===n&&(e="div.new_comment"),t.each(o,function(n,i){var o=t(e).find(i);o.hide()})},c=function(e){e===n&&(e="div.new_comment"),t.each(s,function(n,i){t(e).find(i).show()})},u=function(){l(),t(".root").each(function(){var e=t(this).find("div.comments"),n=t(this).find("div.new_comment");""===t.trim(e.text())&&t.each(r,function(e,t){n.find(t).hide()})})},h=function(e){var n=t("#activity_"+e.parentActivityId).find("div.new_comment");n.find("textarea").val(""),l(n)},d=function(){t(".new_comment textarea").autosize()},f=function(){t(".new_comment textarea").click(function(){var e=t(this).closest("div.new_comment");c(e)}),t(".new_comment textarea").blur(function(){""===t(this).val()&&l(t(this).closest("div.new_comment"))})},p=function(){t(".to_comment").click(function(){var e=t(this).closest(".root").find("div.new_comment");return e.find("textarea").show().click().focus(),!1})},m=function(){t(".comments").each(function(){var e,n=t(this).children(".child");n.size()>3&&(e=t(this).find(".hidden_comments"),e.length?(e.find("a").html(I18n.t("comment.view_all",{count:n.size()})),e.show()):t(this).prepend("<div class='hidden_comments'><a href='#' onclick='SocialStream.Comment.showAll(\""+t(this).attr("id")+"\"); return false;'>"+I18n.t("comment.view_all",{count:n.size()})+"</a></div>"),n.slice(0,n.size()-2).hide())})},g=function(e){t("#"+e).children().show("show"),t("#"+e).children(".hidden_comments").hide()},v=function(){var e=window.location.hash.match(/^.*activity_(\d+).*$/);e&&e>0&&t.scrollTo("#activity_"+e[1],1500,{axis:"y"})};return i.register("index",u,d,f,p,v,m),i.register("create",a,h,d,f,p),i.extend({showAll:g})}(SocialStream,jQuery),SocialStream.Contact=function(e,t){var n=new t.Callback,i=function(t){return e('[data-contact_id="'+t+'"]')},o=function(){e(".contacts ul.nav-tabs a").click(r)},r=function(){var t=e(this);t.attr("data-loaded")||e.ajax({url:t.attr("data-path"),data:{type:t.attr("href").replace("#",""),q:e("#contact-filter").val()},dataType:"html",type:"GET",success:function(i){e(t.attr("href")).find(".contact-list").html(i),t.attr("data-loaded","true"),n.handlers.index()}})},s=function(){e('.edit_contact select[name*="relation_ids"]').multiselect({buttonClass:"btn btn-small",buttonText:a}),c(e("form.edit_contact")),e('form.edit_contact ul.dropdown-menu input[type="checkbox"]').change(function(){h(this)}),e("form.edit_contact button.dropdown-toggle").on("click.dropdown.data-api",l)},a=function(e){var t;return t=0===e.length?I18n.t("contact.new.button.zero"):I18n.t("contact.new.button",{count:e.length}),t+'<b class="caret"></b>'},l=function(){e('form.edit_contact[data-status="changed"]').each(function(t,n){var i=e(n).attr("data-contact_id"),o=e('form[data-contact_id="'+i+'"]');e("button",o).attr("data-loading-text",I18n.t("contact.saving")),e("button",o).button("loading"),e("option:selected",n).length>0?e(n).submit():confirm(I18n.t("contact.confirm_delete"))?e(n).submit():b({id:i})})},c=function(t){e(t).each(function(){e(this).data("relations",d(e(this)))})},u=function(t){var n=e(t).data("relations"),i=e('select[name*="relation_ids"]',t);e("option",i).each(function(){e(this).attr("selected",e.inArray(e(this).val(),n)>=0)}),i.multiselect("refresh")},h=function(t){var n=e(t).closest("form"),i=e(n).data("relations"),o=d(n);0===e(i).not(o).length&&0===e(o).not(i).length?e(n).removeAttr("data-status"):e(n).attr("data-status","changed")},d=function(t){return e('ul.dropdown-menu input[type="checkbox"]',t).map(function(){return e(this).is(":checked")?e(this).val():void 0})},f=function(){e(".contact-filter").on("input",p)},p=function(){var t=e(this).val(),i=e(".contacts .tab-pane.active");e("#contacts-loading").show(),e.ajax({data:{q:t,type:i.attr("id")},dataType:"html",type:"GET",success:function(t){e("#contacts-loading").hide(),i.find(".contact-list").html(t),n.handlers.index()}})},m=function(){e("#contacts-loading").hide()},g=function(){e(".new_group-modal-link").attr("href","#new_group-modal")},v=function(){e("html").on("click.dropdown.data-api",l)},y=function(t){var n=i(t.id);c(n),e("button",n).data("resetText",a(e("option:selected",n))),n.removeAttr("data-status"),e("button",n).button("reset")},b=function(t){var n=i(t.id);u(n),n.removeAttr("data-status"),e("button",n).data("resetText",a(e("option:selected",n))),e("button",n).button("reset")},w=function(t){e('[data-contact_id="'+t.id+'"]').each(function(t,n){e.each(["suggestions","pendings"],function(t,i){var o="#"+i;e(n).closest(o).length>0&&_(n,e(o).attr("data-path"))})})},_=function(t,n){var i=e(t).closest(".contact");e.ajax({url:n,dataType:"html",type:"GET",success:function(t){e(i).fadeOut("slow",function(){e(t).replaceAll(i).fadeIn(),s()})}})},x=function(t){var n=i(t.id);0===e("option:selected",n).length&&n.closest(".contact").hide("slow")},C=function(e){i(e.id).closest(".contact").hide("slow")},E=function(t){e(t).select2({multiple:!0,ajax:{url:e(t).attr("data-path"),dataType:"json",data:function(e,t){return{q:e,page:t}},results:function(e){return{results:e}}},id:function(e){return e.id.toString()},formatResult:T,formatSelection:S,initSelection:k})},S=function(e){return e.name},T=function(e){return'<img src="'+e.image.url+'"> '+e.name},k=function(e,t){t([{id:e.val(),name:e.attr("data-recipient-name")}])};return n.register("index",o,s,f,g,m),n.register("update",y,w,x),n.register("destroy",C),e(function(){s(),v()}),n.extend({select2:E})}(jQuery,SocialStream),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var n=e.scrollTo=function(t,n,i){e(window).scrollTo(t,n,i)};n.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1},n.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return t;var i=(t.contentWindow||t).document||t.ownerDocument||t;return e.browser.safari||"BackCompat"==i.compatMode?i.body:i.documentElement})},e.fn.scrollTo=function(i,o,r){return"object"==typeof o&&(r=o,o=0),"function"==typeof r&&(r={onAfter:r}),"max"==i&&(i=9e9),r=e.extend({},n.defaults,r),o=o||r.speed||r.duration,r.queue=r.queue&&r.axis.length>1,r.queue&&(o/=2),r.offset=t(r.offset),r.over=t(r.over),this._scrollable().each(function(){function s(e){c.animate(h,o,r.easing,e&&function(){e.call(this,i,r)})}var a,l=this,c=e(l),u=i,h={},d=c.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}u=e(u,this);case"object":(u.is||u.style)&&(a=(u=e(u)).offset())}e.each(r.axis.split(""),function(e,t){var i="x"==t?"Left":"Top",o=i.toLowerCase(),f="scroll"+i,p=l[f],m=n.max(l,t);if(a)h[f]=a[o]+(d?0:p-c.offset()[o]),r.margin&&(h[f]-=parseInt(u.css("margin"+i))||0,h[f]-=parseInt(u.css("border"+i+"Width"))||0),h[f]+=r.offset[o]||0,r.over[o]&&(h[f]+=u["x"==t?"width":"height"]()*r.over[o]);else{var g=u[o];h[f]=g.slice&&"%"==g.slice(-1)?parseFloat(g)/100*m:g}/^\d+$/.test(h[f])&&(h[f]=h[f]<=0?0:Math.min(h[f],m)),!e&&r.queue&&(p!=h[f]&&s(r.onAfterFirst),delete h[f])}),s(r.onAfter)}).end()},n.max=function(t,n){var i="x"==n?"Width":"Height",o="scroll"+i;if(!e(t).is("html,body"))return t[o]-e(t)[i.toLowerCase()]();var r="client"+i,s=t.ownerDocument.documentElement,a=t.ownerDocument.body;return Math.max(s[o],a[o])-Math.min(s[r],a[r])}}(jQuery),/**
 * jQuery Validation Plugin 1.8.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright (c) 2006 - 2011 Jörn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"),void 0;var n=e.data(this[0],"validator");return n?n:(n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.find("input, button").filter(".cancel").click(function(){n.cancelSubmit=!0}),n.settings.submitHandler&&this.find("input, button").filter(":submit").click(function(){n.submitButton=this}),this.submit(function(t){function i(){if(n.settings.submitHandler){if(n.submitButton)var t=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(n.submitButton.value).appendTo(n.currentForm);return n.settings.submitHandler.call(n,n.currentForm),n.submitButton&&t.remove(),!1}return!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,n=e(this[0].form).validate();return this.each(function(){t&=n.element(this)}),t},removeAttrs:function(t){var n={},i=this;return e.each(t.split(/\s/),function(e,t){n[t]=i.attr(t),i.removeAttr(t)}),n},rules:function(t,n){var i=this[0];if(t){var o=e.data(i.form,"validator").settings,r=o.rules,s=e.validator.staticRules(i);switch(t){case"add":e.extend(s,e.validator.normalizeRule(n)),r[i.name]=s,n.messages&&(o.messages[i.name]=e.extend(o.messages[i.name],n.messages));break;case"remove":if(!n)return delete r[i.name],s;var a={};return e.each(n.split(/\s/),function(e,t){a[t]=s[t],delete s[t]}),a}}var l=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(i),e.validator.classRules(i),e.validator.attributeRules(i),e.validator.staticRules(i)),i);if(l.required){var c=l.required;delete l.required,l=e.extend({required:c},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1==arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!=Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!=Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),n)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:[],ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e){(e.name in this.submitted||e==this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).addClass(n).removeClass(i):e(t).addClass(n).removeClass(i)},unhighlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).removeClass(n).addClass(i):e(t).removeClass(n).addClass(i)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this[0].form,"validator"),i="on"+t.type.replace(/^validate/,"");n.settings[i]&&n.settings[i].call(n,this[0])}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n=this.groups={};e.each(this.settings.groups,function(t,i){e.each(i.split(/\s/),function(e,i){n[i]=t})});var i=this.settings.rules;e.each(i,function(t,n){i[t]=e.validator.normalizeRule(n)}),e(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",t).validateDelegate(":radio, :checkbox, select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.clean(t),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var n=this.check(t);return n?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1==e.grep(this.errorList,function(e){return e.element.name==t.name}).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){return e(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},check:function(t){t=this.clean(t),this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]);var n=e(t).rules(),i=!1;for(var o in n){var r={method:o,parameters:n[o]};try{var s=e.validator.methods[o].call(this,t.value.replace(/\r/g,""),t,r.parameters);if("dependency-mismatch"==s){i=!0;continue}if(i=!1,"pending"==s)return this.toHide=this.toHide.not(this.errorsFor(t)),void 0;if(!s)return this.formatAndAdd(t,r),!1}catch(a){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+r.method+"' method",a),a}}return i?void 0:(this.objectLength(n)&&this.successList.push(t),!0)},customMetaMessage:function(t,n){if(e.metadata){var i=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return i&&i.messages&&i.messages[n]}},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor==String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e];return void 0},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customMetaMessage(t,n),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(e,t){var n=this.defaultMessage(e,t.method),i=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,t.parameters,e):i.test(n)&&(n=jQuery.format(n.replace(i,"{$1}"),t.parameters)),this.errorList.push({message:n,element:e}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var t=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(var e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(var e=0,n=this.validElements();n[e];e++)this.settings.unhighlight.call(this,n[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var i=this.errorsFor(t);i.length?(i.removeClass().addClass(this.settings.errorClass),i.attr("generated")&&i.html(n)):(i=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(i=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(i).length||(this.settings.errorPlacement?this.settings.errorPlacement(i,e(t)):i.insertAfter(t))),!n&&this.settings.success&&(i.text(""),"string"==typeof this.settings.success?i.addClass(this.settings.success):this.settings.success(i)),this.toShow=this.toShow.add(i)},errorsFor:function(t){var n=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")==n})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){var n=this.currentForm;return e(document.getElementsByName(t)).map(function(e,i){return i.form==n&&i.name==t&&i||null})},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){return!e.validator.methods.required.call(this,e.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&0==this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor==String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},i=e(t).attr("class");return i&&e.each(i.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},attributeRules:function(t){var n={},i=e(t);for(var o in e.validator.methods){var r=i.attr(o);r&&(n[o]=r)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},metadataRules:function(t){if(!e.metadata)return{};var n=e.data(t.form,"validator").settings.meta;return n?e(t).metadata()[n]:e(t).metadata()},staticRules:function(t){var n={},i=e.data(t.form,"validator");return i.settings.rules&&(n=e.validator.normalizeRule(i.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(i,o){if(o===!1)return delete t[i],void 0;if(o.param||o.depends){var r=!0;switch(typeof o.depends){case"string":r=!!e(o.depends,n.form).length;break;case"function":r=o.depends.call(n,n)}r?t[i]=void 0!==o.param?o.param:!0:delete t[i]}}),e.each(t,function(i,o){t[i]=e.isFunction(o)?o(n):o}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,i){e.validator.methods[t]=n,e.validator.messages[t]=void 0!=i?i:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,i){if(!this.depend(i,n))return"dependency-mismatch";switch(n.nodeName.toLowerCase()){case"select":var o=e(n).val();return o&&o.length>0;case"input":if(this.checkable(n))return this.getLength(t,n)>0;default:return e.trim(t).length>0}},remote:function(t,n,i){if(this.optional(n))return"dependency-mismatch";var o=this.previousValue(n);if(this.settings.messages[n.name]||(this.settings.messages[n.name]={}),o.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=o.message,i="string"==typeof i&&{url:i}||i,this.pending[n.name])return"pending";if(o.old===t)return o.valid;o.old=t;var r=this;this.startRequest(n);var s={};return s[n.name]=t,e.ajax(e.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:s,success:function(i){r.settings.messages[n.name].remote=o.originalMessage;var s=i===!0;if(s){var a=r.formSubmitted;r.prepareElement(n),r.formSubmitted=a,r.successList.push(n),r.showErrors()}else{var l={},c=i||r.defaultMessage(n,"remote");l[n.name]=o.message=e.isFunction(c)?c(t):c,r.showErrors(l)}o.valid=s,r.stopRequest(n,s)}},i)),"pending"},minlength:function(t,n,i){return this.optional(n)||this.getLength(e.trim(t),n)>=i},maxlength:function(t,n,i){return this.optional(n)||this.getLength(e.trim(t),n)<=i},rangelength:function(t,n,i){var o=this.getLength(e.trim(t),n);return this.optional(n)||o>=i[0]&&o<=i[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||n>=e},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9-]+/.test(e))return!1;var n=0,i=0,o=!1;e=e.replace(/\D/g,"");for(var r=e.length-1;r>=0;r--){var s=e.charAt(r),i=parseInt(s,10);o&&(i*=2)>9&&(i-=9),n+=i,o=!o}return 0==n%10},accept:function(e,t,n){return n="string"==typeof n?n.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+n+")$","i"))},equalTo:function(t,n,i){var o=e(i).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(n).valid()});return t==o.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,n,i){var o=e.port;"abort"==e.mode&&(t[o]&&t[o].abort(),t[o]=i)});else{var n=e.ajax;e.ajax=function(i){var o=("mode"in i?i:e.ajaxSettings).mode,r=("port"in i?i:e.ajaxSettings).port;return"abort"==o?(t[r]&&t[r].abort(),t[r]=n.apply(this,arguments)):n.apply(this,arguments)}}}(jQuery),function(e){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||e.each({focus:"focusin",blur:"focusout"},function(t,n){function i(t){return t=e.event.fix(t),t.type=n,e.event.handle.call(this,t)}e.event.special[n]={setup:function(){this.addEventListener(t,i,!0)},teardown:function(){this.removeEventListener(t,i,!0)},handler:function(t){return arguments[0]=e.event.fix(t),arguments[0].type=n,e.event.handle.apply(this,arguments)}}}),e.extend(e.fn,{validateDelegate:function(t,n,i){return this.bind(n,function(n){var o=e(n.target);return o.is(t)?i.apply(o,arguments):void 0})}})}(jQuery),/*! jQuery Browser - v0.1.0 - 3/23/2012
* https://github.com/jquery/jquery-browser
* Copyright (c) 2012 John Resig; Licensed MIT */
function(e){var t,n=navigator.userAgent||"";e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},t=e.uaMatch(n),e.browser={},t.browser&&(e.browser[t.browser]=!0,e.browser.version=t.version),e.browser.webkit&&(e.browser.safari=!0)}(jQuery),/**
 @preserve CLEditor WYSIWYG HTML Editor v1.3.0
 http://premiumsoftware.net/cleditor
 requires jQuery v1.4.2 or later

 Copyright 2010, Chris Landowski, Premium Software, LLC
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
function(e){function t(t){var n=this,i=t.target,o=e.data(i,A),r=Z[o],s=r.popupName,a=J[s];if(!n.disabled&&e(i).attr(j)!=j){var l={editor:n,button:i,buttonName:o,popup:a,popupName:s,command:r.command,useCSS:n.options.useCSS};if(r.buttonClick&&r.buttonClick(t,l)===!1)return!1;if("source"==o)S(n)?(delete n.range,n.$area.hide(),n.$frame.show(),i.title=r.title):(n.$frame.hide(),n.$area.show(),i.title="Show Rich Text"),setTimeout(function(){y(n)},100);else if(!S(n)){if(s){var h=e(a);if("url"==s){if("link"==o&&""===x(n))return C(n,"A selection is required when inserting a link.",i),!1;h.children(":button").unbind(R).bind(R,function(){var t=h.find(":text"),i=e.trim(t.val());""!==i&&c(n,l.command,i,null,l.button),t.val("http://"),p(),u(n)})}else"pastetext"==s&&h.children(":button").unbind(R).bind(R,function(){var e=h.find("textarea"),t=e.val().replace(/\n/g,"<br />");""!==t&&c(n,l.command,t,null,l.button),e.val(""),p(),u(n)});if(i!==e.data(a,P))return E(n,a,i),!1;return}if("print"==o)n.$frame[0].contentWindow.print();else if(!c(n,l.command,l.value,l.useCSS,i))return!1}u(n)}}function n(t){var n=e(t.target).closest("div");n.css(N,n.data(A)?"#FFF":"#FFC")}function i(t){e(t.target).closest("div").css(N,"transparent")}function o(t){var n=this,i=t.data.popup,o=t.target;if(i!==J.msg&&!e(i).hasClass(G)){var r,s=e.data(i,P),a=e.data(s,A),l=Z[a],h=l.command,d=n.options.useCSS;"font"==a?r=o.style.fontFamily.replace(/"/g,""):"size"==a?("DIV"==o.tagName&&(o=o.children[0]),r=o.innerHTML):"style"==a?r="<"+o.tagName+">":"color"==a?r=f(o.style.backgroundColor):"highlight"==a&&(r=f(o.style.backgroundColor),Y?h="backcolor":d=!0);var m={editor:n,button:s,buttonName:a,popup:i,popupName:l.popupName,command:h,value:r,useCSS:d};if(!l.popupClick||l.popupClick(t,m)!==!1){if(m.command&&!c(n,m.command,m.value,m.useCSS,s))return!1;p(),u(n)}}}function r(e){for(var t=1,n=0,i=0;i<e.length;++i)t=(t+e.charCodeAt(i))%65521,n=(n+t)%65521;return n<<16|t}function s(e){e.$area.val(""),T(e)}function a(t,o,r,s,a){if(J[t])return J[t];var l=e(O).hide().addClass($).appendTo("body");if(s)l.html(s);else if("color"==t){var c=o.colors.split(" ");c.length<10&&l.width("auto"),e.each(c,function(t,n){e(O).appendTo(l).css(N,"#"+n)}),r=V}else"font"==t?e.each(o.fonts.split(","),function(t,n){e(O).appendTo(l).css("fontFamily",n).html(n)}):"size"==t?e.each(o.sizes.split(","),function(t,n){e(O).appendTo(l).html("<font size="+n+">"+n+"</font>")}):"style"==t?e.each(o.styles,function(t,n){e(O).appendTo(l).html(n[1]+n[0]+n[1].replace("<","</"))}):"url"==t?(l.html('Enter URL:<br><input type=text value="http://" size=35><br><input type=button value="Submit">'),r=G):"pastetext"==t&&(l.html("Paste your content here and click submit.<br /><textarea cols=40 rows=3></textarea><br /><input type=button value=Submit>"),r=G);return r||s||(r=U),l.addClass(r),Y&&l.attr(F,"on").find("div,font,p,h1,h2,h3,h4,h5,h6").attr(F,"on"),(l.hasClass(U)||a===!0)&&l.children().hover(n,i),J[t]=l[0],l[0]}function l(e,t){t?(e.$area.attr(j,j),e.disabled=!0):(e.$area.removeAttr(j),delete e.disabled);try{Y?e.doc.body.contentEditable=!t:e.doc.designMode=t?"off":"on"}catch(n){}y(e)}function c(e,t,n,i,o){b(e),Y||((void 0===i||null===i)&&(i=e.options.useCSS),e.doc.execCommand("styleWithCSS",0,i.toString()));var r,s=!0;if(Y&&"inserthtml"==t.toLowerCase())h(e).pasteHTML(n);else{try{s=e.doc.execCommand(t,0,n||null)}catch(a){r=a.description,s=!1}s||("cutcopypaste".indexOf(t)>-1?C(e,"For security reasons, your browser does not support the "+t+" command. Try using the keyboard shortcut or context menu instead.",o):C(e,r?r:"Error executing the "+t+" command.",o))}return y(e),s}function u(e){setTimeout(function(){S(e)?e.$area.focus():e.$frame[0].contentWindow.focus(),y(e)},0)}function h(e){return Y?d(e).createRange():d(e).getRangeAt(0)}function d(e){return Y?e.doc.selection:e.$frame[0].contentWindow.getSelection()}function f(e){var t=/rgba?\((\d+), (\d+), (\d+)/.exec(e),n=e.split("");if(t)for(e=(t[1]<<16|t[2]<<8|t[3]).toString(16);e.length<6;)e="0"+e;return"#"+(6==e.length?e:n[1]+n[1]+n[2]+n[2]+n[3]+n[3])}function p(){e.each(J,function(t,n){e(n).hide().unbind(R).removeData(P)})}function m(){var t="jquery.cleditor.css",n=e("link[href$='"+t+"']").attr("href");return n.substr(0,n.length-t.length)+"images/"}function g(e){return"url("+m()+e+")"}function v(t){var n=t.$main,i=t.options;t.$frame&&t.$frame.remove();var o=t.$frame=e('<iframe frameborder="0" src="javascript:true;">').hide().appendTo(n),r=o[0].contentWindow,s=t.doc=r.document,a=e(s);s.open(),s.write(i.docType+"<html>"+(""===i.docCSSFile?"":'<head><link rel="stylesheet" type="text/css" href="'+i.docCSSFile+'" /></head>')+'<body style="'+i.bodyStyle+'"></body></html>'),s.close(),Y&&a.click(function(){u(t)}),T(t),Y&&(a.bind("beforedeactivate beforeactivate selectionchange keypress",function(e){if("beforedeactivate"==e.type)t.inactive=!0;else if("beforeactivate"==e.type)!t.inactive&&t.range&&t.range.length>1&&t.range.shift(),delete t.inactive;else if(!t.inactive)for(t.range||(t.range=[]),t.range.unshift(h(t));t.range.length>2;)t.range.pop()}),o.focus(function(){b(t)})),(e.browser.mozilla?a:e(r)).blur(function(){k(t,!0)}),a.click(p).bind("keyup mouseup",function(){y(t)}),K?t.$area.show():o.show(),e(function(){var e=t.$toolbar,r=e.children("div:last"),s=n.width(),a=r.offset().top+r.outerHeight()-e.offset().top+1;e.height(a),a=(/%/.test(""+i.height)?n.height():parseInt(i.height))-a,o.width(s).height(a),t.$area.width(s).height(X?a-2:a),l(t,t.disabled),y(t)})}function y(t){K||!e.browser.webkit||t.focused||(t.$frame[0].contentWindow.focus(),window.focus(),t.focused=!0);var n=t.doc;Y&&(n=h(t));var i=S(t);e.each(t.$toolbar.find("."+q),function(o,r){var s=e(r),a=e.cleditor.buttons[e.data(r,A)],l=a.command,c=!0;if(t.disabled)c=!1;else if(a.getEnabled){var u={editor:t,button:r,buttonName:a.name,popup:J[a.popupName],popupName:a.popupName,command:a.command,useCSS:t.options.useCSS};c=a.getEnabled(u),void 0===c&&(c=!0)}else if((i||K)&&"source"!=a.name||Y&&("undo"==l||"redo"==l))c=!1;else if(l&&"print"!=l&&(Y&&"hilitecolor"==l&&(l="backcolor"),!Y||"inserthtml"!=l))try{c=n.queryCommandEnabled(l)}catch(h){c=!1}c?(s.removeClass(z),s.removeAttr(j)):(s.addClass(z),s.attr(j,j))})}function b(e){Y&&e.range&&e.range[0].select()}function w(e){setTimeout(function(){S(e)?e.$area.select():c(e,"selectall")},0)}function _(t){b(t);var n=h(t);if(Y)return n.htmlText;var i=e("<layer>")[0];i.appendChild(n.cloneContents());var o=i.innerHTML;return i=null,o}function x(e){return b(e),Y?h(e).text:d(e).toString()}function C(e,t,n){var i=a("msg",e.options,Q);i.innerHTML=t,E(e,i,n)}function E(t,n,i){var r,s,a,l=e(n);if(i){var c=e(i);r=c.offset(),s=--r.left,a=r.top+c.height()}else{var u=t.$toolbar;r=u.offset(),s=Math.floor((u.width()-l.width())/2)+r.left,a=r.top+u.height()-2}p(),l.css({left:s,top:a}).show(),i&&(e.data(n,P,i),l.bind(R,{popup:n},e.proxy(o,t))),setTimeout(function(){l.find(":text,textarea").eq(0).focus().select()},100)}function S(e){return e.$area.is(":visible")}function T(t,n){var i=t.$area.val(),o=t.options,s=o.updateFrame,a=e(t.doc.body);if(s){var l=r(i);if(n&&t.areaChecksum==l)return;t.areaChecksum=l}var c=s?s(i):i;c=c.replace(/<(?=\/?script)/gi,"&lt;"),o.updateTextArea&&(t.frameChecksum=r(c)),c!=a.html()&&(a.html(c),e(t).triggerHandler(D))}function k(t,n){var i=e(t.doc.body).html(),o=t.options,s=o.updateTextArea,a=t.$area;if(s){var l=r(i);if(n&&t.frameChecksum==l)return;t.frameChecksum=l}var c=s?s(i):i;o.updateFrame&&(t.areaChecksum=r(c)),c!=a.val()&&(a.val(c),e(t).triggerHandler(D))}e.cleditor={defaultOptions:{width:500,height:250,controls:"bold italic underline strikethrough subscript superscript | font size style | color highlight removeformat | bullets numbering | outdent indent | alignleft center alignright justify | undo redo | rule image link unlink | cut copy paste pastetext | print source",colors:"FFF FCC FC9 FF9 FFC 9F9 9FF CFF CCF FCF CCC F66 F96 FF6 FF3 6F9 3FF 6FF 99F F9F BBB F00 F90 FC6 FF0 3F3 6CC 3CF 66C C6C 999 C00 F60 FC3 FC0 3C0 0CC 36F 63F C3C 666 900 C60 C93 990 090 399 33F 60C 939 333 600 930 963 660 060 366 009 339 636 000 300 630 633 330 030 033 006 309 303",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Narrow,Garamond,Georgia,Impact,Sans Serif,Serif,Tahoma,Trebuchet MS,Verdana",sizes:"1,2,3,4,5,6,7",styles:[["Paragraph","<p>"],["Header 1","<h1>"],["Header 2","<h2>"],["Header 3","<h3>"],["Header 4","<h4>"],["Header 5","<h5>"],["Header 6","<h6>"]],useCSS:!1,docType:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">',docCSSFile:"",bodyStyle:"margin:4px; font:10pt Arial,Verdana; cursor:text"},buttons:{init:"bold,,|italic,,|underline,,|strikethrough,,|subscript,,|superscript,,|font,,fontname,|size,Font Size,fontsize,|style,,formatblock,|color,Font Color,forecolor,|highlight,Text Highlight Color,hilitecolor,color|removeformat,Remove Formatting,|bullets,,insertunorderedlist|numbering,,insertorderedlist|outdent,,|indent,,|alignleft,Align Text Left,justifyleft|center,,justifycenter|alignright,Align Text Right,justifyright|justify,,justifyfull|undo,,|redo,,|rule,Insert Horizontal Rule,inserthorizontalrule|image,Insert Image,insertimage,url|link,Insert Hyperlink,createlink,url|unlink,Remove Hyperlink,|cut,,|copy,,|paste,,|pastetext,Paste as Text,inserthtml,|print,,|source,Show Source"},imagesPath:function(){return m()}},e.fn.cleditor=function(t){var n=e([]);return this.each(function(i,o){if("TEXTAREA"==o.tagName){var r=e.data(o,M);r||(r=new cleditor(o,t)),n=n.add(r)}}),n};var I,N="backgroundColor",P="button",A="buttonName",D="change",M="cleditor",R="click",j="disabled",O="<div>",F="unselectable",H="cleditorMain",B="cleditorToolbar",L="cleditorGroup",q="cleditorButton",z="cleditorDisabled",W="cleditorDivider",$="cleditorPopup",U="cleditorList",V="cleditorColor",G="cleditorPrompt",Q="cleditorMsg",Y=e.browser.msie,X=/msie\s6/i.test(navigator.userAgent),K=/iphone|ipad|ipod/i.test(navigator.userAgent),J={},Z=e.cleditor.buttons;e.each(Z.init.split("|"),function(e,t){var n=t.split(","),i=n[0];Z[i]={stripIndex:e,name:i,title:""===n[1]?i.charAt(0).toUpperCase()+i.substr(1):n[1],command:""===n[2]?i:n[2],popupName:""===n[3]?i:n[3]}}),delete Z.init,cleditor=function(o,r){var s=this;s.options=r=e.extend({},e.cleditor.defaultOptions,r);var l=s.$area=e(o).hide().data(M,s).blur(function(){T(s,!0)}),c=s.$main=e(O).addClass(H).width(r.width).height(r.height),u=s.$toolbar=e(O).addClass(B).appendTo(c),h=e(O).addClass(L).appendTo(u);e.each(r.controls.split(" "),function(o,l){if(""===l)return!0;if("|"==l)e(O).addClass(W).appendTo(h),h=e(O).addClass(L).appendTo(u);else{var c=Z[l],d=e(O).data(A,c.name).addClass(q).attr("title",c.title).bind(R,e.proxy(t,s)).appendTo(h).hover(n,i),f={};c.css?f=c.css:c.image&&(f.backgroundImage=g(c.image)),c.stripIndex&&(f.backgroundPosition=-24*c.stripIndex),d.css(f),Y&&d.attr(F,"on"),c.popupName&&a(c.popupName,r,c.popupClass,c.popupContent,c.popupHover)}}),c.insertBefore(l).append(l),I||(e(document).click(function(t){var n=e(t.target);n.add(n.parents()).is("."+G)||p()}),I=!0),/auto|%/.test(""+r.width+r.height)&&e(window).resize(function(){v(s)}),v(s)};var et=cleditor.prototype,tt=[["clear",s],["disable",l],["execCommand",c],["focus",u],["hidePopups",p],["sourceMode",S,!0],["refresh",v],["select",w],["selectedHTML",_,!0],["selectedText",x,!0],["showMessage",C],["updateFrame",T],["updateTextArea",k]];e.each(tt,function(e,t){et[t[0]]=function(){for(var e=this,n=[e],i=0;i<arguments.length;i++)n.push(arguments[i]);var o=t[1].apply(e,n);return t[2]?o:e}}),et.change=function(t){var n=e(this);return t?n.bind(D,t):n.trigger(D)}}(jQuery),SocialStream.Pagination=function(e,t){var n=function(e){var n=t("nav.more");t("a",n).each(function(e,n){t(n).attr("data-page","2")}),t(".loading",n).hide(),t("a",n).click(function(n){n.preventDefault(),t(n.target).hide(),t(n.target).closest("nav.more").find(".loading").show(),t.ajax({url:t(this).attr("data-path"),dataType:"html",data:{page:t(this).attr("data-page")},type:"GET",success:function(i){var o=t(n.target).closest("nav.more"),r=parseInt(t(n.target).attr("data-per_page"),10),s=parseInt(t(n.target).attr("data-remaining"),10)-r;o.before(i),o.find(".loading").hide(),s>0&&(t(n.target).attr("data-remaining",s),t(n.target).attr("data-page",parseInt(t(n.target).attr("data-page"),10)+1),t(n.target).html(I18n.t("layout.more",{count:s})),t(n.target).show()),e&&e()}})})};return{show:n}}(SocialStream,jQuery),SocialStream.Conversation=function(e){var t=new e.Callback,n=function(){e.Pagination.show()};return t.register("index",n),t.extend({})}(SocialStream,jQuery),SocialStream.Explore=function(e,t){var n=new e.Callback,i=function(){t("#explore-header div").on("shown",function(){t(this).attr("data-onpop")?t(this).removeAttr("data-onpop"):window.history.pushState({target:t(this).attr("data-target")},{},t(this).attr("data-path"))}),window.onpopstate=function(e){if(e.state&&e.state.target){var n=t('#explore-header div[data-target="'+e.state.target+'"]');n.attr("data-onpop","true"),n.click()}}},o=function(){t("#explore-header div").on("show",function(e){if(!t(this).attr("data-loaded")){var n=t(e.target);t.ajax({url:t(e.target).attr("data-path"),dataType:"html",type:"GET",success:function(e){t(n.attr("data-target")).html(e),n.attr("data-loaded","true")}})}})};return n.register("index",i,o),n.extend({})}(SocialStream,jQuery),SocialStream.Flash=function(e,t){var n=function(n){n===t&&(n=I18n.t("ajax.error")),e.message("error",n)};return{error:n}}(Flashy),SocialStream.Follow=function(e,t){var n=new e.Callback,i=function(){t(".following-button").mouseenter(function(){t(this).hide(),t(this).siblings(".unfollow-button").show()}),t(".unfollow-button").mouseleave(function(){t(this).hide(),t(this).siblings(".following-button").show()}),t(".unfollow-button").hide()};return n.register("index",i),t(function(){SocialStream.Follow.index()}),n.extend({})}(SocialStream,jQuery),/*
Copyright 2012 Igor Vaynberg

Version: 3.3.2 Timestamp: Mon Mar 25 12:14:18 PDT 2013

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/
function(e){"undefined"==typeof e.fn.each2&&e.fn.extend({each2:function(t){for(var n=e([0]),i=-1,o=this.length;++i<o&&(n.context=n[0]=this[i])&&t.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function n(e,t){for(var n=0,o=t.length;o>n;n+=1)if(i(e,t[n]))return n;return-1}function i(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function o(t,n){var i,o,r;if(null===t||t.length<1)return[];for(i=t.split(n),o=0,r=i.length;r>o;o+=1)i[o]=e.trim(i[o]);return i}function r(e){return e.outerWidth(!1)-e.width()}function s(n){var i="keyup-change-value";n.bind("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.bind("keyup",function(){var o=e.data(n,i);o!==t&&n.val()!==o&&(e.removeData(n,i),n.trigger("keyup-change"))})}function a(n){n.bind("mousemove",function(n){var i=A;(i===t||i.x!==n.pageX||i.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function l(e,n,i){i=i||t;var o;return function(){var t=arguments;window.clearTimeout(o),o=window.setTimeout(function(){n.apply(i,t)},e)}}function c(e){var t,n=!1;return function(){return n===!1&&(t=e(),n=!0),t}}function u(e,t){var i=l(e,function(e){t.trigger("scroll-debounced",e)});t.bind("scroll",function(e){n(e.target,t.get())>=0&&i(e)})}function h(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],i=e.val().length;e.focus(),e.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function d(e){e.preventDefault(),e.stopPropagation()}function f(e){e.preventDefault(),e.stopImmediatePropagation()}function p(t){if(!P){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);P=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),P.attr("class","select2-sizer"),e("body").append(P)}return P.text(t.val()),P.width()}function m(t,n,i){var o,r,s=[];o=t.attr("class"),o&&(o=""+o,e(o.split(" ")).each2(function(){0===this.indexOf("select2-")&&s.push(this)})),o=n.attr("class"),o&&(o=""+o,e(o.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(r=i(this),r&&s.push(this))})),t.attr("class",s.join(" "))}function g(e,t,n,i){var o=e.toUpperCase().indexOf(t.toUpperCase()),r=t.length;return 0>o?(n.push(i(e)),void 0):(n.push(i(e.substring(0,o))),n.push("<span class='select2-match'>"),n.push(i(e.substring(o,o+r))),n.push("</span>"),n.push(i(e.substring(o+r,e.length))),void 0)}function v(t){var n,i=0,o=null,r=t.quietMillis||100,s=t.url,a=this;return function(l){window.clearTimeout(n),n=window.setTimeout(function(){i+=1;var n=i,r=t.data,c=s,u=t.transport||e.ajax,h=t.type||"GET",d={};r=r?r.call(a,l.term,l.page,l.context):null,c="function"==typeof c?c.call(a,l.term,l.page,l.context):c,null!==o&&o.abort(),t.params&&(e.isFunction(t.params)?e.extend(d,t.params.call(a)):e.extend(d,t.params)),e.extend(d,{url:c,dataType:t.dataType,data:r,type:h,cache:!1,success:function(e){if(!(i>n)){var o=t.results(e,l.page);l.callback(o)}}}),o=u.call(a,d)},r)}}function y(t){var n,i,o=t,r=function(e){return""+e.text};e.isArray(o)&&(i=o,o={results:i}),e.isFunction(o)===!1&&(i=o,o=function(){return i});var s=o();return s.text&&(r=s.text,e.isFunction(r)||(n=o.text,r=function(e){return e[n]})),function(t){var n,i=t.term,s={results:[]};return""===i?(t.callback(o()),void 0):(n=function(o,s){var a,l;if(o=o[0],o.children){a={};for(l in o)o.hasOwnProperty(l)&&(a[l]=o[l]);a.children=[],e(o.children).each2(function(e,t){n(t,a.children)}),(a.children.length||t.matcher(i,r(a),o))&&s.push(a)}else t.matcher(i,r(o),o)&&s.push(o)},e(o().results).each2(function(e,t){n(t,s.results)}),t.callback(s),void 0)}}function b(n){var i=e.isFunction(n);return function(o){var r=o.term,s={results:[]};e(i?n():n).each(function(){var e=this.text!==t,n=e?this.text:this;(""===r||o.matcher(r,n))&&s.results.push(e?this:{id:this,text:this})}),o.callback(s)}}function w(t){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error("formatterName must be a function or a falsy value")}function _(t){return e.isFunction(t)?t():t}function x(t){var n=0;return e.each(t,function(e,t){t.children?n+=x(t.children):n++}),n}function C(e,n,o,r){var s,a,l,c,u,h=e,d=!1;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=r.tokenSeparators.length;c>l&&(u=r.tokenSeparators[l],a=e.indexOf(u),!(a>=0));l++);if(0>a)break;if(s=e.substring(0,a),e=e.substring(a+u.length),s.length>0&&(s=r.createSearchChoice(s,n),s!==t&&null!==s&&r.id(s)!==t&&null!==r.id(s))){for(d=!1,l=0,c=n.length;c>l;l++)if(i(r.id(s),r.id(n[l]))){d=!0;break}d||o(s)}}return h!==e?e:void 0}function E(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var S,T,k,I,N,P,A,D;S={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case S.LEFT:case S.RIGHT:case S.UP:case S.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case S.SHIFT:case S.CTRL:case S.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},D=e(document),N=function(){var e=1;return function(){return e++}}(),D.bind("mousemove",function(e){A={x:e.pageX,y:e.pageY}}),T=E(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,o,r=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+N()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=c(function(){return n.element.closest("body")}),m(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(_(n.containerCss)),this.container.addClass(_(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabIndex"),this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){e(this).select2("focus")}).attr("tabIndex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(_(n.dropdownCssClass)),this.dropdown.data("select2",this),this.results=i=this.container.find(r),this.search=o=this.container.find("input.select2-input"),o.attr("tabIndex",this.elementTabIndex),this.resultsPage=0,this.context=null,this.initContainer(),a(this.results),this.dropdown.delegate(r,"mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent)),u(80,this.results),this.dropdown.delegate(r,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),e.fn.mousewheel&&i.mousewheel(function(e,t,n,o){var r=i.scrollTop();o>0&&0>=r-o?(i.scrollTop(0),d(e)):0>o&&i.get(0).scrollHeight-i.scrollTop()+o<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),d(e))}),s(o),o.bind("keyup-change input paste",this.bind(this.updateResults)),o.bind("focus",function(){o.addClass("select2-focused")}),o.bind("blur",function(){o.removeClass("select2-focused")}),this.dropdown.delegate(r,"mouseup",this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(n.element.is(":disabled")||n.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabIndex:this.elementTabIndex}).show())},prepareOpts:function(n){var r,s,a,l;if(r=n.element,"select"===r.get(0).tagName.toLowerCase()&&(this.select=s=n.element),s&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(i,o,r){var s,a=this.opts.id,l=this;s=function(i,o,c){var u,h,d,f,p,m,g,v,y,b;for(i=n.sortResults(i,o,r),u=0,h=i.length;h>u;u+=1)d=i[u],p=d.disabled===!0,f=!p&&a(d)!==t,m=d.children&&d.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+c),g.addClass("select2-result"),g.addClass(f?"select2-result-selectable":"select2-result-unselectable"),p&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(l.opts.formatResultCssClass(d)),v=e(document.createElement("div")),v.addClass("select2-result-label"),b=n.formatResult(d,v,r,l.opts.escapeMarkup),b!==t&&v.html(b),g.append(v),m&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),s(d.children,y,c+1),g.append(y)),g.data("select2-data",d),o.append(g)},s(o,i,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(a=n.id,n.id=function(e){return e[a]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(s?(n.query=this.bind(function(n){var o,s,a,l={results:[],more:!1},c=n.term;a=function(e,t){var o;e.is("option")?n.matcher(c,e.text(),e)&&t.push({id:e.attr("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:i(e.attr("disabled"),"disabled")}):e.is("optgroup")&&(o={text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")},e.children().each2(function(e,t){a(t,o.children)}),o.children.length>0&&t.push(o))},o=r.children(),this.getPlaceholder()!==t&&o.length>0&&(s=o[0],""===e(s).text()&&(o=o.not(s))),o.each2(function(e,t){a(t,l.results)}),n.callback(l)}),n.id=function(e){return e.id},n.formatResultCssClass=function(e){return e.css}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=v.call(n.element,n.ajax)):"data"in n?n.query=y(n.data):"tags"in n&&(n.query=b(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(e){return{id:e,text:e}}),n.initSelection===t&&(n.initSelection=function(t,r){var s=[];e(o(t.val(),n.separator)).each(function(){var t=this,o=this,r=n.tags;e.isFunction(r)&&(r=r()),e(r).each(function(){return i(this.id,t)?(o=this.text,!1):void 0}),s.push({id:t,text:o})}),r(s)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){var e,t=this.opts.element;t.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e,t;e="disabled"!==this.opts.element.attr("disabled"),t="readonly"===this.opts.element.attr("readonly"),e=e&&!t,this.enabled!==e&&(e?this.enable():this.disable()),m(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(_(this.opts.containerCssClass)),m(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(_(this.opts.dropdownCssClass))}),t.bind("propertychange.select2 DOMAttrModified.select2",e),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(function(t){t.forEach(e)}),this.propertyObserver.observe(t.get(0),{attributes:!0,subtree:!1}))},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,i,o=this.container.offset(),r=this.container.outerHeight(!1),s=this.container.outerWidth(!1),a=this.dropdown.outerHeight(!1),l=e(window).scrollLeft()+e(window).width(),c=e(window).scrollTop()+e(window).height(),u=o.top+r,h=o.left,d=c>=u+a,f=o.top-a>=this.body().scrollTop(),p=this.dropdown.outerWidth(!1),m=l>=h+p,g=this.dropdown.hasClass("select2-drop-above");"static"!==this.body().css("position")&&(t=this.body().offset(),u-=t.top,h-=t.left),g?(n=!0,!f&&d&&(n=!1)):(n=!1,!d&&f&&(n=!0)),m||(h=o.left+s-p),n?(u=o.top-a,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),i=e.extend({top:u,left:h,width:s},_(this.opts.dropdownCss)),this.dropdown.css(i)},shouldOpen:function(){var t;return this.opened()?!1:(t=e.Event("opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){function t(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var n,i=this.containerId,o="scroll."+i,r="resize."+i,s="orientationchange."+i;this.clearDropdownAlignmentPreference(),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.updateResults(!0),n=e("#select2-drop-mask"),0==n.length&&(n=e(document.createElement("div")),n.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),n.hide(),n.appendTo(this.body()),n.bind("mousedown touchstart",function(){var t,n=e("#select2-drop");n.length>0&&(t=n.data("select2"),t.opts.selectOnBlur&&t.selectHighlighted({noFocus:!0}),t.close())})),this.dropdown.prev()[0]!==n[0]&&this.dropdown.before(n),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),n.css(t()),n.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var a=this;this.container.parents().add(window).each(function(){e(this).bind(r+" "+o+" "+s,function(){e("#select2-drop-mask").css(t()),a.positionDropdown()})}),this.focusSearch()},close:function(){if(this.opened()){var t=this.containerId,n="scroll."+t,i="resize."+t,o="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).unbind(n).unbind(i).unbind(o)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return _(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,n,i,o,r,s,a,l=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return l.scrollTop(0),void 0;t=this.findHighlightableChoices(),i=e(t[n]),o=i.offset().top+i.outerHeight(!0),n===t.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(o=a.offset().top+a.outerHeight(!0))),r=l.offset().top+l.outerHeight(!0),o>r&&l.scrollTop(l.scrollTop()+(o-r)),s=i.offset().top-l.offset().top,0>s&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)"),this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=t;var o=e(n[i]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")&&!o.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var i,o,r=this.findHighlightableChoices();return 0===arguments.length?n(r.filter(".select2-highlighted")[0],r.get()):(t>=r.length&&(t=r.length-1),0>t&&(t=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),i=e(r[t]),i.addClass("select2-highlighted"),this.ensureHighlightVisible(),o=i.data("select2-data"),o&&this.opts.element.trigger({type:"highlight",val:this.id(o),choice:o}),void 0)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),i=this.resultsPage+1,o=this,r=this.search.val(),s=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:r,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(e){o.opened()&&(o.opts.populateResults.call(this,t,e.results,{term:r,page:i,context:s}),o.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).text(o.opts.formatLoadMore(i+1)),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):n.remove(),o.positionDropdown(),o.resultsPage=i,o.context=e.context)})})))},tokenize:function(){},updateResults:function(n){function o(){c.scrollTop(0),l.removeClass("select2-active"),h.positionDropdown()}function r(e){c.html(e),o()}var s,a,l=this.search,c=this.results,u=this.opts,h=this,d=l.val(),f=e.data(this.container,"select2-last-term");if((n===!0||!f||!i(d,f))&&(e.data(this.container,"select2-last-term",d),n===!0||this.showSearchInput!==!1&&this.opened())){var p=this.getMaximumSelectionSize();if(p>=1&&(s=this.data(),e.isArray(s)&&s.length>=p&&w(u.formatSelectionTooBig,"formatSelectionTooBig")))return r("<li class='select2-selection-limit'>"+u.formatSelectionTooBig(p)+"</li>"),void 0;if(l.val().length<u.minimumInputLength)return w(u.formatInputTooShort,"formatInputTooShort")?r("<li class='select2-no-results'>"+u.formatInputTooShort(l.val(),u.minimumInputLength)+"</li>"):r(""),void 0;if(u.maximumInputLength&&l.val().length>u.maximumInputLength)return w(u.formatInputTooLong,"formatInputTooLong")?r("<li class='select2-no-results'>"+u.formatInputTooLong(l.val(),u.maximumInputLength)+"</li>"):r(""),void 0;u.formatSearching&&0===this.findHighlightableChoices().length&&r("<li class='select2-searching'>"+u.formatSearching()+"</li>"),l.addClass("select2-active"),a=this.tokenize(),a!=t&&null!=a&&l.val(a),this.resultsPage=1,u.query({element:u.element,term:l.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(s){var a;return this.opened()?(this.context=s.context===t?null:s.context,this.opts.createSearchChoice&&""!==l.val()&&(a=this.opts.createSearchChoice.call(null,l.val(),s.results),a!==t&&null!==a&&h.id(a)!==t&&null!==h.id(a)&&0===e(s.results).filter(function(){return i(h.id(this),h.id(a))}).length&&s.results.unshift(a)),0===s.results.length&&w(u.formatNoMatches,"formatNoMatches")?(r("<li class='select2-no-results'>"+u.formatNoMatches(l.val())+"</li>"),void 0):(c.empty(),h.opts.populateResults.call(this,c,s.results,{term:l.val(),page:this.resultsPage,context:null}),s.more===!0&&w(u.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(u.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(s,n),o(),this.opts.element.trigger({type:"loaded",data:s}),void 0)):(this.search.removeClass("select2-active"),void 0)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(e){var t=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i&&(this.highlight(t),this.onSelect(i,e))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function n(){var n,i,o,r,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(i=n.split(";"),r=0,s=i.length;s>r;r+=1)if(o=i[r].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==o&&o.length>=1)return o[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),k=E(T,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop' style='display:none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments),this.focusser.attr("disabled","disabled"),this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),h(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var t,n=this.container,i=this.dropdown,o=!1;this.showSearch(this.opts.minimumResultsForSearch>=0),this.selection=t=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+N()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===S.PAGE_UP||e.which===S.PAGE_DOWN)return d(e),void 0;switch(e.which){case S.UP:case S.DOWN:return this.moveHighlight(e.which===S.UP?-1:1),d(e),void 0;case S.TAB:case S.ENTER:return this.selectHighlighted(),d(e),void 0;case S.ESC:return this.cancel(e),d(e),void 0}}})),this.search.bind("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.bind("keydown",this.bind(function(e){return!this.enabled||e.which===S.TAB||S.isControl(e)||S.isFunctionKey(e)||e.which===S.ESC?void 0:this.opts.openOnEnter===!1&&e.which===S.ENTER?(d(e),void 0):e.which==S.DOWN||e.which==S.UP||e.which==S.ENTER&&this.opts.openOnEnter?(this.open(),d(e),void 0):e.which==S.DELETE||e.which==S.BACKSPACE?(this.opts.allowClear&&this.clear(),d(e),void 0):void 0})),s(this.focusser),this.focusser.bind("keyup-change input",this.bind(function(e){this.opened()||(this.open(),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.focusser.val(""),d(e))})),t.delegate("abbr","mousedown",this.bind(function(e){this.enabled&&(this.clear(),f(e),this.close(),this.selection.focus())})),t.bind("mousedown",this.bind(function(e){o=!0,this.opened()?this.close():this.enabled&&this.open(),d(e),o=!1})),i.bind("mousedown",this.bind(function(){this.search.focus()})),t.bind("focus",this.bind(function(e){d(e)})),this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")})),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");t&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(t,n){var i=t.find(":selected");e.isFunction(n)&&n({id:i.attr("value"),text:i.text(),element:i})}:"data"in t&&(t.initSelection=t.initSelection||function(n,o){var r=n.val(),s=null;t.query({matcher:function(e,n,o){var a=i(r,t.id(o));return a&&(s=o),a},callback:e.isFunction(o)?function(){o(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(""===this.opts.element.val()&&e!==t){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(e,t,n){var o=0,r=this,s=!0;if(this.findHighlightableChoices().each2(function(e,t){return i(r.id(t.data("select2-data")),r.opts.element.val())?(o=e,!1):void 0}),n!==!1&&this.highlight(o),t===!0){var a=this.opts.minimumResultsForSearch;s=0>a?!1:x(e.results)>=a,this.showSearch(s)}},showSearch:function(t){this.showSearchInput=t,this.dropdown.find(".select2-search")[t?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[t?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(e,t){var n=this.opts.element.val();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.close(),t&&t.noFocus||this.selection.focus(),i(n,this.id(e))||this.triggerChange()},updateSelection:function(e){var n,i=this.selection.find("span");this.selection.data("select2-data",e),i.empty(),n=this.opts.formatSelection(e,i),n!==t&&i.append(this.opts.escapeMarkup(n)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.selection.find("abbr").show()},val:function(){var e,n=!1,i=null,o=this;if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find(":selected").each2(function(e,t){return i={id:t.attr("value"),text:t.text(),element:t.get(0)},!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange();else{if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");if(!e&&0!==e)return this.clear(n),n&&this.triggerChange(),void 0;this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){o.opts.element.val(e?o.id(e):""),o.updateSelection(e),o.setPlaceholder(),n&&o.triggerChange()})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(e&&""!==e?(this.opts.element.val(e?this.id(e):""),this.updateSelection(e)):this.clear(),void 0)}}),I=E(T,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var n=[];e.find(":selected").each2(function(e,t){n.push({id:t.attr("value"),text:t.text(),element:t[0]})}),t(n)}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var s=o(n.val(),t.separator),a=[];t.query({matcher:function(n,o,r){var l=e.grep(s,function(e){return i(e,t.id(r))}).length;return l&&a.push(r),l},callback:e.isFunction(r)?function(){r(a)}:e.noop})}),t},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n),this.search.attr("id","s2id_autogen"+N()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())})),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===S.BACKSPACE&&""===this.search.val()){this.close();var n,i=t.find(".select2-search-choice-focus");if(i.length>0)return this.unselect(i.first()),this.search.width(10),d(e),void 0;n=t.find(".select2-search-choice:not(.select2-locked)"),n.length>0&&n.last().addClass("select2-search-choice-focus")}else t.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case S.UP:case S.DOWN:return this.moveHighlight(e.which===S.UP?-1:1),d(e),void 0;case S.ENTER:case S.TAB:return this.selectHighlighted(),d(e),void 0;case S.ESC:return this.cancel(e),d(e),void 0}if(e.which!==S.TAB&&!S.isControl(e)&&!S.isFunctionKey(e)&&e.which!==S.BACKSPACE&&e.which!==S.ESC){if(e.which===S.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===S.PAGE_UP||e.which===S.PAGE_DOWN)&&d(e),e.which===S.ENTER&&d(e)}}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.opened()||this.clearSearch(),e.stopImmediatePropagation()})),this.container.delegate(n,"mousedown",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.delegate(n,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;
this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(this.getMaxSearchWidth())):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],o=[],r=this;e(t).each(function(){n(r.id(this),i)<0&&(i.push(r.id(this)),o.push(this))}),t=o,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){r.addSelectedChoice(this)}),r.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,o=!n.locked,r=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),a=o?r:s,l=this.id(n),c=this.getVal();i=this.opts.formatSelection(n,a.find("div")),i!=t&&a.find("div").replaceWith("<div>"+this.opts.escapeMarkup(i)+"</div>"),o&&a.find(".select2-search-choice-close").bind("mousedown",d).bind("click dblclick",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),d(t))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",n),a.insertBefore(this.searchContainer),c.push(l),this.setVal(c)},unselect:function(e){var t,i,o=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),t&&(i=n(this.id(t),o),i>=0&&(o.splice(i,1),this.setVal(o),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))},postprocessResults:function(){var e=this.getVal(),t=this.results.find(".select2-result"),i=this.results.find(".select2-result-with-children"),o=this;t.each2(function(t,i){var r=o.id(i.data("select2-data"));n(r,e)>=0&&(i.addClass("select2-selected"),i.find(".select2-result-selectable").addClass("select2-selected"))}),i.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&o.highlight(0)},getMaxSearchWidth:function(){return this.selection.width()-r(this.search)},resizeSearch:function(){var e,t,n,i,o,s=r(this.search);e=p(this.search)+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,o=n-(t-i)-s,e>o&&(o=n-s),40>o&&(o=n-s),0>=o&&(o=e),this.search.width(o)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),o(e,this.opts.separator))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each(function(){n(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},val:function(){var n,i=!1,o=this;if(0===arguments.length)return this.getVal();if(n=arguments[0],arguments.length>1&&(i=arguments[1]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),i&&this.triggerChange(),void 0;if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange();else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e(t).map(o.id);o.setVal(n),o.updateSelection(t),o.clearSearch(),i&&o.triggerChange()})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t){var n,i=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(t||(t=[]),n=e.map(t,function(e){return i.opts.id(e)}),this.setVal(n),this.updateSelection(t),this.clearSearch(),void 0)}}),e.fn.select2=function(){var i,o,r,s,a=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===a.length||"object"==typeof a[0])i=0===a.length?{}:e.extend({},a[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?s=i.element.attr("multiple"):(s=i.multiple||!1,"tags"in i&&(i.multiple=s=!0)),o=s?new I:new k,o.init(i);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(n(a[0],l)<0)throw"Unknown method: "+a[0];if(r=t,o=e(this).data("select2"),o===t)return;if(r="container"===a[0]?o.container:o[a[0]].apply(o,a.slice(1)),r!==t)return!1}}),r===t?this:r},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var o=[];return g(e.text,n.term,o,i),o.join("")},formatSelection:function(e){return e?e.text:t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:C,escapeMarkup:function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}},window.Select2={query:{ajax:v,local:y,tags:b},util:{debounce:l,markMatch:g},"class":{"abstract":T,single:k,multi:I}}}}(jQuery),/*!
 * jQCloud Plugin for jQuery
 *
 * Version 0.1.3
 *
 * Copyright 2011, Luca Ongaro
 * Licensed under the MIT license.
 *
 * Date: Wed Feb 16 11:41:32 2011 +0100
 */
function(e){e.fn.jQCloud=function(t,n){var i=this,o=function(){var o=function(e,t){var n=function(e,t){return Math.abs(2*e.offsetLeft+e.offsetWidth-2*t.offsetLeft-t.offsetWidth)<e.offsetWidth+t.offsetWidth&&Math.abs(2*e.offsetTop+e.offsetHeight-2*t.offsetTop-t.offsetHeight)<e.offsetHeight+t.offsetHeight?!0:!1},i=0;for(i=0;i<t.length;i++)if(n(e,t[i]))return!0;return!1};t.sort(function(e,t){return e.weight<t.weight?1:e.weight>t.weight?-1:0});var r=2,s=[],a=i.width()/i.height(),l=i.width()/2,c=i.height()/2;e.each(t,function(n,u){var h=6.28*Math.random(),d=0,f=Math.round(9*((u.weight-t[t.length-1].weight)/(t[0].weight-t[t.length-1].weight)))+1,p=void 0!==u.url?"<a href='"+u.url+"'>"+u.text+"</a></span>":u.text;i.append("<span id='word_"+n+"' class='w"+f+"' title='"+(u.title||"")+"'>"+p+"</span>");var m=e("#word_"+n).width(),g=e("#word_"+n).height(),v=l-m/2,y=c-g/2;for(e("#word_"+n).css("position","absolute"),e("#word_"+n).css("left",v+"px"),e("#word_"+n).css("top",y+"px");o(document.getElementById("word_"+n),s);)d+=r,h+=(0===n%2?1:-1)*r,v=l+(d*Math.cos(h)-m/2)*a,y=c+d*Math.sin(h)-g/2,e("#word_"+n).css("left",v+"px"),e("#word_"+n).css("top",y+"px");s.push(document.getElementById("word_"+n))}),"function"==typeof n&&n.call(this)};return setTimeout(function(){o()},100),this}}(jQuery),/*!
 * URL Utils - v1.11 - 9/10/2009
 * http://benalman.com/
 * 
 * Copyright (c) 2009 "Cowboy" Ben Alman
 * Licensed under the MIT license
 * http://benalman.com/about/license/
 */
// Copyright (c) 2009 "Cowboy" Ben Alman
function(e){"$:nomunge";function t(e){return"string"==typeof e}function n(e){return"object"==typeof e}function i(){var e=P.call(arguments),t=e.shift();return function(){return t.apply(this,e.concat(P.call(arguments)))}}function o(){return A.href.replace(/^[^#]*#?/,"")}function r(e){var t=e.nodeName;return t?S[t.toLowerCase()]:""}function s(i,r,s,a){var l;return t(s)||n(s)?h(r,s,a,i):n(r)?e.param(r):t(r)?u(r,s,i):(l=i?o():A.search,u(l,r,i))}function a(){var i,o,a,l=P.call(arguments),c=l.shift();return(t(l[1])||n(l[1]))&&(i=l.shift()),o=l.shift(),a=l.shift(),this.each(function(){var t=e(this),n=i||r(this),l=n&&t.attr(n)||"";l=s(c,l,o,a),t.attr(n,l)})}function l(){var t=P.call(arguments),n=t.shift(),i=t.shift(),o=s(n);return e.isFunction(t[0])?o=t.shift()(o):e.isArray(t[0])&&e.each(t.shift(),function(e,t){delete o[t]}),s(n,i,o,t.shift())}function c(){var n,i=P.call(arguments),o=i.shift();return t(i[0])&&(n=i.shift()),this.each(function(){var t=e(this),s=n||r(this),a=s&&t.attr(s)||"";a=l.apply(this,[o,a].concat(i)),t.attr(s,a)})}function u(t,n,i){var o,r,s,a={},l={"null":null,"true":k,"false":I},c=decodeURIComponent,u=i?/^.*[#]/:/^.*[?]|#.*$/g;for(t=t.replace(u,"").replace(/\+/g," ").split("&");t.length;)o=t.shift().split("="),r=c(o[0]),2===o.length?(s=c(o[1]),n&&(s&&!isNaN(s)?s=Number(s):"undefined"===s?s=p:l[s]!==p&&(s=l[s])),e.isArray(a[r])?a[r].push(s):a[r]=a[r]!==p?[a[r],s]:s):r&&(a[r]=n?p:"");return a}function h(n,i,o,r){var s,a=r?/^([^#]*)[#]?(.*)$/:/^([^#?]*)[?]?([^#]*)(#?.*)/,l=n.match(a),c=u(l[2],0,r),h=l[3]||"";return t(i)&&(i=u(i,0,r)),s=2===o?i:1===o?e.extend({},i,c):e.extend({},c,i),s=e.param(s),l[1]+(r?"#":s||!l[1]?"?":"")+s+h}function d(){var t,n=e.browser,i={};return i[O]=i[j]=function(e){return e},n.msie&&n.version<8&&(i[O]=function(e,n){var i=t.document;e!==n&&(i.open(),i.close(),i.location.hash="#"+e)},i[j]=function(){return t.document.location.hash.replace(/^#/,"")},t=e("<iframe/>").hide().appendTo("body").get(0).contentWindow,i[O](o())),i}var f,p,m,g,v,y,b,w,_,x,C,E,S={},T=this,k=!0,I=!1,N="onhashchange"in T,P=Array.prototype.slice,A=document.location,D="urlInternal",M="urlExternal",R="queryString",j="fragment",O="update",F="passQueryString",H="passFragment",B="fragmentChange",L="hashchange."+B;e.urlTagAttrList=m=function(t){return e.extend(S,t)},m({a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"}),e.urlInternalHost=g=function(e){e=e?"(?:"+e+"\\.)?":"";var t=new RegExp("^"+e+"(.*)","i"),n="^"+A.protocol+"//"+A.hostname.replace(t,e+"$1")+(A.port?":"+A.port:"")+"/";return v(n)},e.urlInternalRegExp=v=function(e){return e&&(f=t(e)?new RegExp(e,"i"):e),f},g("www"),e.isUrlInternal=y=function(e){return e?f.test(e)?k:/^https?:\/\//i.test(e)?I:/^(?:#|[a-z\d.-]+:)/i.test(e)?p:k:p},e.isUrlExternal=b=function(e){var t=y(e);return"boolean"==typeof t?!t:t},w=function(e,t){return this.filter(":"+e+(t?"("+t+")":""))},e.fn[D]=i(w,D),e.fn[M]=i(w,M),_=function(t,n,i,o){var s=o[3]||r(n);return s?!!t(e(n).attr(s)):I},e.expr[":"][D]=i(_,y),e.expr[":"][M]=i(_,b),e[R]=i(s,0),e[j]=i(s,1),e.fn[R]=i(a,0),e.fn[j]=i(a,1),e[F]=i(l,0),e[H]=i(l,1),e.fn[F]=i(c,0),e.fn[H]=i(c,1),e.setFragment=x=function(e,t){var i=n(e)?s(k,e):(e||"").replace(/^#/,"");i=e?h("#"+o(),"#"+i,t,1):"#",A.href=A.href.replace(/#.*$/,"")+i},e[B]=function(t){function n(){var t=e.Event(B);t[j]=o(),e(document).trigger(t)}t===k&&(t=100),N&&e(T).unbind(L),C&&clearTimeout(C),C=null,"number"==typeof t&&(N?e(T).bind(L,n):(E=o(),e.isFunction(d)&&(d=d()),function i(){var e=o(),r=d[j](E);e!==E?(d[O](e,r),E=e,n()):r!==E&&x(r,2),C=setTimeout(i,0>t?0:t)}()))}}(jQuery),SocialStream.Group=function(e,t){var n=new e.Callback,i=function(){e.Contact.select2("#group__participants")},o=function(){e.Tag.select2("#group_tag_list")},r=function(e){t.each(e.validate,function(e,n){t(n.form).validate({errorClass:n.errorClass})})};return n.register("new_",i,o,r),n.extend({})}(SocialStream,jQuery),function(e){e.fn.aeImageResize=function(t){var n=0,i=e.browser.msie&&6==~~e.browser.version;return t.height||t.width?(t.height&&t.width&&(n=t.width/t.height),this.one("load",function(){this.removeAttribute("height"),this.removeAttribute("width"),this.style.height=this.style.width="";var e=this.height,i=this.width,o=i/e,r=t.height,s=t.width,a=n;a||(a=r?o+1:o-1),(r&&e>r||s&&i>s)&&(o>a?r=~~(e/i*s):s=~~(i/e*r),this.height=r,this.width=s)}).each(function(){(this.complete||i)&&e(this).trigger("load")})):this}}(jQuery),SocialStream.Message=function(e,t){var n=new e.Callback,i=function(){t("#body").cleditor({width:"100%",controls:"bold italic underline strikethrough subscript superscript | size style | bullets | image link unlink"})},o=function(){SocialStream.Contact.select2("#_recipients")};return n.register("new_",i,o),n.extend({})}(SocialStream,jQuery),SocialStream.Notification=function(e,t){var n=new e.Callback,i=function(){t(".mark_as_read").click(o)},o=function(n){return console.dir(n),confirm(I18n.t("sure"))&&t.ajax({url:t(n.target).attr("href"),type:"PUT",success:function(){t(".notification").removeClass("unread")},error:function(){e.Flash.error()}}),!1};return n.register("index",i),n.extend({})}(SocialStream,jQuery),SocialStream.Object=function(e,t){var n=new e.Callback,i='<i class="icon_tool16-private"></i>',o=function(){t('select[name*="relation_ids"]').multiselect({buttonClass:"btn btn-small",buttonText:s,onChange:r})},r=function(e){var n,i,o=t(e),r=o.val(),a=o.closest("select"),l=o.closest(".form-privacy"),c=l.attr("data-public_id");r===c?(i=a.find('option[value!="'+c+'"]'),n=l.find('input[value!="'+c+'"]')):(i=a.find('option[value="'+c+'"]'),n=l.find('input[value="'+c+'"]')),i.prop("selected",!1),n.prop("checked",!1),n.closest("li").removeClass("active"),t("button",l).html(s(t("option:selected",a)))},s=function(e){var n,o,r=t(".form-privacy"),s=r.attr("data-public_id");if(n=1===e.length&&t(e[0]).val()===s?i.replace("private","public"):i,0===e.length)o=r.attr("data-relation-text");else if(e.length>3)o=I18n.t("activity.privacy.relation",{count:e.length});else{var a="";e.each(function(){a+=t(this).text()+", "}),o=a.substr(0,a.length-2)}return n+" "+o+' <b class="caret"></b>'},a=function(e,n){t('[name$="[relation_ids][]"]',n).attr("name",e+"[relation_ids][]")},l=function(e,n){t('[name$="[owner_id]"]',n).attr("name",e+"[owner_id]")};return n.register("show",e.Comment.index,e.Audience.index),n.register("new_",o),n.extend({changeOwner:l,changeRelationSelect:a})}(SocialStream,jQuery),SocialStream.Permission=function(e,t){var n=function(e){t(".edit_relation_custom",e).on("change",function(){t("#permissions").find(".loading").show(),t.rails.handleRemote(t(this)),t(this).find("input").prop("disabled",!0)})},i=function(e){t(e).find("input").prop("disabled",!1)};return{initForm:n,enableForm:i}}(SocialStream,jQuery),SocialStream.Profile=function(e,t){var n=new e.Callback,i=function(e){t("#profile-info .update").filter(function(n,i){return 0===e.section.length||-1===t(i).closest("section").attr("class").indexOf(e.section)}).hide(),t("#profile-info .edit_icon a[href=#]").click(function(e){e.preventDefault();var n=t(this).closest("section")[0];t("#profile-info section").each(function(e,i){return i===n?!0:(t(i).find(".briefing").show(),t(i).find(".update").hide(),void 0)}),t(n).find(".briefing").toggle("slow"),t(n).find(".update").toggle("slow")})},o=function(){e.Tag.select2("#profile_tag_list")};return n.register("show",i,o),n.extend({})}(SocialStream,jQuery),SocialStream.RelationCustom=function(e,t){var n=new e.Callback,i=function(){return t("#relation_customs .relation_list")},o=function(){return i().attr("data-permissions_path")},r=function(e){var n=i(),o=e?e:n;n.find(".edit_name").hide(),n.find(".new_relation_custom").hide(),n.find(".actions").hide(),o.find("input[type=radio]").click(function(){l(),n.find(".actions").hide(),t(this).closest(".relation_custom").find(".actions").show(),c(this)}),o.find(".actions .edit").click(function(){s(t(this).closest(".relation_custom"))}),o.find(".edit_name .submit").click(function(){t(this).closest(".edit_name").find("form").submit()}),o.find("a.new").click(function(e){e.preventDefault(),t(this).closest("#new_relation").find(".new_relation_custom").toggle("slow")})},s=function(e){e.find("label").hide("slow"),e.find(".actions").hide("slow"),e.find(".edit_name").show("slow"),t("html").on("click.social_stream.relation_custom.edit_name",a)},a=function(e){e&&t(e.target).closest(".relation_custom").length||(l(),t("html").off("click.social_stream.relation_custom.edit_name"))},l=function(){t(".edit_name:visible").each(function(){t(this).hide("slow");var e=t(this).closest(".relation_custom");e.find("label").show("slow"),e.find(".actions").show("slow")})},c=function(n){var i=t(n),r=i.val();if(t("#permissions").find(".postit").hide(),t("#permissions").find(".relation_permissions").hide(),i.attr("data-loaded"))return console.log("#relation_"+r+"_permissions"),t("#relation_"+r+"_permissions").show(),void 0;t("#permissions").find(".loading").show();var s=t("<div/>",{id:"relation_"+r+"_permissions","class":"relation_permissions"});s.append("<div/>",{"class":"loading"}),s.prependTo("#permissions"),t.get(o(),{relation_id:r},function(n){t("#permissions").find(".loading").hide(),s.html(n),i.attr("data-loaded","true"),e.Permission.initForm(s)},"html")},u=function(){t("#permissions").find(".loading").hide()},h=function(e){i(),t("#new_relation").before(e.relation.html),r(t("#relation_custom_"+e.relation.id)),p()},d=function(e){if("name"===e.section){var n=t("#relation_custom_"+e.relation.id);n.find("label").text(e.relation.name),n.find('input[name="relation_custom[name]"]').val(e.relation.name),l()}},f=function(n){"permissions"===n.section&&(t("#permissions").find(".loading").hide(),e.Permission.enableForm("#relation_"+n.relation.id+"_permissions"))},p=function(){var e=t("#new_relation");e.find(".new_relation_custom").hide(),e.find('input[name="relation_custom[name]"]').val("")},m=function(e){t("#relation_custom_"+e.relation.id).hide(),t("#relation_"+e.relation.id+"_permissions").hide()};return n.register("index",r,u),n.register("create",h),n.register("update",d,f),n.register("destroy",m),n.extend({})}(SocialStream,jQuery),SocialStream.Repository=function(e,t){var n=new e.Callback,i=function(){t(".repository .loading").hide(),t("#repository .filter").on("input",o)},o=function(){var n=t(this).attr("data-path"),i=t(this).val();t(".repository .loading").show(),t.ajax({url:n,data:{q:i},dataType:"html",type:"GET",success:function(e){t(".repository .loading").hide(),t(".repository-list").html(e)},error:function(){t(".repository .loading").hide(),e.Flash.error()}})};return n.register("show",i),n.extend({})}(SocialStream,jQuery),/*	
	Watermark plugin for jQuery
	Version: 3.1.4
	http://jquery-watermark.googlecode.com/

	Copyright (c) 2009-2012 Todd Northrop
	http://www.speednet.biz/
	
	August 13, 2012

	Requires:  jQuery 1.2.3+
	
	Dual licensed under the MIT or GPL Version 2 licenses.
	See mit-license.txt and gpl2-license.txt in the project root for details.
------------------------------------------------------*/
function(e,t,n){var i="watermark",o="watermarkClass",r="watermarkFocus",s="watermarkSubmit",a="watermarkMaxLength",l="watermarkPassword",c="watermarkText",u=/\r/g,h=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,d="input:data("+i+"),textarea:data("+i+")",f=":watermarkable",p=["Page_ClientValidate"],m=!1,g="placeholder"in document.createElement("input");e.watermark=e.watermark||{version:"3.1.4",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(t){e(t).filter(d).each(function(){e.watermark._hide(e(this))})},_hide:function(e,n){var i=e[0],r=(i.value||"").replace(u,""),s=e.data(c)||"",h=e.data(a)||0,d=e.data(o);if(s.length&&r==s){if(i.value="",e.data(l)&&"text"===(e.attr("type")||"")){var f=e.data(l)||[],p=e.parent()||[];f.length&&p.length&&(p[0].removeChild(e[0]),p[0].appendChild(f[0]),e=f)}h&&(e.attr("maxLength",h),e.removeData(a)),n&&(e.attr("autocomplete","off"),t.setTimeout(function(){e.select()},1))}d&&e.removeClass(d)},show:function(t){e(t).filter(d).each(function(){e.watermark._show(e(this))})},_show:function(t){var n=t[0],i=(n.value||"").replace(u,""),s=t.data(c)||"",h=t.attr("type")||"",d=t.data(o);if(0!=i.length&&i!=s||t.data(r))e.watermark._hide(t);else{if(m=!0,t.data(l)&&"password"===h){var f=t.data(l)||[],p=t.parent()||[];f.length&&p.length&&(p[0].removeChild(t[0]),p[0].appendChild(f[0]),t=f,t.attr("maxLength",s.length),n=t[0])}if("text"===h||"search"===h){var g=t.attr("maxLength")||0;g>0&&s.length>g&&(t.data(a,g),t.attr("maxLength",s.length))}d&&t.addClass(d),n.value=s}},hideAll:function(){m&&(e.watermark.hide(f),m=!1)},showAll:function(){e.watermark.show(f)}},e.fn.watermark=e.fn.watermark||function(n,a){if(!this.length)return this;var h=!1,d="string"==typeof n;return d&&(n=n.replace(u,"")),"object"==typeof a?(h="string"==typeof a.className,a=e.extend({},e.watermark.options,a)):"string"==typeof a?(h=!0,a=e.extend({},e.watermark.options,{className:a})):a=e.watermark.options,"function"!=typeof a.useNative&&(a.useNative=a.useNative?function(){return!0}:function(){return!1}),this.each(function(){var p=e(this);if(p.is(f)){if(p.data(i))(d||h)&&(e.watermark._hide(p),d&&p.data(c,n),h&&p.data(o,a.className));else{if(g&&a.useNative.call(this,p)&&"TEXTAREA"!==(p.attr("tagName")||""))return d&&p.attr("placeholder",n),void 0;if(p.data(c,d?n:""),p.data(o,a.className),p.data(i,1),"password"===(p.attr("type")||"")){var m=p.wrap("<span>").parent(),v=e(m.html().replace(/type=["']?password["']?/i,'type="text"'));v.data(c,p.data(c)),v.data(o,p.data(o)),v.data(i,1),v.attr("maxLength",n.length),v.focus(function(){e.watermark._hide(v,!0)}).bind("dragenter",function(){e.watermark._hide(v)}).bind("dragend",function(){t.setTimeout(function(){v.blur()},1)}),p.blur(function(){e.watermark._show(p)}).bind("dragleave",function(){e.watermark._show(p)}),v.data(l,p),p.data(l,v)}else p.focus(function(){p.data(r,1),e.watermark._hide(p,!0)}).blur(function(){p.data(r,0),e.watermark._show(p)}).bind("dragenter",function(){e.watermark._hide(p)}).bind("dragleave",function(){e.watermark._show(p)}).bind("dragend",function(){t.setTimeout(function(){e.watermark._show(p)},1)}).bind("drop",function(e){var t=p[0],n=e.originalEvent.dataTransfer.getData("Text");(t.value||"").replace(u,"").replace(n,"")===p.data(c)&&(t.value=n),p.focus()});if(this.form){var y=this.form,b=e(y);b.data(s)||(b.submit(e.watermark.hideAll),y.submit?(b.data(s,y.submit),y.submit=function(t,n){return function(){var i=n.data(s);e.watermark.hideAll(),i.apply?i.apply(t,Array.prototype.slice.call(arguments)):i()}}(y,b)):(b.data(s,1),y.submit=function(t){return function(){e.watermark.hideAll(),delete t.submit,t.submit()}}(y)))}}e.watermark._show(p)}})},e.watermark.runOnce&&(e.watermark.runOnce=!1,e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},watermarkable:function(e){var t,n=e.nodeName;return"TEXTAREA"===n?!0:"INPUT"!==n?!1:(t=e.getAttribute("type"),!t||!h.test(t))}}),function(t){e.fn.val=function(){var o=Array.prototype.slice.call(arguments);if(!this.length)return o.length?this:n;if(o.length)return t.apply(this,o),e.watermark.show(this),this;if(this.data(i)){var r=(this[0].value||"").replace(u,"");return r===(this.data(c)||"")?"":r}return t.apply(this)}}(e.fn.val),p.length&&e(function(){var n,i,o;for(n=p.length-1;n>=0;n--)i=p[n],o=t[i],"function"==typeof o&&(t[i]=function(t){return function(){return e.watermark.hideAll(),t.apply(null,Array.prototype.slice.call(arguments))}}(o))}),e(t).bind("beforeunload",function(){e.watermark.options.hideBeforeUnload&&e.watermark.hideAll()}))}(jQuery,window),SocialStream.Search=function(e){var t=new e.Callback,n=function(){e.Pagination.show()};return t.register("show",n),t.extend({})}(SocialStream,jQuery),SocialStream.SearchHeader=function(e,t){var n=new e.Callback,i=function(){var e=t(".search-nav");t("input.search-query",e).on("input",o),t(".mat div",e).hide()},o=function(){var e=t(".search-nav"),n=t("input.search-query",e),i=t(".mat",e),o=n.attr("data-min_query");return t("div",i).hide(),n.val().length<o?(t(".query_too_short",i).show(),void 0):(t(".loading",i).show(),t.ajax({url:t(".navbar-search").attr("action"),data:{q:n.val(),mode:"quick"},dataType:"html",type:"GET",success:function(e){t(".loading",i).hide(),e.length>1?t(".results",i).html(e).show():t(".no_results",i).show()}}),void 0)};return n.register("show",i),n.extend({})}(SocialStream,jQuery),SocialStream.Tag=function(e,t){var n=function(e){t(e).select2({multiple:!0,ajax:{url:t(e).attr("data-path"),dataType:"json",data:function(e,t){return{q:e,page:t}},results:i},initSelection:o})},i=function(e){return{results:e.map(function(e){return{id:e.name,text:e.name}})}},o=function(e,n){var i=t(e).val().split(", ").map(function(e){return{id:e,text:e}});n(i)};return{select2:n}}(SocialStream,jQuery),function(){function e(){return this}function t(e){return e.length}function n(e){return null==e}function i(e){return e.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function o(){var e={},t=[];return e.add=function(n){for(var i=0;i<t.length;i++)if(t[i].listener==n)return e;return t.push({listener:n,on:!0}),e},e.remove=function(n){for(var i=0;i<t.length;i++){var o=t[i];if(o.listener==n){o.on=!1,t=t.slice(0,i).concat(t.slice(i+1));break}}return e},e.dispatch=function(){for(var e=t,n=0,i=e.length;i>n;n++){var o=e[n];o.on&&o.listener.apply(this,arguments)}},e}function r(e){return e+""}function s(e){for(var t=e.lastIndexOf("."),n=t>=0?e.substring(t):(t=e.length,""),i=[];t>0;)i.push(e.substring(t-=3,t+3));return i.reverse().join(",")+n}function a(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function l(e){return function(t){return 1-e(1-t)}}function c(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function u(e){return e}function h(e){return function(t){return Math.pow(t,e)}}function d(e){return 1-Math.cos(e*Math.PI/2)}function f(e){return Math.pow(2,10*(e-1))}function p(e){return 1-Math.sqrt(1-e*e)}function m(e,t){var n;return arguments.length<2&&(t=.45),arguments.length<1?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e),function(i){return 1+e*Math.pow(2,10*-i)*Math.sin(2*(i-n)*Math.PI/t)}}function g(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function v(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function y(e){return e in _n||/\bcolor\b/.test(e)?d3.interpolateRgb:d3.interpolate}function b(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function w(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function _(e,t,n){return new x(e,t,n)}function x(e,t,n){this.r=e,this.g=t,this.b=n}function C(e){return 16>e?"0"+e.toString(16):e.toString(16)}function E(e,t,n){var i,o,r,s=0,a=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(e))switch(o=i[2].split(","),i[1]){case"hsl":return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return t(T(o[0]),T(o[1]),T(o[2]))}return(r=xn[e])?t(r.r,r.g,r.b):(null!=e&&"#"===e.charAt(0)&&(4===e.length?(s=e.charAt(1),s+=s,a=e.charAt(2),a+=a,l=e.charAt(3),l+=l):7===e.length&&(s=e.substring(1,3),a=e.substring(3,5),l=e.substring(5,7)),s=parseInt(s,16),a=parseInt(a,16),l=parseInt(l,16)),t(s,a,l))}function S(e,t,n){var i,o,r=Math.min(e/=255,t/=255,n/=255),s=Math.max(e,t,n),a=s-r,l=(s+r)/2;return a?(o=.5>l?a/(s+r):a/(2-s-r),i=e==s?(t-n)/a+(n>t?6:0):t==s?(n-e)/a+2:(e-t)/a+4,i*=60):o=i=0,k(i,o,l)}function T(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function k(e,t,n){return new I(e,t,n)}function I(e,t,n){this.h=e,this.s=t,this.l=n}function N(e,t,n){function i(e){return e>360?e-=360:0>e&&(e+=360),60>e?r+(s-r)*e/60:180>e?s:240>e?r+(s-r)*(240-e)/60:r}function o(e){return Math.round(255*i(e))}var r,s;return e%=360,0>e&&(e+=360),t=0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+t):n+t-n*t,r=2*n-s,_(o(e+120),o(e),o(e-120))}function P(e){return dn(e,Tn),e}function A(e){return function(){return En(e,this)}}function D(e){return function(){return Sn(e,this)}}function M(e){return{__data__:e}}function R(e){return dn(e,kn),e}function j(e){return arguments.length||(e=d3.ascending),function(t,n){return e(t&&t.__data__,n&&n.__data__)}}function O(e,t){dn(e,Nn);var n={},i=d3.dispatch("start","end"),o=Dn,r=Date.now();return e.id=t,e.tween=function(t,i){return arguments.length<2?n[t]:(null==i?delete n[t]:n[t]=i,e)},e.ease=function(t){return arguments.length?(o="function"==typeof t?t:d3.ease.apply(d3,arguments),e):o},e.each=function(t,n){return arguments.length<2?H.call(e,t):(i[t].add(n),e)},d3.timer(function(s){return e.each(function(a,l,c){function u(e){if(v.active>t)return d();v.active=t;for(var o in n)(o=n[o].call(p,a,l))&&f.push(o);return i.start.dispatch.call(p,a,l),h(e)||d3.timer(h,0,r),1}function h(e){if(v.active!==t)return d();for(var n=(e-m)/g,r=o(n),s=f.length;s>0;)f[--s].call(p,r);return n>=1?(d(),An=t,i.end.dispatch.call(p,a,l),An=0,1):void 0}function d(){return--v.count||delete p.__transition__,1}var f=[],p=this,m=e[c][l].delay,g=e[c][l].duration,v=p.__transition__||(p.__transition__={active:0,count:0});++v.count,s>=m?u(s):d3.timer(u,m,r)}),1},0,r),e}function F(e){return"function"==typeof e?function(t,n,i){var o=e.call(this,t,n)+"";return i!=o&&d3.interpolate(i,o)}:(e+="",function(t,n,i){return i!=e&&d3.interpolate(i,e)})}function H(e){for(var t=0,n=this.length;n>t;t++)for(var i=this[t],o=0,r=i.length;r>o;o++){var s=i[o];s&&e.call(s=s.node,s.__data__,o,t)}return this}function B(){for(var e,t=Date.now(),n=jn;n;)e=t-n.then,e>=n.delay&&(n.flush=n.callback(e)),n=n.next;var i=L()-t;i>24?(isFinite(i)&&(clearTimeout(Rn),Rn=setTimeout(B,i)),Mn=0):(Mn=1,On(B))}function L(){for(var e=null,t=jn,n=1/0;t;)t.flush?t=e?e.next=t.next:jn=t.next:(n=Math.min(n,t.then+t.delay),t=(e=t).next);return n}function q(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function z(e,t){var n,i=0,o=e.length-1,r=e[i],s=e[o];return r>s&&(n=i,i=o,o=n,n=r,r=s,s=n),t=t(s-r),e[i]=t.floor(r),e[o]=t.ceil(s),e}function W(){return Math}function $(e,t,n,i){function o(){var o=2==e.length?X:K,l=i?w:b;return s=o(e,t,l,n),a=o(t,e,l,d3.interpolate),r}function r(e){return s(e)}var s,a;return r.invert=function(e){return a(e)},r.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},r.range=function(e){return arguments.length?(t=e,o()):t},r.rangeRound=function(e){return r.range(e).interpolate(d3.interpolateRound)},r.clamp=function(e){return arguments.length?(i=e,o()):i},r.interpolate=function(e){return arguments.length?(n=e,o()):n},r.ticks=function(t){return Q(e,t)},r.tickFormat=function(t){return Y(e,t)},r.nice=function(){return z(e,V),o()},r.copy=function(){return $(e,t,n,i)},o()}function U(e,t){return e.range=d3.rebind(e,t.range),e.rangeRound=d3.rebind(e,t.rangeRound),e.interpolate=d3.rebind(e,t.interpolate),e.clamp=d3.rebind(e,t.clamp),e}function V(e){return e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1),{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}}function G(e,t){var n=q(e),i=n[1]-n[0],o=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),r=t/i*o;return.15>=r?o*=10:.35>=r?o*=5:.75>=r&&(o*=2),n[0]=Math.ceil(n[0]/o)*o,n[1]=Math.floor(n[1]/o)*o+.5*o,n[2]=o,n}function Q(e,t){return d3.range.apply(d3,G(e,t))}function Y(e,t){return d3.format(",."+Math.max(0,-Math.floor(Math.log(G(e,t)[2])/Math.LN10+.01))+"f")}function X(e,t,n,i){var o=n(e[0],e[1]),r=i(t[0],t[1]);return function(e){return r(o(e))}}function K(e,t,n,i){for(var o=[],r=[],s=0,a=e.length;++s<a;)o.push(n(e[s-1],e[s])),r.push(i(t[s-1],t[s]));return function(t){var n=d3.bisect(e,t,1,e.length-1)-1;return r[n](o[n](t))}}function J(e,t){function n(n){return e(t(n))}var i=t.pow;return n.invert=function(t){return i(e.invert(t))},n.domain=function(o){return arguments.length?(t=o[0]<0?et:Z,i=t.pow,e.domain(o.map(t)),n):e.domain().map(i)},n.nice=function(){return e.domain(z(e.domain(),W)),n},n.ticks=function(){var n=q(e.domain()),o=[];if(n.every(isFinite)){var r=Math.floor(n[0]),s=Math.ceil(n[1]),a=i(n[0]),l=i(n[1]);if(t===et)for(o.push(i(r));r++<s;)for(var c=9;c>0;c--)o.push(i(r)*c);else{for(;s>r;r++)for(var c=1;10>c;c++)o.push(i(r)*c);o.push(i(r))}for(r=0;o[r]<a;r++);for(s=o.length;o[s-1]>l;s--);o=o.slice(r,s)}return o},n.tickFormat=function(){return tt},n.copy=function(){return J(e.copy(),t)},U(n,e)}function Z(e){return Math.log(e)/Math.LN10}function et(e){return-Math.log(-e)/Math.LN10}function tt(e){return e.toPrecision(1)}function nt(e,t){function n(t){return e(i(t))}var i=it(t),o=it(1/t);return n.invert=function(t){return o(e.invert(t))},n.domain=function(t){return arguments.length?(e.domain(t.map(i)),n):e.domain().map(o)},n.ticks=function(e){return Q(n.domain(),e)},n.tickFormat=function(e){return Y(n.domain(),e)},n.nice=function(){return n.domain(z(n.domain(),V))},n.exponent=function(e){if(!arguments.length)return t;var r=n.domain();return i=it(t=e),o=it(1/t),n.domain(r)},n.copy=function(){return nt(e.copy(),t)},U(n,e)}function it(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function ot(e,t){function n(t){return o[((i[t]||(i[t]=e.push(t)))-1)%o.length]}var i,o,r;return n.domain=function(o){if(!arguments.length)return e;e=[],i={};for(var r,s=-1,a=o.length;++s<a;)i[r=o[s]]||(i[r]=e.push(r));return n[t.t](t.x,t.p)},n.range=function(e){return arguments.length?(o=e,r=0,t={t:"range",x:e},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var a=i[0],l=i[1],c=(l-a)/(e.length-1+s);return o=e.length<2?[(a+l)/2]:d3.range(a+c*s/2,l+c/2,c),r=0,t={t:"rangePoints",x:i,p:s},n},n.rangeBands=function(i,s){arguments.length<2&&(s=0);var a=i[0],l=i[1],c=(l-a)/(e.length+s);return o=d3.range(a+c*s,l,c),r=c*(1-s),t={t:"rangeBands",x:i,p:s},n},n.rangeRoundBands=function(i,s){arguments.length<2&&(s=0);var a=i[0],l=i[1],c=Math.floor((l-a)/(e.length+s)),u=l-a-(e.length-s)*c;return o=d3.range(a+Math.round(u/2),l,c),r=Math.round(c*(1-s)),t={t:"rangeRoundBands",x:i,p:s},n},n.rangeBand=function(){return r},n.copy=function(){return ot(e,t)},n.domain(e)}function rt(e,t){function n(){var n=0,r=(e.length,t.length);for(o=[];++n<r;)o[n-1]=d3.quantile(e,n/r);return i}function i(e){return isNaN(e=+e)?0/0:t[d3.bisect(o,e)]}var o;return i.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(d3.ascending),n()):e},i.range=function(e){return arguments.length?(t=e,n()):t},i.quantiles=function(){return o},i.copy=function(){return rt(e,t)},n()}function st(e,t,n){function i(t){return n[Math.max(0,Math.min(s,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),s=n.length-1,i}var r,s;return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},i.range=function(e){return arguments.length?(n=e,o()):n},i.copy=function(){return st(e,t,n)},o()}function at(e){return e.innerRadius}function lt(e){return e.outerRadius}function ct(e){return e.startAngle}function ut(e){return e.endAngle}function ht(e){function t(t){return t.length<1?null:"M"+r(e(dt(this,t,n,i)),s)}var n=ft,i=pt,o="linear",r=Wn[o],s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(r=Wn[o=e],t):o},t.tension=function(e){return arguments.length?(s=e,t):s},t}function dt(e,t,n,i){var o,r=[],s=-1,a=t.length,l="function"==typeof n,c="function"==typeof i;if(l&&c)for(;++s<a;)r.push([n.call(e,o=t[s],s),i.call(e,o,s)]);else if(l)for(;++s<a;)r.push([n.call(e,t[s],s),i]);else if(c)for(;++s<a;)r.push([n,i.call(e,t[s],s)]);else for(;++s<a;)r.push([n,i]);return r}function ft(e){return e[0]}function pt(e){return e[1]}function mt(e){var t=[],n=0,i=e.length,o=e[0];for(t.push(o[0],",",o[1]);++n<i;)t.push("L",(o=e[n])[0],",",o[1]);return t.join("")}function gt(e){var t=[],n=0,i=e.length,o=e[0];for(t.push(o[0],",",o[1]);++n<i;)t.push("V",(o=e[n])[1],"H",o[0]);return t.join("")}function vt(e){var t=[],n=0,i=e.length,o=e[0];for(t.push(o[0],",",o[1]);++n<i;)t.push("H",(o=e[n])[0],"V",o[1]);return t.join("")}function yt(e,t){return e.length<4?mt(e):e[1]+_t(e.slice(1,e.length-1),xt(e,t))}function bt(e,t){return e.length<3?mt(e):e[0]+_t((e.push(e[0]),e),xt([e[e.length-2]].concat(e,[e[1]]),t))}function wt(e,t){return e.length<3?mt(e):e[0]+_t(e,xt(e,t))}function _t(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return mt(e);var n=e.length!=t.length,i="",o=e[0],r=e[1],s=t[0],a=s,l=1;if(n&&(i+="Q"+(r[0]-2*s[0]/3)+","+(r[1]-2*s[1]/3)+","+r[0]+","+r[1],o=e[1],l=2),t.length>1){a=t[1],r=e[l],l++,i+="C"+(o[0]+s[0])+","+(o[1]+s[1])+","+(r[0]-a[0])+","+(r[1]-a[1])+","+r[0]+","+r[1];for(var c=2;c<t.length;c++,l++)r=e[l],a=t[c],i+="S"+(r[0]-a[0])+","+(r[1]-a[1])+","+r[0]+","+r[1]}if(n){var u=e[l];i+="Q"+(r[0]+2*a[0]/3)+","+(r[1]+2*a[1]/3)+","+u[0]+","+u[1]}return i}function xt(e,t){for(var n,i=[],o=(1-t)/2,r=e[0],s=e[1],a=1,l=e.length;++a<l;)n=r,r=s,s=e[a],i.push([o*(s[0]-n[0]),o*(s[1]-n[1])]);return i}function Ct(e){if(e.length<3)return mt(e);var t=[],n=1,i=e.length,o=e[0],r=o[0],s=o[1],a=[r,r,r,(o=e[1])[0]],l=[s,s,s,o[1]];for(t.push(r,",",s),It(t,a,l);++n<i;)o=e[n],a.shift(),a.push(o[0]),l.shift(),l.push(o[1]),It(t,a,l);for(n=-1;++n<2;)a.shift(),a.push(o[0]),l.shift(),l.push(o[1]),It(t,a,l);return t.join("")}function Et(e){if(e.length<4)return mt(e);for(var t,n=[],i=-1,o=e.length,r=[0],s=[0];++i<3;)t=e[i],r.push(t[0]),s.push(t[1]);for(n.push(kt(Vn,r)+","+kt(Vn,s)),--i;++i<o;)t=e[i],r.shift(),r.push(t[0]),s.shift(),s.push(t[1]),It(n,r,s);return n.join("")}function St(e){for(var t,n,i=-1,o=e.length,r=o+4,s=[],a=[];++i<4;)n=e[i%o],s.push(n[0]),a.push(n[1]);for(t=[kt(Vn,s),",",kt(Vn,a)],--i;++i<r;)n=e[i%o],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),It(t,s,a);return t.join("")}function Tt(e,t){for(var n,i,o=e.length-1,r=e[0][0],s=e[0][1],a=e[o][0]-r,l=e[o][1]-s,c=-1;++c<=o;)n=e[c],i=c/o,n[0]=t*n[0]+(1-t)*(r+i*a),n[1]=t*n[1]+(1-t)*(s+i*l);return Ct(e)}function kt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function It(e,t,n){e.push("C",kt($n,t),",",kt($n,n),",",kt(Un,t),",",kt(Un,n),",",kt(Vn,t),",",kt(Vn,n))}function Nt(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Pt(e){for(var t=0,n=e.length-1,i=[],o=e[0],r=e[1],s=i[0]=Nt(o,r);++t<n;)i[t]=s+(s=Nt(o=r,r=e[t+1]));return i[t]=s,i}function At(e){for(var t,n,i,o,r=[],s=Pt(e),a=-1,l=e.length-1;++a<l;)t=Nt(e[a],e[a+1]),Math.abs(t)<1e-6?s[a]=s[a+1]=0:(n=s[a]/t,i=s[a+1]/t,o=n*n+i*i,o>9&&(o=3*t/Math.sqrt(o),s[a]=o*n,s[a+1]=o*i));for(a=-1;++a<=l;)o=(e[Math.min(l,a+1)][0]-e[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),r.push([o||0,s[a]*o||0]);return r}function Dt(e){return e.length<3?mt(e):e[0]+_t(e,At(e))}function Mt(e){for(var t,n,i,o=-1,r=e.length;++o<r;)t=e[o],n=t[0],i=t[1]+qn,t[0]=n*Math.cos(i),t[1]=n*Math.sin(i);return e}function Rt(e){function t(t){if(t.length<1)return null;var s=dt(this,t,n,o),c=dt(this,t,n===i?jt(s):i,o===r?Ot(s):r);return"M"+a(e(c),l)+"L"+a(e(s.reverse()),l)+"Z"}var n=ft,i=ft,o=0,r=pt,s="linear",a=Wn[s],l=.7;return t.x=function(e){return arguments.length?(n=i=e,t):i},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(o=r=e,t):r},t.y0=function(e){return arguments.length?(o=e,t):o},t.y1=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(a=Wn[s=e],t):s},t.tension=function(e){return arguments.length?(l=e,t):l},t}function jt(e){return function(t,n){return e[n][0]}}function Ot(e){return function(t,n){return e[n][1]}}function Ft(e){return e.source}function Ht(e){return e.target}function Bt(e){return e.radius}function Lt(e){return[e.x,e.y]}function qt(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]+qn;return[n*Math.cos(i),n*Math.sin(i)]}}function zt(e,t){var n=(e.ownerSVGElement||e).createSVGPoint();if(0>Gn&&(window.scrollX||window.scrollY)){var i=d3.select(document.body).append("svg:svg").style("position","absolute").style("top",0).style("left",0),o=i[0][0].getScreenCTM();Gn=!(o.f||o.e),i.remove()}return Gn?(n.x=t.pageX,n.y=t.pageY):(n.x=t.clientX,n.y=t.clientY),n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}function Wt(){return 64}function $t(){return"circle"}function Ut(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function Vt(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function Gt(e,t,n){if(i=[],n&&t.length>1){for(var i,o,r,s=q(e.domain()),a=-1,l=t.length,c=(t[1]-t[0])/++n;++a<l;)for(o=n;--o>0;)(r=+t[a]-o*c)>=s[0]&&i.push(r);for(--a,o=0;++o<n&&(r=+t[a]+o*c)<s[1];)i.push(r)}return i}function Qt(e){var t=d3.event,n=Jn.parentNode,i=0,o=0;n&&(n=Yt(n),i=n[0]-ei[0],o=n[1]-ei[1],ei=n,ti|=i|o);try{d3.event={dx:i,dy:o},Kn[e].dispatch.apply(Jn,Zn)}finally{d3.event=t}t.preventDefault()}function Yt(e){return d3.event.touches?d3.svg.touches(e)[0]:d3.svg.mouse(e)}function Xt(){if(Jn){var e=Jn.parentNode;if(!e)return Kt();Qt("drag"),Zt()}}function Kt(){Jn&&(Qt("dragend"),Jn=null,ti&&(ni=!0,Zt()))}function Jt(){ni&&(Zt(),ni=!1)}function Zt(){d3.event.stopPropagation(),d3.event.preventDefault()}function en(e){return[e[0]-si[0],e[1]-si[1],si[2]]}function tn(){ii||(ii=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var e,t=d3.event;try{ii.scrollTop=1e3,ii.dispatchEvent(t),e=1e3-ii.scrollTop}catch(n){e=t.wheelDelta||5*-t.detail}return.005*e}function nn(){for(var e,t=d3.svg.touches(li),n=-1,i=t.length;++n<i;)di[(e=t[n]).identifier]=en(e);return t}function on(){var e=d3.svg.touches(li);switch(e.length){case 1:var t=e[0];ln(si[2],t,di[t.identifier]);break;case 2:var n=e[0],i=e[1],o=[(n[0]+i[0])/2,(n[1]+i[1])/2],r=di[n.identifier],s=di[i.identifier],a=[(r[0]+s[0])/2,(r[1]+s[1])/2,r[2]];ln(Math.log(d3.event.scale)/Math.LN2+r[2],o,a)}}function rn(){ri=null,oi&&(ui=!0,ln(si[2],d3.svg.mouse(li),oi))}function sn(){oi&&(ui&&(hi=!0),rn(),oi=null)}function an(){hi&&(d3.event.stopPropagation(),d3.event.preventDefault(),hi=!1)}function ln(e,t,n){function i(e,t){var n=e.__domain||(e.__domain=e.domain()),i=e.range().map(function(e){return(e-t)/l});e.domain(n).domain(i.map(e.invert))}var o=Math.pow(2,(si[2]=e)-n[2]),r=si[0]=t[0]-o*n[0],s=si[1]=t[1]-o*n[1],a=d3.event,l=Math.pow(2,e);d3.event={scale:l,translate:[r,s],transform:function(e,t){e&&i(e,r),t&&i(t,s)}};try{ai.apply(li,ci)}finally{d3.event=a}a.preventDefault()}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(cn){var un=CSSStyleDeclaration.prototype,hn=un.setProperty;un.setProperty=function(e,t,n){hn.call(this,e,t+"",n)}}d3={version:"2.1.2"};var dn=[].__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};d3.functor=function(e){return"function"==typeof e?e:function(){return e}},d3.rebind=function(e,t){return function(){var n=t.apply(e,arguments);return arguments.length?e:n}},d3.ascending=function(e,t){return t>e?-1:e>t?1:e>=t?0:0/0},d3.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},d3.min=function(e,t){var n,i,o=-1,r=e.length;if(1===arguments.length){for(;++o<r&&(null==(n=e[o])||n!=n);)n=void 0;for(;++o<r;)null!=(i=e[o])&&n>i&&(n=i)}else{for(;++o<r&&(null==(n=t.call(e,e[o],o))||n!=n);)n=void 0;for(;++o<r;)null!=(i=t.call(e,e[o],o))&&n>i&&(n=i)}return n},d3.max=function(e,t){var n,i,o=-1,r=e.length;if(1===arguments.length){for(;++o<r&&(null==(n=e[o])||n!=n);)n=void 0;for(;++o<r;)null!=(i=e[o])&&i>n&&(n=i)}else{for(;++o<r&&(null==(n=t.call(e,e[o],o))||n!=n);)n=void 0;for(;++o<r;)null!=(i=t.call(e,e[o],o))&&i>n&&(n=i)}return n},d3.sum=function(e,t){var n,i=0,o=e.length,r=-1;if(1===arguments.length)for(;++r<o;)isNaN(n=+e[r])||(i+=n);else for(;++r<o;)isNaN(n=+t.call(e,e[r],r))||(i+=n);return i},d3.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),o=e[i-1],r=n-i;return r?o+r*(e[i]-o):o},d3.zip=function(){if(!(o=arguments.length))return[];for(var e=-1,n=d3.min(arguments,t),i=new Array(n);++e<n;)for(var o,r=-1,s=i[e]=new Array(o);++r<o;)s[r]=arguments[r][e];return i},d3.bisectLeft=function(e,t,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);i>n;){var o=n+i>>1;e[o]<t?n=o+1:i=o}return n},d3.bisect=d3.bisectRight=function(e,t,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);i>n;){var o=n+i>>1;t<e[o]?i=o:n=o+1}return n},d3.first=function(e,t){var n,i=0,o=e.length,r=e[0];for(1===arguments.length&&(t=d3.ascending);++i<o;)t.call(e,r,n=e[i])>0&&(r=n);return r},d3.last=function(e,t){var n,i=0,o=e.length,r=e[0];for(1===arguments.length&&(t=d3.ascending);++i<o;)t.call(e,r,n=e[i])<=0&&(r=n);return r},d3.nest=function(){function e(t,s){if(s>=r.length)return i?i.call(o,t):n?t.sort(n):t;for(var a,l,c=-1,u=t.length,h=r[s++],d={};++c<u;)(a=h(l=t[c]))in d?d[a].push(l):d[a]=[l];for(a in d)d[a]=e(d[a],s);return d}function t(e,n){if(n>=r.length)return e;var i,o=[],a=s[n++];for(i in e)o.push({key:i,values:t(e[i],n)});return a&&o.sort(function(e,t){return a(e.key,t.key)}),o}var n,i,o={},r=[],s=[];return o.map=function(t){return e(t,0)},o.entries=function(n){return t(e(n,0),0)},o.key=function(e){return r.push(e),o},o.sortKeys=function(e){return s[r.length-1]=e,o},o.sortValues=function(e){return n=e,o},o.rollup=function(e){return i=e,o},o},d3.keys=function(e){var t=[];for(var n in e)t.push(n);return t},d3.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},d3.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},d3.permute=function(e,t){for(var n=[],i=-1,o=t.length;++i<o;)n[i]=e[t[i]];return n},d3.merge=function(e){return Array.prototype.concat.apply([],e)},d3.split=function(e,t){var i,o=[],r=[],s=-1,a=e.length;for(arguments.length<2&&(t=n);++s<a;)t.call(r,i=e[s],s)?r=[]:(r.length||o.push(r),r.push(i));return o},d3.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),1/0==(t-e)/n)throw new Error("infinite range");var i,o=[],r=-1;if(0>n)for(;(i=e+n*++r)>t;)o.push(i);else for(;(i=e+n*++r)<t;)o.push(i);return o},d3.requote=function(e){return e.replace(fn,"\\$&")};var fn=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(e,t){return t?Math.round(e*Math.pow(10,t))*Math.pow(10,-t):Math.round(e)},d3.xhr=function(e,t,n){var i=new XMLHttpRequest;arguments.length<3?n=t:t&&i.overrideMimeType&&i.overrideMimeType(t),i.open("GET",e,!0),i.onreadystatechange=function(){4===i.readyState&&n(i.status<300?i:null)},i.send(null)},d3.text=function(e,t,n){function i(e){n(e&&e.responseText)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,i)},d3.json=function(e,t){d3.text(e,"application/json",function(e){t(e?JSON.parse(e):null)})},d3.html=function(e,t){d3.text(e,"text/html",function(e){if(null!=e){var n=document.createRange();n.selectNode(document.body),e=n.createContextualFragment(e)}t(e)})},d3.xml=function(e,t,n){function i(e){n(e&&e.responseXML)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,i)},d3.ns={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},qualify:function(e){var t=e.indexOf(":");return 0>t?e:{space:d3.ns.prefix[e.substring(0,t)],local:e.substring(t+1)}}},d3.dispatch=function(){for(var e,t={},n=0,i=arguments.length;i>n;n++)e=arguments[n],t[e]=o(e);return t},d3.format=function(e){var t=pn.exec(e),n=t[1]||" ",i=t[3]||"",o=t[5],a=+t[6],l=t[7],c=t[8],u=t[9],h=!1,d=!1;switch(c&&(c=c.substring(1)),o&&(n="0",l&&(a-=Math.floor((a-1)/4))),u){case"n":l=!0,u="g";break;case"%":h=!0,u="f";break;case"p":h=!0,u="r";break;case"d":d=!0,c="0"}return u=mn[u]||r,function(e){var t=h?100*e:+e,r=0>t&&(t=-t)?"−":i;if(d&&t%1)return"";if(e=u(t,c),o){var f=e.length+r.length;a>f&&(e=new Array(a-f+1).join(n)+e),l&&(e=s(e)),e=r+e}else{l&&(e=s(e)),e=r+e;var f=e.length;a>f&&(e=new Array(a-f+1).join(n)+e)}return h&&(e+="%"),e}};var pn=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,mn={g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){var n=1+Math.floor(1e-15+Math.log(e)/Math.LN10);return d3.round(e,t-n).toFixed(Math.max(0,Math.min(20,t-n)))}},gn=h(2),vn=h(3),yn={linear:function(){return u},poly:h,quad:function(){return gn},cubic:function(){return vn},sin:function(){return d},exp:function(){return f},circle:function(){return p},elastic:m,back:g,bounce:function(){return v}},bn={"in":function(e){return e},out:l,"in-out":c,"out-in":function(e){return c(l(e))}};d3.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,i=t>=0?e.substring(t+1):"in";return a(bn[i](yn[n].apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.interpolate=function(e,t){for(var n,i=d3.interpolators.length;--i>=0&&!(n=d3.interpolators[i](e,t)););return n},d3.interpolateNumber=function(e,t){return t-=e,function(n){return e+t*n}},d3.interpolateRound=function(e,t){return t-=e,function(n){return Math.round(e+t*n)}},d3.interpolateString=function(e,t){var n,i,o,r,s,a=0,l=0,c=[],u=[];for(wn.lastIndex=0,i=0;n=wn.exec(t);++i)n.index&&c.push(t.substring(a,l=n.index)),u.push({i:c.length,x:n[0]}),c.push(null),a=wn.lastIndex;for(a<t.length&&c.push(t.substring(a)),i=0,r=u.length;(n=wn.exec(e))&&r>i;++i)if(s=u[i],s.x==n[0]){if(s.i)if(null==c[s.i+1])for(c[s.i-1]+=s.x,c.splice(s.i,1),o=i+1;r>o;++o)u[o].i--;else for(c[s.i-1]+=s.x+c[s.i+1],c.splice(s.i,2),o=i+1;r>o;++o)u[o].i-=2;else if(null==c[s.i+1])c[s.i]=s.x;else for(c[s.i]=s.x+c[s.i+1],c.splice(s.i+1,1),o=i+1;r>o;++o)u[o].i--;u.splice(i,1),r--,i--}else s.x=d3.interpolateNumber(parseFloat(n[0]),parseFloat(s.x));for(;r>i;)s=u.pop(),null==c[s.i+1]?c[s.i]=s.x:(c[s.i]=s.x+c[s.i+1],c.splice(s.i+1,1)),r--;return 1===c.length?null==c[0]?u[0].x:function(){return t}:function(e){for(i=0;r>i;++i)c[(s=u[i]).i]=s.x(e);return c.join("")}},d3.interpolateRgb=function(e,t){e=d3.rgb(e),t=d3.rgb(t);var n=e.r,i=e.g,o=e.b,r=t.r-n,s=t.g-i,a=t.b-o;return function(e){return"rgb("+Math.round(n+r*e)+","+Math.round(i+s*e)+","+Math.round(o+a*e)+")"}},d3.interpolateHsl=function(e,t){e=d3.hsl(e),t=d3.hsl(t);var n=e.h,i=e.s,o=e.l,r=t.h-n,s=t.s-i,a=t.l-o;return function(e){return N(n+r*e,i+s*e,o+a*e).toString()}},d3.interpolateArray=function(e,t){var n,i=[],o=[],r=e.length,s=t.length,a=Math.min(e.length,t.length);for(n=0;a>n;++n)i.push(d3.interpolate(e[n],t[n]));for(;r>n;++n)o[n]=e[n];for(;s>n;++n)o[n]=t[n];return function(e){for(n=0;a>n;++n)o[n]=i[n](e);return o}},d3.interpolateObject=function(e,t){var n,i={},o={};for(n in e)n in t?i[n]=y(n)(e[n],t[n]):o[n]=e[n];for(n in t)n in e||(o[n]=t[n]);return function(e){for(n in i)o[n]=i[n](e);return o}};var wn=/[-+]?(?:\d+\.\d+|\d+\.|\.\d+|\d+)(?:[eE][-]?\d+)?/g,_n={background:1,fill:1,stroke:1};d3.interpolators=[d3.interpolateObject,function(e,t){return t instanceof Array&&d3.interpolateArray(e,t)},function(e,t){return"string"==typeof t&&d3.interpolateString(String(e),t)},function(e,t){return("string"==typeof t?t in xn||/^(#|rgb\(|hsl\()/.test(t):t instanceof x||t instanceof I)&&d3.interpolateRgb(String(e),t)},function(e,t){return"number"==typeof t&&d3.interpolateNumber(+e,t)}],d3.rgb=function(e,t,n){return 1===arguments.length?E(""+e,_,N):_(~~e,~~t,~~n)},x.prototype.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,o=30;return t||n||i?(t&&o>t&&(t=o),n&&o>n&&(n=o),i&&o>i&&(i=o),_(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(i/e)))):_(o,o,o)},x.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),_(Math.max(0,Math.floor(e*this.r)),Math.max(0,Math.floor(e*this.g)),Math.max(0,Math.floor(e*this.b)))},x.prototype.hsl=function(){return S(this.r,this.g,this.b)
},x.prototype.toString=function(){return"#"+C(this.r)+C(this.g)+C(this.b)};var xn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};for(var Cn in xn)xn[Cn]=E(xn[Cn],_,N);d3.hsl=function(e,t,n){return 1===arguments.length?E(""+e,S,k):k(+e,+t,+n)},I.prototype.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),k(this.h,this.s,this.l/e)},I.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),k(this.h,this.s,e*this.l)},I.prototype.rgb=function(){return N(this.h,this.s,this.l)},I.prototype.toString=function(){return"hsl("+this.h+","+100*this.s+"%,"+100*this.l+"%)"};var En=function(e,t){return t.querySelector(e)},Sn=function(e,t){return t.querySelectorAll(e)};"function"==typeof Sizzle&&(En=function(e,t){return Sizzle(e,t)[0]},Sn=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))});var Tn=[];d3.selection=function(){return In},d3.selection.prototype=Tn,Tn.select=function(e){var t,n,i,o,r=[];"function"!=typeof e&&(e=A(e));for(var s=-1,a=this.length;++s<a;){r.push(t=[]),t.parentNode=(i=this[s]).parentNode;for(var l=-1,c=i.length;++l<c;)(o=i[l])?(t.push(n=e.call(o,o.__data__,l)),n&&"__data__"in o&&(n.__data__=o.__data__)):t.push(null)}return P(r)},Tn.selectAll=function(e){var t,n,i=[];"function"!=typeof e&&(e=D(e));for(var o=-1,r=this.length;++o<r;)for(var s=this[o],a=-1,l=s.length;++a<l;)(n=s[a])&&(i.push(t=e.call(n,n.__data__,a)),t.parentNode=n);return P(i)},Tn.attr=function(e,t){function n(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function o(){this.setAttribute(e,t)}function r(){this.setAttributeNS(e.space,e.local,t)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function a(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}if(e=d3.ns.qualify(e),arguments.length<2){var l=this.node();return e.local?l.getAttributeNS(e.space,e.local):l.getAttribute(e)}return this.each(null==t?e.local?i:n:"function"==typeof t?e.local?a:s:e.local?r:o)},Tn.classed=function(e,t){function n(){if(t=this.classList)return t.add(e);var t=this.className,n=null!=t.baseVal,o=n?t.baseVal:t;s.lastIndex=0,s.test(o)||(o=i(o+" "+e),n?t.baseVal=o:this.className=o)}function o(){if(t=this.classList)return t.remove(e);var t=this.className,n=null!=t.baseVal,o=n?t.baseVal:t;o=i(o.replace(s," ")),n?t.baseVal=o:this.className=o}function r(){(t.apply(this,arguments)?n:o).call(this)}var s=new RegExp("(^|\\s+)"+d3.requote(e)+"(\\s+|$)","g");if(arguments.length<2){var a=this.node();if(l=a.classList)return l.contains(e);var l=a.className;return s.lastIndex=0,s.test(null!=l.baseVal?l.baseVal:l)}return this.each("function"==typeof t?r:t?n:o)},Tn.style=function(e,t,n){function i(){this.style.removeProperty(e)}function o(){this.style.setProperty(e,t,n)}function r(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}return arguments.length<3&&(n=""),arguments.length<2?window.getComputedStyle(this.node(),null).getPropertyValue(e):this.each(null==t?i:"function"==typeof t?r:o)},Tn.property=function(e,t){function n(){delete this[e]}function i(){this[e]=t}function o(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return arguments.length<2?this.node()[e]:this.each(null==t?n:"function"==typeof t?o:i)},Tn.text=function(e){return arguments.length<1?this.node().textContent:this.each("function"==typeof e?function(){this.textContent=e.apply(this,arguments)}:function(){this.textContent=e})},Tn.html=function(e){return arguments.length<1?this.node().innerHTML:this.each("function"==typeof e?function(){this.innerHTML=e.apply(this,arguments)}:function(){this.innerHTML=e})},Tn.append=function(e){function t(){return this.appendChild(document.createElement(e))}function n(){return this.appendChild(document.createElementNS(e.space,e.local))}return e=d3.ns.qualify(e),this.select(e.local?n:t)},Tn.insert=function(e,t){function n(){return this.insertBefore(document.createElement(e),En(t,this))}function i(){return this.insertBefore(document.createElementNS(e.space,e.local),En(t,this))}return e=d3.ns.qualify(e),this.select(e.local?i:n)},Tn.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},Tn.data=function(e,t){function n(e,n){var i,a,l,c=e.length,u=n.length,h=Math.min(c,u),d=Math.max(c,u),f=[],p=[],m=[];if(t){var g,v={},y=[],b=n.length;for(i=-1;++i<c;)g=t.call(a=e[i],a.__data__,i),g in v?m[b++]=a:v[g]=a,y.push(g);for(i=-1;++i<u;)a=v[g=t.call(n,l=n[i],i)],a?(a.__data__=l,f[i]=a,p[i]=m[i]=null):(p[i]=M(l),f[i]=m[i]=null),delete v[g];for(i=-1;++i<c;)y[i]in v&&(m[i]=e[i])}else{for(i=-1;++i<h;)a=e[i],l=n[i],a?(a.__data__=l,f[i]=a,p[i]=m[i]=null):(p[i]=M(l),f[i]=m[i]=null);for(;u>i;++i)p[i]=M(n[i]),f[i]=m[i]=null;for(;d>i;++i)m[i]=e[i],p[i]=f[i]=null}p.update=f,p.parentNode=f.parentNode=m.parentNode=e.parentNode,o.push(p),r.push(f),s.push(m)}var i,o=[],r=[],s=[],a=-1,l=this.length;if("function"==typeof e)for(;++a<l;)n(i=this[a],e.call(i,i.parentNode.__data__,a));else for(;++a<l;)n(i=this[a],e);var c=P(r);return c.enter=function(){return R(o)},c.exit=function(){return P(s)},c};var kn=[];kn.append=Tn.append,kn.insert=Tn.insert,kn.empty=Tn.empty,kn.select=function(e){for(var t,n,i,o,r,s=[],a=-1,l=this.length;++a<l;){i=(o=this[a]).update,s.push(t=[]),t.parentNode=o.parentNode;for(var c=-1,u=o.length;++c<u;)(r=o[c])?(t.push(i[c]=n=e.call(o.parentNode,r.__data__,c)),n.__data__=r.__data__):t.push(null)}return P(s)},Tn.filter=function(e){for(var t,n,i,o=[],r=0,s=this.length;s>r;r++){o.push(t=[]),t.parentNode=(n=this[r]).parentNode;for(var a=0,l=n.length;l>a;a++)(i=n[a])&&e.call(i,i.__data__,a)&&t.push(i)}return P(o)},Tn.map=function(e){return this.each(function(){this.__data__=e.apply(this,arguments)})},Tn.sort=function(e){e=j.apply(this,arguments);for(var t=0,n=this.length;n>t;t++)for(var i=this[t].sort(e),o=1,r=i.length,s=i[0];r>o;o++){var a=i[o];a&&(s&&s.parentNode.insertBefore(a,s.nextSibling),s=a)}return this},Tn.on=function(e,t,n){arguments.length<3&&(n=!1);var i="__on"+e,o=e.indexOf(".");return o>0&&(e=e.substring(0,o)),arguments.length<2?(o=this.node()[i])&&o._:this.each(function(o,r){function s(e){var n=d3.event;d3.event=e;try{t.call(a,a.__data__,r)}finally{d3.event=n}}var a=this;a[i]&&a.removeEventListener(e,a[i],n),t&&a.addEventListener(e,a[i]=s,n),s._=t})},Tn.each=function(e){for(var t=-1,n=this.length;++t<n;)for(var i=this[t],o=-1,r=i.length;++o<r;){var s=i[o];s&&e.call(s,s.__data__,o,t)}return this},Tn.call=function(e){return e.apply(this,(arguments[0]=this,arguments)),this},Tn.empty=function(){return!this.node()},Tn.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],i=0,o=n.length;o>i;i++){var r=n[i];if(r)return r}return null},Tn.transition=function(){for(var e,t,n=[],i=-1,o=this.length;++i<o;){n.push(e=[]);for(var r=this[i],s=-1,a=r.length;++s<a;)e.push((t=r[s])?{node:t,delay:0,duration:250}:null)}return O(n,An||++Pn)};var In=P([[document]]);In[0].parentNode=document.documentElement,d3.select=function(e){return"string"==typeof e?In.select(e):P([[e]])},d3.selectAll=function(e){return"string"==typeof e?In.selectAll(e):P([e])};var Nn=[],Pn=0,An=0,Dn=d3.ease("cubic-in-out");Nn.call=Tn.call,d3.transition=function(){return In.transition()},d3.transition.prototype=Nn,Nn.select=function(e){var t,n,i,o=[];"function"!=typeof e&&(e=A(e));for(var r=-1,s=this.length;++r<s;){o.push(t=[]);for(var a=this[r],l=-1,c=a.length;++l<c;)(i=a[l])&&(n=e.call(i.node,i.node.__data__,l))?("__data__"in i.node&&(n.__data__=i.node.__data__),t.push({node:n,delay:i.delay,duration:i.duration})):t.push(null)}return O(o,this.id).ease(this.ease())},Nn.selectAll=function(e){var t,n,i=[];"function"!=typeof e&&(e=D(e));for(var o=-1,r=this.length;++o<r;)for(var s=this[o],a=-1,l=s.length;++a<l;)if(n=s[a]){i.push(t=e.call(n.node,n.node.__data__,a));for(var c=-1,u=t.length;++c<u;)t[c]={node:t[c],delay:n.delay,duration:n.duration}}return O(i,this.id).ease(this.ease())},Nn.attr=function(e,t){return this.attrTween(e,F(t))},Nn.attrTween=function(e,t){function n(n,i){var o=t.call(this,n,i,this.getAttribute(e));return o&&function(t){this.setAttribute(e,o(t))}}function i(n,i){var o=t.call(this,n,i,this.getAttributeNS(e.space,e.local));return o&&function(t){this.setAttributeNS(e.space,e.local,o(t))}}return e=d3.ns.qualify(e),this.tween("attr."+e,e.local?i:n)},Nn.style=function(e,t,n){return arguments.length<3&&(n=""),this.styleTween(e,F(t),n)},Nn.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(i,o){var r=t.call(this,i,o,window.getComputedStyle(this,null).getPropertyValue(e));return r&&function(t){this.style.setProperty(e,r(t),n)}})},Nn.text=function(e){return this.tween("text",function(t,n){this.textContent="function"==typeof e?e.call(this,t,n):e})},Nn.remove=function(){return this.each("end",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})},Nn.delay=function(e){var t=this;return t.each("function"==typeof e?function(n,i,o){t[o][i].delay=+e.apply(this,arguments)}:(e=+e,function(n,i,o){t[o][i].delay=e}))},Nn.duration=function(e){var t=this;return t.each("function"==typeof e?function(n,i,o){t[o][i].duration=+e.apply(this,arguments)}:(e=+e,function(n,i,o){t[o][i].duration=e}))},Nn.transition=function(){return this.select(e)};var Mn,Rn,jn=null;d3.timer=function(e,t,n){var i,o=!1,r=jn;if(arguments.length<3){if(arguments.length<2)t=0;else if(!isFinite(t))return;n=Date.now()}for(;r;){if(r.callback===e){r.then=n,r.delay=t,o=!0;break}i=r,r=r.next}o||(jn={callback:e,then:n,delay:t,next:jn}),Mn||(Rn=clearTimeout(Rn),Mn=1,On(B))},d3.timer.flush=function(){for(var e,t=Date.now(),n=jn;n;)e=t-n.then,n.delay||(n.flush=n.callback(e)),n=n.next;L()};var On=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,17)};d3.scale={},d3.scale.linear=function(){return $([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return J(d3.scale.linear(),Z)},Z.pow=function(e){return Math.pow(10,e)},et.pow=function(e){return-Math.pow(10,-e)},d3.scale.pow=function(){return nt(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return ot([],{t:"range",x:[]})},d3.scale.category10=function(){return d3.scale.ordinal().range(Fn)},d3.scale.category20=function(){return d3.scale.ordinal().range(Hn)},d3.scale.category20b=function(){return d3.scale.ordinal().range(Bn)},d3.scale.category20c=function(){return d3.scale.ordinal().range(Ln)};var Fn=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Hn=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Bn=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Ln=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return rt([],[])},d3.scale.quantize=function(){return st(0,1,[0,1])},d3.svg={},d3.svg.arc=function(){function e(){var e=t.apply(this,arguments),r=n.apply(this,arguments),s=i.apply(this,arguments)+qn,a=o.apply(this,arguments)+qn,l=(s>a&&(l=s,s=a,a=l),a-s),c=l<Math.PI?"0":"1",u=Math.cos(s),h=Math.sin(s),d=Math.cos(a),f=Math.sin(a);return l>=zn?e?"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z":e?"M"+r*u+","+r*h+"A"+r+","+r+" 0 "+c+",1 "+r*d+","+r*f+"L"+e*d+","+e*f+"A"+e+","+e+" 0 "+c+",0 "+e*u+","+e*h+"Z":"M"+r*u+","+r*h+"A"+r+","+r+" 0 "+c+",1 "+r*d+","+r*f+"L0,0"+"Z"}var t=at,n=lt,i=ct,o=ut;return e.innerRadius=function(n){return arguments.length?(t=d3.functor(n),e):t},e.outerRadius=function(t){return arguments.length?(n=d3.functor(t),e):n},e.startAngle=function(t){return arguments.length?(i=d3.functor(t),e):i},e.endAngle=function(t){return arguments.length?(o=d3.functor(t),e):o},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,r=(i.apply(this,arguments)+o.apply(this,arguments))/2+qn;return[Math.cos(r)*e,Math.sin(r)*e]},e};var qn=-Math.PI/2,zn=2*Math.PI-1e-6;d3.svg.line=function(){return ht(Object)};var Wn={linear:mt,"step-before":gt,"step-after":vt,basis:Ct,"basis-open":Et,"basis-closed":St,bundle:Tt,cardinal:wt,"cardinal-open":yt,"cardinal-closed":bt,monotone:Dt},$n=[0,2/3,1/3,0],Un=[0,1/3,2/3,0],Vn=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var e=ht(Mt);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},d3.svg.area=function(){return Rt(Object)},d3.svg.area.radial=function(){var e=Rt(Mt);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},d3.svg.chord=function(){function e(e,a){var l=t(this,r,e,a),c=t(this,s,e,a);return"M"+l.p0+i(l.r,l.p1)+(n(l,c)?o(l.r,l.p1,l.r,l.p0):o(l.r,l.p1,c.r,c.p0)+i(c.r,c.p1)+o(c.r,c.p1,l.r,l.p0))+"Z"}function t(e,t,n,i){var o=t.call(e,n,i),r=a.call(e,o,i),s=l.call(e,o,i)+qn,u=c.call(e,o,i)+qn;return{r:r,a0:s,a1:u,p0:[r*Math.cos(s),r*Math.sin(s)],p1:[r*Math.cos(u),r*Math.sin(u)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function i(e,t){return"A"+e+","+e+" 0 0,1 "+t}function o(e,t,n,i){return"Q 0,0 "+i}var r=Ft,s=Ht,a=Bt,l=ct,c=ut;return e.radius=function(t){return arguments.length?(a=d3.functor(t),e):a},e.source=function(t){return arguments.length?(r=d3.functor(t),e):r},e.target=function(t){return arguments.length?(s=d3.functor(t),e):s},e.startAngle=function(t){return arguments.length?(l=d3.functor(t),e):l},e.endAngle=function(t){return arguments.length?(c=d3.functor(t),e):c},e},d3.svg.diagonal=function(){function e(e,o){var r=t.call(this,e,o),s=n.call(this,e,o),a=(r.y+s.y)/2,l=[r,{x:r.x,y:a},{x:s.x,y:a},s];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=Ft,n=Ht,i=Lt;return e.source=function(n){return arguments.length?(t=d3.functor(n),e):t},e.target=function(t){return arguments.length?(n=d3.functor(t),e):n},e.projection=function(t){return arguments.length?(i=t,e):i},e},d3.svg.diagonal.radial=function(){var e=d3.svg.diagonal(),t=Lt,n=e.projection;return e.projection=function(e){return arguments.length?n(qt(t=e)):t},e},d3.svg.mouse=function(e){return zt(e,d3.event)};var Gn=/WebKit/.test(navigator.userAgent)?-1:0;d3.svg.touches=function(e){var t=d3.event.touches;return t?Array.prototype.map.call(t,function(t){var n=zt(e,t);return n.identifier=t.identifier,n}):[]},d3.svg.symbol=function(){function e(e,i){return(Qn[t.call(this,e,i)]||Qn.circle)(n.call(this,e,i))}var t=$t,n=Wt;return e.type=function(n){return arguments.length?(t=d3.functor(n),e):t},e.size=function(t){return arguments.length?(n=d3.functor(t),e):n},e};var Qn={circle:function(e){var t=Math.sqrt(e/Math.PI);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"},cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Xn)),n=t*Xn;return"M0,"+-t+"L"+n+",0"+" 0,"+t+" "+-n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Yn),n=t*Yn/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Yn),n=t*Yn/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}};d3.svg.symbolTypes=d3.keys(Qn);var Yn=Math.sqrt(3),Xn=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function e(e){e.each(function(u,h,d){function f(t){return e.delay?t.transition().delay(e[d][h].delay).duration(e[d][h].duration).ease(e.ease()):t}var p,m=d3.select(this),g=n.ticks.apply(n,l),v=null==t?n.tickFormat.apply(n,l):t,y=Gt(n,g,c),b=m.selectAll(".minor").data(y,String),w=b.enter().insert("svg:line","g").attr("class","tick minor").style("opacity",1e-6),_=f(b.exit()).style("opacity",1e-6).remove(),x=f(b).style("opacity",1),C=m.selectAll("g").data(g,String),E=C.enter().insert("svg:g","path").style("opacity",1e-6),S=f(C.exit()).style("opacity",1e-6).remove(),T=f(C).style("opacity",1),k=q(n.range()),I=m.selectAll(".domain").data([]),N=(I.enter().append("svg:path").attr("class","domain"),f(I)),P=this.__chart__||n;switch(this.__chart__=n.copy(),E.append("svg:line").attr("class","tick"),E.append("svg:text"),T.select("text").text(v),i){case"bottom":p=Ut,x.attr("y2",r),E.select("text").attr("dy",".71em").attr("text-anchor","middle"),T.select("line").attr("y2",o),T.select("text").attr("y",Math.max(o,0)+a),N.attr("d","M"+k[0]+","+s+"V0H"+k[1]+"V"+s);break;case"top":p=Ut,x.attr("y2",-r),E.select("text").attr("text-anchor","middle"),T.select("line").attr("y2",-o),T.select("text").attr("y",-(Math.max(o,0)+a)),N.attr("d","M"+k[0]+","+-s+"V0H"+k[1]+"V"+-s);break;case"left":p=Vt,x.attr("x2",-r),E.select("text").attr("dy",".32em").attr("text-anchor","end"),T.select("line").attr("x2",-o),T.select("text").attr("x",-(Math.max(o,0)+a)),N.attr("d","M"+-s+","+k[0]+"H0V"+k[1]+"H"+-s);break;case"right":p=Vt,x.attr("x2",r),E.select("text").attr("dy",".32em"),T.select("line").attr("x2",o),T.select("text").attr("x",Math.max(o,0)+a),N.attr("d","M"+s+","+k[0]+"H0V"+k[1]+"H"+s)}E.call(p,P),T.call(p,n),S.call(p,n),w.call(p,P),x.call(p,n),_.call(p,n)})}var t,n=d3.scale.linear(),i="bottom",o=6,r=6,s=6,a=3,l=[10],c=0;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(i=t,e):i},e.ticks=function(){return arguments.length?(l=arguments,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t,n){if(!arguments.length)return o;var i=arguments.length-1;return o=+t,r=i>1?+n:o,s=i>0?+arguments[i]:o,e},e.tickPadding=function(t){return arguments.length?(a=+t,e):a},e.tickSubdivide=function(t){return arguments.length?(c=+t,e):c},e},d3.behavior={},d3.behavior.drag=function(){function e(){this.on("mousedown.drag",n).on("touchstart.drag",n),d3.select(window).on("mousemove.drag",Xt).on("touchmove.drag",Xt).on("mouseup.drag",Kt,!0).on("touchend.drag",Kt,!0).on("click.drag",Jt,!0)}function t(){Kn=i,ei=Yt((Jn=this).parentNode),ti=0,Zn=arguments}function n(){t.apply(this,arguments),Qt("dragstart")}var i=d3.dispatch("drag","dragstart","dragend");return e.on=function(t,n){return i[t].add(n),e},e};var Kn,Jn,Zn,ei,ti,ni;d3.behavior.zoom=function(){function e(){this.on("mousedown.zoom",n).on("mousewheel.zoom",i).on("DOMMouseScroll.zoom",i).on("dblclick.zoom",o).on("touchstart.zoom",r),d3.select(window).on("mousemove.zoom",rn).on("mouseup.zoom",sn).on("touchmove.zoom",on).on("touchend.zoom",nn).on("click.zoom",an,!0)}function t(){si=s,ai=a.zoom.dispatch,li=this,ci=arguments}function n(){t.apply(this,arguments),oi=en(d3.svg.mouse(li)),ui=!1,d3.event.preventDefault(),window.focus()}function i(){t.apply(this,arguments),ri||(ri=en(d3.svg.mouse(li))),ln(tn()+s[2],d3.svg.mouse(li),ri)}function o(){t.apply(this,arguments);var e=d3.svg.mouse(li);ln(d3.event.shiftKey?Math.ceil(s[2]-1):Math.floor(s[2]+1),e,en(e))}function r(){t.apply(this,arguments);var e,n=nn(),i=Date.now();1===n.length&&300>i-fi&&ln(1+Math.floor(s[2]),e=n[0],di[e.identifier]),fi=i}var s=[0,0,0],a=d3.dispatch("zoom");return e.on=function(t,n){return a[t].add(n),e},e};var ii,oi,ri,si,ai,li,ci,ui,hi,di={},fi=0}(),function(){function e(e){for(var t=e.source,i=e.target,o=n(t,i),r=[t];t!==o;)t=t.parent,r.push(t);for(var s=r.length;i!==o;)r.splice(s,0,i),i=i.parent;return r}function t(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function n(e,n){if(e===n)return e;for(var i=t(e),o=t(n),r=i.pop(),s=o.pop(),a=null;r===s;)a=r,r=i.pop(),s=o.pop();return a}function i(e){e.fixed|=2}function o(e){e!==Z&&(e.fixed&=1)}function r(){s(),Z.fixed&=1,J=Z=null}function s(){Z.px+=d3.event.dx,Z.py+=d3.event.dy,J.resume()}function a(e){var t=0,n=0;if(e.count=0,!e.leaf)for(var i,o=e.nodes,r=o.length,s=-1;++s<r;)i=o[s],null!=i&&(a(i),e.count+=i.count,t+=i.count*i.cx,n+=i.count*i.cy);e.point&&(e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5),e.count++,t+=e.point.x,n+=e.point.y),e.cx=t/e.count,e.cy=n/e.count}function l(){return 20}function c(){return 1}function u(e){return e.x}function h(e){return e.y}function f(e,t,n){e.y0=t,e.y=n}function p(e){for(var t,n=1,i=0,o=e[0][1],r=e.length;r>n;++n)(t=e[n][1])>o&&(i=n,o=t);return i}function m(e){return e.reduce(g,0)}function g(e,t){return e+t[1]}function v(e,t){return y(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function y(e,t){for(var n=-1,i=+e[0],o=(e[1]-i)/t,r=[];++n<=t;)r[n]=o*n+i;return r}function b(e){return[d3.min(e),d3.max(e)]}function w(e,t){return e.sort=d3.rebind(e,t.sort),e.children=d3.rebind(e,t.children),e.links=E,e.value=d3.rebind(e,t.value),e.nodes=function(t){return nt=!0,(e.nodes=e)(t)},e}function _(e){return e.children}function x(e){return e.value}function C(e,t){return t.value-e.value}function E(e){return d3.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function S(e,t){return e.value-t.value}function T(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function k(e,t){e._pack_next=t,t._pack_prev=e}function I(e,t){var n=t.x-e.x,i=t.y-e.y,o=e.r+t.r;return o*o-n*n-i*i>.001}function N(e){function t(e){a=Math.min(e.x-e.r,a),l=Math.max(e.x+e.r,l),c=Math.min(e.y-e.r,c),u=Math.max(e.y+e.r,u)}var n,i,o,r,s,a=1/0,l=-1/0,c=1/0,u=-1/0,h=e.length;if(e.forEach(P),n=e[0],n.x=-n.r,n.y=0,t(n),h>1&&(i=e[1],i.x=i.r,i.y=0,t(i),h>2)){o=e[2],R(n,i,o),t(o),T(n,o),n._pack_prev=o,T(o,i),i=n._pack_next;for(var d=3;h>d;d++){R(n,i,o=e[d]);var f=0,p=1,m=1;for(r=i._pack_next;r!==i;r=r._pack_next,p++)if(I(r,o)){f=1;break}if(1==f)for(s=n._pack_prev;s!==r._pack_prev;s=s._pack_prev,m++)if(I(s,o)){p>m&&(f=-1,r=s);break}0==f?(T(n,o),i=o,t(o)):f>0?(k(n,r),i=r,d--):(k(r,i),n=r,d--)}}for(var g=(a+l)/2,v=(c+u)/2,y=0,d=0;h>d;d++){var b=e[d];b.x-=g,b.y-=v,y=Math.max(y,b.r+Math.sqrt(b.x*b.x+b.y*b.y))}return e.forEach(A),y}function P(e){e._pack_next=e._pack_prev=e}function A(e){delete e._pack_next,delete e._pack_prev}function D(e){var t=e.children;t?(t.forEach(D),e.r=N(t)):e.r=Math.sqrt(e.value)}function M(e,t,n,i){var o=e.children;if(e.x=t+=i*e.x,e.y=n+=i*e.y,e.r*=i,o)for(var r=-1,s=o.length;++r<s;)M(o[r],t,n,i)}function R(e,t,n){var i=t.r+n.r,o=e.r+n.r,r=t.x-e.x,s=t.y-e.y,a=Math.sqrt(r*r+s*s),l=(o*o+a*a-i*i)/(2*o*a),c=Math.acos(l),u=l*o,h=Math.sin(c)*o;r/=a,s/=a,n.x=e.x+u*r+h*s,n.y=e.y+u*s-h*r}function j(e){return 1+d3.max(e,function(e){return e.y})}function O(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function F(e){var t=e.children;return t?F(t[0]):e}function H(e){var t=e.children;return t?H(t[t.length-1]):e}function B(e,t){return e.parent==t.parent?1:2}function L(e){return e.children?e.children[0]:e._tree.thread}function q(e){return e.children?e.children[e.children.length-1]:e._tree.thread}function z(e,t){var n=e.children;if(n)for(var i,o=n.length,r=-1;++r<o;)t(i=z(n[r],t),e)>0&&(e=i);return e}function W(e,t){return e.x-t.x}function $(e,t){return t.x-e.x}function U(e,t){return e.depth-t.depth}function V(e,t){function n(e,i){var o=e.children;if(o)for(var r,s=null,a=-1,l=o.length;++a<l;)r=o[a],n(r,s),s=r;t(e,i)}n(e,null)}function G(e){for(var t,n=0,i=0,o=e.children,r=o.length;--r>=0;)t=o[r]._tree,t.prelim+=n,t.mod+=n,n+=t.shift+(i+=t.change)}function Q(e,t,n){e=e._tree,t=t._tree;var i=n/(t.number-e.number);e.change+=i,t.change-=i,t.shift+=n,t.prelim+=n,t.mod+=n}function Y(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function X(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function K(e,t){var n=e.x+t[3],i=e.y+t[0],o=e.dx-t[1]-t[3],r=e.dy-t[0]-t[2];return 0>o&&(n+=o/2,o=0),0>r&&(i+=r/2,r=0),{x:n,y:i,dx:o,dy:r}}d3.layout={},d3.layout.bundle=function(){return function(t){for(var n=[],i=-1,o=t.length;++i<o;)n.push(e(t[i]));return n}},d3.layout.chord=function(){function e(){var e,c,h,d,f,p={},m=[],g=d3.range(r),v=[];for(n=[],i=[],e=0,d=-1;++d<r;){for(c=0,f=-1;++f<r;)c+=o[d][f];m.push(c),v.push(d3.range(r)),e+=c}for(s&&g.sort(function(e,t){return s(m[e],m[t])}),a&&v.forEach(function(e,t){e.sort(function(e,n){return a(o[t][e],o[t][n])})}),e=(2*Math.PI-u*r)/e,c=0,d=-1;++d<r;){for(h=c,f=-1;++f<r;){var y=g[d],b=v[d][f],w=o[y][b];p[y+"-"+b]={index:y,subindex:b,startAngle:c,endAngle:c+=w*e,value:w}}i.push({index:y,startAngle:h,endAngle:c,value:(c-h)/e}),c+=u}for(d=-1;++d<r;)for(f=d-1;++f<r;){var _=p[d+"-"+f],x=p[f+"-"+d];(_.value||x.value)&&n.push(_.value<x.value?{source:x,target:_}:{source:_,target:x})}l&&t()}function t(){n.sort(function(e,t){return l(e.target.value,t.target.value)})}var n,i,o,r,s,a,l,c={},u=0;return c.matrix=function(e){return arguments.length?(r=(o=e)&&o.length,n=i=null,c):o},c.padding=function(e){return arguments.length?(u=e,n=i=null,c):u},c.sortGroups=function(e){return arguments.length?(s=e,n=i=null,c):s},c.sortSubgroups=function(e){return arguments.length?(a=e,n=null,c):a},c.sortChords=function(e){return arguments.length?(l=e,n&&t(),c):l},c.chords=function(){return n||e(),n},c.groups=function(){return i||e(),i},c},d3.layout.force=function(){function e(e,t){return function(n,i,o,r){if(n.point!==e){var s=n.cx-e.x,a=n.cy-e.y,l=1/Math.sqrt(s*s+a*a);if(x>(r-i)*l){var c=t*n.count*l*l;return e.px-=s*c,e.py-=a*c,!0}if(n.point&&isFinite(l)){var c=t*l*l;e.px-=s*c,e.py-=a*c}}}}function t(){var t,n,i,o,r,s,l,c,u,p=C.length,y=E.length;for(n=0;y>n;++n)i=E[n],o=i.source,r=i.target,c=r.x-o.x,u=r.y-o.y,(s=c*c+u*u)&&(s=h*f[n]*((s=Math.sqrt(s))-d[n])/s,c*=s,u*=s,r.x-=c*(l=o.weight/(r.weight+o.weight)),r.y-=u*l,o.x+=c*(l=1-l),o.y+=u*l);if((l=h*_)&&(c=g[0]/2,u=g[1]/2,n=-1,l))for(;++n<p;)i=C[n],i.x+=(c-i.x)*l,i.y+=(u-i.y)*l;if(l=h*w)for(a(t=d3.geom.quadtree(C)),n=-1;++n<p;)(i=C[n]).fixed||t.visit(e(i,l));for(n=-1;++n<p;)i=C[n],i.fixed?(i.x=i.px,i.y=i.py):(i.x-=(i.px-(i.px=i.x))*v,i.y-=(i.py-(i.py=i.y))*v);return m.tick.dispatch({type:"tick",alpha:h}),(h*=.99)<.005}function n(e){i(Z=e),J=p}var u,h,d,f,p={},m=d3.dispatch("tick"),g=[1,1],v=.9,y=l,b=c,w=-30,_=.1,x=.8,C=[],E=[];return p.on=function(e,t){return m[e].add(t),p},p.nodes=function(e){return arguments.length?(C=e,p):C},p.links=function(e){return arguments.length?(E=e,p):E},p.size=function(e){return arguments.length?(g=e,p):g},p.linkDistance=function(e){return arguments.length?(y=d3.functor(e),p):y},p.distance=p.linkDistance,p.linkStrength=function(e){return arguments.length?(b=d3.functor(e),p):b},p.friction=function(e){return arguments.length?(v=e,p):v},p.charge=function(e){return arguments.length?(w=e,p):w},p.gravity=function(e){return arguments.length?(_=e,p):_},p.theta=function(e){return arguments.length?(x=e,p):x},p.start=function(){function e(e,i){for(var o,r=t(n),s=-1,a=r.length;++s<a;)if(!isNaN(o=r[s][e]))return o;return Math.random()*i}function t(){if(!o){for(o=[],i=0;s>i;++i)o[i]=[];for(i=0;a>i;++i){var e=E[i];o[e.source.index].push(e.target),o[e.target.index].push(e.source)}}return o[n]}var n,i,o,r,s=C.length,a=E.length,l=g[0],c=g[1];for(n=0;s>n;++n)(r=C[n]).index=n,r.weight=0;for(d=[],f=[],n=0;a>n;++n)r=E[n],"number"==typeof r.source&&(r.source=C[r.source]),"number"==typeof r.target&&(r.target=C[r.target]),d[n]=y.call(this,r,n),f[n]=b.call(this,r,n),++r.source.weight,++r.target.weight;for(n=0;s>n;++n)r=C[n],isNaN(r.x)&&(r.x=e("x",l)),isNaN(r.y)&&(r.y=e("y",c)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);return p.resume()},p.resume=function(){return h=.1,d3.timer(t),p},p.stop=function(){return h=0,p},p.drag=function(){u||(u=d3.behavior.drag().on("dragstart",n).on("drag",s).on("dragend",r)),this.on("mouseover.force",i).on("mouseout.force",o).call(u)},p};var J,Z;d3.layout.partition=function(){function e(t,n,i,o){var r=t.children;if(t.x=n,t.y=t.depth*o,t.dx=i,t.dy=o,r){var s,a,l=-1,c=r.length;for(i=t.value?i/t.value:0;++l<c;)e(s=r[l],n,a=s.value*i,o),n+=a}}function t(e){var n=e.children,i=0;if(n)for(var o=-1,r=n.length;++o<r;)i=Math.max(i,t(n[o]));return 1+i}function n(n,r){var s=i.call(this,n,r);return e(s[0],0,o[0],o[1]/t(s[0])),s}var i=d3.layout.hierarchy(),o=[1,1];return n.size=function(e){return arguments.length?(o=e,n):o},w(n,i)},d3.layout.pie=function(){function e(e){var r=+("function"==typeof i?i.apply(this,arguments):i),s=("function"==typeof o?o.apply(this,arguments):o)-i,a=d3.range(e.length);null!=n&&a.sort(function(t,i){return n(e[t],e[i])});var l=e.map(t);s/=l.reduce(function(e,t){return e+t},0);var c=a.map(function(t){return{data:e[t],value:d=l[t],startAngle:r,endAngle:r+=d*s}});return e.map(function(e,t){return c[a[t]]})}var t=Number,n=null,i=0,o=2*Math.PI;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(i=t,e):i},e.endAngle=function(t){return arguments.length?(o=t,e):o},e},d3.layout.stack=function(){function e(a,l){var c=a.map(function(n,i){return t.call(e,n,i)}),u=c.map(function(t){return t.map(function(t,n){return[r.call(e,t,n),s.call(e,t,n)]})}),h=n.call(e,u,l);c=d3.permute(c,h),u=d3.permute(u,h);var d,f,p,m=i.call(e,u,l),g=c.length,v=c[0].length;for(f=0;v>f;++f)for(o.call(e,c[0][f],p=m[f],u[0][f][1]),d=1;g>d;++d)o.call(e,c[d][f],p+=u[d-1][f][1],u[d][f][1]);return a}var t=Object,n=et["default"],i=tt.zero,o=f,r=u,s=h;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:et[t],e):n},e.offset=function(t){return arguments.length?(i="function"==typeof t?t:tt[t],e):i
},e.x=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(s=t,e):s},e.out=function(t){return arguments.length?(o=t,e):o},e};var et={"inside-out":function(e){var t,n,i=e.length,o=e.map(p),r=e.map(m),s=d3.range(i).sort(function(e,t){return o[e]-o[t]}),a=0,l=0,c=[],u=[];for(t=0;i>t;++t)n=s[t],l>a?(a+=r[n],c.push(n)):(l+=r[n],u.push(n));return u.reverse().concat(c)},reverse:function(e){return d3.range(e.length).reverse()},"default":function(e){return d3.range(e.length)}},tt={silhouette:function(e){var t,n,i,o=e.length,r=e[0].length,s=[],a=0,l=[];for(n=0;r>n;++n){for(t=0,i=0;o>t;t++)i+=e[t][n][1];i>a&&(a=i),s.push(i)}for(n=0;r>n;++n)l[n]=(a-s[n])/2;return l},wiggle:function(e){var t,n,i,o,r,s,a,l,c,u=e.length,h=e[0],d=h.length,f=[];for(f[0]=l=c=0,n=1;d>n;++n){for(t=0,o=0;u>t;++t)o+=e[t][n][1];for(t=0,r=0,a=h[n][0]-h[n-1][0];u>t;++t){for(i=0,s=(e[t][n][1]-e[t][n-1][1])/(2*a);t>i;++i)s+=(e[i][n][1]-e[i][n-1][1])/a;r+=s*e[t][n][1]}f[n]=l-=o?r/o*a:0,c>l&&(c=l)}for(n=0;d>n;++n)f[n]-=c;return f},expand:function(e){var t,n,i,o=e.length,r=e[0].length,s=1/o,a=[];for(n=0;r>n;++n){for(t=0,i=0;o>t;t++)i+=e[t][n][1];if(i)for(t=0;o>t;t++)e[t][n][1]/=i;else for(t=0;o>t;t++)e[t][n][1]=s}for(n=0;r>n;++n)a[n]=0;return a},zero:function(e){for(var t=-1,n=e[0].length,i=[];++t<n;)i[t]=0;return i}};d3.layout.histogram=function(){function e(e,r){for(var s,a,l=[],c=e.map(n,this),u=i.call(this,c,r),h=o.call(this,u,c,r),r=-1,d=c.length,f=h.length-1,p=t?1:1/d;++r<f;)s=l[r]=[],s.dx=h[r+1]-(s.x=h[r]),s.y=0;for(r=-1;++r<d;)a=c[r],a>=u[0]&&a<=u[1]&&(s=l[d3.bisect(h,a,1,f)-1],s.y+=p,s.push(e[r]));return l}var t=!0,n=Number,i=b,o=v;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(i=d3.functor(t),e):i},e.bins=function(t){return arguments.length?(o="number"==typeof t?function(e){return y(e,t)}:d3.functor(t),e):o},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},d3.layout.hierarchy=function(){function e(t,s,a){var l=o.call(n,t,s),c=nt?t:{data:t};if(c.depth=s,a.push(c),l){for(var u=-1,h=l.length,f=c.children=[],p=0,m=s+1;++u<h;)d=e(l[u],m,a),d.parent=c,f.push(d),p+=d.value;i&&f.sort(i),r&&(c.value=p)}else r&&(c.value=+r.call(n,t,s)||0);return c}function t(e,i){var o=e.children,s=0;if(o)for(var a=-1,l=o.length,c=i+1;++a<l;)s+=t(o[a],c);else r&&(s=+r.call(n,nt?e:e.data,i)||0);return r&&(e.value=s),s}function n(t){var n=[];return e(t,0,n),n}var i=C,o=_,r=x;return n.sort=function(e){return arguments.length?(i=e,n):i},n.children=function(e){return arguments.length?(o=e,n):o},n.value=function(e){return arguments.length?(r=e,n):r},n.revalue=function(e){return t(e,0),e},n};var nt=!1;d3.layout.pack=function(){function e(e,i){var o=t.call(this,e,i),r=o[0];r.x=0,r.y=0,D(r);var s=n[0],a=n[1],l=1/Math.max(2*r.r/s,2*r.r/a);return M(r,s/2,a/2,l),o}var t=d3.layout.hierarchy().sort(S),n=[1,1];return e.size=function(t){return arguments.length?(n=t,e):n},w(e,t)},d3.layout.cluster=function(){function e(e,o){var r,s=t.call(this,e,o),a=s[0],l=0;V(a,function(e){e.children?(e.x=O(e.children),e.y=j(e.children)):(e.x=r?l+=n(e,r):0,e.y=0,r=e)});var c=F(a),u=H(a),h=c.x-n(c,u)/2,d=u.x+n(u,c)/2;return V(a,function(e){e.x=(e.x-h)/(d-h)*i[0],e.y=(1-e.y/a.y)*i[1]}),s}var t=d3.layout.hierarchy().sort(null).value(null),n=B,i=[1,1];return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=t,e):i},w(e,t)},d3.layout.tree=function(){function e(e,o){function r(e,t){var i=e.children,o=e._tree;if(i&&(s=i.length)){for(var s,l,c,u=i[0],h=u,d=-1;++d<s;)c=i[d],r(c,l),h=a(c,l,h),l=c;G(e);var f=.5*(u._tree.prelim+c._tree.prelim);t?(o.prelim=t._tree.prelim+n(e,t),o.mod=o.prelim-f):o.prelim=f}else t&&(o.prelim=t._tree.prelim+n(e,t))}function s(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n){var i=-1,o=n.length;for(t+=e._tree.mod;++i<o;)s(n[i],t)}}function a(e,t,i){if(t){for(var o,r=e,s=e,a=t,l=e.parent.children[0],c=r._tree.mod,u=s._tree.mod,h=a._tree.mod,d=l._tree.mod;a=q(a),r=L(r),a&&r;)l=L(l),s=q(s),s._tree.ancestor=e,o=a._tree.prelim+h-r._tree.prelim-c+n(a,r),o>0&&(Q(Y(a,e,i),e,o),c+=o,u+=o),h+=a._tree.mod,c+=r._tree.mod,d+=l._tree.mod,u+=s._tree.mod;a&&!q(s)&&(s._tree.thread=a,s._tree.mod+=h-u),r&&!L(l)&&(l._tree.thread=r,l._tree.mod+=c-d,i=e)}return i}var l=t.call(this,e,o),c=l[0];V(c,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),r(c),s(c,-c._tree.prelim);var u=z(c,$),h=z(c,W),d=z(c,U),f=u.x-n(u,h)/2,p=h.x+n(h,u)/2,m=d.depth||1;return V(c,function(e){e.x=(e.x-f)/(p-f)*i[0],e.y=e.depth/m*i[1],delete e._tree}),l}var t=d3.layout.hierarchy().sort(null).value(null),n=B,i=[1,1];return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=t,e):i},w(e,t)},d3.layout.treemap=function(){function e(e,t){for(var n,i,o=-1,r=e.length;++o<r;)i=(n=e[o]).value*(0>t?0:t),n.area=isNaN(i)||0>=i?0:i}function t(n){if(n.children){var r,s,a,l=h(n),c=[],u=n.children.slice(),d=1/0,f=Math.min(l.dx,l.dy);for(e(u,l.dx*l.dy/n.value),c.area=0;(a=u.length)>0;)c.push(r=u[a-1]),c.area+=r.area,(s=i(c,f))<=d?(u.pop(),d=s):(c.area-=c.pop().area,o(c,f,l,!1),f=Math.min(l.dx,l.dy),c.length=c.area=0,d=1/0);c.length&&(o(c,f,l,!0),c.length=c.area=0),n.children.forEach(t)}}function n(t){if(t.children){var i,r=h(t),s=t.children.slice(),a=[];for(e(s,r.dx*r.dy/t.value),a.area=0;i=s.pop();)a.push(i),a.area+=i.area,null!=i.z&&(o(a,i.z?r.dx:r.dy,r,!s.length),a.length=a.area=0);t.children.forEach(n)}}function i(e,t){for(var n,i=e.area,o=0,r=1/0,s=-1,a=e.length;++s<a;)(n=e[s].area)&&(r>n&&(r=n),n>o&&(o=n));return i*=i,t*=t,i?Math.max(t*o*f/i,i/(t*r*f)):1/0}function o(e,t,n,i){var o,r=-1,s=e.length,a=n.x,c=n.y,u=t?l(e.area/t):0;if(t==n.dx){for((i||u>n.dy)&&(u=u?n.dy:0);++r<s;)o=e[r],o.x=a,o.y=c,o.dy=u,a+=o.dx=u?l(o.area/u):0;o.z=!0,o.dx+=n.x+n.dx-a,n.y+=u,n.dy-=u}else{for((i||u>n.dx)&&(u=u?n.dx:0);++r<s;)o=e[r],o.x=a,o.y=c,o.dx=u,c+=o.dy=u?l(o.area/u):0;o.z=!1,o.dy+=n.y+n.dy-c,n.x+=u,n.dx-=u}}function r(i){var o=s||a(i),r=o[0];return r.x=0,r.y=0,r.dx=c[0],r.dy=c[1],s&&a.revalue(r),e([r],r.dx*r.dy/r.value),(s?n:t)(r),d&&(s=o),o}var s,a=d3.layout.hierarchy(),l=Math.round,c=[1,1],u=null,h=X,d=!1,f=.5*(1+Math.sqrt(5));return r.size=function(e){return arguments.length?(c=e,r):c},r.padding=function(e){function t(t){var n=e.call(r,t,t.depth);return null==n?X(t):K(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return K(t,e)}if(!arguments.length)return u;var i;return h=null==(u=e)?X:"function"==(i=typeof e)?t:"number"===i?(e=[e,e,e,e],n):n,r},r.round=function(e){return arguments.length?(l=e?Math.round:Number,r):l!=Number},r.sticky=function(e){return arguments.length?(d=e,s=null,r):d},r.ratio=function(e){return arguments.length?(f=e,r):f},w(r,a)}}(),function(){function e(e){for(var t=0,n=0;;){if(e(t,n))return[t,n];0===t?(t=n+1,n=0):(t-=1,n+=1)}}function t(e,t,n,i){var o,r,s,a,l,c,u;return o=i[e],r=o[0],s=o[1],o=i[t],a=o[0],l=o[1],o=i[n],c=o[0],u=o[1],(u-s)*(a-r)-(l-s)*(c-r)>0}function n(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function i(e,t,n,i){var o=e[0],r=t[0],s=n[0],a=i[0],l=e[1],c=t[1],u=n[1],h=i[1],d=o-s,f=r-o,p=a-s,m=l-u,g=c-l,v=h-u,y=(p*m-v*d)/(v*f-p*g);return[o+y*f,l+y*g]}function o(e,t){var n={list:e.map(function(e,t){return{index:t,x:e[0],y:e[1]}}).sort(function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l"),i.rightEnd=i.createHalfEdge(null,"l"),i.leftEnd.r=i.rightEnd,i.rightEnd.l=i.leftEnd,i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(e,t){return{edge:e,side:t,vertex:null,l:null,r:null}},insert:function(e,t){t.l=e,t.r=e.r,e.r.l=t,e.r=t},leftBound:function(e){var t=i.leftEnd;do t=t.r;while(t!=i.rightEnd&&o.rightOf(t,e));return t=t.l},del:function(e){e.l.r=e.r,e.r.l=e.l,e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[u[e.side]]}},o={bisect:function(e,t){var n={region:{l:e,r:t},ep:{l:null,r:null}},i=t.x-e.x,o=t.y-e.y,r=i>0?i:-i,s=o>0?o:-o;return n.c=e.x*i+e.y*o+.5*(i*i+o*o),r>s?(n.a=1,n.b=o/i,n.c/=i):(n.b=1,n.a=i/o,n.c/=o),n},intersect:function(e,t){var n=e.edge,i=t.edge;if(!n||!i||n.region.r==i.region.r)return null;var o=n.a*i.b-n.b*i.a;if(Math.abs(o)<1e-10)return null;var r,s,a=(n.c*i.b-i.c*n.b)/o,l=(i.c*n.a-n.c*i.a)/o,c=n.region.r,u=i.region.r;c.y<u.y||c.y==u.y&&c.x<u.x?(r=e,s=n):(r=t,s=i);var h=a>=s.region.r.x;return h&&"l"===r.side||!h&&"r"===r.side?null:{x:a,y:l}},rightOf:function(e,t){var n=e.edge,i=n.region.r,o=t.x>i.x;if(o&&"l"===e.side)return 1;if(!o&&"r"===e.side)return 0;if(1===n.a){var r=t.y-i.y,s=t.x-i.x,a=0,l=0;if(!o&&n.b<0||o&&n.b>=0?l=a=r>=n.b*s:(l=t.x+t.y*n.b>n.c,n.b<0&&(l=!l),l||(a=1)),!a){var c=i.x-n.region.l.x;l=n.b*(s*s-r*r)<c*r*(1+2*s/c+n.b*n.b),n.b<0&&(l=!l)}}else{var u=n.c-n.a*t.x,h=t.y-u,d=t.x-i.x,f=u-i.y;l=h*h>d*d+f*f}return"l"===e.side?l:!l},endPoint:function(e,n,i){e.ep[n]=i,e.ep[u[n]]&&t(e)},distance:function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}},r={list:[],insert:function(e,t,n){e.vertex=t,e.ystar=t.y+n;for(var i=0,o=r.list,s=o.length;s>i;i++){var a=o[i];if(!(e.ystar>a.ystar||e.ystar==a.ystar&&t.x>a.vertex.x))break}o.splice(i,0,e)},del:function(e){for(var t=0,n=r.list,i=n.length;i>t&&n[t]!=e;++t);n.splice(t,1)},empty:function(){return 0===r.list.length},nextEvent:function(e){for(var t=0,n=r.list,i=n.length;i>t;++t)if(n[t]==e)return n[t+1];return null},min:function(){var e=r.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return r.list.shift()}};i.init(),n.bottomSite=n.list.shift();for(var s,a,l,c,h,d,f,p,m,g,v,y,b,w=n.list.shift();;)if(r.empty()||(s=r.min()),w&&(r.empty()||w.y<s.y||w.y==s.y&&w.x<s.x))a=i.leftBound(w),l=i.right(a),f=i.rightRegion(a),y=o.bisect(f,w),d=i.createHalfEdge(y,"l"),i.insert(a,d),g=o.intersect(a,d),g&&(r.del(a),r.insert(a,g,o.distance(g,w))),a=d,d=i.createHalfEdge(y,"r"),i.insert(a,d),g=o.intersect(d,l),g&&r.insert(d,g,o.distance(g,w)),w=n.list.shift();else{if(r.empty())break;a=r.extractMin(),c=i.left(a),l=i.right(a),h=i.right(l),f=i.leftRegion(a),p=i.rightRegion(l),v=a.vertex,o.endPoint(a.edge,a.side,v),o.endPoint(l.edge,l.side,v),i.del(a),r.del(l),i.del(l),b="l",f.y>p.y&&(m=f,f=p,p=m,b="r"),y=o.bisect(f,p),d=i.createHalfEdge(y,b),i.insert(c,d),o.endPoint(y,u[b],v),g=o.intersect(c,d),g&&(r.del(c),r.insert(c,g,o.distance(g,f))),g=o.intersect(d,h),g&&r.insert(d,g,o.distance(g,f))}for(a=i.right(i.leftEnd);a!=i.rightEnd;a=i.right(a))t(a.edge)}function r(){return{leaf:!0,nodes:[],point:null}}function s(e,t,n,i,o,r){if(!e(t,n,i,o,r)){var a=.5*(n+o),l=.5*(i+r),c=t.nodes;c[0]&&s(e,c[0],n,i,a,l),c[1]&&s(e,c[1],a,i,o,l),c[2]&&s(e,c[2],n,l,a,r),c[3]&&s(e,c[3],a,l,o,r)}}function a(e){return{x:e[0],y:e[1]}}d3.geom={},d3.geom.contour=function(t,n){var i=n||e(t),o=[],r=i[0],s=i[1],a=0,u=0,h=0/0,d=0/0,f=0;do f=0,t(r-1,s-1)&&(f+=1),t(r,s-1)&&(f+=2),t(r-1,s)&&(f+=4),t(r,s)&&(f+=8),6===f?(a=-1===d?-1:1,u=0):9===f?(a=0,u=1===h?-1:1):(a=l[f],u=c[f]),a!=h&&u!=d&&(o.push([r,s]),h=a,d=u),r+=a,s+=u;while(i[0]!=r||i[1]!=s);return o};var l=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,0/0],c=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,0/0];d3.geom.hull=function(e){if(e.length<3)return[];var n,i,o,r,s,a,l,c,u,h,d=e.length,f=d-1,p=[],m=[],g=0;for(n=1;d>n;++n)e[n][1]<e[g][1]?g=n:e[n][1]==e[g][1]&&(g=e[n][0]<e[g][0]?n:g);for(n=0;d>n;++n)n!==g&&(r=e[n][1]-e[g][1],o=e[n][0]-e[g][0],p.push({angle:Math.atan2(r,o),index:n}));for(p.sort(function(e,t){return e.angle-t.angle}),u=p[0].angle,c=p[0].index,l=0,n=1;f>n;++n)i=p[n].index,u==p[n].angle?(o=e[c][0]-e[g][0],r=e[c][1]-e[g][1],s=e[i][0]-e[g][0],a=e[i][1]-e[g][1],o*o+r*r>=s*s+a*a?p[n].index=-1:(p[l].index=-1,u=p[n].angle,l=n,c=i)):(u=p[n].angle,l=n,c=i);for(m.push(g),n=0,i=0;2>n;++i)-1!==p[i].index&&(m.push(p[i].index),n++);for(h=m.length;f>i;++i)if(-1!==p[i].index){for(;!t(m[h-2],m[h-1],p[i].index,e);)--h;m[h++]=p[i].index}var v=[];for(n=0;h>n;++n)v.push(e[m[n]]);return v},d3.geom.polygon=function(e){return e.area=function(){for(var t=0,n=e.length,i=e[n-1][0]*e[0][1],o=e[n-1][1]*e[0][0];++t<n;)i+=e[t-1][0]*e[t][1],o+=e[t-1][1]*e[t][0];return.5*(o-i)},e.centroid=function(t){var n,i,o,r=-1,s=e.length-1,a=0,l=0;for(arguments.length||(t=1/(6*e.area()));++r<s;)n=e[r],i=e[r+1],o=n[0]*i[1]-i[0]*n[1],a+=(n[0]+i[0])*o,l+=(n[1]+i[1])*o;return[a*t,l*t]},e.clip=function(t){for(var o,r,s,a,l,c,u=-1,h=e.length,d=e[h-1];++u<h;){for(o=t.slice(),t.length=0,a=e[u],l=o[(s=o.length)-1],r=-1;++r<s;)c=o[r],n(c,d,a)?(n(l,d,a)||t.push(i(l,c,d,a)),t.push(c)):n(l,d,a)&&t.push(i(l,c,d,a)),l=c;d=a}return t},e},d3.geom.voronoi=function(e){var t=e.map(function(){return[]});return o(e,function(e){var n,i,o,r,s,a;1===e.a&&e.b>=0?(n=e.ep.r,i=e.ep.l):(n=e.ep.l,i=e.ep.r),1===e.a?(s=n?n.y:-1e6,o=e.c-e.b*s,a=i?i.y:1e6,r=e.c-e.b*a):(o=n?n.x:-1e6,s=e.c-e.a*o,r=i?i.x:1e6,a=e.c-e.a*r);var l=[o,s],c=[r,a];t[e.region.l.index].push(l,c),t[e.region.r.index].push(l,c)}),t.map(function(t,n){var i=e[n][0],o=e[n][1];return t.forEach(function(e){e.angle=Math.atan2(e[0]-i,e[1]-o)}),t.sort(function(e,t){return e.angle-t.angle}).filter(function(e,n){return!n||e.angle-t[n-1].angle>1e-10})})};var u={l:"r",r:"l"};d3.geom.delaunay=function(e){var t=e.map(function(){return[]}),n=[];return o(e,function(n){t[n.region.l.index].push(e[n.region.r.index])}),t.forEach(function(t,i){var o=e[i],r=o[0],s=o[1];t.forEach(function(e){e.angle=Math.atan2(e[0]-r,e[1]-s)}),t.sort(function(e,t){return e.angle-t.angle});for(var a=0,l=t.length-1;l>a;a++)n.push([o,t[a],t[a+1]])}),n},d3.geom.quadtree=function(e,t,n,i,o){function l(e,t,n,i,o,r){if(!isNaN(t.x)&&!isNaN(t.y))if(e.leaf){var s=e.point;s?Math.abs(s.x-t.x)+Math.abs(s.y-t.y)<.01?c(e,t,n,i,o,r):(e.point=null,c(e,s,n,i,o,r),c(e,t,n,i,o,r)):e.point=t}else c(e,t,n,i,o,r)}function c(e,t,n,i,o,s){var a=.5*(n+o),c=.5*(i+s),u=t.x>=a,h=t.y>=c,d=(h<<1)+u;e.leaf=!1,e=e.nodes[d]||(e.nodes[d]=r()),u?n=a:o=a,h?i=c:s=c,l(e,t,n,i,o,s)}var u,h=-1,d=e.length;if(d&&isNaN(e[0].x)&&(e=e.map(a)),arguments.length<5)if(3===arguments.length)o=i=n,n=t;else{for(t=n=1/0,i=o=-1/0;++h<d;)u=e[h],u.x<t&&(t=u.x),u.y<n&&(n=u.y),u.x>i&&(i=u.x),u.y>o&&(o=u.y);var f=i-t,p=o-n;f>p?o=n+f:i=t+p}var m=r();return m.add=function(e){l(m,e,t,n,i,o)},m.visit=function(e){s(e,m,t,n,i,o)},e.forEach(m.add),m}}(),function(e){e.fn.tiesGraph=function(e){var t=860,n=500;d3.scale.category20();var i=d3.select(this.selector).append("svg:svg").attr("width",t).attr("height",n),o=d3.layout.force().charge(-120).linkDistance(40).nodes(e.nodes).links(e.links).size([t,n]).start(),r=i.selectAll("line.link").data(e.links).enter().append("svg:line").attr("class","link").style("stroke-width",function(e){return Math.sqrt(e.value)}).attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),s=i.selectAll("g.node").data(e.nodes).enter().append("svg:g").attr("class","node").call(o.drag);s.append("svg:image").attr("class","circle").attr("xlink:href",function(e){return e.logo}).attr("x","-10px").attr("y","-10px").attr("width","20px").attr("height","20px"),s.append("svg:title").text(function(e){return e.name}),i.style("opacity",1e-6).transition().duration(1e3).style("opacity",1),o.on("tick",function(){r.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),s.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})})}}(jQuery),SocialStream.Wall=function(e,t,n){var i=new e.Callback,o=function(){t('.wall_input [name="post[text]"]').autosize()},r=function(){t("#post_text").val("")},s=function(e){var i=t(".wall_input form");e===n?i.attr("action",i.data("actions").pop()):(i.data("actions")===n&&i.data("actions",[]),i.data("actions").push(i.attr("action")),i.attr("action",e))},a=function(n){e.Object.changeOwner(n,t(".wall_input form")),e.Object.changeRelationSelect(n,t(".wall_input form"))};return i.register("show",o,e.Object.new_),i.register("new_",r),i.extend({changeAction:s,changeParams:a})}(SocialStream,jQuery),SocialStream.Timeline=function(e,t){var n=new e.Callback,i=function(){var e=t('.timeline [data-modal-carousel-id="false"]');e.each(o),e.click(r)},o=function(e,n){var i,o,r=t(n).closest(".timeline"),s=t("#modal-carousel",r),a=t(".carousel-inner",s),l=t(".carousel-indicators",s);i=t("<div/>",{"class":"item"}).append(t(n).attr("data-modal-carousel-content")).appendTo(a),o=a.children("div").length-1,0===o&&i.addClass("active"),t("<li/>",{"data-target":"#modal-carousel","data-slide-to":o}).appendTo(l),t(n).attr("data-modal-carousel-id",o)},r=function(e){var n=t(e.target).closest(".timeline");t("#modal-carousel",n).carousel(parseInt(t(e.target).attr("data-modal-carousel-id"),10)).carousel("pause"),t(".timeline-modal-carousel",n).modal("show")},s=function(){e.Pagination.show(n.handlers.update)};return n.register("show",e.Audience.index,e.Comment.index,i,s),n.register("create",e.Audience.index,e.Comment.index,e.Wall.new_),n.register("update",e.Audience.index,e.Comment.index,i),n.extend({})}(SocialStream,jQuery),/*
 * jPlayer Plugin for jQuery JavaScript Library
 * http://www.happyworm.com/jquery/jplayer
 *
 * Copyright (c) 2009 - 2010 Happyworm Ltd
 * Dual licensed under the MIT and GPL licenses.
 *  - http://www.opensource.org/licenses/mit-license.php
 *  - http://www.gnu.org/copyleft/gpl.html
 *
 * Author: Mark J Panaghiston
 * Version: 2.0.0
 * Date: 20th December 2010
 */
function(e,t){e.fn.jPlayer=function(n){var i="string"==typeof n,o=Array.prototype.slice.call(arguments,1),r=this;return n=!i&&o.length?e.extend.apply(null,[!0,n].concat(o)):n,i&&"_"===n.charAt(0)?r:(i?this.each(function(){var i=e.data(this,"jPlayer"),s=i&&e.isFunction(i[n])?i[n].apply(i,o):i;return s!==i&&s!==t?(r=s,!1):void 0}):this.each(function(){var t=e.data(this,"jPlayer");t?(t.option(n||{})._init(),t.option(n||{})):e.data(this,"jPlayer",new e.jPlayer(n,this))}),r)},e.jPlayer=function(t,n){if(arguments.length){this.element=e(n),this.options=e.extend(!0,{},this.options,t);var i=this;this.element.bind("remove.jPlayer",function(){i.destroy()}),this._init()}},e.jPlayer.event={ready:"jPlayer_ready",resize:"jPlayer_resize",error:"jPlayer_error",warning:"jPlayer_warning",loadstart:"jPlayer_loadstart",progress:"jPlayer_progress",suspend:"jPlayer_suspend",abort:"jPlayer_abort",emptied:"jPlayer_emptied",stalled:"jPlayer_stalled",play:"jPlayer_play",pause:"jPlayer_pause",loadedmetadata:"jPlayer_loadedmetadata",loadeddata:"jPlayer_loadeddata",waiting:"jPlayer_waiting",playing:"jPlayer_playing",canplay:"jPlayer_canplay",canplaythrough:"jPlayer_canplaythrough",seeking:"jPlayer_seeking",seeked:"jPlayer_seeked",timeupdate:"jPlayer_timeupdate",ended:"jPlayer_ended",ratechange:"jPlayer_ratechange",durationchange:"jPlayer_durationchange",volumechange:"jPlayer_volumechange"},e.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","loadeddata","canplaythrough","ratechange"],e.jPlayer.pause=function(){e.each(e.jPlayer.prototype.instances,function(e,t){t.data("jPlayer").status.srcSet&&t.jPlayer("pause")})},e.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""},e.jPlayer.convertTime=function(t){t=new Date(1e3*t);var n=t.getUTCHours(),i=t.getUTCMinutes();return t=t.getUTCSeconds(),n=e.jPlayer.timeFormat.padHour&&10>n?"0"+n:n,i=e.jPlayer.timeFormat.padMin&&10>i?"0"+i:i,t=e.jPlayer.timeFormat.padSec&&10>t?"0"+t:t,(e.jPlayer.timeFormat.showHour?n+e.jPlayer.timeFormat.sepHour:"")+(e.jPlayer.timeFormat.showMin?i+e.jPlayer.timeFormat.sepMin:"")+(e.jPlayer.timeFormat.showSec?t+e.jPlayer.timeFormat.sepSec:"")},e.jPlayer.uaMatch=function(e){e=e.toLowerCase();var t=/(opera)(?:.*version)?[ \/]([\w.]+)/,n=/(msie) ([\w.]+)/,i=/(mozilla)(?:.*? rv:([\w.]+))?/;return e=/(webkit)[ \/]([\w.]+)/.exec(e)||t.exec(e)||n.exec(e)||e.indexOf("compatible")<0&&i.exec(e)||[],{browser:e[1]||"",version:e[2]||"0"}},e.jPlayer.browser={};var n=e.jPlayer.uaMatch(navigator.userAgent);n.browser&&(e.jPlayer.browser[n.browser]=!0,e.jPlayer.browser.version=n.version),e.jPlayer.prototype={count:0,version:{script:"2.0.0",needFlash:"2.0.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:.8,muted:!1,backgroundColor:"#000000",cssSelectorAncestor:"#jp_interface_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",currentTime:".jp-current-time",duration:".jp-duration"},idPrefix:"jp",errorAlerts:!1,warningAlerts:!1},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0},_status:{volume:t,muted:!1,width:0,height:0},internal:{ready:!1,instance:t,htmlDlyCmdId:t},solution:{html:!0,flash:!0},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"}},_init:function(){var n=this;if(this.element.empty(),this.status=e.extend({},this.status,this._status),this.internal=e.extend({},this.internal),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.flash={},this.css={},this.css.cs={},this.css.jq={},this.status.volume=this._limitValue(this.options.volume,0,1),this.status.muted=this.options.muted,this.status.width=this.element.css("width"),this.status.height=this.element.css("height"),this.element.css({"background-color":this.options.backgroundColor}),e.each(this.options.supplied.toLowerCase().split(","),function(t,i){var o=i.replace(/^\s+|\s+$/g,"");if(n.format[o]){var r=!1;e.each(n.formats,function(e,t){return o===t?(r=!0,!1):void 0}),r||n.formats.push(o)}}),e.each(this.options.solution.toLowerCase().split(","),function(t,i){var o=i.replace(/^\s+|\s+$/g,"");if(n.solution[o]){var r=!1;e.each(n.solutions,function(e,t){return o===t?(r=!0,!1):void 0}),r||n.solutions.push(o)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,""===this.element.attr("id")&&this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=e.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=e.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:t}),this.internal.video=e.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:t}),this.internal.flash=e.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:t,swf:this.options.swfPath+(""!==this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"Jplayer.swf"}),this.internal.poster=e.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:t}),e.each(e.jPlayer.event,function(e,i){n.options[e]!==t&&(n.element.bind(i+".jPlayer",n.options[e]),n.options[e]=t)}),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!n.status.video||n.status.waitForPlay)&&n.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=e("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.require.audio=!1,this.require.video=!1,e.each(this.formats,function(e,t){n.require[n.format[t].media]=!0}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType),this.flash.available=this._checkForFlash(10),this.html.canPlay={},this.flash.canPlay={},e.each(this.formats,function(e,t){n.html.canPlay[t]=n.html[n.format[t].media].available&&""!==n.htmlElement[n.format[t].media].canPlayType(n.format[t].codec),n.flash.canPlay[t]=n.format[t].flashCanPlay&&n.flash.available}),this.html.desired=!1,this.flash.desired=!1,e.each(this.solutions,function(t,i){if(0===t)n[i].desired=!0;else{var o=!1,r=!1;e.each(n.formats,function(e,t){n[n.solutions[0]].canPlay[t]&&("video"===n.format[t].media?r=!0:o=!0)}),n[i].desired=n.require.audio&&!o||n.require.video&&!r}}),this.html.support={},this.flash.support={},e.each(this.formats,function(e,t){n.html.support[t]=n.html.canPlay[t]&&n.html.desired,n.flash.support[t]=n.flash.canPlay[t]&&n.flash.desired}),this.html.used=!1,this.flash.used=!1,e.each(this.solutions,function(t,i){e.each(n.formats,function(e,t){return n[i].support[t]?(n[i].used=!0,!1):void 0})}),this.html.used||this.flash.used||this._error({type:e.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SOLUTION,hint:e.jPlayer.errorHint.NO_SOLUTION}),this.html.active=!1,this.html.audio.gate=!1,this.html.video.gate=!1,this.flash.active=!1,this.flash.gate=!1,this.flash.used){var i="id="+escape(this.internal.self.id)+"&vol="+this.status.volume+"&muted="+this.status.muted;if(e.browser.msie&&Number(e.browser.version)<=8){var o='<object id="'+this.internal.flash.id+'"';o+=' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"',o+=' codebase="'+document.URL.substring(0,document.URL.indexOf(":"))+'://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"',o+=' type="application/x-shockwave-flash"',o+=' width="0" height="0">',o+="</object>";var r=[];for(r[0]='<param name="movie" value="'+this.internal.flash.swf+'" />',r[1]='<param name="quality" value="high" />',r[2]='<param name="FlashVars" value="'+i+'" />',r[3]='<param name="allowScriptAccess" value="always" />',r[4]='<param name="bgcolor" value="'+this.options.backgroundColor+'" />',i=document.createElement(o),o=0;o<r.length;o++)i.appendChild(document.createElement(r[o]));this.element.append(i)}else r='<embed name="'+this.internal.flash.id+'" id="'+this.internal.flash.id+'" src="'+this.internal.flash.swf+'"',r+=' width="0" height="0" bgcolor="'+this.options.backgroundColor+'"',r+=' quality="high" FlashVars="'+i+'"',r+=' allowScriptAccess="always"',r+=' type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />',this.element.append(r);this.internal.flash.jq=e("#"+this.internal.flash.id),this.internal.flash.jq.css({width:"0px",height:"0px"})}this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=e("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=e("#"+this.internal.video.id),this.internal.video.jq.css({width:"0px",height:"0px"}))),this.html.used&&!this.flash.used&&window.setTimeout(function(){n.internal.ready=!0,n.version.flash="n/a",n._trigger(e.jPlayer.event.ready)},100),e.each(this.options.cssSelector,function(e,t){n._cssSelector(e,t)}),this._updateInterface(),this._updateButtons(!1),this._updateVolume(this.status.volume),this._updateMute(this.status.muted),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),e.jPlayer.prototype.count++},destroy:function(){this._resetStatus(),this._updateInterface(),this._seeked(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),this.status.srcSet&&this.pause(),e.each(this.css.jq,function(e,t){t.unbind(".jPlayer")}),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),this.instances[this.internal.instance]=t},enable:function(){},disable:function(){},_addHtmlEventListeners:function(t,n){var i=this;t.preload=this.options.preload,t.muted=this.options.muted,t.addEventListener("progress",function(){n.gate&&!i.status.waitForLoad&&(i._getHtmlStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.progress))},!1),t.addEventListener("timeupdate",function(){n.gate&&!i.status.waitForLoad&&(i._getHtmlStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.timeupdate))},!1),t.addEventListener("durationchange",function(){n.gate&&!i.status.waitForLoad&&(i.status.duration=this.duration,i._getHtmlStatus(t),i._updateInterface(),i._trigger(e.jPlayer.event.durationchange))},!1),t.addEventListener("play",function(){n.gate&&!i.status.waitForLoad&&(i._updateButtons(!0),i._trigger(e.jPlayer.event.play))},!1),t.addEventListener("playing",function(){n.gate&&!i.status.waitForLoad&&(i._updateButtons(!0),i._seeked(),i._trigger(e.jPlayer.event.playing))},!1),t.addEventListener("pause",function(){n.gate&&!i.status.waitForLoad&&(i._updateButtons(!1),i._trigger(e.jPlayer.event.pause))},!1),t.addEventListener("waiting",function(){n.gate&&!i.status.waitForLoad&&(i._seeking(),i._trigger(e.jPlayer.event.waiting))},!1),t.addEventListener("canplay",function(){n.gate&&!i.status.waitForLoad&&(t.volume=i._volumeFix(i.status.volume),i._trigger(e.jPlayer.event.canplay))},!1),t.addEventListener("seeking",function(){n.gate&&!i.status.waitForLoad&&(i._seeking(),i._trigger(e.jPlayer.event.seeking))},!1),t.addEventListener("seeked",function(){n.gate&&!i.status.waitForLoad&&(i._seeked(),i._trigger(e.jPlayer.event.seeked))},!1),t.addEventListener("suspend",function(){n.gate&&!i.status.waitForLoad&&(i._seeked(),i._trigger(e.jPlayer.event.suspend))},!1),t.addEventListener("ended",function(){n.gate&&!i.status.waitForLoad&&(e.jPlayer.browser.webkit||(i.htmlElement.media.currentTime=0),i.htmlElement.media.pause(),i._updateButtons(!1),i._getHtmlStatus(t,!0),i._updateInterface(),i._trigger(e.jPlayer.event.ended))},!1),t.addEventListener("error",function(){n.gate&&!i.status.waitForLoad&&(i._updateButtons(!1),i._seeked(),i.status.srcSet&&(i.status.waitForLoad=!0,i.status.waitForPlay=!0,i.status.video&&i.internal.video.jq.css({width:"0px",height:"0px"}),i._validString(i.status.media.poster)&&i.internal.poster.jq.show(),i.css.jq.videoPlay.length&&i.css.jq.videoPlay.show(),i._error({type:e.jPlayer.error.URL,context:i.status.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL})))},!1),e.each(e.jPlayer.htmlEvent,function(o,r){t.addEventListener(this,function(){n.gate&&!i.status.waitForLoad&&i._trigger(e.jPlayer.event[r])},!1)})},_getHtmlStatus:function(e,t){var n=0,i=0,o=0,r=0;n=e.currentTime,i=this.status.duration>0?100*n/this.status.duration:0,"object"==typeof e.seekable&&e.seekable.length>0?(o=this.status.duration>0?100*e.seekable.end(e.seekable.length-1)/this.status.duration:100,r=100*e.currentTime/e.seekable.end(e.seekable.length-1)):(o=100,r=i),t&&(i=r=n=0),this.status.seekPercent=o,this.status.currentPercentRelative=r,this.status.currentPercentAbsolute=i,this.status.currentTime=n},_resetStatus:function(){this.status=e.extend({},this.status,e.jPlayer.prototype.status)},_trigger:function(t,n,i){t=e.Event(t),t.jPlayer={},t.jPlayer.version=e.extend({},this.version),t.jPlayer.status=e.extend(!0,{},this.status),t.jPlayer.html=e.extend(!0,{},this.html),t.jPlayer.flash=e.extend(!0,{},this.flash),n&&(t.jPlayer.error=e.extend({},n)),i&&(t.jPlayer.warning=e.extend({},i)),this.element.trigger(t)},jPlayerFlashEvent:function(t,n){if(t!==e.jPlayer.event.ready||this.internal.ready||(this.internal.ready=!0,this.version.flash=n.version,this.version.needFlash!==this.version.flash&&this._error({type:e.jPlayer.error.VERSION,context:this.version.flash,message:e.jPlayer.errorMsg.VERSION+this.version.flash,hint:e.jPlayer.errorHint.VERSION}),this._trigger(t)),this.flash.gate)switch(t){case e.jPlayer.event.progress:this._getFlashStatus(n),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.timeupdate:this._getFlashStatus(n),this._updateInterface(),this._trigger(t);break;case e.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(t);break;case e.jPlayer.event.pause:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.ended:this._updateButtons(!1),this._trigger(t);break;case e.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._error({type:e.jPlayer.error.URL,context:n.src,message:e.jPlayer.errorMsg.URL,hint:e.jPlayer.errorHint.URL});break;case e.jPlayer.event.seeking:this._seeking(),this._trigger(t);break;case e.jPlayer.event.seeked:this._seeked(),this._trigger(t);break;default:this._trigger(t)}return!1},_getFlashStatus:function(e){this.status.seekPercent=e.seekPercent,this.status.currentPercentRelative=e.currentPercentRelative,this.status.currentPercentAbsolute=e.currentPercentAbsolute,this.status.currentTime=e.currentTime,this.status.duration=e.duration},_updateButtons:function(e){this.status.paused=!e,this.css.jq.play.length&&this.css.jq.pause.length&&(e?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&this.css.jq.playBar.width(this.status.currentPercentRelative+"%"),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(e.jPlayer.convertTime(this.status.currentTime)),this.css.jq.duration.length&&this.css.jq.duration.text(e.jPlayer.convertTime(this.status.duration))},_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},setMedia:function(t){var n=this;this._seeked(),clearTimeout(this.internal.htmlDlyCmdId);var i=this.html.audio.gate,o=this.html.video.gate,r=!1;e.each(this.formats,function(s,a){var l="video"===n.format[a].media;return e.each(n.solutions,function(e,s){if(n[s].support[a]&&n._validString(t[a])){var c="html"===s;return l?c?(n.html.audio.gate=!1,n.html.video.gate=!0,n.flash.gate=!1):(n.html.audio.gate=!1,n.html.video.gate=!1,n.flash.gate=!0):c?(n.html.audio.gate=!0,n.html.video.gate=!1,n.flash.gate=!1):(n.html.audio.gate=!1,n.html.video.gate=!1,n.flash.gate=!0),n.flash.active||n.html.active&&n.flash.gate||i===n.html.audio.gate&&o===n.html.video.gate?n.clearMedia():i!==n.html.audio.gate&&o!==n.html.video.gate&&(n._html_pause(),n.status.video&&n.internal.video.jq.css({width:"0px",height:"0px"}),n._resetStatus()),l?(c?(n._html_setVideo(t),n.html.active=!0,n.flash.active=!1):(n._flash_setVideo(t),n.html.active=!1,n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.show(),n.status.video=!0):(c?(n._html_setAudio(t),n.html.active=!0,n.flash.active=!1):(n._flash_setAudio(t),n.html.active=!1,n.flash.active=!0),n.css.jq.videoPlay.length&&n.css.jq.videoPlay.hide(),n.status.video=!1),r=!0,!1}}),r?!1:void 0}),r?(this._validString(t.poster)?this.htmlElement.poster.src!==t.poster?this.htmlElement.poster.src=t.poster:this.internal.poster.jq.show():this.internal.poster.jq.hide(),this.status.srcSet=!0,this.status.media=e.extend({},t),this._updateButtons(!1),this._updateInterface()):(this.status.srcSet&&!this.status.waitForPlay&&this.pause(),this.html.audio.gate=!1,this.html.video.gate=!1,this.flash.gate=!1,this.html.active=!1,this.flash.active=!1,this._resetStatus(),this._updateInterface(),this._updateButtons(!1),this.internal.poster.jq.hide(),this.html.used&&this.require.video&&this.internal.video.jq.css({width:"0px",height:"0px"}),this.flash.used&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._error({type:e.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:e.jPlayer.errorMsg.NO_SUPPORT,hint:e.jPlayer.errorHint.NO_SUPPORT}))},clearMedia:function(){this._resetStatus(),this._updateButtons(!1),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},play:function(e){e="number"==typeof e?e:0/0,this.status.srcSet?this.html.active?this._html_play(e):this.flash.active&&this._flash_play(e):this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(e){e="number"==typeof e?e:0/0,this.status.srcSet?this.html.active?this._html_pause(e):this.flash.active&&this._flash_pause(e):this._urlNotSetError("pause")},pauseOthers:function(){var t=this;e.each(this.instances,function(e,n){t.element!==n&&n.data("jPlayer").status.srcSet&&n.jPlayer("pause")})},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(e){e=this._limitValue(e,0,100),this.status.srcSet?this.html.active?this._html_playHead(e):this.flash.active&&this._flash_playHead(e):this._urlNotSetError("playHead")},mute:function(){this.status.muted=!0,this.html.used&&this._html_mute(!0),this.flash.used&&this._flash_mute(!0),this._updateMute(!0),this._updateVolume(0),this._trigger(e.jPlayer.event.volumechange)},unmute:function(){this.status.muted=!1,this.html.used&&this._html_mute(!1),this.flash.used&&this._flash_mute(!1),this._updateMute(!1),this._updateVolume(this.status.volume),this._trigger(e.jPlayer.event.volumechange)},_updateMute:function(e){this.css.jq.mute.length&&this.css.jq.unmute.length&&(e?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(t){t=this._limitValue(t,0,1),this.status.volume=t,this.html.used&&this._html_volume(t),this.flash.used&&this._flash_volume(t),this.status.muted||this._updateVolume(t),this._trigger(e.jPlayer.event.volumechange)},volumeBar:function(e){if(!this.status.muted&&this.css.jq.volumeBar){var t=this.css.jq.volumeBar.offset();e=e.pageX-t.left,t=this.css.jq.volumeBar.width(),this.volume(e/t)}},volumeBarValue:function(e){this.volumeBar(e)},_updateVolume:function(e){this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.width(100*e+"%")},_volumeFix:function(e){var t=.001*Math.random();return e+(.5>e?t:-t)},_cssSelectorAncestor:function(t,n){this.options.cssSelectorAncestor=t,n&&e.each(this.options.cssSelector,function(e,t){self._cssSelector(e,t)})},_cssSelector:function(t,n){var i=this;"string"==typeof n?e.jPlayer.prototype.options.cssSelector[t]?(this.css.jq[t]&&this.css.jq[t].length&&this.css.jq[t].unbind(".jPlayer"),this.options.cssSelector[t]=n,this.css.cs[t]=this.options.cssSelectorAncestor+" "+n,this.css.jq[t]=n?e(this.css.cs[t]):[],this.css.jq[t].length&&this.css.jq[t].bind("click.jPlayer",function(n){return i[t](n),e(this).blur(),!1}),n&&1!==this.css.jq[t].length&&this._warning({type:e.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[t],message:e.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[t].length+" found for "+t+" method.",hint:e.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_METHOD,context:t,message:e.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:e.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:e.jPlayer.warning.CSS_SELECTOR_STRING,context:n,message:e.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:e.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(e){if(this.css.jq.seekBar){var t=this.css.jq.seekBar.offset();e=e.pageX-t.left,t=this.css.jq.seekBar.width(),this.playHead(100*e/t)}},playBar:function(e){this.seekBar(e)},currentTime:function(){},duration:function(){},option:function(n,i){var o=n;if(0===arguments.length)return e.extend(!0,{},this.options);if("string"==typeof n){var r=n.split(".");if(i===t){for(var s=e.extend(!0,{},this.options),a=0;a<r.length;a++){if(s[r[a]]===t)return this._warning({type:e.jPlayer.warning.OPTION_KEY,context:n,message:e.jPlayer.warningMsg.OPTION_KEY,hint:e.jPlayer.warningHint.OPTION_KEY}),t;s=s[r[a]]}return s}for(s=o={},a=0;a<r.length;a++)a<r.length-1?(s[r[a]]={},s=s[r[a]]):s[r[a]]=i}return this._setOptions(o),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(t,n){var i=this;switch(t){case"cssSelectorAncestor":this.options[t]=n,e.each(i.options.cssSelector,function(e,t){i._cssSelector(e,t)});break;case"cssSelector":e.each(n,function(e,t){i._cssSelector(e,t)})}return this},resize:function(t){this.html.active&&this._resizeHtml(t),this.flash.active&&this._resizeFlash(t),this._trigger(e.jPlayer.event.resize)},_resizePoster:function(){},_resizeHtml:function(){},_resizeFlash:function(e){this.internal.flash.jq.css({width:e.width,height:e.height})},_html_initMedia:function(){this.status.srcSet&&!this.status.waitForPlay&&this.htmlElement.media.pause(),"none"!==this.options.preload&&this._html_load(),this._trigger(e.jPlayer.event.timeupdate)},_html_setAudio:function(t){var n=this;e.each(this.formats,function(e,i){return n.html.support[i]&&t[i]?(n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1):void 0}),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia()},_html_setVideo:function(t){var n=this;e.each(this.formats,function(e,i){return n.html.support[i]&&t[i]?(n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1):void 0}),this.htmlElement.media=this.htmlElement.video,this._html_initMedia()},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id===this.internal.video.id&&this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause(),this.htmlElement.media.src="",e.browser.msie&&Number(e.browser.version)>=9||this.htmlElement.media.load())},_html_load:function(){if(this.status.waitForLoad){this.status.waitForLoad=!1,this.htmlElement.media.src=this.status.src;try{this.htmlElement.media.load()}catch(e){}}clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(e){var t=this;if(this._html_load(),this.htmlElement.media.play(),!isNaN(e))try{this.htmlElement.media.currentTime=e}catch(n){return this.internal.htmlDlyCmdId=setTimeout(function(){t.play(e)},100),void 0}this._html_checkWaitForPlay()},_html_pause:function(e){var t=this;if(e>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),this.htmlElement.media.pause(),!isNaN(e))try{this.htmlElement.media.currentTime=e}catch(n){return this.internal.htmlDlyCmdId=setTimeout(function(){t.pause(e)},100),void 0}e>0&&this._html_checkWaitForPlay()},_html_playHead:function(e){var t=this;this._html_load();try{if("object"==typeof this.htmlElement.media.seekable&&this.htmlElement.media.seekable.length>0)this.htmlElement.media.currentTime=e*this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length-1)/100;else{if(!(this.htmlElement.media.duration>0)||isNaN(this.htmlElement.media.duration))throw"e";this.htmlElement.media.currentTime=e*this.htmlElement.media.duration/100}}catch(n){return this.internal.htmlDlyCmdId=setTimeout(function(){t.playHead(e)},100),void 0}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_volume:function(e){this.html.audio.available&&(this.htmlElement.audio.volume=e),this.html.video.available&&(this.htmlElement.video.volume=e)},_html_mute:function(e){this.html.audio.available&&(this.htmlElement.audio.muted=e),this.html.video.available&&(this.htmlElement.video.muted=e)},_flash_setAudio:function(t){var n=this;try{e.each(this.formats,function(e,i){if(n.flash.support[i]&&t[i]){switch(i){case"m4a":n._getMovie().fl_setAudio_m4a(t[i]);break;case"mp3":n._getMovie().fl_setAudio_mp3(t[i])}return n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(i){this._flashError(i)}},_flash_setVideo:function(t){var n=this;try{e.each(this.formats,function(e,i){if(n.flash.support[i]&&t[i]){switch(i){case"m4v":n._getMovie().fl_setVideo_m4v(t[i])}return n.status.src=t[i],n.status.format[i]=!0,n.status.formatType=i,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(i){this._flashError(i)}},_flash_clearMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});try{this._getMovie().fl_clearMedia()}catch(e){this._flashError(e)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(e){this._flashError(e)}this.status.waitForLoad=!1},_flash_play:function(e){try{this._getMovie().fl_play(e)}catch(t){this._flashError(t)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(e){try{this._getMovie().fl_pause(e)}catch(t){this._flashError(t)}e>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(e){try{this._getMovie().fl_play_head(e)}catch(t){this._flashError(t)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(e){try{this._getMovie().fl_volume(e)}catch(t){this._flashError(t)}},_flash_mute:function(e){try{this._getMovie().fl_mute(e)}catch(t){this._flashError(t)}},_getMovie:function(){return document[this.internal.flash.id]},_checkForFlash:function(t){var n,i=!1;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+t),i=!0}catch(o){}else navigator.plugins&&navigator.mimeTypes.length>0&&(n=navigator.plugins["Shockwave Flash"])&&navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=t&&(i=!0);return e.browser.msie&&Number(e.browser.version)>=9?!1:i},_validString:function(e){return e&&"string"==typeof e},_limitValue:function(e,t,n){return t>e?t:e>n?n:e},_urlNotSetError:function(t){this._error({type:e.jPlayer.error.URL_NOT_SET,context:t,message:e.jPlayer.errorMsg.URL_NOT_SET,hint:e.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(t){this._error({type:e.jPlayer.error.FLASH,context:this.internal.flash.swf,message:e.jPlayer.errorMsg.FLASH+t.message,hint:e.jPlayer.errorHint.FLASH})},_error:function(t){this._trigger(e.jPlayer.event.error,t),this.options.errorAlerts&&this._alert("Error!"+(t.message?"\n\n"+t.message:"")+(t.hint?"\n\n"+t.hint:"")+"\n\nContext: "+t.context)},_warning:function(n){this._trigger(e.jPlayer.event.warning,t,n),this.options.errorAlerts&&this._alert("Warning!"+(n.message?"\n\n"+n.message:"")+(n.hint?"\n\n"+n.hint:"")+"\n\nContext: "+n.context)},_alert:function(e){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+e)}},e.jPlayer.error={FLASH:"e_flash",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},e.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+e.jPlayer.prototype.version.script+" needs Jplayer.swf version "+e.jPlayer.prototype.version.needFlash+" but found "},e.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},e.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},e.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of methodCssSelectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},e.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}}(jQuery),SocialStream.Documents=SocialStream.Documents||{},SocialStream.Audio=function(e,t){var n=new e.Callback,i=function(){t(".jp-audio .jp-jplayer").each(function(){var e=t(this).closest(".audio-container");t(this).jPlayer({ready:function(){t(this).jPlayer("setMedia",{webma:e.attr("data-url-webma")})},preload:"none",supplied:"webma",swfPath:e.attr("data-url-swfplayer"),cssSelectorAncestor:"#"+e.attr("id")})})};return n.register("show",i),n.extend({})}(SocialStream,jQuery),SocialStream.Document=function(e,t){var n=new e.Callback,i=function(){e.Tag.select2('input[name$="[tag_list]"]')
},o=function(){e.Pagination.show()},r=function(){t(".new_document-modal-link").attr("href","#new_document-modal")};return n.register("index",o),n.register("new_",r),n.register("edit",i),n.extend({})}(SocialStream,jQuery),SocialStream.Video=function(e,t){var n=new e.Callback,i=function(){t(".jp-video .jp-jplayer").each(function(){var e=t(this).closest(".video-container");t(this).jPlayer({ready:function(){t(this).jPlayer("setMedia",{webmv:e.attr("data-url-webm"),flv:e.attr("data-url-flv"),mp4:e.attr("data-url-mp4"),poster:e.attr("data-url-poster")})},solution:"flash, html",preload:"none",supplied:"webmv, flv, mp4",swfPath:e.attr("data-url-swfplayer"),cssSelectorAncestor:"#"+e.attr("id")})})};return n.register("show",i),n.extend({})}(SocialStream,jQuery),SocialStream.Documents.Timeline=function(e,t){var n=function(){t(".video-container").hide(),t(".video .play_over").click(function(){var e=t(this).closest(".video");e.find(".thumb").hide(),e.find(".text").hide(),e.find(".jp-video-play").hide(),e.find(".video-container").show(),e.find(".jp-jplayer").jPlayer("play",0)})};SocialStream.Timeline.callbackRegister("show",SocialStream.Audio.show,SocialStream.Video.show,n),SocialStream.Timeline.callbackRegister("update",SocialStream.Audio.show,SocialStream.Video.show,n)}(SocialStream,jQuery),SocialStream.Documents.Wall=function(e,t){var n=function(){t("<label/>",{"for":"new_document_title",style:"display: none;",text:I18n.t("activerecord.attributes.document.title")}).insertBefore(t("#post_text")),t("<textarea/>",{name:"document[description]",id:"new_document_description","class":"document_description",style:"display: none;",placeholder:I18n.t("document.description.input")}).insertAfter(t("#post_text")),t(".wall_input form").attr("enctype","multipart/form-data"),t("<input>",{name:"document[file]",type:"file",style:"visibility: hidden; position: absolute"}).insertAfter(".wall_input textarea.document_description"),t(".wall_input button.new_document").click(function(e){e.preventDefault(),t('label[for="new_document_title"]').show(),t("#post_text").attr("name","document[title]").attr("placeholder",I18n.t("document.title.input")),t("#new_document_description").show().val(t("#post_text").val()),SocialStream.Wall.changeAction(t(this).attr("data-path")),SocialStream.Wall.changeParams("document"),t(".wall_input input[type=file]").trigger("click")}),t(".wall_input input[type=file]").change(function(){t("#post_text").val(t(this).val().replace(/C:\\fakepath\\/i,""))})};e.Wall.callbackRegister("show",n)}(SocialStream,jQuery),jQuery.fn.boxy=function(e){return e=e||{},this.each(function(){var t=this.nodeName.toLowerCase(),n=this;"a"==t?jQuery(this).click(function(){var t=Boxy.linkedTo(this),n=this.getAttribute("href"),i=jQuery.extend({actuator:this,title:this.title},e);if(t)t.show();else if(n.indexOf("#")>=0){var o=jQuery(n.substr(n.indexOf("#"))),r=o.clone(!0);o.remove(),i.unloadOnHide=!1,new Boxy(r,i)}else i.cache||(i.unloadOnHide=!0),Boxy.load(this.href,i);return!1}):"form"==t&&jQuery(this).bind("submit.boxy",function(){return Boxy.confirm(e.message||"Please confirm:",function(){jQuery(n).unbind("submit.boxy").submit()}),!1})})},Boxy.EF=function(){},jQuery.extend(Boxy,{WRAPPER:"<table cellspacing='0' cellpadding='0' border='0' class='boxy-wrapper'><tr><td class='top-left'></td><td class='top'></td><td class='top-right'></td></tr><tr><td class='left'></td><td class='boxy-inner'></td><td class='right'></td></tr><tr><td class='bottom-left'></td><td class='bottom'></td><td class='bottom-right'></td></tr></table>",DEFAULTS:{title:null,closeable:!0,draggable:!0,clone:!1,actuator:null,center:!0,show:!0,modal:!1,fixed:!0,closeText:"[close]",unloadOnHide:!1,clickToFront:!1,behaviours:Boxy.EF,afterDrop:Boxy.EF,afterShow:Boxy.EF,afterHide:Boxy.EF,beforeUnload:Boxy.EF},DEFAULT_X:50,DEFAULT_Y:50,zIndex:1337,dragConfigured:!1,resizeConfigured:!1,dragging:null,load:function(e,t){t=t||{};var n={url:e,type:"GET",dataType:"html",cache:!1,success:function(e){e=jQuery(e),t.filter&&(e=jQuery(t.filter,e)),new Boxy(e,t)}};jQuery.each(["type","cache"],function(){this in t&&(n[this]=t[this],delete t[this])}),jQuery.ajax(n)},get:function(e){var t=jQuery(e).parents(".boxy-wrapper");return t.length?jQuery.data(t[0],"boxy"):null},linkedTo:function(e){return jQuery.data(e,"active.boxy")},alert:function(e,t,n){return Boxy.ask(e,["OK"],t,n)},confirm:function(e,t,n){return Boxy.ask(e,["OK","Cancel"],function(e){"OK"==e&&t()},n)},ask:function(e,t,n,i){i=jQuery.extend({modal:!0,closeable:!1},i||{},{show:!0,unloadOnHide:!0});var o=jQuery("<div></div>").append(jQuery('<div class="question"></div>').html(e)),r={},s=[];if(t instanceof Array)for(var a=0;a<t.length;a++)r[t[a]]=t[a],s.push(t[a]);else for(var l in t)r[t[l]]=l,s.push(t[l]);var c=jQuery('<form class="answers"></form>');c.html(jQuery.map(s,function(e){return"<input type='button' value='"+e+"' />"}).join(" ")),jQuery("input[type=button]",c).click(function(){var e=this;Boxy.get(this).hide(function(){n&&n(r[e.value])})}),o.append(c),new Boxy(o,i)},isModalVisible:function(){return jQuery(".boxy-modal-blackout").length>0},_u:function(){for(var e=0;e<arguments.length;e++)if("undefined"!=typeof arguments[e])return!1;return!0},_handleResize:function(){var e=jQuery(document);jQuery(".boxy-modal-blackout").css("display","none").css({width:e.width(),height:e.height()}).css("display","block")},_handleDrag:function(e){var t;(t=Boxy.dragging)&&t[0].boxy.css({left:e.pageX-t[1],top:e.pageY-t[2]})},_nextZ:function(){return Boxy.zIndex++},_viewport:function(){var e=document.documentElement,t=document.body,n=window;return jQuery.extend(jQuery.browser.msie?{left:t.scrollLeft||e.scrollLeft,top:t.scrollTop||e.scrollTop}:{left:n.pageXOffset,top:n.pageYOffset},Boxy._u(n.innerWidth)?Boxy._u(e)||Boxy._u(e.clientWidth)||0==e.clientWidth?{width:t.clientWidth,height:t.clientHeight}:{width:e.clientWidth,height:e.clientHeight}:{width:n.innerWidth,height:n.innerHeight})}}),Boxy.prototype={estimateSize:function(){this.boxy.css({visibility:"hidden",display:"block"});var e=this.getSize();return this.boxy.css("display","none").css("visibility","visible"),e},getSize:function(){return[this.boxy.width(),this.boxy.height()]},getContentSize:function(){var e=this.getContent();return[e.width(),e.height()]},getPosition:function(){var e=this.boxy[0];return[e.offsetLeft,e.offsetTop]},getCenter:function(){var e=this.getPosition(),t=this.getSize();return[Math.floor(e[0]+t[0]/2),Math.floor(e[1]+t[1]/2)]},getInner:function(){return jQuery(".boxy-inner",this.boxy)},getContent:function(){return jQuery(".boxy-content",this.boxy)},setContent:function(e){return e=jQuery(e).css({display:"block"}).addClass("boxy-content"),this.options.clone&&(e=e.clone(!0)),this.getContent().remove(),this.getInner().append(e),this._setupDefaultBehaviours(e),this.options.behaviours.call(this,e),this},moveTo:function(e,t){return this.moveToX(e).moveToY(t),this},moveToX:function(e){return"number"==typeof e?this.boxy.css({left:e}):this.centerX(),this},moveToY:function(e){return"number"==typeof e?this.boxy.css({top:e}):this.centerY(),this},centerAt:function(e,t){var n=this[this.visible?"getSize":"estimateSize"]();return"number"==typeof e&&this.moveToX(e-n[0]/2),"number"==typeof t&&this.moveToY(t-n[1]/2),this},centerAtX:function(e){return this.centerAt(e,null)},centerAtY:function(e){return this.centerAt(null,e)},center:function(e){var t=Boxy._viewport(),n=this.options.fixed?[0,0]:[t.left,t.top];return e&&"x"!=e||this.centerAt(n[0]+t.width/2,null),e&&"y"!=e||this.centerAt(null,n[1]+t.height/2),this},centerX:function(){return this.center("x")},centerY:function(){return this.center("y")},resize:function(e,t,n){if(this.visible){var i=this._getBoundsForResize(e,t);return this.boxy.css({left:i[0],top:i[1]}),this.getContent().css({width:i[2],height:i[3]}),n&&n(this),this}},tween:function(e,t,n){if(this.visible){var i=this._getBoundsForResize(e,t),o=this;return this.boxy.stop().animate({left:i[0],top:i[1]}),this.getContent().stop().animate({width:i[2],height:i[3]},function(){n&&n(o)}),this}},isVisible:function(){return this.visible},show:function(){if(!this.visible){if(this.options.modal){var e=this;Boxy.resizeConfigured||(Boxy.resizeConfigured=!0,jQuery(window).resize(function(){Boxy._handleResize()})),this.modalBlackout=jQuery('<div class="boxy-modal-blackout"></div>').css({zIndex:Boxy._nextZ(),opacity:.7,width:jQuery(document).width(),height:jQuery(document).height()}).appendTo(document.body),this.toTop(),this.options.closeable&&jQuery(document.body).bind("keypress.boxy",function(t){var n=t.which||t.keyCode;27==n&&(e.hide(),jQuery(document.body).unbind("keypress.boxy"))})}return this.boxy.stop().css({opacity:1}).show(),this.visible=!0,this._fire("afterShow"),this}},hide:function(e){if(this.visible){var t=this;return this.options.modal&&(jQuery(document.body).unbind("keypress.boxy"),this.modalBlackout.animate({opacity:0},function(){jQuery(this).remove()})),this.boxy.stop().animate({opacity:0},300,function(){t.boxy.css({display:"none"}),t.visible=!1,t._fire("afterHide"),e&&e(t),t.options.unloadOnHide&&t.unload()}),this}},toggle:function(){return this[this.visible?"hide":"show"](),this},hideAndUnload:function(e){return this.options.unloadOnHide=!0,this.hide(e),this},unload:function(){this._fire("beforeUnload"),this.boxy.remove(),this.options.actuator&&jQuery.data(this.options.actuator,"active.boxy",!1)},toTop:function(){return this.boxy.css({zIndex:Boxy._nextZ()}),this},getTitle:function(){return jQuery("> .title-bar h2",this.getInner()).html()},setTitle:function(e){return jQuery("> .title-bar h2",this.getInner()).html(e),this},_getBoundsForResize:function(e,t){var n=this.getContentSize(),i=[e-n[0],t-n[1]],o=this.getPosition();return[Math.max(o[0]-i[0]/2,0),Math.max(o[1]-i[1]/2,0),e,t]},_setupTitleBar:function(){if(this.options.title){var e=this,t=jQuery("<div class='title-bar'></div>").html("<h2>"+this.options.title+"</h2>");this.options.closeable&&t.append(jQuery("<a href='#' class='close'></a>").html(this.options.closeText)),this.options.draggable&&(t[0].onselectstart=function(){return!1},t[0].unselectable="on",t[0].style.MozUserSelect="none",Boxy.dragConfigured||(jQuery(document).mousemove(Boxy._handleDrag),Boxy.dragConfigured=!0),t.mousedown(function(t){e.toTop(),Boxy.dragging=[e,t.pageX-e.boxy[0].offsetLeft,t.pageY-e.boxy[0].offsetTop],jQuery(this).addClass("dragging")}).mouseup(function(){jQuery(this).removeClass("dragging"),Boxy.dragging=null,e._fire("afterDrop")})),this.getInner().prepend(t),this._setupDefaultBehaviours(t)}},_setupDefaultBehaviours:function(e){var t=this;this.options.clickToFront&&e.click(function(){t.toTop()}),jQuery(".close",e).click(function(){return t.hide(),!1}).mousedown(function(e){e.stopPropagation()})},_fire:function(e){this.options[e].call(this)}},/**
 * @preserve
 * FullCalendar v1.5.4
 * http://arshaw.com/fullcalendar/
 *
 * Use fullcalendar.css for basic styling.
 * For event drag & drop, requires jQuery UI draggable.
 * For event resizing, requires jQuery UI resizable.
 *
 * Copyright (c) 2011 Adam Shaw
 * Dual licensed under the MIT and GPL licenses, located in
 * MIT-LICENSE.txt and GPL-LICENSE.txt respectively.
 *
 * Date: Tue Sep 4 23:38:33 2012 -0700
 *
 */
function(e,t){function n(t){e.extend(!0,vt,t)}function i(n,i,c){function u(e){J?(E(),C(),D(),b(e)):h()}function h(){Z=i.theme?"ui":"fc",n.addClass("fc"),i.isRTL&&n.addClass("fc-rtl"),i.theme&&n.addClass("ui-widget"),J=e("<div class='fc-content' style='position:relative'/>").prependTo(n),X=new o(Y,i),K=X.render(),K&&n.prepend(K),y(i.defaultView),e(window).resize(T),v()||f()}function f(){setTimeout(function(){!et.start&&v()&&b()},0)}function p(){e(window).unbind("resize",T),X.destroy(),J.remove(),n.removeClass("fc fc-rtl ui-widget")}function m(){return 0!==at.offsetWidth}function v(){return 0!==e("body")[0].offsetWidth}function y(t){if(!et||t!=et.name){ut++,R();var n,i=et;i?((i.beforeHide||L)(),B(J,J.height()),i.element.hide()):B(J,1),J.css("overflow","hidden"),et=lt[t],et?et.element.show():et=lt[t]=new wt[t](n=it=e("<div class='fc-view fc-view-"+t+"' style='position:absolute'/>").appendTo(J),Y),i&&X.deactivateButton(i.name),X.activateButton(t),b(),J.css("overflow",""),i&&B(J,1),n||(et.afterShow||L)(),ut--}}function b(e){if(m()){ut++,R(),nt===t&&E();var i=!1;!et.start||e||ht<et.start||ht>=et.end?(et.render(ht,e||0),S(!0),i=!0):et.sizeDirty?(et.clearEvents(),S(),i=!0):et.eventsDirty&&(et.clearEvents(),i=!0),et.sizeDirty=!1,et.eventsDirty=!1,k(i),tt=n.outerWidth(),X.updateTitle(et.title);var o=new Date;o>=et.start&&o<et.end?X.disableButton("today"):X.enableButton("today"),ut--,et.trigger("viewDisplay",at)}}function x(){C(),m()&&(E(),S(),R(),et.clearEvents(),et.renderEvents(dt),et.sizeDirty=!1)}function C(){e.each(lt,function(e,t){t.sizeDirty=!0})}function E(){nt=i.contentHeight?i.contentHeight:i.height?i.height-(K?K.height():0)-j(J):Math.round(J.width()/Math.max(i.aspectRatio,.5))}function S(e){ut++,et.setHeight(nt,e),it&&(it.css("position","relative"),it=null),et.setWidth(J.width(),e),ut--}function T(){if(!ut)if(et.start){var e=++ct;setTimeout(function(){e==ct&&!ut&&m()&&tt!=(tt=n.outerWidth())&&(ut++,x(),et.trigger("windowResize",at),ut--)},200)}else f()}function k(e){!i.lazyFetching||rt(et.visStart,et.visEnd)?I():e&&A()}function I(){st(et.visStart,et.visEnd)}function N(e){dt=e,A()}function P(e){A(e)}function A(e){D(),m()&&(et.clearEvents(),et.renderEvents(dt,e),et.eventsDirty=!1)}function D(){e.each(lt,function(e,t){t.eventsDirty=!0})}function M(e,n,i){et.select(e,n,i===t?!0:i)}function R(){et&&et.unselect()}function O(){b(-1)}function F(){b(1)}function H(){s(ht,-1),b()}function q(){s(ht,1),b()}function z(){ht=new Date,b()}function W(e,t,n){e instanceof Date?ht=d(e):g(ht,e,t,n),b()}function $(e,n,i){e!==t&&s(ht,e),n!==t&&a(ht,n),i!==t&&l(ht,i),b()}function U(){return d(ht)}function V(){return et}function G(e,n){return n===t?i[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(i[e]=n,x()),void 0)}function Q(e,t){return i[e]?i[e].apply(t||at,Array.prototype.slice.call(arguments,2)):void 0}var Y=this;Y.options=i,Y.render=u,Y.destroy=p,Y.refetchEvents=I,Y.reportEvents=N,Y.reportEventChange=P,Y.rerenderEvents=A,Y.changeView=y,Y.select=M,Y.unselect=R,Y.prev=O,Y.next=F,Y.prevYear=H,Y.nextYear=q,Y.today=z,Y.gotoDate=W,Y.incrementDate=$,Y.formatDate=function(e,t){return w(e,t,i)},Y.formatDates=function(e,t,n){return _(e,t,n,i)},Y.getDate=U,Y.getView=V,Y.option=G,Y.trigger=Q,r.call(Y,i,c);var X,K,J,Z,et,tt,nt,it,ot,rt=Y.isFetchNeeded,st=Y.fetchEvents,at=n[0],lt={},ct=0,ut=0,ht=new Date,dt=[];g(ht,i.year,i.month,i.date),i.droppable&&e(document).bind("dragstart",function(t,n){var o=t.target,r=e(o);if(!r.parents(".fc").length){var s=i.dropAccept;(e.isFunction(s)?s.call(o,r):r.is(s))&&(ot=o,et.dragStart(ot,t,n))}}).bind("dragstop",function(e,t){ot&&(et.dragStop(ot,e,t),ot=null)})}function o(t,n){function i(){d=n.theme?"ui":"fc";var t=n.header;return t?f=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(r("left")).append(r("center")).append(r("right"))):void 0}function o(){f.remove()}function r(i){var o=e("<td class='fc-header-"+i+"'/>"),r=n.header[i];return r&&e.each(r.split(" "),function(i){i>0&&o.append("<span class='fc-header-space'/>");var r;e.each(this.split(","),function(i,s){if("title"==s)o.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),r&&r.addClass(d+"-corner-right"),r=null;else{var a;if(t[s]?a=t[s]:wt[s]&&(a=function(){u.removeClass(d+"-state-hover"),t.changeView(s)}),a){var l=n.theme?$(n.buttonIcons,s):null,c=$(n.buttonText,s),u=e("<span class='fc-button fc-button-"+s+" "+d+"-state-default'>"+"<span class='fc-button-inner'>"+"<span class='fc-button-content'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>"+"<span class='fc-button-effect'><span></span></span>"+"</span>"+"</span>");u&&(u.click(function(){u.hasClass(d+"-state-disabled")||a()}).mousedown(function(){u.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){u.removeClass(d+"-state-down")}).hover(function(){u.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){u.removeClass(d+"-state-hover").removeClass(d+"-state-down")}).appendTo(o),r||u.addClass(d+"-corner-left"),r=u)}}}),r&&r.addClass(d+"-corner-right")}),o}function s(e){f.find("h2").html(e)}function a(e){f.find("span.fc-button-"+e).addClass(d+"-state-active")}function l(e){f.find("span.fc-button-"+e).removeClass(d+"-state-active")}function c(e){f.find("span.fc-button-"+e).addClass(d+"-state-disabled")}function u(e){f.find("span.fc-button-"+e).removeClass(d+"-state-disabled")}var h=this;h.render=i,h.destroy=o,h.updateTitle=s,h.activateButton=a,h.deactivateButton=l,h.disableButton=c,h.enableButton=u;var d,f=e([])}function r(n,i){function o(e,t){return!E||E>e||t>S}function r(e,t){E=e,S=t,R=[];var n=++A,i=P.length;D=i;for(var o=0;i>o;o++)s(P[o],n)}function s(e,t){a(e,function(n){if(t==A){if(n){for(var i=0;i<n.length;i++)n[i].source=e,b(n[i]);R=R.concat(n)}D--,D||I(R)}})}function a(t,i){var o,r,s=bt.sourceFetchers;for(o=0;o<s.length;o++){if(r=s[o](t,E,S,i),r===!0)return;if("object"==typeof r)return a(r,i),void 0}var l=t.events;if(l)e.isFunction(l)?(g(),l(d(E),d(S),function(e){i(e),y()})):e.isArray(l)?i(l):i();else{var c=t.url;if(c){var u=t.success,h=t.error,f=t.complete,p=e.extend({},t.data||{}),m=J(t.startParam,n.startParam),v=J(t.endParam,n.endParam);m&&(p[m]=Math.round(+E/1e3)),v&&(p[v]=Math.round(+S/1e3)),g(),e.ajax(e.extend({},_t,t,{data:p,success:function(t){t=t||[];var n=K(u,this,arguments);e.isArray(n)&&(t=n),i(t)},error:function(){K(h,this,arguments),i()},complete:function(){K(f,this,arguments),y()}}))}else i()}}function l(e){e=c(e),e&&(D++,s(e,A))}function c(t){return e.isFunction(t)||e.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t?(w(t),P.push(t),t):void 0}function u(t){P=e.grep(P,function(e){return!_(e,t)}),R=e.grep(R,function(e){return!_(e.source,t)}),I(R)}function h(e){var t,n,i=R.length,o=k().defaultEventEnd,r=e.start-e._start,s=e.end?e.end-(e._end||o(e)):0;for(t=0;i>t;t++)n=R[t],n._id==e._id&&n!=e&&(n.start=new Date(+n.start+r),n.end=e.end?n.end?new Date(+n.end+s):new Date(+o(n)+s):null,n.title=e.title,n.url=e.url,n.allDay=e.allDay,n.className=e.className,n.editable=e.editable,n.color=e.color,n.backgroudColor=e.backgroudColor,n.borderColor=e.borderColor,n.textColor=e.textColor,b(n));b(e),I(R)}function f(e,t){b(e),e.source||(t&&(N.events.push(e),e.source=N),R.push(e)),I(R)}function p(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}R=e.grep(R,t,!0);for(var i=0;i<P.length;i++)e.isArray(P[i].events)&&(P[i].events=e.grep(P[i].events,t,!0))}else{R=[];for(var i=0;i<P.length;i++)e.isArray(P[i].events)&&(P[i].events=[])}I(R)}function m(t){return e.isFunction(t)?e.grep(R,t):t?(t+="",e.grep(R,function(e){return e._id==t})):R}function g(){M++||T("loading",null,!0)}function y(){--M||T("loading",null,!1)}function b(e){var i=e.source||{},o=J(i.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+xt++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=d(e.start=v(e.start,o)),e.end=v(e.end,o),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?d(e.end):null,e.allDay===t&&(e.allDay=J(i.allDayDefault,n.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function w(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=bt.sourceNormalizers,n=0;n<t.length;n++)t[n](e)}function _(e,t){return e&&t&&x(e)==x(t)}function x(e){return("object"==typeof e?e.events||e.url:"")||e}var C=this;C.isFetchNeeded=o,C.fetchEvents=r,C.addEventSource=l,C.removeEventSource=u,C.updateEvent=h,C.renderEvent=f,C.removeEvents=p,C.clientEvents=m,C.normalizeEvent=b;for(var E,S,T=C.trigger,k=C.getView,I=C.reportEvents,N={events:[]},P=[N],A=0,D=0,M=0,R=[],j=0;j<i.length;j++)c(i[j])}function s(e,t,n){return e.setFullYear(e.getFullYear()+t),n||h(e),e}function a(e,t,n){if(+e){var i=e.getMonth()+t,o=d(e);for(o.setDate(1),o.setMonth(i),e.setMonth(i),n||h(e);e.getMonth()!=o.getMonth();)e.setDate(e.getDate()+(o>e?1:-1))}return e}function l(e,t,n){if(+e){var i=e.getDate()+t,o=d(e);o.setHours(9),o.setDate(i),e.setDate(i),n||h(e),c(e,o)}return e}function c(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*St)}function u(e,t){return e.setMinutes(e.getMinutes()+t),e}function h(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function d(e,t){return t?h(new Date(+e)):new Date(+e)}function f(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function p(e,t,n){for(t=t||1;!e.getDay()||n&&1==e.getDay()||!n&&6==e.getDay();)l(e,t);return e}function m(e,t){return Math.round((d(e,!0)-d(t,!0))/Et)}function g(e,n,i,o){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),i!==t&&i!=e.getMonth()&&(e.setDate(1),e.setMonth(i)),o!==t&&e.setDate(o)}function v(e,n){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(n===t&&(n=!0),y(e,n)||(e?new Date(e):null)):null}function y(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var i=new Date(n[1],0,1);if(t||!n[13]){var o=new Date(n[1],0,1,9,0);n[3]&&(i.setMonth(n[3]-1),o.setMonth(n[3]-1)),n[5]&&(i.setDate(n[5]),o.setDate(n[5])),c(i,o),n[7]&&i.setHours(n[7]),n[8]&&i.setMinutes(n[8]),n[10]&&i.setSeconds(n[10]),n[12]&&i.setMilliseconds(1e3*Number("0."+n[12])),c(i,o)}else if(i.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),i.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var r=60*Number(n[16])+(n[18]?Number(n[18]):0);r*="-"==n[15]?1:-1,i=new Date(+i+1e3*60*r)}return i}function b(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,"p"==t[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(t[2]?parseInt(t[2],10):0)}}function w(e,t,n){return _(e,null,t,n)}function _(e,t,n,i){i=i||vt;var o,r,s,a,l=e,c=t,u=n.length,h="";for(o=0;u>o;o++)if(r=n.charAt(o),"'"==r){for(s=o+1;u>s;s++)if("'"==n.charAt(s)){l&&(h+=s==o+1?"'":n.substring(o+1,s),o=s);break}}else if("("==r){for(s=o+1;u>s;s++)if(")"==n.charAt(s)){var d=w(l,n.substring(o+1,s),i);parseInt(d.replace(/\D/,""),10)&&(h+=d),o=s;break}}else if("["==r){for(s=o+1;u>s;s++)if("]"==n.charAt(s)){var f=n.substring(o+1,s),d=w(l,f,i);d!=w(c,f,i)&&(h+=d),o=s;break}}else if("{"==r)l=t,c=e;else if("}"==r)l=e,c=t;else{for(s=u;s>o;s--)if(a=kt[n.substring(o,s)]){l&&(h+=a(l,i)),o=s-1;break}s==o&&l&&(h+=r)}return h}function x(e){return e.end?C(e.end,e.allDay):l(d(e.start),1)}function C(e,t){return e=d(e),t||e.getHours()||e.getMinutes()?l(e,1):h(e)}function E(e,t){return 100*(t.msLength-e.msLength)+(e.event.start-t.event.start)}function S(e,t){return e.end>t.start&&e.start<t.end}function T(e,t,n,i){var o,r,s,a,l,c,u,h,f=[],p=e.length;for(o=0;p>o;o++)r=e[o],s=r.start,a=t[o],a>n&&i>s&&(n>s?(l=d(n),u=!1):(l=s,u=!0),a>i?(c=d(i),h=!1):(c=a,h=!0),f.push({event:r,start:l,end:c,isStart:u,isEnd:h,msLength:c-l}));return f.sort(E)}function k(e){var t,n,i,o,r,s=[],a=e.length;for(t=0;a>t;t++){for(n=e[t],i=0;;){if(o=!1,s[i])for(r=0;r<s[i].length;r++)if(S(s[i][r],n)){o=!0;break}if(!o)break;i++}s[i]?s[i].push(n):s[i]=[n]}return s}function I(n,i,o){n.unbind("mouseover").mouseover(function(n){for(var r,s,a,l=n.target;l!=this;)r=l,l=l.parentNode;(s=r._fci)!==t&&(r._fci=t,a=i[s],o(a.event,a.element,a),e(n.target).trigger(n)),n.stopPropagation()})}function N(t,n,i){for(var o,r=0;r<t.length;r++)o=e(t[r]),o.width(Math.max(0,n-A(o,i)))}function P(t,n,i){for(var o,r=0;r<t.length;r++)o=e(t[r]),o.height(Math.max(0,n-j(o,i)))}function A(e,t){return D(e)+R(e)+(t?M(e):0)}function D(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function M(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function R(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function j(e,t){return O(e)+H(e)+(t?F(e):0)}function O(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function F(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function H(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function B(e,t){t="number"==typeof t?t+"px":t,e.each(function(e,n){n.style.cssText+=";min-height:"+t+";_height:"+t})}function L(){}function q(e,t){return e-t}function z(e){return Math.max.apply(Math,e)}function W(e){return(10>e?"0":"")+e}function $(e,n){if(e[n]!==t)return e[n];for(var i,o=n.split(/(?=[A-Z])/),r=o.length-1;r>=0;r--)if(i=e[o[r].toLowerCase()],i!==t)return i;return e[""]}function U(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function V(e){return e.id+"/"+e.className+"/"+e.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function G(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Q(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Y(e,t){e.each(function(e,n){n.className=n.className.replace(/^fc-\w*/,"fc-"+Ct[t.getDay()])})}function X(e,t){var n=e.source||{},i=e.color,o=n.color,r=t("eventColor"),s=e.backgroundColor||i||n.backgroundColor||o||t("eventBackgroundColor")||r,a=e.borderColor||i||n.borderColor||o||t("eventBorderColor")||r,l=e.textColor||n.textColor||t("eventTextColor"),c=[];return s&&c.push("background-color:"+s),a&&c.push("border-color:"+a),l&&c.push("color:"+l),c.join(";")}function K(t,n,i){if(e.isFunction(t)&&(t=[t]),t){var o,r;for(o=0;o<t.length;o++)r=t[o].apply(n,i)||r;return r}}function J(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function Z(e,t){function n(e,t){t&&(a(e,t),e.setDate(1));var n=d(e,!0);n.setDate(1);var c=a(d(n),1),u=d(n),h=d(c),f=o("firstDay"),m=o("weekends")?0:1;m&&(p(u),p(h,-1,!0)),l(u,-((u.getDay()-Math.max(f,m)+7)%7)),l(h,(7-h.getDay()+Math.max(f,m))%7);var g=Math.round((h-u)/(7*Et));"fixed"==o("weekMode")&&(l(h,7*(6-g)),g=6),i.title=s(n,o("titleFormat")),i.start=n,i.end=c,i.visStart=u,i.visEnd=h,r(6,g,m?5:7,!0)}var i=this;i.render=n,nt.call(i,e,t,"month");var o=i.opt,r=i.renderBasic,s=t.formatDate}function et(e,t){function n(e,t){t&&l(e,7*t);var n=l(d(e),-((e.getDay()-o("firstDay")+7)%7)),a=l(d(n),7),c=d(n),u=d(a),h=o("weekends");h||(p(c),p(u,-1,!0)),i.title=s(c,l(d(u),-1),o("titleFormat")),i.start=n,i.end=a,i.visStart=c,i.visEnd=u,r(1,1,h?7:5,!1)}var i=this;i.render=n,nt.call(i,e,t,"basicWeek");var o=i.opt,r=i.renderBasic,s=t.formatDates}function tt(e,t){function n(e,t){t&&(l(e,t),o("weekends")||p(e,0>t?-1:1)),i.title=s(e,o("titleFormat")),i.start=i.visStart=d(e,!0),i.end=i.visEnd=l(d(i.start),1),r(1,1,1,!1)}var i=this;i.render=n,nt.call(i,e,t,"basicDay");var o=i.opt,r=i.renderBasic,s=t.formatDate}function nt(t,n,i){function o(e,t,n,i){J=t,Z=n,r();var o=!L;o?s(e,i):bt(),a(o)}function r(){ot=vt("isRTL"),ot?(rt=-1,st=Z-1):(rt=1,st=0),at=vt("firstDay"),lt=vt("weekends")?0:1,ut=vt("theme")?"ui":"fc",mt=vt("columnFormat")}function s(n,i){var o,r,s,a,l=ut+"-widget-header",c=ut+"-widget-content";for(o="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",r=0;Z>r;r++)o+="<th class='fc- "+l+"'/>";for(o+="</tr></thead><tbody>",r=0;n>r;r++){for(o+="<tr class='fc-week"+r+"'>",s=0;Z>s;s++)o+="<td class='fc- "+c+" fc-day"+(r*Z+s)+"'>"+"<div>"+(i?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";o+="</tr>"}o+="</tbody></table>",a=e(o).appendTo(t),F=a.find("thead"),H=F.find("th"),L=a.find("tbody"),q=L.find("tr"),z=L.find("td"),W=z.filter(":first-child"),$=q.eq(0).find("div.fc-day-content div"),Q(F.add(F.find("tr"))),Q(q),q.eq(0).addClass("fc-first"),f(z),U=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function a(t){var n,i,o,r=t||1==J,s=O.start.getMonth(),a=h(new Date);r&&H.each(function(t,o){n=e(o),i=A(t),n.html(Ct(i,mt)),Y(n,i)}),z.each(function(t,o){n=e(o),i=A(t),i.getMonth()==s?n.removeClass("fc-other-month"):n.addClass("fc-other-month"),+i==+a?n.addClass(ut+"-state-highlight fc-today"):n.removeClass(ut+"-state-highlight fc-today"),n.find("div.fc-day-number").text(i.getDate()),r&&Y(n,i)}),q.each(function(t,n){o=e(n),J>t?(o.show(),t==J-1?o.addClass("fc-last"):o.removeClass("fc-last")):o.hide()})}function c(t){X=t;var n,i,o,r=X-F.height();"variable"==vt("weekMode")?n=i=Math.floor(r/(1==J?2:6)):(n=Math.floor(r/J),i=r-n*(J-1)),W.each(function(t,r){J>t&&(o=e(r),B(o.find("> div"),(t==J-1?i:n)-j(o)))})}function u(e){V=e,nt.clear(),K=Math.floor(V/Z),N(H.slice(0,-1),K)}function f(e){e.click(p).mousedown(xt)}function p(e){if(!vt("selectable")){var t=parseInt(this.className.match(/fc\-day(\d+)/)[1]),n=A(t);yt("dayClick",this,n,!0,e)}}function g(e,t,n){n&&et.build();for(var i=d(O.visStart),o=l(d(i),Z),r=0;J>r;r++){var s=new Date(Math.max(i,e)),a=new Date(Math.min(o,t));if(a>s){var c,u;ot?(c=m(a,i)*rt+st+1,u=m(s,i)*rt+st+1):(c=m(s,i),u=m(a,i)),f(v(r,c,r,u-1))}l(i,7),l(o,7)}}function v(e,n,i,o){var r=et.rect(e,n,i,o,t);return wt(r,t)}function y(e){return d(e)}function b(e,t){g(e,l(d(t),1),!0)}function w(){_t()}function _(e,t,n){var i=k(e),o=z[i.row*Z+i.col];yt("dayClick",o,e,t,n)}function x(e,t){tt.start(function(e){_t(),e&&v(e.row,e.col,e.row,e.col)},t)}function C(e,t,n){var i=tt.stop();if(_t(),i){var o=I(i);yt("drop",e,o,!0,t,n)}}function E(e){return d(e.start)}function S(e){return nt.left(e)}function T(e){return nt.right(e)}function k(e){return{row:Math.floor(m(e,O.visStart)/7),col:D(e.getDay())}}function I(e){return P(e.row,e.col)}function P(e,t){return l(d(O.visStart),7*e+t*rt+st)}function A(e){return P(Math.floor(e/Z),e%Z)}function D(e){return(e-Math.max(at,lt)+Z)%Z*rt+st}function M(e){return q.eq(e)}function R(){return{left:0,right:V}}var O=this;O.renderBasic=o,O.setHeight=c,O.setWidth=u,O.renderDayOverlay=g,O.defaultSelectionEnd=y,O.renderSelection=b,O.clearSelection=w,O.reportDayClick=_,O.dragStart=x,O.dragStop=C,O.defaultEventEnd=E,O.getHoverListener=function(){return tt},O.colContentLeft=S,O.colContentRight=T,O.dayOfWeekCol=D,O.dateCell=k,O.cellDate=I,O.cellIsAllDay=function(){return!0},O.allDayRow=M,O.allDayBounds=R,O.getRowCnt=function(){return J},O.getColCnt=function(){return Z},O.getColWidth=function(){return K},O.getDaySegmentContainer=function(){return U},ct.call(O,t,n,i),dt.call(O),ht.call(O),it.call(O);var F,H,L,q,z,W,$,U,V,X,K,J,Z,et,tt,nt,ot,rt,st,at,lt,ut,mt,vt=O.opt,yt=O.trigger,bt=O.clearEvents,wt=O.renderOverlay,_t=O.clearOverlays,xt=O.daySelectionMousedown,Ct=n.formatDate;G(t.addClass("fc-grid")),et=new ft(function(t,n){var i,o,r;H.each(function(t,s){i=e(s),o=i.offset().left,t&&(r[1]=o),r=[o],n[t]=r}),r[1]=o+i.outerWidth(),q.each(function(n,s){J>n&&(i=e(s),o=i.offset().top,n&&(r[1]=o),r=[o],t[n]=r)}),r[1]=o+i.outerHeight()}),tt=new pt(et),nt=new gt(function(e){return $.eq(e)})}function it(){function t(e,t){f(e),I(i(e),t)}function n(){p(),b().empty()}function i(t){var n,i,o,r,a,c,u=E(),h=S(),f=d(s.visStart),p=l(d(f),h),m=e.map(t,x),g=[];for(n=0;u>n;n++){for(i=k(T(t,m,f,p)),o=0;o<i.length;o++)for(r=i[o],a=0;a<r.length;a++)c=r[a],c.row=n,c.level=o,g.push(c);l(f,7),l(p,7)}return g}function o(e,t,n){u(e)&&r(e,t),n.isEnd&&h(e)&&N(e,t,n),m(e,t)}function r(e,t){var n,i=w();t.draggable({zIndex:9,delay:50,opacity:a("dragOpacity"),revertDuration:a("dragRevertDuration"),start:function(o,r){c("eventDragStart",t,e,o,r),v(e,t),i.start(function(i,o,r,s){t.draggable("option","revert",!i||!r&&!s),C(),i?(n=7*r+s*(a("isRTL")?-1:1),_(l(d(e.start),n),l(x(e),n))):n=0},o,"drag")},stop:function(o,r){i.stop(),C(),c("eventDragStop",t,e,o,r),n?y(this,e,n,0,e.allDay,o,r):(t.css("filter",""),g(e,t))}})}var s=this;s.renderEvents=t,s.compileDaySegs=i,s.clearEvents=n,s.bindDaySeg=o,ut.call(s);var a=s.opt,c=s.trigger,u=s.isEventDraggable,h=s.isEventResizable,f=s.reportEvents,p=s.reportEventClear,m=s.eventElementHandlers,g=s.showEvents,v=s.hideEvents,y=s.eventDrop,b=s.getDaySegmentContainer,w=s.getHoverListener,_=s.renderDayOverlay,C=s.clearOverlays,E=s.getRowCnt,S=s.getColCnt,I=s.renderDaySegs,N=s.resizableDayEvent}function ot(e,t){function n(e,t){t&&l(e,7*t);var n=l(d(e),-((e.getDay()-o("firstDay")+7)%7)),a=l(d(n),7),c=d(n),u=d(a),h=o("weekends");h||(p(c),p(u,-1,!0)),i.title=s(c,l(d(u),-1),o("titleFormat")),i.start=n,i.end=a,i.visStart=c,i.visEnd=u,r(h?7:5)}var i=this;i.render=n,st.call(i,e,t,"agendaWeek");var o=i.opt,r=i.renderAgenda,s=t.formatDates}function rt(e,t){function n(e,t){t&&(l(e,t),o("weekends")||p(e,0>t?-1:1));var n=d(e,!0),a=l(d(n),1);i.title=s(e,o("titleFormat")),i.start=i.visStart=n,i.end=i.visEnd=a,r(1)}var i=this;i.render=n,st.call(i,e,t,"agendaDay");var o=i.opt,r=i.renderAgenda,s=t.formatDate}function st(n,i,o){function r(e){Rt=e,s(),et?Xt():a(),c()}function s(){Bt=Qt("theme")?"ui":"fc",qt=Qt("weekends")?0:1,Lt=Qt("firstDay"),(zt=Qt("isRTL"))?(Wt=-1,$t=Rt-1):(Wt=1,$t=0),Ut=b(Qt("minTime")),Vt=b(Qt("maxTime")),Gt=Qt("columnFormat")}function a(){var t,i,o,r,s,a=Bt+"-widget-header",l=Bt+"-widget-content",c=0==Qt("slotMinutes")%15;for(t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+a+"'>&nbsp;</th>",i=0;Rt>i;i++)t+="<th class='fc- fc-col"+i+" "+a+"'/>";for(t+="<th class='fc-agenda-gutter "+a+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+a+"'>&nbsp;</th>",i=0;Rt>i;i++)t+="<td class='fc- fc-col"+i+" "+l+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";for(t+="<td class='fc-agenda-gutter "+l+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",et=e(t).appendTo(n),tt=et.find("thead"),nt=tt.find("th").slice(1,-1),it=et.find("tbody"),ot=it.find("td").slice(0,-1),rt=ot.find("div.fc-day-content div"),st=ot.eq(0),lt=st.find("> div"),Q(tt.add(tt.find("tr"))),Q(it.add(it.find("tr"))),Et=tt.find("th:first"),St=et.find(".fc-agenda-gutter"),ut=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Qt("allDaySlot")?(mt=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ut),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+a+" fc-agenda-axis'>"+Qt("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+a+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",vt=e(t).appendTo(ut),yt=vt.find("tr"),_(yt.find("td")),Et=Et.add(vt.find("th:first")),St=St.add(vt.find("th.fc-agenda-gutter")),ut.append("<div class='fc-agenda-divider "+a+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):mt=e([]),bt=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ut),wt=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(bt),_t=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(wt),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",o=f(),r=u(d(o),Vt),u(o,Ut),jt=0,i=0;r>o;i++)s=o.getMinutes(),t+="<tr class='fc-slot"+i+" "+(s?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+a+"'>"+(c&&s?"&nbsp;":on(o,Qt("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",u(o,Qt("slotMinutes")),jt++;t+="</tbody></table>",xt=e(t).appendTo(wt),Ct=xt.find("div:first"),x(xt.find("td")),Et=Et.add(xt.find("th:first"))}function c(){var e,t,n,i,o=h(new Date);for(e=0;Rt>e;e++)i=M(e),t=nt.eq(e),t.html(on(i,Gt)),n=ot.eq(e),+i==+o?n.addClass(Bt+"-state-highlight fc-today"):n.removeClass(Bt+"-state-highlight fc-today"),Y(t.add(n),i)}function p(e,n){e===t&&(e=It),It=e,rn={};var i=it.position().top,o=bt.position().top,r=Math.min(e-i,xt.height()+o+1);lt.height(r-j(st)),ut.css("top",i),bt.height(r-o-1),Dt=Ct.height()+1,n&&v()}function g(t){kt=t,Ht.clear(),Nt=0,N(Et.width("").each(function(t,n){Nt=Math.max(Nt,e(n).outerWidth())}),Nt);var n=bt[0].clientWidth;At=bt.width()-n,At?(N(St,At),St.show().prev().removeClass("fc-last")):St.hide().prev().addClass("fc-last"),Pt=Math.floor((n-Nt)/Rt),N(nt.slice(0,-1),Pt)}function v(){function e(){bt.scrollTop(i)}var t=f(),n=d(t);n.setHours(Qt("firstHour"));var i=F(t,n)+1;e(),setTimeout(e,0)}function y(){Mt=bt.scrollTop()}function w(){bt.scrollTop(Mt)}function _(e){e.click(C).mousedown(tn)}function x(e){e.click(C).mousedown(V)}function C(e){if(!Qt("selectable")){var t=Math.min(Rt-1,Math.floor((e.pageX-et.offset().left-Nt)/Pt)),n=M(t),i=this.parentNode.className.match(/fc-slot(\d+)/);if(i){var o=parseInt(i[1])*Qt("slotMinutes"),r=Math.floor(o/60);n.setHours(r),n.setMinutes(o%60+Ut),Yt("dayClick",ot[t],n,!1,e)}else Yt("dayClick",ot[t],n,!0,e)}}function E(e,t,n){n&&Ot.build();var i,o,r=d(Z.visStart);zt?(i=m(t,r)*Wt+$t+1,o=m(e,r)*Wt+$t+1):(i=m(e,r),o=m(t,r)),i=Math.max(0,i),o=Math.min(Rt,o),o>i&&_(S(0,i,0,o-1))}function S(e,t,n,i){var o=Ot.rect(e,t,n,i,ut);return Kt(o,ut)}function T(e,t){for(var n=d(Z.visStart),i=l(d(n),1),o=0;Rt>o;o++){var r=new Date(Math.max(n,e)),s=new Date(Math.min(i,t));if(s>r){var a=o*Wt+$t,c=Ot.rect(0,a,0,a,wt),u=F(n,r),h=F(n,s);c.top=u,c.height=h-u,x(Kt(c,wt))}l(n,1),l(i,1)}}function k(e){return Ht.left(e)}function I(e){return Ht.right(e)}function A(e){return{row:Math.floor(m(e,Z.visStart)/7),col:O(e.getDay())}}function D(e){var t=M(e.col),n=e.row;return Qt("allDaySlot")&&n--,n>=0&&u(t,Ut+n*Qt("slotMinutes")),t}function M(e){return l(d(Z.visStart),e*Wt+$t)}function R(e){return Qt("allDaySlot")&&!e.row}function O(e){return(e-Math.max(Lt,qt)+Rt)%Rt*Wt+$t}function F(e,n){if(e=d(e,!0),n<u(d(e),Ut))return 0;if(n>=u(d(e),Vt))return xt.height();var i=Qt("slotMinutes"),o=60*n.getHours()+n.getMinutes()-Ut,r=Math.floor(o/i),s=rn[r];return s===t&&(s=rn[r]=xt.find("tr:eq("+r+") td div")[0].offsetTop),Math.max(0,Math.round(s-1+Dt*(o%i/i)))}function H(){return{left:Nt,right:kt-At}}function B(){return yt}function L(e){var t=d(e.start);return e.allDay?t:u(t,Qt("defaultEventMinutes"))}function z(e,t){return t?d(e):u(d(e),Qt("slotMinutes"))}function W(e,t,n){n?Qt("allDaySlot")&&E(e,l(d(t),1),!0):$(e,t)}function $(t,n){var i=Qt("selectHelper");if(Ot.build(),i){var o=m(t,Z.visStart)*Wt+$t;if(o>=0&&Rt>o){var r=Ot.rect(0,o,0,o,wt),s=F(t,t),a=F(t,n);if(a>s){if(r.top=s,r.height=a-s,r.left+=2,r.width-=5,e.isFunction(i)){var l=i(t,n);l&&(r.position="absolute",r.zIndex=8,Tt=e(l).css(r).appendTo(wt))}else r.isStart=!0,r.isEnd=!0,Tt=e(nn({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},r)),Tt.css("opacity",Qt("dragOpacity"));Tt&&(x(Tt),wt.append(Tt),N(Tt,r.width,!0),P(Tt,r.height,!0))}}}else T(t,n)}function U(){Jt(),Tt&&(Tt.remove(),Tt=null)}function V(t){if(1==t.which&&Qt("selectable")){en(t);var n;Ft.start(function(e,t){if(U(),e&&e.col==t.col&&!R(e)){var i=D(t),o=D(e);n=[i,u(d(i),Qt("slotMinutes")),o,u(d(o),Qt("slotMinutes"))].sort(q),$(n[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){Ft.stop(),n&&(+n[0]==+n[1]&&X(n[0],!1,e),Zt(n[0],n[3],!1,e))})}}function X(e,t,n){Yt("dayClick",ot[O(e.getDay())],e,t,n)}function K(e,t){Ft.start(function(e){if(Jt(),e)if(R(e))S(e.row,e.col,e.row,e.col);else{var t=D(e),n=u(d(t),Qt("defaultEventMinutes"));T(t,n)}},t)}function J(e,t,n){var i=Ft.stop();Jt(),i&&Yt("drop",e,D(i),R(i),t,n)}var Z=this;Z.renderAgenda=r,Z.setWidth=g,Z.setHeight=p,Z.beforeHide=y,Z.afterShow=w,Z.defaultEventEnd=L,Z.timePosition=F,Z.dayOfWeekCol=O,Z.dateCell=A,Z.cellDate=D,Z.cellIsAllDay=R,Z.allDayRow=B,Z.allDayBounds=H,Z.getHoverListener=function(){return Ft},Z.colContentLeft=k,Z.colContentRight=I,Z.getDaySegmentContainer=function(){return mt},Z.getSlotSegmentContainer=function(){return _t},Z.getMinMinute=function(){return Ut},Z.getMaxMinute=function(){return Vt},Z.getBodyContent=function(){return wt},Z.getRowCnt=function(){return 1},Z.getColCnt=function(){return Rt},Z.getColWidth=function(){return Pt},Z.getSlotHeight=function(){return Dt},Z.defaultSelectionEnd=z,Z.renderDayOverlay=E,Z.renderSelection=W,Z.clearSelection=U,Z.reportDayClick=X,Z.dragStart=K,Z.dragStop=J,ct.call(Z,n,i,o),dt.call(Z),ht.call(Z),at.call(Z);var et,tt,nt,it,ot,rt,st,lt,ut,mt,vt,yt,bt,wt,_t,xt,Ct,Et,St,Tt,kt,It,Nt,Pt,At,Dt,Mt,Rt,jt,Ot,Ft,Ht,Bt,Lt,qt,zt,Wt,$t,Ut,Vt,Gt,Qt=Z.opt,Yt=Z.trigger,Xt=Z.clearEvents,Kt=Z.renderOverlay,Jt=Z.clearOverlays,Zt=Z.reportSelection,en=Z.unselect,tn=Z.daySelectionMousedown,nn=Z.slotSegHtml,on=i.formatDate,rn={};G(n.addClass("fc-agenda")),Ot=new ft(function(t,n){function i(e){return Math.max(l,Math.min(c,e))}var o,r,s;nt.each(function(t,i){o=e(i),r=o.offset().left,t&&(s[1]=r),s=[r],n[t]=s}),s[1]=r+o.outerWidth(),Qt("allDaySlot")&&(o=yt,r=o.offset().top,t[0]=[r,r+o.outerHeight()]);for(var a=wt.offset().top,l=bt.offset().top,c=l+bt.outerHeight(),u=0;jt>u;u++)t.push([i(a+Dt*u),i(a+Dt*(u+1))])}),Ft=new pt(Ot),Ht=new gt(function(e){return rt.eq(e)})}function at(){function n(e,t){E(e);var n,i=e.length,s=[],l=[];for(n=0;i>n;n++)e[n].allDay?s.push(e[n]):l.push(e[n]);y("allDaySlot")&&(z(o(s),t),D()),a(r(l),t)}function i(){S(),M().empty(),R().empty()}function o(t){var n,i,o,r,s=k(T(t,e.map(t,x),v.visStart,v.visEnd)),a=s.length,l=[];for(n=0;a>n;n++)for(i=s[n],o=0;o<i.length;o++)r=i[o],r.row=0,r.level=n,l.push(r);return l}function r(t){var n,i,o,r,a,c,h=$(),f=H(),p=F(),m=u(d(v.visStart),f),g=e.map(t,s),y=[];for(n=0;h>n;n++){for(i=k(T(t,g,m,u(d(m),p-f))),lt(i),o=0;o<i.length;o++)for(r=i[o],a=0;a<r.length;a++)c=r[a],c.col=n,c.level=o,y.push(c);l(m,1,!0)}return y}function s(e){return e.end?d(e.end):u(d(e.start),y("defaultEventMinutes"))}function a(n,i){var o,r,s,a,l,u,h,d,p,m,g,v,w,_,x,C,E,S,T,k,N,P,D=n.length,M="",O={},F={},H=R(),z=$();for((k=y("isRTL"))?(N=-1,P=z-1):(N=1,P=0),o=0;D>o;o++)r=n[o],s=r.event,a=B(r.start,r.start),l=B(r.start,r.end),u=r.col,h=r.level,d=r.forward||0,p=L(u*N+P),m=q(u*N+P)-p,m=Math.min(m-6,.95*m),g=h?m/(h+d+1):d?2*(m/(d+1)-6):m,v=p+m/(h+d+1)*h*N+(k?m-g:0),r.top=a,r.left=v,r.outerWidth=g,r.outerHeight=l-a,M+=c(s,r);for(H[0].innerHTML=M,w=H.children(),o=0;D>o;o++)r=n[o],s=r.event,_=e(w[o]),x=b("eventRender",s,s,_),x===!1?_.remove():(x&&x!==!0&&(_.remove(),_=e(x).css({position:"absolute",top:r.top,left:r.left}).appendTo(H)),r.element=_,s._id===i?f(s,_,r):_[0]._fci=o,K(s,_));for(I(H,n,f),o=0;D>o;o++)r=n[o],(_=r.element)&&(E=O[C=r.key=V(_[0])],r.vsides=E===t?O[C]=j(_,!0):E,E=F[C],r.hsides=E===t?F[C]=A(_,!0):E,S=_.find("div.fc-event-content"),S.length&&(r.contentTop=S[0].offsetTop));for(o=0;D>o;o++)r=n[o],(_=r.element)&&(_[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",T=Math.max(0,r.outerHeight-r.vsides),_[0].style.height=T+"px",s=r.event,r.contentTop!==t&&T-r.contentTop<10&&(_.find("div.fc-event-time").text(rt(s.start,y("timeFormat"))+" - "+s.title),_.find("div.fc-event-title").remove()),b("eventAfterRender",s,s,_))}function c(e,t){var n="<",i=e.url,o=X(e,y),r=o?" style='"+o+"'":"",s=["fc-event","fc-event-skin","fc-event-vert"];return w(e)&&s.push("fc-event-draggable"),t.isStart&&s.push("fc-corner-top"),t.isEnd&&s.push("fc-corner-bottom"),s=s.concat(e.className),e.source&&(s=s.concat(e.source.className||[])),n+=i?"a href='"+U(e.url)+"'":"div",n+=" class='"+s.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+t.top+"px;left:"+t.left+"px;"+o+"'"+">"+"<div class='fc-event-inner fc-event-skin'"+r+">"+"<div class='fc-event-head fc-event-skin'"+r+">"+"<div class='fc-event-time'>"+U(st(e.start,e.end,y("timeFormat")))+"</div>"+"</div>"+"<div class='fc-event-content'>"+"<div class='fc-event-title'>"+U(e.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>"+"</div>",t.isEnd&&_(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(i?"a":"div")+">"
}function h(e,t,n){w(e)&&p(e,t,n.isStart),n.isEnd&&_(e)&&W(e,t,n),N(e,t)}function f(e,t,n){var i=t.find("div.fc-event-time");w(e)&&m(e,t,i),n.isEnd&&_(e)&&g(e,t,i),N(e,t)}function p(e,t,n){function i(){a||(t.width(o).height("").draggable("option","grid",null),a=!0)}var o,r,s,a=!0,c=y("isRTL")?-1:1,u=O(),h=G(),f=Q(),p=H();t.draggable({zIndex:9,opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(p,m){b("eventDragStart",t,e,p,m),Z(e,t),o=t.width(),u.start(function(o,u,p,m){it(),o?(r=!1,s=m*c,o.row?n?a&&(t.width(h-10),P(t,f*Math.round((e.end?(e.end-e.start)/Tt:y("defaultEventMinutes"))/y("slotMinutes"))),t.draggable("option","grid",[h,1]),a=!1):r=!0:(nt(l(d(e.start),s),l(x(e),s)),i()),r=r||a&&!s):(i(),r=!0),t.draggable("option","revert",r)},p,"drag")},stop:function(n,o){if(u.stop(),it(),b("eventDragStop",t,e,n,o),r)i(),t.css("filter",""),J(e,t);else{var l=0;a||(l=Math.round((t.offset().top-Y().offset().top)/f)*y("slotMinutes")+p-(60*e.start.getHours()+e.start.getMinutes())),et(this,e,s,l,a,n,o)}}})}function m(e,t,n){function i(t){var i,o=u(d(e.start),t);e.end&&(i=u(d(e.end),t)),n.text(st(o,i,y("timeFormat")))}function o(){h&&(n.css("display",""),t.draggable("option","grid",[g,v]),h=!1)}var r,s,a,c,h=!1,f=y("isRTL")?-1:1,p=O(),m=$(),g=G(),v=Q();t.draggable({zIndex:9,scroll:!1,grid:[g,v],axis:1==m?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(i,u){b("eventDragStart",t,e,i,u),Z(e,t),r=t.position(),a=c=0,p.start(function(i,r,a,c){t.draggable("option","revert",!i),it(),i&&(s=c*f,y("allDaySlot")&&!i.row?(h||(h=!0,n.hide(),t.draggable("option","grid",null)),nt(l(d(e.start),s),l(x(e),s))):o())},i,"drag")},drag:function(e,t){a=Math.round((t.position.top-r.top)/v)*y("slotMinutes"),a!=c&&(h||i(a),c=a)},stop:function(n,l){var c=p.stop();it(),b("eventDragStop",t,e,n,l),c&&(s||a||h)?et(this,e,s,h?0:a,h,n,l):(o(),t.css("filter",""),t.css(r),i(0),J(e,t))}})}function g(e,t,n){var i,o,r=Q();t.resizable({handles:{s:"div.ui-resizable-s"},grid:r,start:function(n,r){i=o=0,Z(e,t),t.css("z-index",9),b("eventResizeStart",this,e,n,r)},resize:function(s,a){i=Math.round((Math.max(r,t.height())-a.originalSize.height)/r),i!=o&&(n.text(st(e.start,i||e.end?u(C(e),y("slotMinutes")*i):null,y("timeFormat"))),o=i)},stop:function(n,o){b("eventResizeStop",this,e,n,o),i?tt(this,e,0,y("slotMinutes")*i,n,o):(t.css("z-index",8),J(e,t))}})}var v=this;v.renderEvents=n,v.compileDaySegs=o,v.clearEvents=i,v.slotSegHtml=c,v.bindDaySeg=h,ut.call(v);var y=v.opt,b=v.trigger,w=v.isEventDraggable,_=v.isEventResizable,C=v.eventEnd,E=v.reportEvents,S=v.reportEventClear,N=v.eventElementHandlers,D=v.setHeight,M=v.getDaySegmentContainer,R=v.getSlotSegmentContainer,O=v.getHoverListener,F=v.getMaxMinute,H=v.getMinMinute,B=v.timePosition,L=v.colContentLeft,q=v.colContentRight,z=v.renderDaySegs,W=v.resizableDayEvent,$=v.getColCnt,G=v.getColWidth,Q=v.getSlotHeight,Y=v.getBodyContent,K=v.reportEventElement,J=v.showEvents,Z=v.hideEvents,et=v.eventDrop,tt=v.eventResize,nt=v.renderDayOverlay,it=v.clearOverlays,ot=v.calendar,rt=ot.formatDate,st=ot.formatDates}function lt(e){var t,n,i,o,r,s;for(t=e.length-1;t>0;t--)for(o=e[t],n=0;n<o.length;n++)for(r=o[n],i=0;i<e[t-1].length;i++)s=e[t-1][i],S(r,s)&&(s.forward=Math.max(s.forward||0,(r.forward||0)+1))}function ct(e,n,i){function o(e,t){var n=A[e];return"object"==typeof n?$(n,t||i):n}function r(e,t){return n.trigger.apply(n,[e,t||E].concat(Array.prototype.slice.call(arguments,2),[E]))}function s(e){return c(e)&&!o("disableDragging")}function a(e){return c(e)&&!o("disableResizing")}function c(e){return J(e.editable,(e.source||{}).editable,o("editable"))}function h(e){I={};var t,n,i=e.length;for(t=0;i>t;t++)n=e[t],I[n._id]?I[n._id].push(n):I[n._id]=[n]}function f(e){return e.end?d(e.end):S(e)}function p(e,t){N.push(t),P[e._id]?P[e._id].push(t):P[e._id]=[t]}function m(){N=[],P={}}function g(e,t){t.click(function(n){return t.hasClass("ui-draggable-dragging")||t.hasClass("ui-resizable-resizing")?void 0:r("eventClick",this,e,n)}).hover(function(t){r("eventMouseover",this,e,t)},function(t){r("eventMouseout",this,e,t)})}function v(e,t){b(e,t,"show")}function y(e,t){b(e,t,"hide")}function b(e,t,n){var i,o=P[e._id],r=o.length;for(i=0;r>i;i++)t&&o[i][0]==t[0]||o[i][n]()}function w(e,t,n,i,o,s,a){var l=t.allDay,c=t._id;x(I[c],n,i,o),r("eventDrop",e,t,n,i,o,function(){x(I[c],-n,-i,l),k(c)},s,a),k(c)}function _(e,t,n,i,o,s){var a=t._id;C(I[a],n,i),r("eventResize",e,t,n,i,function(){C(I[a],-n,-i),k(a)},o,s),k(a)}function x(e,n,i,o){i=i||0;for(var r,s=e.length,a=0;s>a;a++)r=e[a],o!==t&&(r.allDay=o),u(l(r.start,n,!0),i),r.end&&(r.end=u(l(r.end,n,!0),i)),T(r,A)}function C(e,t,n){n=n||0;for(var i,o=e.length,r=0;o>r;r++)i=e[r],i.end=u(l(f(i),t,!0),n),T(i,A)}var E=this;E.element=e,E.calendar=n,E.name=i,E.opt=o,E.trigger=r,E.isEventDraggable=s,E.isEventResizable=a,E.reportEvents=h,E.eventEnd=f,E.reportEventElement=p,E.reportEventClear=m,E.eventElementHandlers=g,E.showEvents=v,E.hideEvents=y,E.eventDrop=w,E.eventResize=_;var S=E.defaultEventEnd,T=n.normalizeEvent,k=n.reportEventChange,I={},N=[],P={},A=n.options}function ut(){function n(e,t){var n,i,l,d,g,v,y,b,w=B(),_=k(),x=N(),C=0,E=e.length;for(w[0].innerHTML=o(e),r(e,w.children()),s(e),a(e,w,t),c(e),u(e),h(e),n=f(),i=0;_>i;i++){for(l=0,d=[],g=0;x>g;g++)d[g]=0;for(;E>C&&(v=e[C]).row==i;){for(y=z(d.slice(v.startCol,v.endCol)),v.top=y,y+=v.outerHeight,b=v.startCol;b<v.endCol;b++)d[b]=y;C++}n[i].height(z(d))}m(e,p(n))}function i(t,n,i){var s,a,l,d=e("<div/>"),g=B(),v=t.length;for(d[0].innerHTML=o(t),s=d.children(),g.append(s),r(t,s),c(t),u(t),h(t),m(t,p(f())),s=[],a=0;v>a;a++)l=t[a].element,l&&(t[a].row===n&&l.css("top",i),s.push(l[0]));return e(s)}function o(e){var t,n,i,o,r,s,a,l,c,u,h=y("isRTL"),d=e.length,f=D(),p=f.left,m=f.right,g="";for(t=0;d>t;t++)n=e[t],i=n.event,r=["fc-event","fc-event-skin","fc-event-hori"],w(i)&&r.push("fc-event-draggable"),h?(n.isStart&&r.push("fc-corner-right"),n.isEnd&&r.push("fc-corner-left"),s=j(n.end.getDay()-1),a=j(n.start.getDay()),l=n.isEnd?M(s):p,c=n.isStart?R(a):m):(n.isStart&&r.push("fc-corner-left"),n.isEnd&&r.push("fc-corner-right"),s=j(n.start.getDay()),a=j(n.end.getDay()-1),l=n.isStart?M(s):p,c=n.isEnd?R(a):m),r=r.concat(i.className),i.source&&(r=r.concat(i.source.className||[])),o=i.url,u=X(i,y),g+=o?"<a href='"+U(o)+"'":"<div",g+=" class='"+r.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+l+"px;"+u+"'"+">"+"<div"+" class='fc-event-inner fc-event-skin'"+(u?" style='"+u+"'":"")+">",!i.allDay&&n.isStart&&(g+="<span class='fc-event-time'>"+U(q(i.start,i.end,y("timeFormat")))+"</span>"),g+="<span class='fc-event-title'>"+U(i.title)+"</span>"+"</div>",n.isEnd&&_(i)&&(g+="<div class='ui-resizable-handle ui-resizable-"+(h?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),g+="</"+(o?"a":"div")+">",n.left=l,n.outerWidth=c-l,n.startCol=s,n.endCol=a+1;return g}function r(t,n){var i,o,r,s,a,l=t.length;for(i=0;l>i;i++)o=t[i],r=o.event,s=e(n[i]),a=b("eventRender",r,r,s),a===!1?s.remove():(a&&a!==!0&&(a=e(a).css({position:"absolute",left:o.left}),s.replaceWith(a),s=a),o.element=s)}function s(e){var t,n,i,o=e.length;for(t=0;o>t;t++)n=e[t],i=n.element,i&&C(n.event,i)}function a(e,t,n){var i,o,r,s,a=e.length;for(i=0;a>i;i++)o=e[i],r=o.element,r&&(s=o.event,s._id===n?L(s,r,o):r[0]._fci=i);I(t,e,L)}function c(e){var n,i,o,r,s,a=e.length,l={};for(n=0;a>n;n++)i=e[n],o=i.element,o&&(r=i.key=V(o[0]),s=l[r],s===t&&(s=l[r]=A(o,!0)),i.hsides=s)}function u(e){var t,n,i,o=e.length;for(t=0;o>t;t++)n=e[t],i=n.element,i&&(i[0].style.width=Math.max(0,n.outerWidth-n.hsides)+"px")}function h(e){var n,i,o,r,s,a=e.length,l={};for(n=0;a>n;n++)i=e[n],o=i.element,o&&(r=i.key,s=l[r],s===t&&(s=l[r]=F(o)),i.outerHeight=o[0].offsetHeight+s)}function f(){var e,t=k(),n=[];for(e=0;t>e;e++)n[e]=P(e).find("td:first div.fc-day-content > div");return n}function p(e){var t,n=e.length,i=[];for(t=0;n>t;t++)i[t]=e[t][0].offsetTop;return i}function m(e,t){var n,i,o,r,s=e.length;for(n=0;s>n;n++)i=e[n],o=i.element,o&&(o[0].style.top=t[i.row]+(i.top||0)+"px",r=i.event,b("eventAfterRender",r,r,o))}function g(t,n,o){var r=y("isRTL"),s=r?"w":"e",a=n.find("div.ui-resizable-"+s),c=!1;G(n),n.mousedown(function(e){e.preventDefault()}).click(function(e){c&&(e.preventDefault(),e.stopImmediatePropagation())}),a.mousedown(function(a){function u(n){b("eventResizeStop",this,t,n),e("body").css("cursor",""),p.stop(),$(),h&&T(this,t,h,0,n),setTimeout(function(){c=!1},0)}if(1==a.which){c=!0;var h,f,p=v.getHoverListener(),m=k(),g=N(),y=r?-1:1,w=r?g-1:0,_=n.css("top"),C=e.extend({},t),I=O(t.start);Q(),e("body").css("cursor",s+"-resize").one("mouseup",u),b("eventResizeStart",this,t,a),p.start(function(e,n){if(e){var a=Math.max(I.row,e.row),c=e.col;1==m&&(a=0),a==I.row&&(c=r?Math.min(I.col,c):Math.max(I.col,c)),h=7*a+c*y+w-(7*n.row+n.col*y+w);var u=l(x(t),h,!0);if(h){C.end=u;var p=f;f=i(H([C]),o.row,_),f.find("*").css("cursor",s+"-resize"),p&&p.remove(),S(t)}else f&&(E(t),f.remove(),f=null);$(),W(t.start,l(d(u),1))}},a)}})}var v=this;v.renderDaySegs=n,v.resizableDayEvent=g;var y=v.opt,b=v.trigger,w=v.isEventDraggable,_=v.isEventResizable,x=v.eventEnd,C=v.reportEventElement,E=v.showEvents,S=v.hideEvents,T=v.eventResize,k=v.getRowCnt,N=v.getColCnt;v.getColWidth;var P=v.allDayRow,D=v.allDayBounds,M=v.colContentLeft,R=v.colContentRight,j=v.dayOfWeekCol,O=v.dateCell,H=v.compileDaySegs,B=v.getDaySegmentContainer,L=v.bindDaySeg,q=v.calendar.formatDates,W=v.renderDayOverlay,$=v.clearOverlays,Q=v.clearSelection}function ht(){function t(e,t,o){n(),t||(t=l(e,o)),c(e,t,o),i(e,t,o)}function n(e){h&&(h=!1,u(),a("unselect",null,e))}function i(e,t,n,i){h=!0,a("select",null,e,t,n,i)}function o(t){var o=r.cellDate,a=r.cellIsAllDay,l=r.getHoverListener(),h=r.reportDayClick;if(1==t.which&&s("selectable")){n(t);var d;l.start(function(e,t){u(),e&&a(e)?(d=[o(t),o(e)].sort(q),c(d[0],d[1],!0)):d=null},t),e(document).one("mouseup",function(e){l.stop(),d&&(+d[0]==+d[1]&&h(d[0],!0,e),i(d[0],d[1],!0,e))})}}var r=this;r.select=t,r.unselect=n,r.reportSelection=i,r.daySelectionMousedown=o;var s=r.opt,a=r.trigger,l=r.defaultSelectionEnd,c=r.renderSelection,u=r.clearSelection,h=!1;s("selectable")&&s("unselectAuto")&&e(document).mousedown(function(t){var i=s("unselectCancel");i&&e(t.target).parents(i).length||n(t)})}function dt(){function t(t,n){var i=r.shift();return i||(i=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),i[0].parentNode!=n[0]&&i.appendTo(n),o.push(i.css(t).show()),i}function n(){for(var e;e=o.shift();)r.push(e.hide().unbind())}var i=this;i.renderOverlay=t,i.clearOverlays=n;var o=[],r=[]}function ft(e){var t,n,i=this;i.build=function(){t=[],n=[],e(t,n)},i.cell=function(e,i){var o,r=t.length,s=n.length,a=-1,l=-1;for(o=0;r>o;o++)if(i>=t[o][0]&&i<t[o][1]){a=o;break}for(o=0;s>o;o++)if(e>=n[o][0]&&e<n[o][1]){l=o;break}return a>=0&&l>=0?{row:a,col:l}:null},i.rect=function(e,i,o,r,s){var a=s.offset();return{top:t[e][0]-a.top,left:n[i][0]-a.left,width:n[r][1]-n[i][0],height:t[o][1]-t[e][0]}}}function pt(t){function n(e){mt(e);var n=t.cell(e.pageX,e.pageY);(!n!=!s||n&&(n.row!=s.row||n.col!=s.col))&&(n?(r||(r=n),o(n,r,n.row-r.row,n.col-r.col)):o(n,r),s=n)}var i,o,r,s,a=this;a.start=function(a,l,c){o=a,r=s=null,t.build(),n(l),i=c||"mousemove",e(document).bind(i,n)},a.stop=function(){return e(document).unbind(i,n),s}}function mt(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function gt(e){function n(t){return o[t]=o[t]||e(t)}var i=this,o={},r={},s={};i.left=function(e){return r[e]=r[e]===t?n(e).position().left:r[e]},i.right=function(e){return s[e]=s[e]===t?i.left(e)+n(e).width():s[e]},i.clear=function(){o={},r={},s={}}}var vt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},yt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},bt=e.fullCalendar={version:"1.5.4"},wt=bt.views={};e.fn.fullCalendar=function(n){if("string"==typeof n){var o,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=e.data(this,"fullCalendar");if(i&&e.isFunction(i[n])){var s=i[n].apply(i,r);o===t&&(o=s),"destroy"==n&&e.removeData(this,"fullCalendar")}}),o!==t?o:this}var s=n.eventSources||[];return delete n.eventSources,n.events&&(s.push(n.events),delete n.events),n=e.extend(!0,{},vt,n.isRTL||n.isRTL===t&&vt.isRTL?yt:{},n),this.each(function(t,o){var r=e(o),a=new i(r,n,s);r.data("fullCalendar",a),a.render()}),this},bt.sourceNormalizers=[],bt.sourceFetchers=[];var _t={dataType:"json",cache:!1},xt=1;bt.addDays=l,bt.cloneDate=d,bt.parseDate=v,bt.parseISO8601=y,bt.parseTime=b,bt.formatDate=w,bt.formatDates=_;var Ct=["sun","mon","tue","wed","thu","fri","sat"],Et=864e5,St=36e5,Tt=6e4,kt={s:function(e){return e.getSeconds()},ss:function(e){return W(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return W(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return W(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return W(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return W(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return W(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return w(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"}};bt.applyAll=K,wt.month=Z,wt.basicWeek=et,wt.basicDay=tt,n({weekMode:"fixed"}),wt.agendaWeek=ot,wt.agendaDay=rt,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery);var Scheduler=Scheduler||{};Scheduler.form=function(e){var t,n=function(n,o){if(t=n,i(n.find("select.scheduler-frequency").val()),n.on("change","select.scheduler-frequency",function(){i(e(this).val())}),o){var r=(o.getDay()+6)%7,s=Math.floor((o.getDate()+6)/7);s>3&&(s=-1),n.find("#event_week_days_"+r).attr("checked","checked"),n.find("#event_week_day_order").val(s),n.find("#event_week_day").val(r)}},i=function(e){t.find("#scheduler-options").children("div").hide(),t.find("#scheduler-options").find("select,input").attr("disabled","disabled"),t.find("#scheduler-frequency-"+e).show(),t.find("#scheduler-frequency-"+e).find("select,input").removeAttr("disabled")},o=function(e){var t=e.find("select.scheduler-frequency");t.find('option[value="0"]').prop("selected",!0),t.change()};return{init:n,reset:o}}(jQuery),SocialStream.Events=SocialStream.Events||{},SocialStream.Events.current=SocialStream.Events.current||{},function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function n(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}n.prototype={show:function(){function n(){s.hoverTooltip=!0}function i(){if("in"!=s.hoverState&&(s.hoverTooltip=!1,"manual"!=s.options.trigger)){var e="hover"==s.options.trigger?"mouseleave.tipsy":"blur.tipsy";s.$element.trigger(e)}}var o=this.getTitle();if(o&&this.enabled){var r=this.tip();r.find(".tipsy-inner")[this.options.html?"html":"text"](o),r[0].className="tipsy",r.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var s=this;this.options.hoverable&&r.hover(n,i);var a,l=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),c=r[0].offsetWidth,u=r[0].offsetHeight,h=t(this.options.gravity,this.$element[0]);switch(h.charAt(0)){case"n":a={top:l.top+l.height+this.options.offset,left:l.left+l.width/2-c/2};break;case"s":a={top:l.top-u-this.options.offset,left:l.left+l.width/2-c/2};break;case"e":a={top:l.top+l.height/2-u/2,left:l.left-c-this.options.offset};break;case"w":a={top:l.top+l.height/2-u/2,left:l.left+l.width+this.options.offset}}2==h.length&&(a.left="w"==h.charAt(1)?l.left+l.width/2-15:l.left+l.width/2-c+15),r.css(a).addClass("tipsy-"+h),r.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+h.charAt(0),this.options.className&&r.addClass(t(this.options.className,this.$element[0])),this.options.fade?r.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):r.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;this.fixTitle();var e,n=this.options;return"string"==typeof n.title?e=t.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(e=n.title.call(t[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||n.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>')),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function i(i){var o=e.data(i,"tipsy");return o||(o=new n(i,e.fn.tipsy.elementOptions(i,t)),e.data(i,"tipsy",o)),o}function o(){var e=i(this);e.hoverState="in",0==t.delayIn?e.show():(e.fixTitle(),setTimeout(function(){"in"==e.hoverState&&e.show()},t.delayIn))}function r(){var e=i(this);e.hoverState="out",0==t.delayOut?e.hide():setTimeout(function(){"out"!=e.hoverState||e.hoverTooltip||e.hide()},t.delayOut)}if(t===!0)return this.data("tipsy");if("string"==typeof t){var s=this.data("tipsy");return s&&s[t](),this}if(t=e.extend({},e.fn.tipsy.defaults,t),t.hoverable&&(t.delayOut=t.delayOut||200),t.live||this.each(function(){i(this)}),"manual"!=t.trigger){var a=t.live?"live":"bind",l="hover"==t.trigger?"mouseenter.tipsy":"focus.tipsy",c="hover"==t.trigger?"mouseleave.tipsy":"blur.tipsy";this[a](l,o)[a](c,r)}return this},e.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,hoverable:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoBounds=function(t,n){return function(){var i={ns:n[0],ew:n.length>1?n[1]:!1},o=e(document).scrollTop()+t,r=e(document).scrollLeft()+t,s=e(this);return s.offset().top<o&&(i.ns="n"),s.offset().left<r&&(i.ew="w"),e(window).width()+e(document).scrollLeft()-s.offset().left<t&&(i.ew="e"),e(window).height()+e(document).scrollTop()-s.offset().top<t&&(i.ns="s"),i.ns+(i.ew?i.ew:"")}}}(jQuery),SocialStream.Calendar=function(e,t){var n,i=function(){return t("#sidebar_calendar")},o=new RegExp("day_(..?)_(..?)_(..?.?.?)"),r=function(e){return o.exec(t(e).attr("id"))},s=function(e){var t=r(e);if(null!=t)return new Date(t[3],t[2]-1,t[1],23,59,59)},a=function(e){return t("#day_"+e.getDate()+"_"+(e.getMonth()+1)+"_"+e.getFullYear())},l=function(){var e=t("#sidebar_calendar"),i=e.attr("data-start"),o=e.attr("data-end");n=e.attr("data-path");var r=new Date;a(r).addClass("today"),e.find("#days td").each(function(e,n){var i=s(n);r>i&&t(n).addClass("past"),i.getMonth()!=r.getMonth()&&i>r&&t(n).addClass("next_month")}),t.ajax({dataType:"json",cache:!1,url:n,data:{start:i,end:o},success:c})},c=function(e){t.each(e,function(e,n){var o=new Date(n.start),r=new Date(n.end);for(loopTime=o.getTime();loopTime<=r.getTime();loopTime+=864e5){var s=new Date(loopTime),l=a(s);l.addClass("busy")}i().find(".busy").click(function(e){e.preventDefault(),u(t(this))})})},u=function(e){e.attr("data-loaded")||h(e),t("#modal-"+e.attr("id")).modal("show")},h=function(e){var n=t("#modal-sidebar_calendar").clone();n.attr("id","modal-"+e.attr("id")),n.find(".modal-header h3").html(d(e)),n.find("button.view-calendar").click(function(){document.location.href=e.find("a").attr("href")}),f(e),n.appendTo(t("body")),n.modal(),e.attr("data-loaded",!0)},d=function(e){var t=s(e);return I18n.t("event.popover.title",{date:I18n.l("date.formats.long",t)})},f=function(e){var i=s(e);i.setHours(0),i.setMinutes(0),i.setSeconds(0);var o=s(e);t.ajax({dataType:"script",url:n,data:{start:Math.round(i.getTime()/1e3),end:Math.round(o.getTime()/1e3),day:e.attr("id")}})};return{show:l,element:i,eventElement:a}}(SocialStream,jQuery),SocialStream.Events.Poster=function(e,t){var n=new e.Callback,i=function(){t(".event .poster .update").hide(),t(".event .poster").hover(function(){t(this).find(".update").fadeIn("slow")},function(){t(this).find(".update").fadeOut("slow")})};return n.register("show",i),n.extend({})}(SocialStream,jQuery),SocialStream.Event=function(e,t){var n=new e.Callback,i=function(){return e.Events.current.eventColor},o=function(){t(".event").each(function(){dateString=t(this).find("time").attr("datetime"),date=new Date(dateString);var e=t(this).find(".event .day");e.length&&e.text(t.datepicker.formatDate("d",date));var n=t(this).find(".event .month");n.length&&n.text(t.datepicker.formatDate("M",date));var i=t(this).find(".event .hour");if(i.length){var o=date.getMinutes();10>o&&(o="0"+o),i.text(date.getHours()+":"+o)}})};return n.register("index",o,SocialStream.Events.Poster.show),n.extend({color:i})}(SocialStream,jQuery),SocialStream.Events.Action=function(e){var t=function(t){if("Event"==t.activity_object.type&&t.follow){var n=e.Action.followForms(t).closest(".event"),i=new Date(n.find("time").attr("datetime")),o=e.Calendar.eventElement(i);0===o.length&&(o=e.Calendar.element()),t.follow.following?(n.find(".poster").effect("transfer",{to:o}),o.addClass("busy")):(o.effect("transfer",{to:n.find(".poster")}),o.effect("pulsate"))}};return e.Action.callbackRegister("update",t),{}}(SocialStream,jQuery),SocialStream.Timeline.callbackRegister("show",SocialStream.Event.index),SocialStream.Timeline.callbackRegister("update",SocialStream.Event.index),SocialStream.FullCalendar=function(e,t,n){var i,o=new e.Callback,r="gray",s=function(){return i},a=function(){return t("#calendar")},l=function(){return t("#calendar_form")},c=function(){var e=a(),n={header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},ignoreTimezone:!1,firstDay:1,eventColor:r,events:d,eventClick:m};e.attr("data-can-create")&&t.extend(n,{selectable:!0,selectHelper:!0,select:h}),i=e.fullCalendar(n),t(".fc-button-content").each(function(){t(this).parent().parent().html(t(this).html())}),e.attr("data-date")&&i.fullCalendar("gotoDate",new Date(1e3*e.attr("data-date"))),e.attr("data-view")&&i.fullCalendar("changeView",e.attr("data-view"))},u=function(){l().modal({show:!1})},h=function(e,t,i){var o=l().find(".new_event");o.children("#event_start_at").val(e.toJSON()),o.children("#event_end_at").val(t.toJSON()),o.children("#event_all_day").val(i.toString()),n.form.init(o.find(".scheduler_form"),e),l().modal("show")},d=function(e,n,i){t.ajax({url:a().attr("data-events_path"),dataType:"json",data:{start:Math.round(e.getTime()/1e3),end:Math.round(n.getTime()/1e3)},success:function(e){i(t.map(e,function(e){return e.color=r,e}))}})},f=function(e){l().modal("hide"),t.each(JSON.parse(e.events),function(e,t){t.color=r,i.fullCalendar("renderEvent",t,!0)}),i.fullCalendar("unselect")},p=function(){var e=l();e.find("#event_title").val(""),e.find("#event_description").val(""),n.form.reset(e.find(".scheduler_form"))},m=function(e){t.ajax({url:a().attr("data-events_path")+"/"+e.id,dataType:"html",success:function(e){t(e).modal()}})};return o.register("show",c,u,e.Object.new_),o.register("create",f,p),o.extend({current:s,getFormEl:l})}(SocialStream,jQuery,Scheduler),SocialStream.Linkser=SocialStream.Linkser||{},SocialStream.Link=function(e,t){var n=new e.Callback,i=function(){t(".link .play_over").click(o)},o=function(){var e=t(this).attr("data-url"),n=t(this).attr("data-height"),i=t(this).attr("data-width"),o="353";i>0&&n>0&&(o=470*n/i),t(this).closest(".link").html(t("<iframe>").attr("src",e).attr("width","470").attr("height",o))};return n.register("index",i),n.register("show",i),n.extend({})}(SocialStream,jQuery),SocialStream.Timeline.callbackRegister("show",SocialStream.Link.index),SocialStream.Timeline.callbackRegister("update",SocialStream.Link.index),SocialStream.Linkser.Wall=function(e,t){var n=/^(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&;:\/~+#-]*[\w@?^=%&;\/~+#-])?$/,i=function(){if(this.currentValue=t("#post_text").val(),null===this.lastValue&&(this.lastValue=""),n.test(t("#post_text").val())){if(t("#post_text").data("link",!0),t("#link_url").val(t("#post_text").val()),t("#link_loaded").val(!1),e.Wall.changeAction(t("#link_preview_loading").attr("data-link_path")),e.Wall.changeParams("link"),this.currentValue!=this.lastValue){r(),this.lastValue=this.currentValue;var i=this.currentValue;t.ajax({type:"GET",url:"/linkser_parse?url="+i,dataType:"html",success:function(e){t("#post_text").val()==i&&(t("#link_preview").html(e),t("#link_loaded").val(!0))},error:function(){t("#post_text").val()==i&&t("#link_preview").html(t("<div>").addClass("loading").html(I18n.t("link.errors.loading")+" "+i))}})}t("#link_preview").show()}else t("#post_text").data("link")&&(t("#post_text").data("link",!1),o({postText:!1}))},o=function(n){t("#link_preview").hide().html(""),t("#link_url").val(""),e.Wall.changeAction(),e.Wall.changeParams("post"),n.postText&&t("#post_text").val("")},r=function(){t("#link_preview").html(t("#link_preview_loading").html())},s=function(){t("#link_preview_loading").hide(),t("#new_post").length&&(t("#post_text").change(i).keyup(i),t("#post_text").after(t("<div>",{id:"link_preview"}).css("display","none")))},a=function(){o({postText:!0})};return SocialStream.Wall.callbackRegister("show",s),{create:a}}(SocialStream,jQuery);var Base64=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t={encode:function(t){var n,i,o,r,s,a,l,c="",u=0;do n=t.charCodeAt(u++),i=t.charCodeAt(u++),o=t.charCodeAt(u++),r=n>>2,s=(3&n)<<4|i>>4,a=(15&i)<<2|o>>6,l=63&o,isNaN(i)?a=l=64:isNaN(o)&&(l=64),c=c+e.charAt(r)+e.charAt(s)+e.charAt(a)+e.charAt(l);while(u<t.length);return c},decode:function(t){var n,i,o,r,s,a,l,c="",u=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do r=e.indexOf(t.charAt(u++)),s=e.indexOf(t.charAt(u++)),a=e.indexOf(t.charAt(u++)),l=e.indexOf(t.charAt(u++)),n=r<<2|s>>4,i=(15&s)<<4|a>>2,o=(3&a)<<6|l,c+=String.fromCharCode(n),64!=a&&(c+=String.fromCharCode(i)),64!=l&&(c+=String.fromCharCode(o));while(u<t.length);return c}};return t}(),MD5=function(){var e=0,t="",n=8,i=function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n},o=function(e,t){return e<<t|e>>>32-t},r=function(e){for(var t=[],i=(1<<n)-1,o=0;o<e.length*n;o+=n)t[o>>5]|=(e.charCodeAt(o/n)&i)<<o%32;return t},s=function(e){for(var t="",i=(1<<n)-1,o=0;o<32*e.length;o+=n)t+=String.fromCharCode(e[o>>5]>>>o%32&i);return t},a=function(t){for(var n=e?"0123456789ABCDEF":"0123456789abcdef",i="",o=0;o<4*t.length;o++)i+=n.charAt(15&t[o>>2]>>8*(o%4)+4)+n.charAt(15&t[o>>2]>>8*(o%4));return i},l=function(e){for(var n,i,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",s=0;s<4*e.length;s+=3)for(n=(255&e[s>>2]>>8*(s%4))<<16|(255&e[s+1>>2]>>8*((s+1)%4))<<8|255&e[s+2>>2]>>8*((s+2)%4),i=0;4>i;i++)r+=8*s+6*i>32*e.length?t:o.charAt(63&n>>6*(3-i));return r},c=function(e,t,n,r,s,a){return i(o(i(i(t,e),i(r,a)),s),n)},u=function(e,t,n,i,o,r,s){return c(t&n|~t&i,e,t,o,r,s)},h=function(e,t,n,i,o,r,s){return c(t&i|n&~i,e,t,o,r,s)},d=function(e,t,n,i,o,r,s){return c(t^n^i,e,t,o,r,s)},f=function(e,t,n,i,o,r,s){return c(n^(t|~i),e,t,o,r,s)},p=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n,o,r,s,a=1732584193,l=-271733879,c=-1732584194,p=271733878,m=0;m<e.length;m+=16)n=a,o=l,r=c,s=p,a=u(a,l,c,p,e[m+0],7,-680876936),p=u(p,a,l,c,e[m+1],12,-389564586),c=u(c,p,a,l,e[m+2],17,606105819),l=u(l,c,p,a,e[m+3],22,-1044525330),a=u(a,l,c,p,e[m+4],7,-176418897),p=u(p,a,l,c,e[m+5],12,1200080426),c=u(c,p,a,l,e[m+6],17,-1473231341),l=u(l,c,p,a,e[m+7],22,-45705983),a=u(a,l,c,p,e[m+8],7,1770035416),p=u(p,a,l,c,e[m+9],12,-1958414417),c=u(c,p,a,l,e[m+10],17,-42063),l=u(l,c,p,a,e[m+11],22,-1990404162),a=u(a,l,c,p,e[m+12],7,1804603682),p=u(p,a,l,c,e[m+13],12,-40341101),c=u(c,p,a,l,e[m+14],17,-1502002290),l=u(l,c,p,a,e[m+15],22,1236535329),a=h(a,l,c,p,e[m+1],5,-165796510),p=h(p,a,l,c,e[m+6],9,-1069501632),c=h(c,p,a,l,e[m+11],14,643717713),l=h(l,c,p,a,e[m+0],20,-373897302),a=h(a,l,c,p,e[m+5],5,-701558691),p=h(p,a,l,c,e[m+10],9,38016083),c=h(c,p,a,l,e[m+15],14,-660478335),l=h(l,c,p,a,e[m+4],20,-405537848),a=h(a,l,c,p,e[m+9],5,568446438),p=h(p,a,l,c,e[m+14],9,-1019803690),c=h(c,p,a,l,e[m+3],14,-187363961),l=h(l,c,p,a,e[m+8],20,1163531501),a=h(a,l,c,p,e[m+13],5,-1444681467),p=h(p,a,l,c,e[m+2],9,-51403784),c=h(c,p,a,l,e[m+7],14,1735328473),l=h(l,c,p,a,e[m+12],20,-1926607734),a=d(a,l,c,p,e[m+5],4,-378558),p=d(p,a,l,c,e[m+8],11,-2022574463),c=d(c,p,a,l,e[m+11],16,1839030562),l=d(l,c,p,a,e[m+14],23,-35309556),a=d(a,l,c,p,e[m+1],4,-1530992060),p=d(p,a,l,c,e[m+4],11,1272893353),c=d(c,p,a,l,e[m+7],16,-155497632),l=d(l,c,p,a,e[m+10],23,-1094730640),a=d(a,l,c,p,e[m+13],4,681279174),p=d(p,a,l,c,e[m+0],11,-358537222),c=d(c,p,a,l,e[m+3],16,-722521979),l=d(l,c,p,a,e[m+6],23,76029189),a=d(a,l,c,p,e[m+9],4,-640364487),p=d(p,a,l,c,e[m+12],11,-421815835),c=d(c,p,a,l,e[m+15],16,530742520),l=d(l,c,p,a,e[m+2],23,-995338651),a=f(a,l,c,p,e[m+0],6,-198630844),p=f(p,a,l,c,e[m+7],10,1126891415),c=f(c,p,a,l,e[m+14],15,-1416354905),l=f(l,c,p,a,e[m+5],21,-57434055),a=f(a,l,c,p,e[m+12],6,1700485571),p=f(p,a,l,c,e[m+3],10,-1894986606),c=f(c,p,a,l,e[m+10],15,-1051523),l=f(l,c,p,a,e[m+1],21,-2054922799),a=f(a,l,c,p,e[m+8],6,1873313359),p=f(p,a,l,c,e[m+15],10,-30611744),c=f(c,p,a,l,e[m+6],15,-1560198380),l=f(l,c,p,a,e[m+13],21,1309151649),a=f(a,l,c,p,e[m+4],6,-145523070),p=f(p,a,l,c,e[m+11],10,-1120210379),c=f(c,p,a,l,e[m+2],15,718787259),l=f(l,c,p,a,e[m+9],21,-343485551),a=i(a,n),l=i(l,o),c=i(c,r),p=i(p,s);return[a,l,c,p]},m=function(e,t){var i=r(e);i.length>16&&(i=p(i,e.length*n));for(var o=new Array(16),s=new Array(16),a=0;16>a;a++)o[a]=909522486^i[a],s[a]=1549556828^i[a];var l=p(o.concat(r(t)),512+t.length*n);return p(s.concat(l),640)},g={hexdigest:function(e){return a(p(r(e),e.length*n))},b64digest:function(e){return l(p(r(e),e.length*n))},hash:function(e){return s(p(r(e),e.length*n))},hmac_hexdigest:function(e,t){return a(m(e,t))},hmac_b64digest:function(e,t){return l(m(e,t))},hmac_hash:function(e,t){return s(m(e,t))},test:function(){return"900150983cd24fb0d6963f7d28e17f72"===MD5.hexdigest("abc")}};return g}();/*
    This program is distributed under the terms of the MIT license.
    Please see the LICENSE file for details.

    Copyright 2006-2008, OGG, LLC
*/
Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice,i=Array.prototype.concat,o=n.call(arguments,1);return function(){return t.apply(e?e:this,i.call(o,n.call(arguments,0)))}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),function(e){function t(e,t){return new r.Builder(e,t)}function n(e){return new r.Builder("message",e)}function i(e){return new r.Builder("iq",e)}function o(e){return new r.Builder("presence",e)}var r;r={VERSION:"1.0.2",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas"},addNamespace:function(e,t){r.NS[e]=t},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,forEachChild:function(e,t,n){var i,o;for(i=0;i<e.childNodes.length;i++)o=e.childNodes[i],o.nodeType!=r.ElementType.NORMAL||t&&!this.isTagEqual(o,t)||n(o)},isTagEqual:function(e,t){return e.tagName.toLowerCase()==t.toLowerCase()},_xmlGenerator:null,_makeGenerator:function(){var e;return void 0===document.implementation.createDocument?(e=this._getIEXmlDom(),e.appendChild(e.createElement("strophe"))):e=document.implementation.createDocument("jabber:client","strophe",null),e},xmlGenerator:function(){return r._xmlGenerator||(r._xmlGenerator=r._makeGenerator()),r._xmlGenerator},_getIEXmlDom:function(){for(var e=null,t=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<t.length&&null===e;n++)try{e=new ActiveXObject(t[n])}catch(i){e=null}return e},xmlElement:function(e){if(!e)return null;var t,n,i,o=r.xmlGenerator().createElement(e);for(t=1;t<arguments.length;t++)if(arguments[t])if("string"==typeof arguments[t]||"number"==typeof arguments[t])o.appendChild(r.xmlTextNode(arguments[t]));else if("object"==typeof arguments[t]&&"function"==typeof arguments[t].sort)for(n=0;n<arguments[t].length;n++)"object"==typeof arguments[t][n]&&"function"==typeof arguments[t][n].sort&&o.setAttribute(arguments[t][n][0],arguments[t][n][1]);else if("object"==typeof arguments[t])for(i in arguments[t])arguments[t].hasOwnProperty(i)&&o.setAttribute(i,arguments[t][i]);return o},xmlescape:function(e){return e=e.replace(/\&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/'/g,"&apos;"),e=e.replace(/"/g,"&quot;")},xmlTextNode:function(e){return e=r.xmlescape(e),r.xmlGenerator().createTextNode(e)},getText:function(e){if(!e)return null;var t="";0===e.childNodes.length&&e.nodeType==r.ElementType.TEXT&&(t+=e.nodeValue);for(var n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeType==r.ElementType.TEXT&&(t+=e.childNodes[n].nodeValue);return t},copyElement:function(e){var t,n;if(e.nodeType==r.ElementType.NORMAL){for(n=r.xmlElement(e.tagName),t=0;t<e.attributes.length;t++)n.setAttribute(e.attributes[t].nodeName.toLowerCase(),e.attributes[t].value);for(t=0;t<e.childNodes.length;t++)n.appendChild(r.copyElement(e.childNodes[t]))}else e.nodeType==r.ElementType.TEXT&&(n=r.xmlGenerator().createTextNode(e.nodeValue));return n},escapeNode:function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(e){return e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(e){return e.indexOf("@")<0?null:e.split("@")[0]},getDomainFromJid:function(e){var t=r.getBareJidFromJid(e);if(t.indexOf("@")<0)return t;var n=t.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(e){var t=e.split("/");return t.length<2?null:(t.splice(0,1),t.join("/"))},getBareJidFromJid:function(e){return e?e.split("/")[0]:null},log:function(){},debug:function(e){this.log(this.LogLevel.DEBUG,e)},info:function(e){this.log(this.LogLevel.INFO,e)},warn:function(e){this.log(this.LogLevel.WARN,e)},error:function(e){this.log(this.LogLevel.ERROR,e)},fatal:function(e){this.log(this.LogLevel.FATAL,e)},serialize:function(e){var t;if(!e)return null;"function"==typeof e.tree&&(e=e.tree());var n,i,o=e.nodeName;for(e.getAttribute("_realname")&&(o=e.getAttribute("_realname")),t="<"+o,n=0;n<e.attributes.length;n++)"_realname"!=e.attributes[n].nodeName&&(t+=" "+e.attributes[n].nodeName.toLowerCase()+"='"+e.attributes[n].value.replace(/&/g,"&amp;").replace(/\'/g,"&apos;").replace(/</g,"&lt;")+"'");if(e.childNodes.length>0){for(t+=">",n=0;n<e.childNodes.length;n++)switch(i=e.childNodes[n],i.nodeType){case r.ElementType.NORMAL:t+=r.serialize(i);break;case r.ElementType.TEXT:t+=r.xmlescape(i.nodeValue);break;case r.ElementType.CDATA:t+="<![CDATA["+i.nodeValue+"]]>"}t+="</"+o+">"}else t+="/>";return t},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(e,t){r._connectionPlugins[e]=t}},r.Builder=function(e,t){("presence"==e||"message"==e||"iq"==e)&&(t&&!t.xmlns?t.xmlns=r.NS.CLIENT:t||(t={xmlns:r.NS.CLIENT})),this.nodeTree=r.xmlElement(e,t),this.node=this.nodeTree},r.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return r.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},attrs:function(e){for(var t in e)e.hasOwnProperty(t)&&this.node.setAttribute(t,e[t]);return this},c:function(e,t,n){var i=r.xmlElement(e,t,n);return this.node.appendChild(i),n||(this.node=i),this},cnode:function(e){var t=r.xmlGenerator();try{var n=void 0!==t.importNode}catch(i){var n=!1}var o=n?t.importNode(e,!0):r.copyElement(e);return this.node.appendChild(o),this.node=o,this},t:function(e){var t=r.xmlTextNode(e);return this.node.appendChild(t),this}},r.Handler=function(e,t,n,i,o,s,a){this.handler=e,this.ns=t,this.name=n,this.type=i,this.id=o,this.options=a||{matchbare:!1},this.options.matchBare||(this.options.matchBare=!1),this.from=this.options.matchBare?s?r.getBareJidFromJid(s):null:s,this.user=!0},r.Handler.prototype={isMatch:function(e){var t,n=null;if(n=this.options.matchBare?r.getBareJidFromJid(e.getAttribute("from")):e.getAttribute("from"),t=!1,this.ns){var i=this;r.forEachChild(e,null,function(e){e.getAttribute("xmlns")==i.ns&&(t=!0)}),t=t||e.getAttribute("xmlns")==this.ns}else t=!0;return!t||this.name&&!r.isTagEqual(e,this.name)||this.type&&e.getAttribute("type")!=this.type||this.id&&e.getAttribute("id")!=this.id||this.from&&n!=this.from?!1:!0},run:function(e){var t=null;try{t=this.handler(e)}catch(n){throw n.sourceURL?r.fatal("error: "+this.handler+" "+n.sourceURL+":"+n.line+" - "+n.name+": "+n.message):n.fileName?("undefined"!=typeof console&&(console.trace(),console.error(this.handler," - error - ",n,n.message)),r.fatal("error: "+this.handler+" "+n.fileName+":"+n.lineNumber+" - "+n.name+": "+n.message)):r.fatal("error: "+this.handler),n}return t},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},r.TimedHandler=function(e,t){this.period=e,this.handler=t,this.lastCalled=(new Date).getTime(),this.user=!0},r.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},r.Request=function(e,t,n,i){this.id=++r._requestId,this.xmlData=e,this.data=r.serialize(e),this.origFunc=t,this.func=t,this.rid=n,this.date=0/0,this.sends=i||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var e=new Date;return(e-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var e=new Date;return(e-this.dead)/1e3},this.xhr=this._newXHR()},r.Request.prototype={getResponse:function(){var e=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(e=this.xhr.responseXML.documentElement,"parsererror"==e.tagName)throw r.error("invalid response received"),r.error("responseText: "+this.xhr.responseText),r.error("responseXML: "+r.serialize(this.xhr.responseXML)),"parsererror"}else this.xhr.responseText&&(r.error("invalid response received"),r.error("responseText: "+this.xhr.responseText),r.error("responseXML: "+r.serialize(this.xhr.responseXML)));return e},_newXHR:function(){var e=null;return window.XMLHttpRequest?(e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml")):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e.onreadystatechange=this.func.bind(null,this),e}},r.Connection=function(e){this.service=e,this.jid="",this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.streamId=null,this.features=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this.paused=!1,this.hold=1,this.wait=60,this.window=5,this._data=[],this._requests=[],this._uniqueId=Math.round(1e4*Math.random()),this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this._idleTimeout=setTimeout(this._onIdle.bind(this),100);for(var t in r._connectionPlugins)if(r._connectionPlugins.hasOwnProperty(t)){var n=r._connectionPlugins[t],i=function(){};i.prototype=n,this[t]=new i,this[t].init(this)}},r.Connection.prototype={reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.streamId=null,this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this.authenticated=!1,this.disconnecting=!1,this.connected=!1,this.errors=0,this._requests=[],this._uniqueId=Math.round(1e4*Math.random())},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(e){return"string"==typeof e||"number"==typeof e?++this._uniqueId+":"+e:++this._uniqueId+""},connect:function(e,t,n,i,o){this.jid=e,this.pass=t,this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.errors=0,this.wait=i||this.wait,this.hold=o||this.hold,this.domain=r.getDomainFromJid(this.jid);var s=this._buildBody().attrs({to:this.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":r.NS.BOSH});this._changeConnectStatus(r.Status.CONNECTING,null),this._requests.push(new r.Request(s.tree(),this._onRequestStateChange.bind(this,this._connect_cb.bind(this)),s.tree().getAttribute("rid"))),this._throttledRequestHandler()},attach:function(e,t,n,i,o,s,a){this.jid=e,this.sid=t,this.rid=n,this.connect_callback=i,this.domain=r.getDomainFromJid(this.jid),this.authenticated=!0,this.connected=!0,this.wait=o||this.wait,this.hold=s||this.hold,this.window=a||this.window,this._changeConnectStatus(r.Status.ATTACHED,null)},xmlInput:function(){},xmlOutput:function(){},rawInput:function(){},rawOutput:function(){},send:function(e){if(null!==e){if("function"==typeof e.sort)for(var t=0;t<e.length;t++)this._queueData(e[t]);else"function"==typeof e.tree?this._queueData(e.tree()):this._queueData(e);this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendIQ:function(e,t,n,i){var o=null,r=this;"function"==typeof e.tree&&(e=e.tree());var s=e.getAttribute("id");s||(s=this.getUniqueId("sendIQ"),e.setAttribute("id",s));var a=this.addHandler(function(e){o&&r.deleteTimedHandler(o);var i=e.getAttribute("type");if("result"==i)t&&t(e);else{if("error"!=i)throw{name:"StropheError",message:"Got bad IQ type of "+i};n&&n(e)}},null,"iq",null,s);return i&&(o=this.addTimedHandler(i,function(){return r.deleteHandler(a),n&&n(null),!1})),this.send(e),s},_queueData:function(e){if(null===e||!e.tagName||!e.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(e)},_sendRestart:function(){this._data.push("restart"),this._throttledRequestHandler(),clearTimeout(this._idleTimeout),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)},addTimedHandler:function(e,t){var n=new r.TimedHandler(e,t);return this.addTimeds.push(n),n},deleteTimedHandler:function(e){this.removeTimeds.push(e)},addHandler:function(e,t,n,i,o,s,a){var l=new r.Handler(e,t,n,i,o,s,a);return this.addHandlers.push(l),l},deleteHandler:function(e){this.removeHandlers.push(e)},disconnect:function(e){this._changeConnectStatus(r.Status.DISCONNECTING,e),r.info("Disconnect was called because: "+e),this.connected&&(this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._sendTerminate())},_changeConnectStatus:function(e,t){for(var n in r._connectionPlugins)if(r._connectionPlugins.hasOwnProperty(n)){var i=this[n];if(i.statusChanged)try{i.statusChanged(e,t)}catch(o){r.error(""+n+" plugin caused an exception "+"changing status: "+o)}}if(this.connect_callback)try{this.connect_callback(e,t)}catch(s){r.error("User connection callback caused an exception: "+s)}},_buildBody:function(){var e=t("body",{rid:this.rid++,xmlns:r.NS.HTTPBIND});return null!==this.sid&&e.attrs({sid:this.sid}),e},_removeRequest:function(e){r.debug("removing request");var t;for(t=this._requests.length-1;t>=0;t--)e==this._requests[t]&&this._requests.splice(t,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(e){var t=this._requests[e];null===t.dead&&(t.dead=new Date),this._processRequest(e)},_processRequest:function(e){var t=this._requests[e],n=-1;try{4==t.xhr.readyState&&(n=t.xhr.status)}catch(i){r.error("caught an error in _requests["+e+"], reqStatus: "+n)}if("undefined"==typeof n&&(n=-1),t.sends>5)return this._onDisconnectTimeout(),void 0;var o=t.age(),s=!isNaN(o)&&o>Math.floor(r.TIMEOUT*this.wait),a=null!==t.dead&&t.timeDead()>Math.floor(r.SECONDARY_TIMEOUT*this.wait),l=4==t.xhr.readyState&&(1>n||n>=500);if((s||a||l)&&(a&&r.error("Request "+this._requests[e].id+" timed out (secondary), restarting"),t.abort=!0,t.xhr.abort(),t.xhr.onreadystatechange=function(){},this._requests[e]=new r.Request(t.xmlData,t.origFunc,t.rid,t.sends),t=this._requests[e]),0===t.xhr.readyState){r.debug("request id "+t.id+"."+t.sends+" posting");try{t.xhr.open("POST",this.service,!0)}catch(c){return r.error("XHR open failed."),this.connected||this._changeConnectStatus(r.Status.CONNFAIL,"bad-service"),this.disconnect(),void 0}var u=function(){t.date=new Date,t.xhr.send(t.data)};if(t.sends>1){var h=1e3*Math.min(Math.floor(r.TIMEOUT*this.wait),Math.pow(t.sends,3));setTimeout(u,h)}else u();t.sends++,this.xmlOutput!==r.Connection.prototype.xmlOutput&&this.xmlOutput(t.xmlData),this.rawOutput!==r.Connection.prototype.rawOutput&&this.rawOutput(t.data)}else r.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+t.xhr.readyState)},_throttledRequestHandler:function(){this._requests?r.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):r.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))},_onRequestStateChange:function(e,t){if(r.debug("request id "+t.id+"."+t.sends+" state changed to "+t.xhr.readyState),t.abort)return t.abort=!1,void 0;var n;if(4==t.xhr.readyState){n=0;try{n=t.xhr.status}catch(i){}if("undefined"==typeof n&&(n=0),this.disconnecting&&n>=400)return this._hitError(n),void 0;var o=this._requests[0]==t,s=this._requests[1]==t;(n>0&&500>n||t.sends>5)&&(this._removeRequest(t),r.debug("request id "+t.id+" should now be removed")),200==n?((s||o&&this._requests.length>0&&this._requests[0].age()>Math.floor(r.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),r.debug("request id "+t.id+"."+t.sends+" got 200"),e(t),this.errors=0):(r.error("request id "+t.id+"."+t.sends+" error "+n+" happened"),(0===n||n>=400&&600>n||n>=12e3)&&(this._hitError(n),n>=400&&500>n&&(this._changeConnectStatus(r.Status.DISCONNECTING,null),this._doDisconnect()))),n>0&&500>n||t.sends>5||this._throttledRequestHandler()}},_hitError:function(e){this.errors++,r.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._onDisconnectTimeout()},_doDisconnect:function(){r.info("_doDisconnect was called"),this.authenticated=!1,this.disconnecting=!1,this.sid=null,this.streamId=null,this.rid=Math.floor(4294967295*Math.random()),this.connected&&(this._changeConnectStatus(r.Status.DISCONNECTED,null),this.connected=!1),this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[]},_dataRecv:function(e){try{var t=e.getResponse()}catch(n){if("parsererror"!=n)throw n;this.disconnect("strophe-parsererror")}if(null!==t){this.xmlInput!==r.Connection.prototype.xmlInput&&this.xmlInput(t),this.rawInput!==r.Connection.prototype.rawInput&&this.rawInput(r.serialize(t));for(var i,o;this.removeHandlers.length>0;)o=this.removeHandlers.pop(),i=this.handlers.indexOf(o),i>=0&&this.handlers.splice(i,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&0===this._requests.length)return this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null,this._doDisconnect(),void 0;var s,a,l=t.getAttribute("type");if(null!==l&&"terminate"==l){if(this.disconnecting)return;return s=t.getAttribute("condition"),a=t.getElementsByTagName("conflict"),null!==s?("remote-stream-error"==s&&a.length>0&&(s="conflict"),this._changeConnectStatus(r.Status.CONNFAIL,s)):this._changeConnectStatus(r.Status.CONNFAIL,"unknown"),this.disconnect(),void 0}var c=this;r.forEachChild(t,null,function(e){var t,n;for(n=c.handlers,c.handlers=[],t=0;t<n.length;t++){var i=n[t];try{!i.isMatch(e)||!c.authenticated&&i.user?c.handlers.push(i):i.run(e)&&c.handlers.push(i)}catch(o){}}})}},_sendTerminate:function(){r.info("_sendTerminate was called");var e=this._buildBody().attrs({type:"terminate"});this.authenticated&&e.c("presence",{xmlns:r.NS.CLIENT,type:"unavailable"}),this.disconnecting=!0;var t=new r.Request(e.tree(),this._onRequestStateChange.bind(this,this._dataRecv.bind(this)),e.tree().getAttribute("rid"));this._requests.push(t),this._throttledRequestHandler()},_connect_cb:function(e){r.info("_connect_cb was called"),this.connected=!0;var n=e.getResponse();if(n){this.xmlInput!==r.Connection.prototype.xmlInput&&this.xmlInput(n),this.rawInput!==r.Connection.prototype.rawInput&&this.rawInput(r.serialize(n));var o,s,a=n.getAttribute("type");if(null!==a&&"terminate"==a)return o=n.getAttribute("condition"),s=n.getElementsByTagName("conflict"),null!==o?("remote-stream-error"==o&&s.length>0&&(o="conflict"),this._changeConnectStatus(r.Status.CONNFAIL,o)):this._changeConnectStatus(r.Status.CONNFAIL,"unknown"),void 0;this.sid||(this.sid=n.getAttribute("sid")),this.stream_id||(this.stream_id=n.getAttribute("authid"));var l=n.getAttribute("requests");l&&(this.window=parseInt(l,10));var c=n.getAttribute("hold");c&&(this.hold=parseInt(c,10));var u=n.getAttribute("wait");u&&(this.wait=parseInt(u,10));var h,d,f,p,m=!1,g=!1,v=!1,y=n.getElementsByTagName("mechanism");if(!(y.length>0)){var b=this._buildBody();return this._requests.push(new r.Request(b.tree(),this._onRequestStateChange.bind(this,this._connect_cb.bind(this)),b.tree().getAttribute("rid"))),this._throttledRequestHandler(),void 0}for(h=0;h<y.length;h++)d=r.getText(y[h]),"DIGEST-MD5"==d?g=!0:"PLAIN"==d?m=!0:"ANONYMOUS"==d&&(v=!0);null===r.getNodeFromJid(this.jid)&&v?(this._changeConnectStatus(r.Status.AUTHENTICATING,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(t("auth",{xmlns:r.NS.SASL,mechanism:"ANONYMOUS"}).tree())):null===r.getNodeFromJid(this.jid)?(this._changeConnectStatus(r.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect()):g?(this._changeConnectStatus(r.Status.AUTHENTICATING,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge1_cb.bind(this),null,"challenge",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(t("auth",{xmlns:r.NS.SASL,mechanism:"DIGEST-MD5"}).tree())):m?(f=r.getBareJidFromJid(this.jid),f+="\0",f+=r.getNodeFromJid(this.jid),f+="\0",f+=this.pass,this._changeConnectStatus(r.Status.AUTHENTICATING,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),p=Base64.encode(f),this.send(t("auth",{xmlns:r.NS.SASL,mechanism:"PLAIN"}).t(p).tree())):(this._changeConnectStatus(r.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(i({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:r.NS.AUTH}).c("username",{}).t(r.getNodeFromJid(this.jid)).tree()))}},_sasl_challenge1_cb:function(e){var n,i=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,o=Base64.decode(r.getText(e)),s=MD5.hexdigest(""+1234567890*Math.random()),a="",l=null,c="",u="";for(this.deleteHandler(this._sasl_failure_handler);o.match(i);)switch(n=o.match(i),o=o.replace(n[0],""),n[2]=n[2].replace(/^"(.+)"$/,"$1"),n[1]){case"realm":a=n[2];break;case"nonce":c=n[2];break;case"qop":u=n[2];break;case"host":l=n[2]}var h="xmpp/"+this.domain;null!==l&&(h=h+"/"+l);var d=MD5.hash(r.getNodeFromJid(this.jid)+":"+a+":"+this.pass)+":"+c+":"+s,f="AUTHENTICATE:"+h,p="";return p+="username="+this._quote(r.getNodeFromJid(this.jid))+",",p+="realm="+this._quote(a)+",",p+="nonce="+this._quote(c)+",",p+="cnonce="+this._quote(s)+",",p+='nc="00000001",',p+='qop="auth",',p+="digest-uri="+this._quote(h)+",",p+="response="+this._quote(MD5.hexdigest(MD5.hexdigest(d)+":"+c+":00000001:"+s+":auth:"+MD5.hexdigest(f)))+",",p+='charset="utf-8"',this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge2_cb.bind(this),null,"challenge",null,null),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(t("response",{xmlns:r.NS.SASL}).t(Base64.encode(p)).tree()),!1},_quote:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},_sasl_challenge2_cb:function(){return this.deleteHandler(this._sasl_success_handler),this.deleteHandler(this._sasl_failure_handler),this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this.send(t("response",{xmlns:r.NS.SASL}).tree()),!1},_auth1_cb:function(){var e=i({type:"set",id:"_auth_2"}).c("query",{xmlns:r.NS.AUTH}).c("username",{}).t(r.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return r.getResourceFromJid(this.jid)||(this.jid=r.getBareJidFromJid(this.jid)+"/strophe"),e.up().c("resource",{}).t(r.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(e.tree()),!1},_sasl_success_cb:function(){return r.info("SASL authentication succeeded."),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._addSysHandler(this._sasl_auth1_cb.bind(this),null,"stream:features",null,null),this._sendRestart(),!1},_sasl_auth1_cb:function(e){this.features=e;var t,n;for(t=0;t<e.childNodes.length;t++)n=e.childNodes[t],"bind"==n.nodeName&&(this.do_bind=!0),"session"==n.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(r.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var o=r.getResourceFromJid(this.jid);return o?this.send(i({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:r.NS.BIND}).c("resource",{}).t(o).tree()):this.send(i({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:r.NS.BIND}).tree()),!1},_sasl_bind_cb:function(e){if("error"==e.getAttribute("type"))return r.info("SASL binding failed."),this._changeConnectStatus(r.Status.AUTHFAIL,null),!1;var t,n=e.getElementsByTagName("bind");return n.length>0?(t=n[0].getElementsByTagName("jid"),t.length>0&&(this.jid=r.getText(t[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(i({type:"set",id:"_session_auth_2"}).c("session",{xmlns:r.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(r.Status.CONNECTED,null))),void 0):(r.info("SASL binding failed."),this._changeConnectStatus(r.Status.AUTHFAIL,null),!1)},_sasl_session_cb:function(e){if("result"==e.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(r.Status.CONNECTED,null);else if("error"==e.getAttribute("type"))return r.info("Session creation failed."),this._changeConnectStatus(r.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._changeConnectStatus(r.Status.AUTHFAIL,null),!1},_auth2_cb:function(e){return"result"==e.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(r.Status.CONNECTED,null)):"error"==e.getAttribute("type")&&(this._changeConnectStatus(r.Status.AUTHFAIL,null),this.disconnect()),!1},_addSysTimedHandler:function(e,t){var n=new r.TimedHandler(e,t);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(e,t,n,i,o){var s=new r.Handler(e,t,n,i,o);return s.user=!1,this.addHandlers.push(s),s},_onDisconnectTimeout:function(){r.info("_onDisconnectTimeout was called");for(var e;this._requests.length>0;)e=this._requests.pop(),e.abort=!0,e.xhr.abort(),e.xhr.onreadystatechange=function(){};return this._doDisconnect(),!1},_onIdle:function(){for(var e,t,n,i;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;)t=this.removeTimeds.pop(),e=this.timedHandlers.indexOf(t),e>=0&&this.timedHandlers.splice(e,1);var o=(new Date).getTime();for(i=[],e=0;e<this.timedHandlers.length;e++)t=this.timedHandlers[e],(this.authenticated||!t.user)&&(n=t.lastCalled+t.period,0>=n-o?t.run()&&i.push(t):i.push(t));this.timedHandlers=i;var s,a;if(this.authenticated&&0===this._requests.length&&0===this._data.length&&!this.disconnecting&&(r.info("no requests during idle cycle, sending blank request"),this._data.push(null)),this._requests.length<2&&this._data.length>0&&!this.paused){for(s=this._buildBody(),e=0;e<this._data.length;e++)null!==this._data[e]&&("restart"===this._data[e]?s.attrs({to:this.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":r.NS.BOSH}):s.cnode(this._data[e]).up());delete this._data,this._data=[],this._requests.push(new r.Request(s.tree(),this._onRequestStateChange.bind(this,this._dataRecv.bind(this)),s.tree().getAttribute("rid"))),this._processRequest(this._requests.length-1)}this._requests.length>0&&(a=this._requests[0].age(),null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(r.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),a>Math.floor(r.TIMEOUT*this.wait)&&(r.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(r.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())),clearTimeout(this._idleTimeout),this.connected&&(this._idleTimeout=setTimeout(this._onIdle.bind(this),100))}},e&&e(r,t,n,i,o)}(function(){window.Strophe=arguments[0],window.$build=arguments[1],window.$msg=arguments[2],window.$iq=arguments[3],window.$pres=arguments[4]});var Occupant,RoomConfig,XmppRoom,__bind=function(e,t){return function(){return e.apply(t,arguments)}};Strophe.addConnectionPlugin("muc",{_connection:null,rooms:[],init:function(e){return this._connection=e,this._muc_handler=null,Strophe.addNamespace("MUC_OWNER",Strophe.NS.MUC+"#owner"),Strophe.addNamespace("MUC_ADMIN",Strophe.NS.MUC+"#admin"),Strophe.addNamespace("MUC_USER",Strophe.NS.MUC+"#user"),Strophe.addNamespace("MUC_ROOMCONF",Strophe.NS.MUC+"#roomconfig")},join:function(e,t,n,i,o,r){var s,a,l,c=this;return a=this.test_append_nick(e,t),s=$pres({from:this._connection.jid,to:a}).c("x",{xmlns:Strophe.NS.MUC}),null!=r&&s.cnode(Strophe.xmlElement("password",[],r)),null==this._muc_handler&&(this._muc_handler=this._connection.addHandler(function(t){var n,i,o,r,s,a,l,u,h,d;if(n=t.getAttribute("from"),s=n.split("/")[0],!c.rooms[s])return!0;if(e=c.rooms[s],o={},"message"===t.nodeName)o=e._message_handlers;else if("presence"===t.nodeName&&(u=t.getElementsByTagName("x"),u.length>0))for(h=0,d=u.length;d>h;h++)if(a=u[h],l=a.getAttribute("xmlns"),l&&l.match(Strophe.NS.MUC)){o=e._presence_handlers;break}for(r in o)i=o[r],i(t,e)||delete o[r];return!0})),null==(l=this.rooms)[e]&&(l[e]=new XmppRoom(this,e,t,r)),i&&this.rooms[e].addHandler("presence",i),n&&this.rooms[e].addHandler("message",n),o&&this.rooms[e].addHandler("roster",o),this._connection.send(s)},leave:function(e,t,n,i){var o,r,s;return delete this.rooms[e],0===this.rooms.length&&(this._connection.deleteHandler(this._muc_handler),this._muc_handler=null),s=this.test_append_nick(e,t),r=this._connection.getUniqueId(),o=$pres({type:"unavailable",id:r,from:this._connection.jid,to:s}),null!=i&&o.c("status",i),null!=n&&this._connection.addHandler(n,null,"presence",null,r),this._connection.send(o),r},message:function(e,t,n,i,o){var r,s,a,l;return l=this.test_append_nick(e,t),o=o||(null!=t?"chat":"groupchat"),s=this._connection.getUniqueId(),r=$msg({to:l,from:this._connection.jid,type:o,id:s}).c("body",{xmlns:Strophe.NS.CLIENT}).t(n),r.up(),null!=i&&(r.c("html",{xmlns:Strophe.NS.XHTML_IM}).c("body",{xmlns:Strophe.NS.XHTML}).h(i),0===r.node.childNodes.length?(a=r.node.parentNode,r.up().up(),r.node.removeChild(a)):r.up().up()),r.c("x",{xmlns:"jabber:x:event"}).c("composing"),this._connection.send(r),s},groupchat:function(e,t,n){return this.message(e,null,t,n)},invite:function(e,t,n){var i,o;return o=this._connection.getUniqueId(),i=$msg({from:this._connection.jid,to:e,id:o}).c("x",{xmlns:Strophe.NS.MUC_USER}).c("invite",{to:t}),null!=n&&i.c("reason",n),this._connection.send(i),o},directInvite:function(e,t,n,i){var o,r,s;return s=this._connection.getUniqueId(),o={xmlns:"jabber:x:conference",jid:e},null!=n&&(o.reason=n),null!=i&&(o.password=i),r=$msg({from:this._connection.jid,to:t,id:s}).c("x",o),this._connection.send(r),s},queryOccupants:function(e,t,n){var i,o;return i={xmlns:Strophe.NS.DISCO_ITEMS},o=$iq({from:this._connection.jid,to:e,type:"get"}).c("query",i),this._connection.sendIQ(o,t,n)},configure:function(e,t){var n,i,o;return n=$iq({to:e,type:"get"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}),o=n.tree(),i=this._connection.sendIQ(o),null!=t&&this._connection.addHandler(function(e){return t(e),!1},Strophe.NS.MUC_OWNER,"iq",null,i),i},cancelConfigure:function(e){var t,n;return t=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"cancel"}),n=t.tree(),this._connection.sendIQ(n)},saveConfiguration:function(e,t){var n,i,o,r,s;for(i=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),r=0,s=t.length;s>r;r++)n=t[r],i.cnode(n).up();return o=i.tree(),this._connection.sendIQ(o)},createInstantRoom:function(e){var t;return t=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_OWNER}).c("x",{xmlns:"jabber:x:data",type:"submit"}),this._connection.sendIQ(t.tree())
},setTopic:function(e,t){var n;return n=$msg({to:e,from:this._connection.jid,type:"groupchat"}).c("subject",{xmlns:"jabber:client"}).t(t),this._connection.send(n.tree())},_modifyPrivilege:function(e,t,n,i,o){var r;return r=$iq({to:e,type:"set"}).c("query",{xmlns:Strophe.NS.MUC_ADMIN}).cnode(t.node),null!=n&&r.c("reason",n),this._connection.sendIQ(r.tree(),i,o)},modifyRole:function(e,t,n,i,o,r){var s;return s=$build("item",{nick:t,role:n}),this._modifyPrivilege(e,s,i,o,r)},kick:function(e,t,n,i,o){return this.modifyRole(e,t,"none",n,i,o)},voice:function(e,t,n,i,o){return this.modifyRole(e,t,"participant",n,i,o)},mute:function(e,t,n,i,o){return this.modifyRole(e,t,"visitor",n,i,o)},op:function(e,t,n,i,o){return this.modifyRole(e,t,"moderator",n,i,o)},deop:function(e,t,n,i,o){return this.modifyRole(e,t,"participant",n,i,o)},modifyAffiliation:function(e,t,n,i,o,r){var s;return s=$build("item",{jid:t,affiliation:n}),this._modifyPrivilege(e,s,i,o,r)},ban:function(e,t,n,i,o){return this.modifyAffiliation(e,t,"outcast",n,i,o)},member:function(e,t,n,i,o){return this.modifyAffiliation(e,t,"member",n,i,o)},revoke:function(e,t,n,i,o){return this.modifyAffiliation(e,t,"none",n,i,o)},owner:function(e,t,n,i,o){return this.modifyAffiliation(e,t,"owner",n,i,o)},admin:function(e,t,n,i,o){return this.modifyAffiliation(e,t,"admin",n,i,o)},changeNick:function(e,t){var n,i;return i=this.test_append_nick(e,t),n=$pres({from:this._connection.jid,to:i,id:this._connection.getUniqueId()}),this._connection.send(n.tree())},setStatus:function(e,t,n,i){var o,r;return r=this.test_append_nick(e,t),o=$pres({from:this._connection.jid,to:r}),null!=n&&o.c("show",n).up(),null!=i&&o.c("status",i),this._connection.send(o.tree())},listRooms:function(e,t){var n;return n=$iq({to:e,from:this._connection.jid,type:"get"}).c("query",{xmlns:Strophe.NS.DISCO_ITEMS}),this._connection.sendIQ(n,t)},test_append_nick:function(e,t){return e+(null!=t?"/"+Strophe.escapeNode(t):"")}}),XmppRoom=function(){function e(e,t,n,i){this.client=e,this.name=t,this.nick=n,this.password=i,this._roomRosterHandler=__bind(this._roomRosterHandler,this),this._addOccupant=__bind(this._addOccupant,this),e.muc&&(this.client=e.muc),this.name=Strophe.getBareJidFromJid(t),this.client.rooms[this.name]=this,this.addHandler("presence",this._roomRosterHandler)}return e.prototype.roster={},e.prototype._message_handlers={},e.prototype._presence_handlers={},e.prototype._roster_handlers={},e.prototype._handler_ids=0,e.prototype.join=function(e,t){return this.client.rooms[this.name]?void 0:this.client.join(this.name,this.nick,e,t,this.password)},e.prototype.leave=function(e,t){return this.client.leave(this.name,this.nick,e,t),delete this.client.rooms[this.name]},e.prototype.message=function(e,t,n,i){return this.client.message(this.name,e,t,n,i)},e.prototype.groupchat=function(e,t){return this.client.groupchat(this.name,e,t)},e.prototype.invite=function(e,t){return this.client.invite(this.name,e,t)},e.prototype.directInvite=function(e,t){return this.client.directInvite(this.name,e,t,this.password)},e.prototype.configure=function(e){return this.client.configure(this.name,e)},e.prototype.cancelConfigure=function(){return this.client.cancelConfigure(this.name)},e.prototype.saveConfiguration=function(e){return this.client.saveConfiguration(this.name,e)},e.prototype.queryOccupants=function(e,t){return this.client.queryOccupants(this.name,e,t)},e.prototype.setTopic=function(e){return this.client.setTopic(this.name,e)},e.prototype.modifyRole=function(e,t,n,i,o){return this.client.modifyRole(this.name,e,t,n,i,o)},e.prototype.kick=function(e,t,n,i){return this.client.kick(this.name,e,t,n,i)},e.prototype.voice=function(e,t,n,i){return this.client.voice(this.name,e,t,n,i)},e.prototype.mute=function(e,t,n,i){return this.client.mute(this.name,e,t,n,i)},e.prototype.op=function(e,t,n,i){return this.client.op(this.name,e,t,n,i)},e.prototype.deop=function(e,t,n,i){return this.client.deop(this.name,e,t,n,i)},e.prototype.modifyAffiliation=function(e,t,n,i,o){return this.client.modifyAffiliation(this.name,e,t,n,i,o)},e.prototype.ban=function(e,t,n,i){return this.client.ban(this.name,e,t,n,i)},e.prototype.member=function(e,t,n,i){return this.client.member(this.name,e,t,n,i)},e.prototype.revoke=function(e,t,n,i){return this.client.revoke(this.name,e,t,n,i)},e.prototype.owner=function(e,t,n,i){return this.client.owner(this.name,e,t,n,i)},e.prototype.admin=function(e,t,n,i){return this.client.admin(this.name,e,t,n,i)},e.prototype.changeNick=function(e){return this.nick=e,this.client.changeNick(this.name,e)},e.prototype.setStatus=function(e,t){return this.client.setStatus(this.name,this.nick,e,t)},e.prototype.addHandler=function(e,t){var n;switch(n=this._handler_ids++,e){case"presence":this._presence_handlers[n]=t;break;case"message":this._message_handlers[n]=t;break;case"roster":this._roster_handlers[n]=t;break;default:return this._handler_ids--,null}return n},e.prototype.removeHandler=function(e){return delete this._presence_handlers[e],delete this._message_handlers[e],delete this._roster_handlers[e]},e.prototype._addOccupant=function(e){var t;return t=new Occupant(e,this),this.roster[t.nick]=t,t},e.prototype._roomRosterHandler=function(t){var n,i,o,r,s,a;switch(n=e._parsePresence(t),s=n.nick,r=n.newnick||null,n.type){case"error":return;case"unavailable":r&&(n.nick=r,this.roster[s]&&this.roster[r]&&(this.roster[s].update(this.roster[r]),this.roster[r]=this.roster[s]),this.roster[s]&&!this.roster[r]&&(this.roster[r]=this.roster[s].update(n))),delete this.roster[s];break;default:this.roster[s]?this.roster[s].update(n):this._addOccupant(n)}a=this._roster_handlers;for(o in a)i=a[o],i(this.roster,this)||delete this._roster_handlers[o];return!0},e._parsePresence=function(e){var t,n,i,o,r,s,a,l,c,u,h,d,f,p,m,g;for(o={},t=e.attributes,o.nick=Strophe.getResourceFromJid(t.from.textContent),o.type=(null!=(c=t.type)?c.textContent:void 0)||null,o.states=[],u=e.children,r=0,a=u.length;a>r;r++)switch(n=u[r],n.nodeName){case"status":o.status=n.textContent||null;break;case"show":o.show=n.textContent||null;break;case"x":if(t=n.attributes,(null!=(h=t.xmlns)?h.textContent:void 0)===Strophe.NS.MUC_USER)for(d=n.children,s=0,l=d.length;l>s;s++)switch(i=d[s],i.nodeName){case"item":t=i.attributes,o.affiliation=(null!=(f=t.affiliation)?f.textContent:void 0)||null,o.role=(null!=(p=t.role)?p.textContent:void 0)||null,o.jid=(null!=(m=t.jid)?m.textContent:void 0)||null,o.newnick=(null!=(g=t.nick)?g.textContent:void 0)||null;break;case"status":i.attributes.code&&o.states.push(i.attributes.code.textContent)}}return o},e}(),RoomConfig=function(){function e(e){this.parse=__bind(this.parse,this),null!=e&&this.parse(e)}return e.prototype.parse=function(e){var t,n,i,o,r,s,a,l,c,u,h,d,f;for(s=e.getElementsByTagName("query")[0].children,this.identities=[],this.features=[],this.x=[],a=0,u=s.length;u>a;a++)switch(i=s[a],n=i.attributes,i.nodeName){case"identity":for(r={},l=0,h=n.length;h>l;l++)t=n[l],r[t.name]=t.textContent;this.identities.push(r);break;case"feature":this.features.push(n["var"].textContent);break;case"x":if(n=i.children[0].attributes,"FORM_TYPE"===!n["var"].textContent||"hidden"===!n.type.textContent)break;for(f=i.children,c=0,d=f.length;d>c;c++)o=f[c],o.attributes.type||(n=o.attributes,this.x.push({"var":n["var"].textContent,label:n.label.textContent||"",value:o.firstChild.textContent||""}))}return{identities:this.identities,features:this.features,x:this.x}},e}(),Occupant=function(){function e(e,t){this.room=t,this.update=__bind(this.update,this),this.admin=__bind(this.admin,this),this.owner=__bind(this.owner,this),this.revoke=__bind(this.revoke,this),this.member=__bind(this.member,this),this.ban=__bind(this.ban,this),this.modifyAffiliation=__bind(this.modifyAffiliation,this),this.deop=__bind(this.deop,this),this.op=__bind(this.op,this),this.mute=__bind(this.mute,this),this.voice=__bind(this.voice,this),this.kick=__bind(this.kick,this),this.modifyRole=__bind(this.modifyRole,this),this.update(e)}return e.prototype.modifyRole=function(e,t,n,i){return this.room.modifyRole(this.nick,e,t,n,i)},e.prototype.kick=function(e,t,n){return this.room.kick(this.nick,e,t,n)},e.prototype.voice=function(e,t,n){return this.room.voice(this.nick,e,t,n)},e.prototype.mute=function(e,t,n){return this.room.mute(this.nick,e,t,n)},e.prototype.op=function(e,t,n){return this.room.op(this.nick,e,t,n)},e.prototype.deop=function(e,t,n){return this.room.deop(this.nick,e,t,n)},e.prototype.modifyAffiliation=function(e,t,n,i){return this.room.modifyAffiliation(this.jid,e,t,n,i)},e.prototype.ban=function(e,t,n){return this.room.ban(this.jid,e,t,n)},e.prototype.member=function(e,t,n){return this.room.member(this.jid,e,t,n)},e.prototype.revoke=function(e,t,n){return this.room.revoke(this.jid,e,t,n)},e.prototype.owner=function(e,t,n){return this.room.owner(this.jid,e,t,n)},e.prototype.admin=function(e,t,n){return this.room.admin(this.jid,e,t,n)},e.prototype.update=function(e){return this.nick=e.nick||null,this.affiliation=e.affiliation||null,this.role=e.role||null,this.jid=e.jid||null,this.status=e.status||null,this.show=e.show||null,this},e}(),/*!
 * jQuery Tools v1.2.5 - The missing UI library for the Web
 * 
 * tooltip/tooltip.js
 * 
 * NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.
 * 
 * http://flowplayer.org/tools/
 * 
 */
function(e){function t(t,n,i){var o=i.relative?t.position().top:t.offset().top,r=i.relative?t.position().left:t.offset().left,s=i.position[0];o-=n.outerHeight()-i.offset[0],r+=t.outerWidth()+i.offset[1],/iPad/i.test(navigator.userAgent)&&(o-=e(window).scrollTop());var a=n.outerHeight()+t.outerHeight();"center"==s&&(o+=a/2),"bottom"==s&&(o+=a),s=i.position[1];var l=n.outerWidth()+t.outerWidth();return"center"==s&&(r-=l/2),"left"==s&&(r-=l),{top:o,left:r}}function n(n,o){var r,s,a=this,l=n.add(a),c=0,u=0,h=n.attr("title"),d=n.attr("data-tooltip"),f=i[o.effect],p=n.is(":input"),m=p&&n.is(":checkbox, :radio, select, :button, :submit"),g=n.attr("type"),v=o.events[g]||o.events[p?m?"widget":"input":"def"];if(!f)throw'Nonexistent effect "'+o.effect+'"';if(v=v.split(/,\s*/),2!=v.length)throw"Tooltip: bad events configuration for "+g;n.bind(v[0],function(e){clearTimeout(c),o.predelay?u=setTimeout(function(){a.show(e)},o.predelay):a.show(e)}).bind(v[1],function(e){clearTimeout(u),o.delay?c=setTimeout(function(){a.hide(e)},o.delay):a.hide(e)}),h&&o.cancelDefault&&(n.removeAttr("title"),n.data("title",h)),e.extend(a,{show:function(i){if(!r&&(d?r=e(d):o.tip?r=e(o.tip).eq(0):h?r=e(o.layout).addClass(o.tipClass).appendTo(document.body).hide().append(h):(r=n.next(),r.length||(r=n.parent().next())),!r.length))throw"Cannot find tooltip for "+n;if(a.isShown())return a;r.stop(!0,!0);var p=t(n,r,o);if(o.tip&&r.html(n.data("title")),i=i||e.Event(),i.type="onBeforeShow",l.trigger(i,[p]),i.isDefaultPrevented())return a;p=t(n,r,o),r.css({position:"absolute",top:p.top,left:p.left}),s=!0,f[0].call(a,function(){i.type="onShow",s="full",l.trigger(i)});var m=o.events.tooltip.split(/,\s*/);return r.data("__set")||(r.bind(m[0],function(){clearTimeout(c),clearTimeout(u)}),m[1]&&!n.is("input:not(:checkbox, :radio), textarea")&&r.bind(m[1],function(e){e.relatedTarget!=n[0]&&n.trigger(v[1].split(" ")[0])}),r.data("__set",!0)),a},hide:function(t){return r&&a.isShown()?(t=t||e.Event(),t.type="onBeforeHide",l.trigger(t),t.isDefaultPrevented()?void 0:(s=!1,i[o.effect][1].call(a,function(){t.type="onHide",l.trigger(t)}),a)):a},isShown:function(e){return e?"full"==s:s},getConf:function(){return o},getTip:function(){return r},getTrigger:function(){return n}}),e.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(t,n){e.isFunction(o[n])&&e(a).bind(n,o[n]),a[n]=function(t){return t&&e(a).bind(n,t),a}})}e.tools=e.tools||{version:"v1.2.5"},e.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(e,t,n){i[e]=[t,n]}};var i={toggle:[function(e){var t=this.getConf(),n=this.getTip(),i=t.opacity;1>i&&n.css({opacity:i}),n.show(),e.call()},function(e){this.getTip().hide(),e.call()}],fade:[function(e){var t=this.getConf();this.getTip().fadeTo(t.fadeInSpeed,t.opacity,e)},function(e){this.getTip().fadeOut(this.getConf().fadeOutSpeed,e)}]};e.fn.tooltip=function(t){var i=this.data("tooltip");return i?i:(t=e.extend(!0,{},e.tools.tooltip.conf,t),"string"==typeof t.position&&(t.position=t.position.split(/,?\s/)),this.each(function(){i=new n(e(this),t),e(this).data("tooltip",i)}),t.api?i:this)}}(jQuery);/**
 * LiquidMetal, version: 1.0 (2011-12-17)
 *
 * A mimetic poly-alloy of Quicksilver's scoring algorithm, essentially
 * LiquidMetal.
 *
 * For usage and examples, visit:
 * http://github.com/rmm5t/liquidmetal
 *
 * Licensed under the MIT:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Copyright (c) 2009-2012, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
var LiquidMetal=function(){function e(e,t){var n=e.charAt(t);return n>="A"&&"Z">=n}function t(e,t){var n=e.charAt(t-1);return" "==n||"	"==n}function n(e,t,n,i){for(var o=n;i>o;o++)e[o]=t;return e}var i=0,o=1,r=.8,s=.9,a=.85;return{score:function(e,t){if(0===t.length)return r;if(t.length>e.length)return i;var n=this.buildScoreArray(e,t);if(n===!1)return 0;for(var o=0,s=0;s<n.length;s++)o+=n[s];return o/n.length},buildScoreArray:function(l,c){for(var u=new Array(l.length),h=l.toLowerCase(),d=c.toLowerCase(),f=-1,p=!1,m=0;m<d.length;m++){var g=d[m],v=h.indexOf(g,f+1);if(-1===v)return!1;0===v&&(p=!0),t(l,v)?(u[v-1]=1,n(u,a,f+1,v-1)):e(l,v)?n(u,a,f+1,v):n(u,i,f+1,v),u[v]=o,f=v}var y=p?s:r;return n(u,y,f+1,u.length),u}}}();TB=function(){function e(){this._listeners={},this.addEventListener=function(e,t){if(!e)throw new Error("EventDispatcher.addEventListener :: No type specified");if(!t)throw new Error("EventDispatcher.addEventListener :: No listener function specified");this._listeners.hasOwnProperty(e)||(this._listeners[e]=new Array),this.removeEventListener(e,t),W("TB.addEventListener("+e+")"),this._listeners[e].push(t)},this.removeEventListener=function(e,t){if(!e)throw new Error("EventDispatcher.removeEventListener :: No type specified");if(!t)throw new Error("EventDispatcher.removeEventListener :: No listener function specified");if(W("TB.removeEventListener("+e+")"),this._listeners.hasOwnProperty(e))for(var n=0;n<this._listeners[e].length;n++)if(this._listeners[e][n]==t){this._listeners[e].splice(n,1);break}},this.dispatchEvent=function(e){if(!e)throw new Error("EventDispatcher.dispatchEvent :: No event specified");if(!e.type)throw new Error("EventDispatcher.dispatchEvent :: Event has no type");if(e.target||(e.target=this),this._listeners.hasOwnProperty(e.type)){var t=this._listeners[e.type];if(!(t instanceof Array))throw new Error("EventDispatcher.dispatchEvent :: Invalid object type in listeners");for(var n=0;n<t.length;n++){var i=q(t[n],e);setTimeout(i,1)}}}}function t(e,t){this.type=e,this.cancelable=t?t:!1,this.target;var n=!1;this.preventDefault=function(){this.cancelable?n=!0:$("Event.preventDefault :: Trying to preventDefault on an Event that isn't cancelable")},this.isDefaultPrevented=function(){return n}}function n(e,n,i,o){this.superClass=t,this.superClass(e),this.message=n,this.title=i,this.code=o}function i(e,n,i){this.superClass=t,this.superClass(e),this.connections=n,this.reason=i}function o(e,n,i,o){this.superClass=t,this.superClass(e,o),this.streams=n,this.reason=i}function r(e,n,i,o,r){this.superClass=t,this.superClass(e),this.connections=n,this.streams=i,this.groups=o,this.archives=r}function s(e,n,i){this.superClass=t,this.superClass(e,i),this.reason=n}function a(e,n){this.superClass=t,this.superClass(e),this.fromConnection=n}function l(e,n,i){this.superClass=t,this.superClass(e),this.streamId=n,this.volume=i}function c(e,n,i){this.superClass=t,this.superClass(e),this.camera=n,this.microphone=i}function u(e,n,i,o,r){this.superClass=t,this.superClass(e),this.cameras=n,this.microphones=i,this.selectedCamera=o,this.selectedMicrophone=r}function h(e,n,i,o,r){this.superClass=t,this.superClass(e),this.widthFrom=n,this.widthTo=i,this.heightFrom=o,this.heightTo=r}function d(e,n,i,o,r){this.superClass=t,this.superClass(e),this.type=e,this.stream=n,this.changedProperty=i,this.oldValue=o,this.newValue=r}function f(e,n){this.superClass=t,this.superClass(e),this.archives=n}function p(e,n){this.superClass=t,this.superClass(e),this.changedValues=n}function m(e,n,i,o){this.superClass=t,this.superClass(e),this.reasonCode=n,this.reason=i,this.failedValues=o}function g(e,t,n){this.connectionId=e,this.creationTime=Number(t),this.data=n,this.quality}function v(e,t,n,i,o,r,s,a,l,c,u,h){this.streamId=e,this.connection=t,this.name=n,this.data=i,this.type=o,this.creationTime=r,this.hasAudio=s,this.hasVideo=a,this.orientation=l,this.peerId=u,this.quality=h,this.startRecording=function(e){W("Stream.startRecording()");var t="controller_"+c;if(e=Et[c][e.archiveId],!e){var n="Stream.startRecording :: Archive not created.";throw U(n),new Error(n)}if(e.type!=TB.PER_STREAM)throw n="Stream.startRecording :: Trying to record per stream on a "+e.type+" archive",U(n),new Error(n);if(!(t&&this.connection&&this.connection.connectionId))throw n="Stream.startRecording :: Connection required to record an archive.",U(n),new Error(n);try{var i=document.getElementById(t);i.startRecordingStream(this.streamId,e.archiveId),e.recording=!0}catch(o){throw n="Stream.startRecording :: "+o,U(n),new Error(n)}},this.stopRecording=function(e){if(W("Stream.stopRecording()"),e=Et[c][e.archiveId],!e){var t="Stream.stopRecording :: Archive not created.";throw U(t),new Error(t)}if(e.type!=TB.PER_STREAM)throw t="Stream.stopRecording :: Trying to stop recording per stream on a "+e.type+" archive",U(t),new Error(t);var n="controller_"+c;if(!(n&&this.connection&&this.connection.connectionId))throw t="Stream.stopRecording :: Connection required to record an archive.",U(t),new Error(t);try{var i=document.getElementById(n);i.stopRecordingStream(this.streamId,e.archiveId)}catch(o){throw t="Stream.stopRecording :: "+o,U(t),new Error(t)}}}function y(t,n){this.id=t,this.replacedDivId=n,this.parentClass=e,this.parentClass()}function b(e,t){this.uberClass=y,this.uberClass(e,t);var n=["showMicButton","showSpeakerButton","showSettingsButton","showCameraToggleButton","nameDisplayMode","buttonDisplayMode","showSaveButton","showRecordButton","showRecordStopButton","showReRecordButton","showPauseButton","showPlayButton","showPlayStopButton","showStopButton","backgroundImageURI","showControlPanel","showRecordCounter","showPlayCounter","showControlBar"];this.getStyle=function(e){var t=document.getElementById(this.id);if(!this.loaded)return e?this._style[e]:this._style;if(!t)throw s="Publisher.getStyle:: Publisher "+this.id+" does not exist.",U(s),new Error(s);try{var i=t.getStyle(e);if("string"==typeof i)return i;for(var o in i)"false"==i[o]&&(i[o]=!1),"true"==i[o]&&(i[o]=!0),n.indexOf(o)<0&&delete i[o];return i}catch(r){var s="Publisher.getStyle:: Failed to call getStyle. "+r;throw U(s),new Error(s)}},this._style={};var i={buttonDisplayMode:["auto","off","on"],nameDisplayMode:["auto","off","on"],showSettingsButton:[!0,!1],showMicButton:[!0,!1],showCameraToggleButton:[!0,!1],showSaveButton:[!0,!1],backgroundImageURI:null,showControlBar:[!0,!1],showPlayCounter:[!0,!1],showRecordCounter:[!0,!1]};this.setStyle=function(e,t){W("Publisher.setStyle: "+e.toString());var n=document.getElementById(this.id);if(this.loaded){if(!n)throw r="Publisher.setStyle:: Publisher "+this.id+" does not exist.",U(r),new Error(r);try{n.setStyle(e,t)}catch(o){var r="Publisher.setStyle:: Failed to call setStyle. "+o;throw U(r),new Error(r)}}else{if("string"==typeof e&&null!=t)this._style.hasOwnProperty(e)&&("backgroundImageURI"==e||i[e].indexOf(t)>-1)?(W("setStyle::Setting "+e+" to "+t),this._style[e]=t):$("setStyle::Invalid style property passed "+e+" : "+t);else for(var s in e)this.setStyle(s,e[s]);this.modified=!0}return this}}function w(e,t){this.supClass=b,this.supClass(e,t),this.getImgData=function(){W("VideoComponent.getImgData");var e=document.getElementById(this.id);if(!e)throw n="VideoComponent.getImgData:: Component "+this.id+" does not exist.",U(n),new Error(n);try{return e.getImgData()}catch(t){var n="VideoComponent.getImgData:: Failed to call getImgData. "+t;throw U(n),new Error(n)}}}function _(e,t,n){this.superClass=w,this.superClass(e,t),this._style={showMicButton:!0,showSettingsButton:!0,showCameraToggleButton:!0,nameDisplayMode:"auto",buttonDisplayMode:"auto",backgroundImageURI:null},this.modified=!1,n&&n.hasOwnProperty("style")&&(this.setStyle(n.style),this.modified=!0),this.properties=n,this.loaded=!1,this.panelId=null,this.gain=50,n&&n.hasOwnProperty("microphoneGain")&&(this.gain=parseInt(n.microphoneGain,10)),this.enableMicrophone=function(){this.publishAudio(!0)},this.disableMicrophone=function(){this.publishAudio(!1)},this.setMicrophoneGain=function(e){var t=document.getElementById(this.id);if(this.loaded){if(!t)throw i="Publisher "+this.id+" does not exist.",U(i),new Error(i);try{t.setMicGain(e)}catch(n){var i="Microphone gain adjustment on publisher "+this.id+" failed";throw U(i),new Error(i)}}else this.gain=e,this.modified=!0;return this},this.getMicrophoneGain=function(){var e=document.getElementById(this.id);if(!this.loaded)return this.gain;if(!e)throw n="Publisher "+this.id+" does not exist.",U(n),new Error(n);try{return e.getMicGain()}catch(t){var n="Microphone gain adjustment on publisher "+this.id+" failed";throw U(n),new Error(n)}},this.getEchoCancellationMode=function(){W("Publisher.getEchoCancellationMode()");var e="",t=document.getElementById(this.id);if(!this.loaded)return"unknown";if(!t)throw i="Publisher "+this.id+" does not exist.",U(i),new Error(i);try{e=t.getEchoCancellationMode()}catch(n){var i="Getting echo cancellation mode for publisher "+this.id+" failed. "+n;throw U(i),new Error(i)}return e},this.publishAudio=function(e){W("Publisher.publishAudio()"),this.loaded?ot(this.id,"publishAudio",e):(this.audioPublished=e,this.modified=!0)},this.publishVideo=function(e){W("Publisher.publishVideo()"),this.loaded?ot(this.id,"publishVideo",e):(this.videoPublished=e,this.modified=!0)},this.setCamera=function(e){W("Publisher.setCamera("+e+")"),rt(this.id,e,!0)},this.setMicrophone=function(e){W("Publisher.setMicrophone("+e+")"),rt(this.id,e,!1)}}function x(e,t,n,i){this.superClass=w,this.superClass(t,n),this._style={nameDisplayMode:"auto",buttonDisplayMode:"auto",backgroundImageURI:null},this.modified=!1,i&&i.hasOwnProperty("style")&&(this.setStyle(i.style),this.modified=!0),this.stream=e,this.properties=i,this.loaded=!1,this.audioVolume=50;var o=!0,r=!0;i&&(!i.hasOwnProperty("subscribeToAudio")||"false"!=i.subscribeToAudio&&0!=i.subscribeToAudio||(o=!1),!i.hasOwnProperty("subscribeToVideo")||"false"!=i.subscribeToVideo&&0!=i.subscribeToVideo||(r=!1),i.hasOwnProperty("audioVolume")&&(this.audioVolume=parseInt(i.audioVolume,10))),this.enableAudio=function(){this.subscribeToAudio(!0)},this.disableAudio=function(){this.subscribeToAudio(!1)},this.setAudioVolume=function(e){var t=document.getElementById(this.id);if(this.loaded){if(!t)throw i="Subscriber "+this.id+" does not exist.",U(i),new Error(i);try{t.setAudioVolume(e)}catch(n){var i="Volume adjustment on subscriber "+this.id+" failed";throw U(i),new Error(i)}}else this.audioVolume=e;return this},this.getAudioVolume=function(){var e=document.getElementById(this.id);if(!this.loaded)return this.audioVolume;if(!e)throw n="Subscriber "+this.id+" does not exist.",U(n),new Error(n);try{return e.getAudioVolume()}catch(t){var n="Volume adjustment on subscriber "+this.id+" failed";throw U(n),new Error(n)}return this},this._subscribeToAudio=function(e,t){W("Subscriber.subscribeToAudio()"),(!t||o)&&(this.loaded?ot(this.id,"subscribeToAudio",e):(this.audioSubscribed=e,this.modified=!0))},this.subscribeToAudio=function(e){o=e,this._subscribeToAudio(o,!1)},this._subscribeToVideo=function(e,t){W("Subscriber.subscribeToVideo()"),(!t||r)&&(this.loaded?ot(this.id,"subscribeToVideo",e):(this.videoSubscribed=e,this.modified=!0))},this.subscribeToVideo=function(e){r=e,this._subscribeToVideo(r,!1)},this.changeOrientation=function(e){W("Subscriber.changeOrientation()"),ot(this.id,"changeOrientation",e)}}function C(e,t,n,i){this.superClass=y,this.superClass(e,t),n?(this.publisher=n,this.component=n):(this.publisher=null,this.component=n),this.parentCreated=!1,this.properties=i}function E(e,t){this.name=e,this.status=t}function S(e,t){this.name=e,this.status=t}function T(t,n){this.superClass=e,this.superClass(),this.groupId=n,this.sessionId=t,this.enableEchoSuppression=function(){W("Group.enableEchoSuppresion()"),F(this.sessionId,this.groupId,!0)},this.disableEchoSuppression=function(){W("Group.disableEchoSuppression()"),F(this.sessionId,this.groupId,!1)},this.getGroupProperties=function(){return W("Group.getGroupProperties()"),H(this.sessionId,this.groupId)}}function k(e){this.isEnabled=e}function I(e,t,n){this.numOutputStreams=e,this.switchType=t,this.switchTimeout=n}function N(e){this.echoSuppression=new k(e.echoSuppressionEnabled),this.multiplexer=new I(e.multiplexerNumOutputStreams,e.multiplexerSwitchType,e.multiplexerSwitchTimeout)}function P(e,t,n,i,o){this.archiveId=e,this.type=t,this.title=n,this.sessionId=i;var r;"sessionRecordingInProgress"==o?(this.recording=!0,this.status="open"):(this.recording=!1,this.status=o),this.startPlayback=function(e){e||(e=!1),W("Archive.startPlayback() : "+e);var t="controller_"+i,n=TB.sessions[i].connection;if(!St[i][this.archiveId]){var o="Archive.startPlayback :: Archive not loaded.";throw U(o),new Error(o)}if(!(t&&n&&n.connectionId))throw o="Archive.startPlayback :: Connection required to play back an archive.",U(o),new Error(o);try{var r=document.getElementById(t);r.startPlayback(this.archiveId,e)}catch(s){throw o="Archive.startPlayback :: "+s,U(o),new Error(o)}},this.stopPlayback=function(){W("Archive.stopPlayback()");var e="controller_"+i,t=TB.sessions[i].connection;if(!(e&&t&&t.connectionId))throw r="Archive.stopPlayback :: Connection required to stop playing back an archive.",U(r),new Error(r);try{var n=document.getElementById(e);n.stopPlayback(this.archiveId)}catch(o){var r="Archive.stopPlayback :: "+o;throw U(r),new Error(r)}},this.getStateManager=function(){if(W("Archive.getStateManager() "+e),r)return r;var t="controller_"+i,n=TB.sessions[i].connection;if(t&&n&&n.connectionId)return r=new O(t,e);var o="Archive.getStateManager :: Connection required to getStateManager. Make sure that this archive was loaded in a Session.";throw U(o),new Error(o)}}function A(e,t,n){this.superClass=w,this.superClass(e,t),this._style={buttonDisplayMode:"auto",showCameraToggleButton:!0,showControlBar:!0,showMicButton:!0,showPlayCounter:!0,showRecordCounter:!0,showSaveButton:!0,showSettingsButton:!0},this.id=e,this.properties=n,this.saveArchive=function(){var e=document.getElementById(this.id);e.save()},this.setCamera=function(e){W("Recorder.setCamera("+e+")"),rt(this.id,e,!0)},this.setMicrophone=function(e){W("Recorder.setMicrophone("+e+")"),rt(this.id,e,!1)},this.stopRecording=function(){recorderElement=document.getElementById(this.id),recorderElement.stopRecording()},this.startRecording=function(e){recorderElement=document.getElementById(this.id),recorderElement.startRecording(e)},this.startPlaying=function(){W("Recorder.startPlaying()");try{var e=document.getElementById(this.id);e.startPlaying()}catch(t){var n="Recorder.startPlaying :: "+t;throw U(n),new Error(n)}},this.stopPlaying=function(){W("Recorder.stopPlaying()");try{var e=document.getElementById(this.id);e.stopPlaying()}catch(t){var n="Recorder.stopPlaying :: "+t;throw U(n),new Error(n)}},this.setTitle=function(e){var t=document.getElementById(this.id);if(this.loaded){if(!t)throw i="Recorder "+this.id+" does not exist.",U(i),new Error(i);try{t.setTitle(e)}catch(n){var i="Setting archive title on Recorder "+this.id+" failed.";throw U(i),new Error(i)}}else this._title=e,this.modified=!0}}function D(e,t,n){this.superClass=w,this.superClass(e,t),this._style={showPlayButton:!0,showStopButton:!0,showSpeakerButton:!0},this.id=e,this.properties=n,this.archiveId,this.loadArchive=function(e){if(!e)throw i="Player.loadArchive :: Archive id required to load an archive.",U(i),new Error(i);if(this.loaded)try{var t=document.getElementById(this.id);t.loadArchive(e),this.archiveId=e}catch(n){var i="Player.loadArchive :: "+n;throw U(i),new Error(i)}else this._archiveId=e},this.play=function(){if(this.loaded)try{var e=document.getElementById(this.id);e.startPlayback()}catch(t){var n="Player.play :: "+t;throw U(n),new Error(n)}else this._play=!0},this.stop=function(){if(this.loaded)try{var e=document.getElementById(this.id);e.stopPlayback()}catch(t){var n="Player.stop :: "+t;throw U(n),new Error(n)}else this._play=!1},this.pause=function(){if(this.loaded)try{var e=document.getElementById(this.id);e.pausePlayback()}catch(t){var n="Player.pause :: "+t;throw U(n),new Error(n)}else this._play=!1}}function M(t){this.superClass=e,this.superClass(),this.apiKey=t,this.panels={},this.showMicSettings=!0,this.showCamSettings=!0;var n=360,i=270,o=340,r=230;this.detectDevices=function(){if(W("DeviceManager.detectDevices()"),pt)try{var e=document.getElementById(pt);e.detectDevices()}catch(n){throw U(n),new Error("DeviceManager.detectDevices() :: Failed to locate existing device detector "+n)}else{var i={};i.allowscriptaccess="always",pt="opentok_deviceDetector";var o={};o.id=pt;var r={};swfobject.addDomLoadEvent(function(){var e=document.createElement("div");e.setAttribute("id",pt),e.style.display="none",document.body.appendChild(e),swfobject.embedSWF(xt+"/v0.91.46.b5f48f1/flash/f_devicedetectorwidget.swf?partnerId="+t,pt,1,1,"10.0.0",!1,r,i,o)})}},this.displayPanel=function(e,t,s){W("DeviceManager.displayPanel("+e+")");var a;if(a=t?"displayPanel_"+t.id:"displayPanel_global",t&&TB.sessions)for(var l in TB.sessions)TB.sessions[l].hasOwnProperty("publishers")&&TB.sessions[l].publishers[t.id]&&(TB.sessions[l].publishers[t.id].panelId=a);var c=document.getElementById(a);if(c)return $("DeviceManager.displayPanel :: there is already a device panel"+(t?" for this component":"")),this.panels[a];var u=!1,h=s?ht(s):{},d={};d.allowscriptaccess="always";var f=n,p=i;if("showCloseButton"in h?0==h.showCloseButton&&(f=o,p=r):h.showCloseButton=!0,"showMicSettings"in h||(h.showMicSettings=this.showMicSettings),"showCamSettings"in h||(h.showCamSettings=this.showCamSettings),!e){e="devicePanel_replace_div";var m=document.createElement("div");m.setAttribute("id",e);var g=document.createElement("div");g.setAttribute("id","devicePanel_parent_"+(t?t.id:"global")),g.style.position="absolute";var v="pageYOffset"in window&&"number"==typeof window.pageYOffset?window.pageYOffset:document.body&&document.body.scrollTop?document.body.scrollTop:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:0,y="innerHeight"in window?window.innerHeight:document.documentElement&&document.documentElement.offsetHeight?document.documentElement.offsetHeight:i;v+=.2*y,g.style.top=v+"px",g.style.left="50%",g.style.width=f+"px",g.style.height=p+"px",g.style.marginLeft=0-f/2+"px",g.style.marginTop=0-p/4+"px","zIndex"in h?(g.style.zIndex=h.zIndex,delete h.zIndex):g.style.zIndex=st()+1,document.body.appendChild(g),u=!0,g.appendChild(m)}var b=document.getElementById(e);if(!b){var w="DeviceManager.displayPanel :: replaceElementId does not exist in DOM.";throw U(w),new Error(w)}var _;this.panels[a]&&this.removePanel(this.panels[a]),_=t?new C(a,e,t,h):new C(a,e,null,h),_.parentCreated=u,this.panels[a]=_;var x={};return x.id=_.id,x.style="outline:none;",h.devicePanelId=a,h.wmode?(d.wmode=h.wmode,delete h.wmode):d.wmode="transparent",L(xt+"/v0.91.46.b5f48f1/flash/f_devicewidget.swf?partnerId="+this.apiKey,e,f,p,mt,!1,h,d,x),_},this.removePanel=function(e){if(!e.hasOwnProperty("id")){var t="DeviceManager.removePanel :: invalid DevicePanel object";throw U(t),new Error(t)}W("DeviceManager.removePanel("+e.id+")");var n=document.getElementById(e.id);if(!n)throw t="DeviceManager.removePanel :: DevicePanel does not exist in DOM",U(t),new Error(t);var i=n.parentNode,o=e.parentCreated;for(var r in this.panels)if(this.panels[r].hasOwnProperty("id")&&r==e.id){var s=this.panels[r];nt(this.panels[r]),delete this.panels[r];var a=function(){if(s.publisher&&TB.sessions)for(var e in TB.sessions)TB.sessions[e].hasOwnProperty("disconnect")&&TB.sessions[e].publishers[s.publisher.id]&&(TB.sessions[e].publishers[s.publisher.id].panelId=null)};setTimeout(a,2)}if(o)try{var l=i.parentNode;l.removeChild(i)}catch(c){throw t="Failed to clean up the parent of the device panel "+c,U(t),new Error(t)}}}function R(e){var t=1,n=1;this.recorders={},this.players={},this.apiKey=e;var i=320,o=271,r=31;this.displayRecorder=function(n,s,a){if(!n)throw errorMsg="RecorderManager.displayRecorder :: Token required to displayRecorder",U(errorMsg),new Error(errorMsg);var l="recorder_"+e+"_"+t++,c=a?ht(a):{};if(c.token=n,c.partnerId=e,c.recorderId=l,c.hasOwnProperty("style")){var u=c.style.showControlBar;c.style=encodeURIComponent(ut(c.style))}var h={};h.allowscriptaccess="always",c.wmode?(h.wmode=c.wmode,delete c.wmode):h.wmode="transparent";var d={};d.id=l,d.style="outline:none;",(!c.width||isNaN(c.width))&&(c.width=i),(!c.height||isNaN(c.height))&&(c.height=o,0==u&&(c.height-=r));var f=!1;return s||(s="recorder_replace_"+t,f=!0),swfobject.addDomLoadEvent(function(){if(f){var t=document.createElement("div");t.setAttribute("id",s),document.body.appendChild(t)}L(xt+"/v0.91.46.b5f48f1/flash/f_recordwidget.swf?partnerId="+e,s,c.width,c.height,mt,!1,c,h,d)}),this.recorders[l]=new A(l,s,c),this.recorders[l]},this.removeRecorder=function(e){if(!e){var t="Session.removeRecorder :: recorder cannot be null";throw U(t),new Error(t)}W("Session.removeRecorder("+e.id+")"),nt(e),delete this.recorders[e.id]},this.displayPlayer=function(t,s,a,l){if(!t)throw errorMsg="RecorderManager.displayPlayer :: Valid ArchiveId required",U(errorMsg),new Error(errorMsg);var c="player_"+e+"_"+n++,u=l?ht(l):{};if(u.token=s,u.archiveId=t,u.partnerId=e,u.playerId=c,u.hasOwnProperty("style")){var h=u.style.showControlBar;u.style=encodeURIComponent(ut(u.style))}var d={};d.allowscriptaccess="always",u.wmode?(d.wmode=u.wmode,delete u.wmode):d.wmode="transparent";var f={};f.id=c,f.style="outline:none;",(!u.width||isNaN(u.width))&&(u.width=i),(!u.height||isNaN(u.height))&&(u.height=o,0==h&&(u.height-=r)),u.autoPlay||(u.autoPlay=!1);var p=!1;return a||(a="player_replace_"+n,p=!0),swfobject.addDomLoadEvent(function(){if(p){var t=document.createElement("div");t.setAttribute("id",a),document.body.appendChild(t)}L(xt+"/v0.91.46.b5f48f1/flash/f_playerwidget.swf?partnerId="+e,a,u.width,u.height,mt,!1,u,d,f)}),this.players[c]=new D(c,a,u),this.players[c]},this.removePlayer=function(e){if(!e){var t="Session.removePlayer :: player cannot be null";throw U(t),new Error(t)}W("Session.removePlayer("+e.id+")"),nt(e),delete this.players[e.id]}}function j(t){this.superClass=e,this.superClass(),this.sessionId=t,this.connection,this.subscribers={},this.publishers={},this.apiKey,this.capabilities,this.connected=!1,this.connecting=!1;var n,i,o=1,r=1,s=264,a=198;this.connect=function(e,t,i){if(this.connecting)return $("Session.connect :: Patience, please."),void 0;if(W("Session.connect("+e+")"),!TB.checkSystemRequirements()){var o="Session.connect :: Flash Player Version 10+ required";throw U(o),new Error(o)}if(!e)throw o="Session.connect :: API key required to connect",U(o),new Error(o);if(!t)throw o="Session.connect :: Token required to connect",U(o),new Error(o);if(this.connected)return $("Session.connect :: Session already connected"),void 0;this.connecting=!0;var r=i?ht(i):{};this.apiKey=e,this.token=t,this.properties=i;var s={};s.allowscriptaccess="always",r.wmode&&(s.wmode=r.wmode,delete r.wmode),r.connectionData&&(r.connectionData=encodeURIComponent(r.connectionData)),n="controller_"+this.sessionId;var a={};a.id=n,r.sessionId=this.sessionId,r.token=this.token;var l="replace_"+this.sessionId;swfobject.addDomLoadEvent(function(){var t=document.createElement("div");t.setAttribute("id",l),t.style.display="none",document.body.appendChild(t);var n=new Date;r.startTime=n.getTime(),swfobject.embedSWF(xt+"/v0.91.46.b5f48f1/flash/f_controllerwidget.swf?partnerId="+e,l,1,1,mt,!1,r,s,a)}),"file:"==window.location.protocol&&setTimeout("TB.controllerLoadCheck()",8e3)},this.disconnect=function(){if(W("Session.disconnect()"),!n||this.connecting)return $("Session.disconnect :: No connection to disconnect"),void 0;var e=document.getElementById(n);if(e){if(!isUnloading)try{e.cleanupView()}catch(t){var i="Session.disconnect :: Failed to disconnect - "+t;throw U(i),new Error(i)}}else $("Session.disconnect :: No connection to disconnect")},this.disconnectComponents=function(){W("Session.disconnectComponents() - disconnecting publishers and subscribers");for(var e in this.publishers)this.publishers[e].hasOwnProperty("id")&&tt(this.publishers[e]);for(var t in this.subscribers)this.subscribers[t].hasOwnProperty("id")&&tt(this.subscribers[t])},this.cleanup=function(){W("Session.cleanup()");for(var e in this.publishers)this.publishers[e].hasOwnProperty("id")&&this.unpublish(this.publishers[e]);for(var t in this.subscribers)this.subscribers[t].hasOwnProperty("id")&&this.unsubscribe(this.subscribers[t])},this.cleanupConnection=function(){return W("Session.cleanupConnection() - removing controller"),this.connection=null,n?(document.getElementById(n)?setTimeout(function(){it(n,"TB.sessionDisconnected :: "),n=null},0):$("Session.cleanup :: No connection to clean up"),void 0):($("Session.cleanup :: No connection to clean up"),void 0)},this.publish=function(e,t){if(W("Session.publish("+e+"):"+t),!this.connection||!this.connection.connectionId){var n="Session.publish :: Connection required to publish";throw U(n),new Error(n)}if(!e){var i=document.createElement("div");e="publisher_replace_"+this.sessionId+"_"+o,i.setAttribute("id",e),document.body.appendChild(i)}var r=t?ht(t):{};if(void 0!=r.name&&r.name.length>1e3)throw n="Session.publish :: name property longer than 1000 chars.",U(n),new Error(n);if(void 0!=r.data&&r.data.length>1e3)throw n="Session.publish :: data property longer than 1000 chars.",U(n),new Error(n);var s="publisher_"+this.sessionId+"_"+o++,a=new _(s,e,r);return this._embedPublisher(a)},this._embedPublisher=function(e){var t=document.getElementById(e.replacedDivId);if(!t)throw errorMsg="Session.publish :: replaceElementId does not exist in DOM.",U(errorMsg),new Error(errorMsg);var n={};n.allowscriptaccess="always",n.cameraSelected=yt,e.properties.wmode?(n.wmode=e.properties.wmode,delete e.properties.wmode):n.wmode="transparent",e.properties.hasOwnProperty("style")&&(e.properties.style=encodeURIComponent(ut(e.properties.style)));var i={};i.id=e.id,i.style="outline:none;",e.properties.publisherId=e.id,e.properties.connectionId=this.connection.connectionId,e.properties.sessionId=this.sessionId,e.properties.token=this.token,e.properties.cameraSelected=yt,e.properties.simulateMobile=TB.simulateMobile,e.properties.publishCapability=this.capabilities.publish,(!e.properties.width||isNaN(e.properties.width))&&(e.properties.width=s),(!e.properties.height||isNaN(e.properties.height))&&(e.properties.height=a),this.publishers[e.id]=e;var o=new Date;return e.properties.startTime=o.getTime(),L(xt+"/v0.91.46.b5f48f1/flash/f_publishwidget.swf?partnerId="+this.apiKey,e.replacedDivId,e.properties.width,e.properties.height,mt,!1,e.properties,n,i),e},this.unpublish=function(e){if(!e){var t="Session.unpublish :: publisher cannot be null";throw U(t),new Error(t)}W("Session.unpublish("+e.id+")"),e.panelId&&dt&&dt.panels[e.panelId]&&dt.removePanel(dt.panels[e.panelId]),nt(e),delete this.publishers[e.id]},this.forceUnpublish=function(e){var t;if(e&&"string"==typeof e)t=e;else{if(!e||"object"!=typeof e||!e.hasOwnProperty("streamId")){var i="Session.forceUnpublish :: Invalid stream type";throw U(i),new Error(i)}t=e.streamId}if(W("Session.forceUnpublish("+t+")"),!t)throw i="Session.forceUnpublish :: Stream does not exist.",U(i),new Error(i);try{var o=document.getElementById(n);o.forceUnpublish(t)}catch(r){throw i="Session.forceUnpublish :: "+r,U(i),new Error(i)}},this.subscribe=function(e,t,n){if(!this.connection||!this.connection.connectionId){var i="Session.subscribe :: Connection required to subscribe";throw U(i),new Error(i)}if(!e)throw i="Session.subscribe :: stream cannot be null",U(i),new Error(i);if(!e.hasOwnProperty("streamId"))throw i="Session.subscribe :: invalid stream object",U(i),new Error(i);if(W("Session.subscribe("+e.streamId+")"),!t){var o=document.createElement("div");t="subscriber_replace_"+this.sessionId+"_"+r,o.setAttribute("id",t),document.body.appendChild(o)}var l=document.getElementById(t);if(!l)throw i="Session.subscribe :: replaceElementId does not exist in DOM.",U(i),new Error(i);var c=n?ht(n):{};e&&e.hasOwnProperty("type")&&"multiplexed"==e.type&&(c.mixedStreamURI="live-lowlatency");var u="subscriber_"+e.streamId+"_"+r++,h=new x(e,u,t,c),d={};d.allowscriptaccess="always",c.wmode?(d.wmode=c.wmode,delete c.wmode):d.wmode="transparent",c.hasOwnProperty("style")&&(c.style=encodeURIComponent(ut(c.style)));var f={};f.id=h.id,f.style="outline:none;",c.subscriberId=u,c.connectionId=this.connection.connectionId,c.sessionId=this.sessionId,c.streamId=e.streamId,c.streamType=e.type,c.name=e.name,c.token=this.token,c.simulateMobile=TB.simulateMobile,c.isPublishing=Object.keys(this.publishers).length>0,e.hasAudio||(c.subscribeToAudio="false"),e.hasVideo||(c.subscribeToVideo="false"),c.orientation=e.orientation,c.peerId=e.peerId,(!c.width||isNaN(c.width))&&(c.width=s),(!c.height||isNaN(c.height))&&(c.height=a),this.subscribers[h.id]=h;var p=new Date;return c.startTime=p.getTime(),L(xt+"/v0.91.46.b5f48f1/flash/f_subscribewidget.swf?partnerId="+this.apiKey,t,c.width,c.height,mt,!1,c,d,f),h},this.unsubscribe=function(e){if(!e){var t="Subscribe.unsubscribe :: subscriber cannot be null";throw U(t),new Error(t)}W("Session.unsubscribe("+e.id+")"),nt(e),delete this.subscribers[e.id]},this.signal=function(){if(W("Session.signal()"),!(n&&this.connection&&this.connection.connectionId))throw i="Session.signal :: Connection required to signal.",U(i),new Error(i);try{var e=document.getElementById(n);e.sendSignal()}catch(t){var i="Session.signal :: "+t;throw U(i),new Error(i)}},this.forceDisconnect=function(e){e&&W("Session.forceDisconnect("+e.connectionId+")");var t;if(e&&"string"==typeof e)t=e;else{if(!e||"object"!=typeof e||!e.hasOwnProperty("connectionId")){var i="Session.forceDisconnect :: Invalid connection type";throw U(i),new Error(i)}t=e.connectionId}if(!(n&&this.connection&&this.connection.connectionId))throw i="Session.forceDisconnect :: Connection required to forceDisconnect.",U(i),new Error(i);try{var o=document.getElementById(n);o.forceDisconnect(t)}catch(r){throw i="Session.forceDisconnect :: "+r,U(i),new Error(i)}},this.getSubscribersForStream=function(e){var t=null;if(!e){var n="Session.getSubscribersForStream :: stream cannot be null";throw U(n),new Error(n)}var i;if("string"==typeof e)i=e;else{if("object"!=typeof e||!e.hasOwnProperty("streamId"))throw n="Session.getSubscribersForStream :: Invalid stream type",U(n),new Error(n);i=e.streamId}t=[];for(var o in this.subscribers)this.subscribers[o].hasOwnProperty("stream")&&this.subscribers[o].stream.streamId==i&&t.push(this.subscribers[o]);return t},this.getPublisherForStream=function(e){if(!e){var t="Session.getPublisherForStream :: stream cannot be null";throw U(t),new Error(t)}var n;if("string"==typeof e)n=e;else{if("object"!=typeof e||!e.hasOwnProperty("streamId"))throw t="Session.getPublisherForStream :: Invalid stream type",U(t),new Error(t);n=e.streamId}for(var i in this.publishers){var o=document.getElementById(this.publishers[i].id);if(o)try{if(o.getStreamId()==n)return this.publishers[i]}catch(r){$("Failed to get streamId for publisher: "+this.publishers[i].id)}}return null},this.createArchive=function(e,t,i){if(W("Session.createArchive()"),!(n&&this.connection&&this.connection.connectionId))throw errorMsg="Session.createArchive :: Connection required to create an archive.",U(errorMsg),new Error(errorMsg);if(t!=TB.PER_SESSION&&t!=TB.PER_STREAM)throw errorMsg="Session.createArchive :: Invalid type specfied.",U(errorMsg),new Error(errorMsg);try{var o=document.getElementById(n);o.createArchive(e,t,i)}catch(r){throw errorMsg="Session.createArchive :: "+r,U(errorMsg),new Error(errorMsg)}},this.loadArchive=function(e){if(W("Session.loadArchive()"),!(n&&this.connection&&this.connection.connectionId))throw o="Session.loadArchive :: Connection required to load an archive.",U(o),new Error(o);try{var t=document.getElementById(n);t.loadArchive(e)}catch(i){var o="Session.loadArchive :: "+i;throw U(o),new Error(o)}},this.startRecording=function(e){if(W("Session.startRecording()"),e=Et[this.sessionId][e.archiveId],!e){var t="Session.startRecording :: Archive not created.";throw U(t),new Error(t)}if(e.type!=TB.PER_SESSION)throw t="Session.startRecording :: Trying to record per session on a "+e.type+" archive",U(t),new Error(t);if(e.recording)return $("Session.startRecording :: Trying to start recording when the archive is already recording"),void 0;if(!(n&&this.connection&&this.connection.connectionId))throw t="Session.startRecording :: Connection required to record an archive.",U(t),new Error(t);try{var i=document.getElementById(n);i.startRecordingSession(e.archiveId),e.recording=!0}catch(o){throw t="Session.startRecording :: "+o,U(t),new Error(t)
}},this.stopRecording=function(e){if(W("Session.stopRecording()"),e=Et[this.sessionId][e.archiveId],!e){var t="Session.stopRecording :: Archive not created.";throw U(t),new Error(t)}if(e.type!=TB.PER_SESSION)throw t="Session.stopRecording :: Trying to stop recording per session on a "+e.type+" archive",U(t),new Error(t);if(!(n&&this.connection&&this.connection.connectionId))throw t="Session.stopRecording :: Connection required to record an archive.",U(t),new Error(t);try{var i=document.getElementById(n);i.stopRecordingSession(e.archiveId),e.recording=!1}catch(o){throw t="Session.stopRecording :: "+o,U(t),new Error(t)}},this.closeArchive=function(e){if(W("Session.closeArchive()"),!(n&&this.connection&&this.connection.connectionId))throw o="Session.closeArchive :: Connection required to close an archive.",U(o),new Error(o);try{var t=document.getElementById(n);t.closeArchive(e.archiveId)}catch(i){var o="Session.closeArchive :: "+i;throw U(o),new Error(o)}},this.getStateManager=function(){if(W("Session.getStateManager()"),i)return i;if(n&&this.connection&&this.connection.connectionId)return i=new O(n);var e="Session.getStateManager :: Connection required to getState. Wait for sessionConnected before you getStateManager.";throw U(e),new Error(e)}}function O(t,n){this.superClass=e,this.superClass();var i=20;this.archiveId=n,this.set=function(e,o){var r=e;if(n){var s="StateManager.set :: not allowed on StateManager objects for archives.";throw U(s),new Error(s)}if("string"!=typeof e||"string"!=typeof o&&null!=o){if("object"!=typeof e||null!=o)throw s="StateManager.set :: Invalid parameters passed. set() takes either two string parameters or one object of key value pairs.",U(s),new Error(s);if(Object.keys(r).length>i)return U("StateManager.set :: Maximum number of keys exceeded"),this.dispatchEvent(new m("changeFailed",405,"Maximum number of keys exceeded",r)),void 0}else r={},r[e]=o;for(var a in r)if("string"!=typeof r[a]&&null!=r[a])return U("StateManager.set :: Invalid value "+r[a].toString()+" is not a string"),this.dispatchEvent(new m("changeFailed",403," Invalid value, value must be a string",r)),void 0;if(t)try{var l=document.getElementById(t);l.setState(r)}catch(c){throw s="StateManager.set :: "+c,U(s),new Error(s)}},this.superAddEventListener=this.addEventListener,this.addEventListener=function(e,i){var o=!1;if("changed"==e?o=null:0==e.indexOf("changed:")&&(o=e.split(":")[1]),o!==!1&&(n&&(o="TB_archive_"+n+"_"),t))try{var r=document.getElementById(t);r.subscribeToKeyChange(o)}catch(s){var a="StateManager.addEventListener :: "+s;throw U(a),new Error(a)}this.superAddEventListener(e,i)}}function F(e,t,n){try{var i=document.getElementById("controller_"+e);i.setEchoSuppressionEnabled(t,n)}catch(o){var r="Group :: "+o;throw U(r),new Error(r)}}function H(e,t){var n=null;try{var i=document.getElementById("controller_"+e),o=i.getGroupProperties(t);n=new N(o)}catch(r){var s="Group :: "+r;throw U(s),new Error(s)}return n}function B(e){e.success||(U("Failed to embed SWF "+e.id),TB.exceptionHandler("Failed to embed SWF "+e.id,"Embed Failed",2001))}function L(e,t,n,i,o,r,s,a,l){return swfobject.hasFlashPlayerVersion(o)?(swfobject.embedSWF(e,t,n,i,o,r,s,a,l,B),void 0):(U("Flash Player "+o+" or higher required"),TB.exceptionHandler("Flash Player "+o+" or higher required","Embed Failed",2001),void 0)}function q(e,t){return function(){null!=e?e(t):U("Event handler is null")}}function z(e){window.opentokdebug.debug("[FLASHDEBUG] opentok: "+e)}function W(e){window.opentokdebug.debug("[DEBUG] opentok: "+e)}function $(e){window.opentokdebug.warn("[WARN] opentok: "+e)}function U(e){window.opentokdebug.error("[ERROR] opentok: "+e)}function V(e,t){var n=document.getElementById("opentok_console");n&&(n.innerHTML+=t+"<br>")}function G(e){if(wt.hasOwnProperty(e))var t=wt[e];else t=new g(e,0/0,null);return t}function Q(e,t){return new v(e.streamId,G(e.connectionId),e.name,e.streamData,e.type,e.creationTime,e.hasAudio,e.hasVideo,e.orientation,t,e.peerId,e.quality)}function Y(e,t){for(var n=[],i=0;i<e.length;i++)n.push(Q(e[i],t));return n}function X(e,t){var n=new P(e.id,e.type,e.title,t,e.status);return Et.hasOwnProperty(t)||(Et[t]={}),Et[t][e.id]=n,n}function K(e){for(var t=[],n=0;n<e.length;n++){var i=new g(e[n].connectionId,e[n].creationTime,e[n].data);t.push(i),wt[i.connectionId]=i}return t}function J(e,t){var n=[];for(var i in t)t[i].hasOwnProperty("groupId")&&n.push(new T(e,t[i].groupId));return n}function Z(e){for(var t=new Array,n=0;n<e.length;n++)t.push(new E(e[n].name,e[n].status));return t}function et(e){for(var t=new Array,n=0;n<e.length;n++)t.push(new S(e[n].name,e[n].status));return t}function tt(e){if(e.hasOwnProperty("id")){var t=document.getElementById(e.id);if(t)try{t.cleanupView()}catch(n){$("Disconnecting "+e.id+" failed")}else $("Disconnecting "+e.id+" failed")}}function nt(e){var t=document.getElementById(e.id);if(t)try{t.cleanupView();var n=t.parentNode;n.removeChild(t)}catch(i){$("Removing "+e.id+" failed "+i)}else $("Element "+e.id+" does not exist")}function it(e,t){try{e&&(swfobject.removeSWF(e),e=null)}catch(n){var i=t+n;U(i),TB.exceptionHandler(i,"Internal Error",2e3)}}function ot(e,t,n){var i=document.getElementById(e);if(!i)throw r="Component "+e+" does not exist.",U(r),new Error(r);try{i.setStreamProperty(t,n)}catch(o){var r="Changing settings on component "+e+" failed.";throw U(r),new Error(r)}}function rt(e,t,n){var i=document.getElementById(e);if(!i)throw r="Publisher "+e+" does not exist.",U(r),new Error(r);try{n?i.setCamera(t.name):i.setMicrophone(t.name)}catch(o){var r="Changing hardware settings on publisher "+e+" failed.";throw U(r),new Error(r)}}function st(e,t){t=t||1/0,e=e||document.body;for(var n,i,o=1,r=0,s=e.childNodes,a=s.length;a>r;)n=s[r++],1==n.nodeType&&("static"!==at(n,"position")?(i=at(n,"z-index"),i="auto"==i?st(n):parseInt(i,10)||0):i=st(n),i>o&&t>=i&&(o=i));return o}function at(e,t){var n,i,o=document.defaultView||window;return 1==e.nodeType&&(n=t.replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()}),i=e.style[n],i||(e.currentStyle?i=e.currentStyle[n]:o.getComputedStyle&&(i=o.getComputedStyle(e,"").getPropertyValue(t)))),i||""}function lt(e,t,n){var i=document.createElement("input");i.setAttribute("name",t),i.setAttribute("value",n),i.setAttribute("type","hidden"),e.appendChild(i)}function ct(e){try{var t=document.getElementById(e);if(t)return t.fetchData()}catch(n){return $("Failed to get logs for "+e+" "+n),""}}function ut(e){var t="{ ";for(var n in e)t+="boolean"==typeof e[n]?'"'+n+'":'+e[n]+", ":'"'+n+'":"'+e[n].toString()+'", ';return t=t.length>1?t.substring(0,t.length-2)+" }":"{}"}function ht(e){var t=e instanceof Array?[]:{};for(var n in e)"clone"!=n&&(t[n]=e[n]&&"object"==typeof e[n]?ht(e[n]):e[n]);return t}this.isUnloading=!1,window.onunload=function(){isUnloading=!0;for(var e in TB.sessions)TB.sessions[e].hasOwnProperty("disconnect")&&(TB.sessionDisconnectedHandler=function(){},TB.sessions[e].disconnect(),TB.sessions[e].cleanupConnection(),TB.sessions[e].cleanup())};var dt,ft,pt,mt="10.0.0",gt=215,vt=138,yt=!1,bt=!1,wt={},_t="true",xt="http://staging.tokbox.com";"true"==_t&&"https:"==window.location.protocol&&(xt="https://staging.tokbox.com");var Ct=new e,Et={},St={},Tt=!1;return{sessions:{},groups:{},LOG:5,DEBUG:4,INFO:3,WARN:2,ERROR:1,NONE:0,ACTIVE:"active",INACTIVE:"inactive",UNKNOWN:"unknown",PER_SESSION:"perSession",PER_STREAM:"perStream",EXCEPTION:"exception",SESSION_CONNECTED:"sessionConnected",SESSION_DISCONNECTED:"sessionDisconnected",STREAM_CREATED:"streamCreated",STREAM_DESTROYED:"streamDestroyed",CONNECTION_CREATED:"connectionCreated",CONNECTION_DESTROYED:"connectionDestroyed",SIGNAL_RECEIVED:"signalReceived",STREAM_PROPERTY_CHANGED:"streamPropertyChanged",MICROPHONE_LEVEL_CHANGED:"microphoneLevelChanged",ARCHIVE_CREATED:"archiveCreated",ARCHIVE_CLOSED:"archiveClosed",ARCHIVE_LOADED:"archiveLoaded",ARCHIVE_SAVED:"archiveSaved",SESSION_RECORDING_STARTED:"sessionRecordingStarted",SESSION_RECORDING_STOPPED:"sessionRecordingStopped",SESSION_RECORDING_IN_PROGRESS:"sessionRecordingInProgress",STREAM_RECORDING_IN_PROGRESS:"streamRecordingInProgress",SESSION_NOT_RECORDING:"sessionNotRecording",STREAM_RECORDING_STARTED:"streamRecordingStarted",STREAM_RECORDING_STOPPED:"streamRecordingStopped",PLAYBACK_STARTED:"playbackStarted",PLAYBACK_STOPPED:"playbackStopped",RECORDING_STARTED:"recordingStarted",RECORDING_STOPPED:"recordingStopped",GROUP_PROPERTIES_UPDATED:"groupPropertiesUpdated",RESIZE:"resize",SETTINGS_BUTTON_CLICK:"settingsButtonClick",DEVICE_INACTIVE:"deviceInactive",ACCESS_ALLOWED:"accessAllowed",ACCESS_DENIED:"accessDenied",ECHO_CANCELLATION_MODE_CHANGED:"echoCancellationModeChanged",DEVICES_DETECTED:"devicesDetected",DEVICES_SELECTED:"devicesSelected",CLOSE_BUTTON_CLICK:"closeButtonClick",HAS_REQUIREMENTS:1,OLD_FLASH_VERSION:0,BASIC_STREAM:"basic",MULTIPLEXED_STREAM:"multiplexed",ARCHIVED:"archive",GLOBAL_GROUP:"global",MULTIPLEXER_TIMEOUT_BASED_SWITCH:0,MULTIPLEXER_ACTIVITY_BASED_SWITCH:1,simulateMobile:!1,setLogLevel:function(e){window.opentokdebug.setLevel(e),e==this.NONE?window.opentokdebug.setCallback(null):window.opentokdebug.setCallback(V,!0),W("TB.setLogLevel("+e+")")},log:function(e){window.opentokdebug.log("[LOG] opentok: "+e)},initSession:function(e){if(W("TB.initSession("+e+")"),null==e||""==e){var t="TB.initSession :: sessionId cannot be null";throw U(t),new Error(t)}return this.sessions.hasOwnProperty(e)||(this.sessions[e]=new j(e)),this.sessions[e]},initDeviceManager:function(e){if(W("TB.initDeviceManager("+e+")"),!e){var t="TB.initDeviceManager :: apiKey cannot be null";throw U(t),new Error(t)}return dt||(dt=new M(e)),dt},initRecorderManager:function(e){if(W("TB.initRecorderManager("+e+")"),!e){var t="TB.initRecorderManager :: apiKey cannot be null";throw U(t),new Error(t)}return ft||(ft=new R(e)),ft},addEventListener:function(e,t){W("TB.addEventListener("+e+")"),Ct.addEventListener(e,t)},removeEventListener:function(e,t){W("TB.removeEventListener("+e+")"),Ct.removeEventListener(e,t)},dispatchEvent:function(e){W("TB.dispatchEvent()"),e.target=this,Ct.dispatchEvent(e)},checkSystemRequirements:function(){return W("TB.checkSystemRequirements()"),swfobject.hasFlashPlayerVersion(mt)?this.HAS_REQUIREMENTS:this.OLD_FLASH_VERSION},exceptionHandler:function(e,t,i){U("TB.exception :: title: "+t+" msg: "+e+" errorCode: "+i);try{this.dispatchEvent(new n(this.EXCEPTION,e,t,i))}catch(o){var r="TB.exception :: Failed to dispatch exception - "+o;U(r)}},controllerLoadedHandler:function(){Tt=!0},controllerLoadCheck:function(){if(!Tt){var e="The connection timed out. Make sure that you have allowed this page in theFlash Player Global Settings Manager. Go to:";adobeURL="http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",prompt(e,adobeURL)}},flashLogger:function(e){z(e)},destroyStreamHandler:function(e,t){W("TB.destroyStream");try{var n=this.sessions[e],i=Y(t,e),o=function(){for(var e=0;e<i.length;e++){var t=n.getPublisherForStream(i[e]);t&&n.unpublish(t)}};setTimeout(o,2)}catch(r){var s="TB.destroyStream :: "+r;U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},sessionConnectedHandler:function(e,t,n,i,o,s,a,l){W("TB.sessionConnected");try{for(var c=this.sessions[e],u=0,h=n.length;h>u;u++)if(connection=n[u],connection.connectionId==t){c.connection=new g(t,connection.creationTime,connection.data);break}c.connected=!0,c.connecting=!1,c.connection.quality=a,c.capabilities=s;for(var d=K(n),f=Y(i,c.sessionId),p=J(e,o),u=0;u<p.length;u++)this.groups[e+"_"+p[u].groupId]=p[u];for(var m=[],u=0;u<l.length;u++){var v=X(l[u],e);m.push(v)}c.dispatchEvent(new r(this.SESSION_CONNECTED,d,f,p,m))}catch(y){var b="TB.sessionConnected :: "+y;U(b),TB.exceptionHandler(b,"Internal Error",2e3)}},sessionDisconnectedHandler:function(e,t){W("TB.sessionDisconnected("+t+")");try{var n=this.sessions[e];n.disconnectComponents(),n.cleanupConnection(),n.connected=!1;var i=new s(this.SESSION_DISCONNECTED,t,!0);n.dispatchEvent(i);var o=function(){i.isDefaultPrevented()||n.cleanup()};setTimeout(o,2)}catch(r){var a="TB.sessionDisconnected :: "+r;U(a),TB.exceptionHandler(a,"Internal Error",2e3)}},streamCreatedHandler:function(e,t,n){W("TB.streamCreated");try{var i=this.sessions[e],r=Y(t,e);i.dispatchEvent(new o(this.STREAM_CREATED,r,n));var s=Et[e];for(var a in s)for(var l=0;l<r.length;l++)if(r[l].connection.connectionId==connection.connectionId)for(var c in i.publishers)if(i.publishers[c].hasOwnProperty("id")){var u=document.getElementById(i.publishers[c].id);a&&s[a]&&s[a].type==TB.PER_SESSION&&1==s[a].recording&&u.signalRecordingStarted()}}catch(h){var d="TB.streamCreated :: "+h;U(d),TB.exceptionHandler(d,"Internal Error",2e3)}},streamDestroyedHandler:function(e,t,n){W("TB.streamDestroyed");try{var i=this.sessions[e],r=Y(t,e),s=new o(this.STREAM_DESTROYED,r,n,!0);i.dispatchEvent(s);var a=function(){if(!s.isDefaultPrevented())for(var e=0;e<s.streams.length;e++){for(var t=i.getSubscribersForStream(s.streams[e]),n=0;n<t.length;n++)i.unsubscribe(t[n]);var o=i.getPublisherForStream(s.streams[e]);o&&i.unpublish(o)}};setTimeout(a,2)}catch(l){var c="TB.streamDestroyed :: "+l;U(c),TB.exceptionHandler(c,"Internal Error",2e3)}},streamPropertyChangedHandler:function(e,t,n,i,o){W("TB.streamPropertyChangedHandler");var r=this.sessions[e],s=Q(t,e),a=new d(this.STREAM_PROPERTY_CHANGED,s,n,i,o);r.dispatchEvent(a);try{var l;if("hasAudio"==n){for(var c in r.subscribers)if(l=r.subscribers[c],l.hasOwnProperty("stream")&&l.stream.streamId==s.streamId){l._subscribeToAudio(o,!0);break}}else if("hasVideo"==n){for(c in r.subscribers)if(l=r.subscribers[c],l.hasOwnProperty("stream")&&l.stream.streamId==s.streamId){l._subscribeToVideo(o,!0);break}}else if("orientation"==n){for(c in r.subscribers)if(l=r.subscribers[c],l.hasOwnProperty("stream")&&l.stream.streamId==s.streamId){l.changeOrientation(o);break}}else"quality"==n||W("Unknown property changed")}catch(u){var h="TB.streamPropertyChangedHandler :: "+u;U(h),TB.exceptionHandler(h,"Internal Error",2e3)}},microphoneLevelChangedHandler:function(e,t,n,i){try{var o=this.sessions[e];if(!o){var r="TB.microphoneLevelChangedHandler :: Invalid session ID: "+e;return U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0}o.subscribers[t];var s=new l(this.MICROPHONE_LEVEL_CHANGED,n,i);o.dispatchEvent(s)}catch(a){r="microphoneLevelChanged :: "+a,U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},connectionCreatedHandler:function(e,t,n){W("TB.connectionCreated");try{var o=this.sessions[e],r=K(t);o.dispatchEvent(new i(this.CONNECTION_CREATED,r,n))}catch(s){var a="TB.connectionCreated :: "+s;U(a),TB.exceptionHandler(a,"Internal Error",2e3)}},connectionDestroyedHandler:function(e,t,n){W("TB.connectionDestroyed");try{var o=this.sessions[e],r=K(t);o.dispatchEvent(new i(this.CONNECTION_DESTROYED,r,n))}catch(s){var a="TB.connectionDestroyed :: "+s;U(a),TB.exceptionHandler(a,"Internal Error",2e3)}},signalHandler:function(e,t){W("TB.signal");try{var n=this.sessions[e];n.dispatchEvent(new a(this.SIGNAL_RECEIVED,G(t)))}catch(i){var o="TB.signal ::"+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},archiveCreatedHandler:function(e,t){W("TB.archiveCreatedHandler:"+e+" - "+t);try{var n=this.sessions[e],i=X(t,e);n.dispatchEvent(new f(this.ARCHIVE_CREATED,[i]))}catch(o){var r="TB.archiveCreatedHandler :: "+o;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},archiveClosedHandler:function(e,t){W("TB.archiveClosedHandler:"+e+" - "+t.id);try{var n=this.sessions[e];n.dispatchEvent(new f(this.ARCHIVE_CLOSED,[Et[e][t.id]])),delete Et[e][t.id]}catch(i){var o="TB.archiveClosedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},archiveLoadedHandler:function(e,t){W("TB.archiveLoadedHandler:"+e+" - "+t.archiveId);try{var n=this.sessions[e],i=new P(t.id,t.type,t.title,e);St.hasOwnProperty(e)||(St[e]={}),St[e][t.id]=i,n.dispatchEvent(new f(this.ARCHIVE_LOADED,[i]))}catch(o){var r="TB.archiveLoadedHandler :: "+o;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},sessionRecordingStartedHandler:function(e,t){W("TB.sessionRecordingStartedHandler:"+e+" - "+t.id);try{var n=this.sessions[e];n.dispatchEvent(new f(this.SESSION_RECORDING_STARTED,[Et[t.id]]))}catch(i){var o="TB.sessionRecordingStartedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},sessionRecordingStoppedHandler:function(e,t){W("TB.sessionRecordingStoppedHandler:"+e+" - "+t);try{var n=this.sessions[e];n.dispatchEvent(new f(this.SESSION_RECORDING_STOPPED,[Et[t.id]]));for(var i in n.publishers)if(n.publishers[i].hasOwnProperty("id")){var o=document.getElementById(n.publishers[i].id);o.signalRecordingStopped()}}catch(r){var s="TB.sessionRecordingStoppedHandler :: "+r;U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},sessionRecordingInProgressHandler:function(e){W("TB.sessionRecordingInProgressHandler");try{var n=this.sessions[e];n.dispatchEvent(new t(this.SESSION_RECORDING_IN_PROGRESS,!1))}catch(i){var o="TB.sessionRecordingStartedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},sessionNotRecordingHandler:function(e){W("TB.sessionNotRecordingHandler");try{var n=this.sessions[e];n.dispatchEvent(new t(this.SESSION_NOT_RECORDING,!1))}catch(i){var o="TB.sessionNotRecordingHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},streamRecordingStartedHandler:function(e,t){W("TB.streamRecordingStartedHandler:"+e);try{var n=this.sessions[e],i=Y(t,e);n.dispatchEvent(new o(this.STREAM_RECORDING_STARTED,i,"",!1));for(var r in n.publishers)if(n.publishers[r].hasOwnProperty("id"))for(var s=document.getElementById(n.publishers[r].id),a=0;a<t.length;a++)if(s.getStreamId()==t[a].streamId){s.signalRecordingStarted(),W("TB.streamRecordingStartedHandler: signal: "+t[a].streamId);break}}catch(l){var c="TB.streamRecordingStartedHandler :: "+l;U(c),TB.exceptionHandler(c,"Internal Error",2e3)}},streamRecordingStoppedHandler:function(e,t){W("TB.streamRecordingStoppedHandler");try{var n=this.sessions[e],i=Y(t,e);n.dispatchEvent(new o(this.STREAM_RECORDING_STOPPED,i,"",!1));for(var r in n.publishers)if(n.publishers[r].hasOwnProperty("id"))for(var s=document.getElementById(n.publishers[r].id),a=0;a<t.length;a++)if(s.getStreamId()==t[a].streamId){s.signalRecordingStopped(),W("TB.streamRecordingStoppedHandler: signal: "+t[a].streamId);break}}catch(l){var c="TB.streamRecordingStoppedHandler :: "+l;U(c),TB.exceptionHandler(c,"Internal Error",2e3)}},streamRecordingInProgressHandler:function(e,t){W("TB.streamRecordingInProgressHandler");try{var n=this.sessions[e],i=Y(t,e);n.dispatchEvent(new o(this.STREAM_RECORDING_IN_PROGRESS,i,"",!1))}catch(r){var s="TB.streamRecordingInProgressHandler :: "+r;U(s),TB.exceptionHandler(s,"Internal Error",2e3)}},playbackStartedHandler:function(e,t){W("TB.playbackStartedHandler");try{var n=this.sessions[e];archiveObj=new P(t.id,t.type,t.title,e),n.dispatchEvent(new f(this.PLAYBACK_STARTED,[archiveObj]))}catch(i){var o="TB.playbackStartedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},playbackStoppedHandler:function(e,t){W("TB.playbackStoppedHandler");try{var n=this.sessions[e];archiveObj=new P(t.id,t.type,t.title,e),n.dispatchEvent(new f(this.PLAYBACK_STOPPED,[archiveObj]))}catch(i){var o="TB.playbackStoppedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},groupPropertiesUpdatedHandler:function(e,n){W("TB.groupPropertiesUpdated");try{var i=this.groups[e+"_"+n.groupId];if(!i)return U("TB.groupPropertiesUpdated :: Invalid group ID: "+e+"_"+n.groupId),void 0;i.dispatchEvent(new t(this.GROUP_PROPERTIES_UPDATED))}catch(o){var r="TB.groupPropertiesUpdated :: "+o;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},videoComponentLoadedHandler:function(e,n){try{if(e){var i=this.sessions[e];if(!i)return;var o=i.publishers[n],r=i.subscribers[n];o&&!o.loaded&&(o.loaded=!0,o.modified&&(null!=o.audioPublished&&o.publishAudio(o.audioPublished),null!=o.videoPublished&&o.publishVideo(o.videoPublished),o.setMicrophoneGain(o.gain),o.setStyle(o._style),o.modified=!1),o.dispatchEvent(new t("loaded"))),r&&!r.loaded&&(r.loaded=!0,r.modified&&(null!=r.audioSubscribed&&r.subscribeToAudio(r.audioSubscribed),null!=r.videoSubscribed&&r.subscribeToVideo(r.videoSubscribed),r.setAudioVolume(r.audioVolume),r.setStyle(r._style),r.modified=!1),r.dispatchEvent(new t("loaded")))}else{var s=ft.players[n];s&&s._archiveId&&(s.loadArchive(s._archiveId),s._archiveId=null),s&&s._play&&(s.play(),s._play=!1);var a=ft.recorders[n],l=s?s:a;l&&!l.loaded&&(l.loaded=!0,l.modified&&(l.setStyle(l._style),l==a&&l._title&&(l.setTitle(_title),_title=""),l.modified=!1),l.dispatchEvent(new t("loaded")))}}catch(c){var u="videoComponentLoaded:: initialize component "+n+" - "+c;U(u),TB.exceptionHandler(u,"Internal Error",2e3)}},pubWidgetStyleHeightFrom:null,pubWidgetStyleWidthFrom:null,resizePublisherToTarget:function(e,t){W("TB.resize");try{var n=this.sessions[e];if(!n){var i="TB.resize :: Invalid session ID: "+e;return U(i),TB.exceptionHandler(i,"Internal Error",2e3),void 0}var o=n.publishers[t];if(!o)return i="TB.resize :: Invalid publisher ID: "+t,U(i),TB.exceptionHandler(i,"Internal Error",2e3),void 0;var r=document.getElementById(t);if(!r)return i="TB.resize :: Publisher "+t+" does not exist in the DOM",U(i),TB.exceptionHandler(i,"Internal Error",2e3),void 0;var s=r.width,a=r.height;r.width!=o.properties.width&&(r.width=o.properties.width),r.height!=o.properties.height&&(r.height=o.properties.height),r.style.height!=pubWidgetStyleHeightFrom&&(r.style.height=pubWidgetStyleHeightFrom),r.style.width!=pubWidgetStyleWidthFrom&&(r.style.width=pubWidgetStyleWidthFrom);var l=r.width,c=r.height;(s!=l||a!=c)&&o.dispatchEvent(new h(this.RESIZE,s,l,a,c))}catch(u){i="resizePublisherToTarget :: Error resizing publisher - "+u,U(i),TB.exceptionHandler(i,"Internal Error",2e3)}},resizePublisherToShowSecurity:function(e,t,n){W("TB.resize");var i=this.sessions[e];if(!i){var o="TB.resize :: Invalid session ID: "+e;return U(o),TB.exceptionHandler(o,"Internal Error",2e3),void 0}var r=i.publishers[t];if(!r)return o="TB.resize :: Invalid publisher ID: "+t,U(o),TB.exceptionHandler(o,"Internal Error",2e3),void 0;var s=document.getElementById(t);if(!s)return o="TB.resize :: Publisher "+t+" does not exist in the DOM",U(o),TB.exceptionHandler(o,"Internal Error",2e3),void 0;var a=r.properties.width=s.width,l=r.properties.height=s.height;pubWidgetStyleHeightFrom=s.style.height,pubWidgetStyleWidthFrom=s.style.width;var c=gt*n,u=vt*n;s.width<c&&(s.width=c,s.style.width=c+"px"),s.height<u&&(s.height=u,s.style.height=u+"px");var d=s.width,f=s.height,p=s.style;(a!=d||l!=f||pubWidgetStyleWidthFrom!=p.width||pubWidgetStyleHeightFrom!=p.height)&&r.dispatchEvent(new h(this.RESIZE,a,d,l,f))},settingsButtonClickHandler:function(e,n){W("TB.settingsButtonClick");try{var i=this.sessions[e];if(!i){var o="TB.settingsButtonClick :: Invalid session ID: "+e;return U(o),TB.exceptionHandler(o,"Internal Error",2e3),void 0}var r=i.publishers[n];if(!r)return o="TB.settingsButtonClick :: Invalid publisher ID: "+n,U(o),TB.exceptionHandler(o,"Internal Error",2e3),void 0;var s=new t(this.SETTINGS_BUTTON_CLICK,!0);r.dispatchEvent(s);var a=function(){if(!s.isDefaultPrevented()){var e=TB.initDeviceManager(i.apiKey);e.displayPanel(null,r,{})}};setTimeout(a,2)}catch(l){o="settingsButtonClick :: "+l,U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},recorderSettingsButtonClickHandler:function(e){W("TB.recorderSettingsButtonClick");try{var n=ft.recorders[e];if(!n)return errorMsg="TB.recorderSettingsButtonClick :: Invalid recorder ID: "+e,U(errorMsg),TB.exceptionHandler(errorMsg,"Internal Error",2e3),void 0;var i=new t(this.SETTINGS_BUTTON_CLICK,!0);n.dispatchEvent(i);var o=function(){if(!i.isDefaultPrevented()){var e=TB.initDeviceManager(ft.apiKey);e.displayPanel(null,n,{})}};setTimeout(o,2)}catch(r){errorMsg="recorderSettingsButtonClick :: "+r,U(errorMsg),TB.exceptionHandler(errorMsg,"Internal Error",2e3)}},deviceAccessHandler:function(e,n,i){W("TB.deviceAccessHandler: "+i);try{var o=this.sessions[e];if(!o){var r="TB.deviceAccessHandler :: Invalid session ID: "+e;return U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0}var s=o.publishers[n];if(!s)return r="TB.deviceAccessHandler :: Invalid publisher ID: "+n,U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0;var a=new t(i,!0);if(s.dispatchEvent(a),i==TB.ACCESS_DENIED){var l=function(){var e=document.getElementById(s.id);if(e){var t=e.parentNode;o.unpublish(s);var n=document.createElement("div");n.setAttribute("id",s.replacedDivId),t.appendChild(n),o._embedPublisher(s)}};setTimeout(l,2)}}catch(c){r=i+" :: "+c,U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},deviceInactiveHandler:function(e,t,n,i){W("TB.deviceInactiveHandler");try{var o=this.sessions[e];if(!o){var r="TB.deviceInactiveHandler :: Invalid session ID: "+e;return U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0}var s=o.publishers[t];if(!s)return U("TB.deviceInactiveHandler :: Invalid publisher ID: "+t),void 0;var a=new c(this.DEVICE_INACTIVE,n,i);s.dispatchEvent(a)}catch(l){r="deviceInactive :: "+l,U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},echoCancellationModeChangedHandler:function(e,t,n,i){W("TB.echoCancellationModeChangedHandler");try{var o=this.sessions[e];if(!o){var r="TB.echoCancellationModeChangedHandler :: Invalid session ID: "+e;return U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0}var s=o.publishers[t];if(!s)return U("TB.echoCancellationModeChangedHandler :: Invalid publisher ID: "+t),void 0;var a=new c(this.ECHO_CANCELLATION_MODE_CHANGED,n,i);s.dispatchEvent(a)}catch(l){r="echoCancellationModeChanged :: "+l,U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},devicesDetectedHandler:function(e,t,n,i){W("TB.devicesDetected");try{var o=Z(e),r=et(t);dt.dispatchEvent(new u(this.DEVICES_DETECTED,o,r,o[n],r[i])),setTimeout(function(){it(pt,"devicesDetectedHandler :: "),pt=null},0)}catch(s){var a="devicesDetectedHandler :: "+s;U(a),TB.exceptionHandler(a,"Internal Error",2e3)}},devicesSelectedHandler:function(e,t,n){W("TB.devicesSelected");try{yt=!0;var i=dt.panels[e];if(!i)return U("TB.devicesSelected :: Invalid DevicePanel ID: "+e),void 0;i.component&&(i.component.setCamera(t),i.component.setMicrophone(n)),i.dispatchEvent(new c(this.DEVICES_SELECTED,t,n))}catch(o){var r="devicesSelected :: "+o;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},closeButtonClickHandler:function(e){W("TB.closeButtonClick");try{var n=dt.panels[e];if(!n){var i="TB.devicesSelected :: Invalid DevicePanel ID: "+e;return U(i),TB.exceptionHandler(i,"Internal Error",2e3),void 0}var o=new t(this.CLOSE_BUTTON_CLICK,!0);n.dispatchEvent(o);var r=function(){o.isDefaultPrevented()||dt.removePanel(n)};setTimeout(r,2)}catch(s){i="closeButtonClick :: "+s,U(i),TB.exceptionHandler(i,"Internal Error",2e3)}},playerArchiveLoadedHandler:function(e){W("Player.archiveLoadedHandler");try{var n=ft.players[e];n.dispatchEvent(new t(this.ARCHIVE_LOADED))}catch(i){var o="Player.archiveLoadedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},playingStartedHandler:function(e){W("Player.playingHandler");try{var n=ft.players[e];n.dispatchEvent(new t(this.PLAYBACK_STARTED))}catch(i){var o="Player.playingStartedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},playingStoppedHandler:function(e){W("Player.playingStoppedHandler");try{var n=ft.players[e];n.dispatchEvent(new t(this.PLAYBACK_STOPPED))}catch(i){var o="Player.playingStoppedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},recordingStartedHandler:function(e){W("Recorder.recordingStartedHandler");try{var n=ft.recorders[e];n.dispatchEvent(new t(this.RECORDING_STARTED))}catch(i){var o="Recorder.recordingStartedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},recordingStoppedHandler:function(e){W("Recorder.recordingStoppedHandler");try{var n=ft.recorders[e];n.dispatchEvent(new t(this.RECORDING_STOPPED))}catch(i){var o="Recorder.recordingStoppedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},recorderPlaybackStartedHandler:function(e){W("Recorder.playbackStartedddHandler");try{var n=ft.recorders[e];n.dispatchEvent(new t(this.PLAYBACK_STARTED))}catch(i){var o="Recorder.playbackStartedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},recorderPlaybackStoppedHandler:function(e){W("Recorder.playbackStoppedHandler");try{var n=ft.recorders[e];n.dispatchEvent(new t(this.PLAYBACK_STOPPED))}catch(i){var o="Recorder.playbackStoppedHandler :: "+i;U(o),TB.exceptionHandler(o,"Internal Error",2e3)}},archiveSavedHandler:function(e,t){W("Recorder.archiveSavedHandler");try{var n=ft.recorders[e],i=new P(t.id,t.type,t.title);n.dispatchEvent(new f(this.ARCHIVE_SAVED,[i]))}catch(o){var r="Recorder.archiveSavedHandler :: "+o;U(r),TB.exceptionHandler(r,"Internal Error",2e3)}},stateChangedHandler:function(e,t){function n(t){t=t.replace(/"/g,"");var n=t.match(/TB_archive_([^_]+)_(.*)/);if(n){archiveId=n[1],t=n[2];var o=St[e][archiveId];if(!o){var r="Archive.startPlayback :: Archive not loaded.";return U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0}return o.getStateManager()}return i.getStateManager()}W("TB.stateChangeHandler");var i=this.sessions[e];if(!i){var o="TB.stateChangedHandler :: Invalid session ID: "+e;return U(o),TB.exceptionHandler(o,"Internal Error",2e3),void 0}var r=!1;for(var s in t){var a=n(s);r||(a.dispatchEvent(new p("changed",t)),r=!0);var l={};l[s]=t[s],a.dispatchEvent(new p("changed:"+s,l))}r||i.getStateManager().dispatchEvent(new p("changed",t))},stateChangedFailedHandler:function(e,t,n,i){W("TB.stateChangedFailedHandler");var o=this.sessions[e];if(!o){var r="TB.stateChangedFailedHandler :: Invalid session ID: "+e;return U(r),TB.exceptionHandler(r,"Internal Error",2e3),void 0}var s=o.getStateManager();s.dispatchEvent(new m("changeFailed",t,n,i))},reportIssueHandler:function(e,t){if(W("TB.reportIssue"),null==t&&(t=!1),!bt){var n=document.createElement("form");n.setAttribute("action","http://staging.tokbox.com/reportIssue.php"),n.setAttribute("method","post"),n.setAttribute("target","formresult"),lt(n,"issueId",e),lt(n,"userAgent",navigator.userAgent),lt(n,"environment","JS");var i=swfobject.getFlashPlayerVersion();lt(n,"flashVersion",i.major+"."+i.minor+"."+i.release);var o=window.opentokdebug.getLogs();lt(n,"jsLogs",o);var r=!1,s=0;for(var a in TB.sessions){var l=TB.sessions[a];if(l.hasOwnProperty("sessionId")){r||(lt(n,"apiKey",l.apiKey),r=!0);var c=0;lt(n,"session_"+ ++s,l.sessionId);var u="controller_"+l.sessionId,h=ct(u);if(h&&lt(n,"widget_"+l.sessionId+"_"+ ++c,h),l.hasOwnProperty("subscribers"))for(var d in l.subscribers)if(l.subscribers[d].hasOwnProperty("id")){var f=ct(l.subscribers[d].id);lt(n,"widget_"+l.sessionId+"_"+ ++c,f)}if(l.hasOwnProperty("publishers"))for(var p in l.publishers)if(l.publishers[p].hasOwnProperty("id")){var m=ct(l.publishers[p].id);lt(n,"widget_"+l.sessionId+"_"+ ++c,m)}}}if(!t){var g=document.createElement("textarea");g.setAttribute("name","description"),g.setAttribute("rows",8),g.setAttribute("cols",40),g.style.height="110px",g.style.width="300px",g.style.display="block",g.style.visibility="visible",n.appendChild(g);var v=document.createElement("input");v.setAttribute("type","submit"),v.setAttribute("value","Report Issue"),v.style.display="inline",v.style.visibility="visible",n.appendChild(v);var y=document.createElement("input");y.setAttribute("type","button"),y.setAttribute("value","Cancel"),y.style.display="inline",y.style.visibility="visible",n.appendChild(y);var b=390,w=242,_=document.createElement("div");_.setAttribute("id","opentokReportIssue"),_.style.position="absolute",_.style.top="25%",_.style.left="50%",_.style.width=b+"px",_.style.height=w+"px",_.style.marginLeft=0-b/2+"px",_.style.marginTop=0-w/4+"px",_.style.paddingLeft="32px",_.style.paddingRight="15px",_.style.paddingTop="15px",_.style.display="block",_.style.visibility="visible",_.style.lineHeight="15px",_.style.zIndex=st()+1,_.innerHTML='<span style="color:#4c4c4c;font-size:18px;display:inline;visibility:visible;">We\'re sorry to hear that something went wrong.</span><br/><br/>Please help us to debug your issue by providing a description of what happened.',_.style.backgroundColor="#F7F7F7",_.style.border="1px solid #CCC",_.style.fontWeight="normal",_.style.fontFamily="'Lucida Grande', 'Trebuchet MS', sans-serif",_.style.color="#4c4c4c",_.style.fontSize="13px",_.appendChild(n),document.body.appendChild(_),bt=!0,closeForm=function(){document.body.removeChild(_),bt=!1},y.onclick=closeForm}n.onsubmit=function(){window.open("#","formresult","scrollbars=no,menubar=no,height=200,width=400,resizable=yes,toolbar=no,status=no"),setTimeout(function(){closeForm()},1e3)},t&&(lt(n,"showReport",!0),document.body.appendChild(n),n.submit())
}}}}();/*!
 *	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
 * 	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
 * 	
 * 	Permission is hereby granted, free of charge, to any person obtaining a copy
 * 	of this software and associated documentation files (the "Software"), to deal
 * 	in the Software without restriction, including without limitation the rights
 * 	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * 	copies of the Software, and to permit persons to whom the Software is
 * 	furnished to do so, subject to the following conditions:
 * 	
 * 	The above copyright notice and this permission notice shall be included in
 * 	all copies or substantial portions of the Software
 */
var swfobject=function(){function e(){if(!W){try{var e=O.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(t){return}W=!0;for(var n=B.length,i=0;n>i;i++)B[i]()}}function t(e){W?e():B[B.length]=e}function n(e){if(typeof j.addEventListener!=I)j.addEventListener("load",e,!1);else if(typeof O.addEventListener!=I)O.addEventListener("load",e,!1);else if(typeof j.attachEvent!=I)v(j,"onload",e);else if("function"==typeof j.onload){var t=j.onload;j.onload=function(){t(),e()}}else j.onload=e}function i(){H?o():r()}function o(){var e=O.getElementsByTagName("body")[0],t=g(N);t.setAttribute("type",D);var n=e.appendChild(t);if(n){var i=0;!function(){if(typeof n.GetVariable!=I){var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),V.pv=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)])}else if(10>i)return i++,setTimeout(arguments.callee,10),void 0;e.removeChild(t),n=null,r()}()}else r()}function r(){var e=L.length;if(e>0)for(var t=0;e>t;t++){var n=L[t].id,i=L[t].callbackFn,o={success:!1,id:n};if(V.pv[0]>0){var r=m(n);if(r)if(!y(L[t].swfVersion)||V.wk&&V.wk<312)if(L[t].expressInstall&&a()){var u={};u.data=L[t].expressInstall,u.width=r.getAttribute("width")||"0",u.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(u.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(u.align=r.getAttribute("align"));for(var h={},d=r.getElementsByTagName("param"),f=d.length,p=0;f>p;p++)"movie"!=d[p].getAttribute("name").toLowerCase()&&(h[d[p].getAttribute("name")]=d[p].getAttribute("value"));l(u,h,n,i)}else c(r),i&&i(o);else w(n,!0),i&&(o.success=!0,o.ref=s(n),i(o))}else if(w(n,!0),i){var g=s(n);g&&typeof g.SetVariable!=I&&(o.success=!0,o.ref=g),i(o)}}}function s(e){var t=null,n=m(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=I)t=n;else{var i=n.getElementsByTagName(N)[0];i&&(t=i)}return t}function a(){return!$&&y("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)}function l(e,t,n,i){$=!0,E=i||null,S={success:!1,id:n};var o=m(n);if(o){"OBJECT"==o.nodeName?(x=u(o),C=null):(x=o,C=n),e.id=M,(typeof e.width==I||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==I||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),O.title=O.title.slice(0,47)+" - Flash Player Installation";var r=V.ie&&V.win?"ActiveX":"PlugIn",s="MMredirectURL="+j.location.toString().replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+O.title;if(typeof t.flashvars!=I?t.flashvars+="&"+s:t.flashvars=s,V.ie&&V.win&&4!=o.readyState){var a=g("div");n+="SWFObjectNew",a.setAttribute("id",n),o.parentNode.insertBefore(a,o),o.style.display="none",function(){4==o.readyState?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}h(e,t,n)}}function c(e){if(V.ie&&V.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=g("div");if(V.win&&V.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(N)[0];if(n){var i=n.childNodes;if(i)for(var o=i.length,r=0;o>r;r++)1==i[r].nodeType&&"PARAM"==i[r].nodeName||8==i[r].nodeType||t.appendChild(i[r].cloneNode(!0))}}return t}function h(e,t,n){var i,o=m(n);if(V.wk&&V.wk<312)return i;if(o)if(typeof e.id==I&&(e.id=n),V.ie&&V.win){var r="";for(var s in e)e[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?t.movie=e[s]:"styleclass"==s.toLowerCase()?r+=' class="'+e[s]+'"':"classid"!=s.toLowerCase()&&(r+=" "+s+'="'+e[s]+'"'));var a="";for(var l in t)t[l]!=Object.prototype[l]&&(a+='<param name="'+l+'" value="'+t[l]+'" />');o.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+a+"</object>",q[q.length]=e.id,i=m(e.id)}else{var c=g(N);c.setAttribute("type",D);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?c.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&c.setAttribute(u,e[u]));for(var h in t)t[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&d(c,h,t[h]);o.parentNode.replaceChild(c,o),i=c}return i}function d(e,t,n){var i=g("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function f(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(V.ie&&V.win?(t.style.display="none",function(){4==t.readyState?p(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function p(e){var t=m(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=O.getElementById(e)}catch(n){}return t}function g(e){return O.createElement(e)}function v(e,t,n){e.attachEvent(t,n),z[z.length]=[e,t,n]}function y(e){var t=V.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function b(e,t,n,i){if(!V.ie||!V.mac){var o=O.getElementsByTagName("head")[0];if(o){var r=n&&"string"==typeof n?n:"screen";if(i&&(T=null,k=null),!T||k!=r){var s=g("style");s.setAttribute("type","text/css"),s.setAttribute("media",r),T=o.appendChild(s),V.ie&&V.win&&typeof O.styleSheets!=I&&O.styleSheets.length>0&&(T=O.styleSheets[O.styleSheets.length-1]),k=r}V.ie&&V.win?T&&typeof T.addRule==N&&T.addRule(e,t):T&&typeof O.createTextNode!=I&&T.appendChild(O.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if(U){var n=t?"visible":"hidden";W&&m(e)?m(e).style.visibility=n:b("#"+e,"visibility:"+n)}}function _(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=I?encodeURIComponent(e):e}var x,C,E,S,T,k,I="undefined",N="object",P="Shockwave Flash",A="ShockwaveFlash.ShockwaveFlash",D="application/x-shockwave-flash",M="SWFObjectExprInst",R="onreadystatechange",j=window,O=document,F=navigator,H=!1,B=[i],L=[],q=[],z=[],W=!1,$=!1,U=!0,V=function(){var e=typeof O.getElementById!=I&&typeof O.getElementsByTagName!=I&&typeof O.createElement!=I,t=F.userAgent.toLowerCase(),n=F.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),o=n?/mac/.test(n):/mac/.test(t),r=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s=!1,a=[0,0,0],l=null;if(typeof F.plugins!=I&&typeof F.plugins[P]==N)l=F.plugins[P].description,!l||typeof F.mimeTypes!=I&&F.mimeTypes[D]&&!F.mimeTypes[D].enabledPlugin||(H=!0,s=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof j.ActiveXObject!=I)try{var c=new ActiveXObject(A);c&&(l=c.GetVariable("$version"),l&&(s=!0,l=l.split(" ")[1].split(","),a=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(u){}return{w3:e,pv:a,wk:r,ie:s,win:i,mac:o}}();return function(){V.w3&&((typeof O.readyState!=I&&"complete"==O.readyState||typeof O.readyState==I&&(O.getElementsByTagName("body")[0]||O.body))&&e(),W||(typeof O.addEventListener!=I&&O.addEventListener("DOMContentLoaded",e,!1),V.ie&&V.win&&(O.attachEvent(R,function(){"complete"==O.readyState&&(O.detachEvent(R,arguments.callee),e())}),j==top&&function(){if(!W){try{O.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0),void 0}e()}}()),V.wk&&function(){return W?void 0:/loaded|complete/.test(O.readyState)?(e(),void 0):(setTimeout(arguments.callee,0),void 0)}(),n(e)))}(),function(){V.ie&&V.win&&window.attachEvent("onunload",function(){for(var e=z.length,t=0;e>t;t++)z[t][0].detachEvent(z[t][1],z[t][2]);for(var n=q.length,i=0;n>i;i++)f(q[i]);for(var o in V)V[o]=null;V=null;for(var r in swfobject)swfobject[r]=null;swfobject=null})}(),{registerObject:function(e,t,n,i){if(V.w3&&e&&t){var o={};o.id=e,o.swfVersion=t,o.expressInstall=n,o.callbackFn=i,L[L.length]=o,w(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return V.w3?s(e):void 0},embedSWF:function(e,n,i,o,r,s,c,u,d,f){var p={success:!1,id:n};V.w3&&!(V.wk&&V.wk<312)&&e&&n&&i&&o&&r?(w(n,!1),t(function(){i+="",o+="";var t={};if(d&&typeof d===N)for(var m in d)t[m]=d[m];t.data=e,t.width=i,t.height=o;var g={};if(u&&typeof u===N)for(var v in u)g[v]=u[v];if(c&&typeof c===N)for(var b in c)typeof g.flashvars!=I?g.flashvars+="&"+b+"="+c[b]:g.flashvars=b+"="+c[b];if(y(r)){var _=h(t,g,n);t.id==n&&w(n,!0),p.success=!0,p.ref=_}else{if(s&&a())return t.data=s,l(t,g,n,f),void 0;w(n,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){U=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,n){return V.w3?h(e,t,n):void 0},showExpressInstall:function(e,t,n,i){V.w3&&a()&&l(e,t,n,i)},removeSWF:function(e){V.w3&&f(e)},createCSS:function(e,t,n,i){V.w3&&b(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=O.location.search||O.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return _(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return _(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if($){var e=m(M);e&&x&&(e.parentNode.replaceChild(x,e),C&&(w(C,!0),V.ie&&V.win&&(x.style.display="block")),E&&E(S)),$=!1}}}}();/*!
 * JavaScript Debug - v0.4 - 6/22/2010
 * http://benalman.com/projects/javascript-debug-console-log/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 */
// Copyright (c) 2010 "Cowboy" Ben Alman,
window.opentokdebug=function(){function e(e){!n||!i&&s&&s.log||n.apply(o,e)}function t(e){return l>0?l>e:c.length+l<=e}for(var n,i,o=this,r=Array.prototype.slice,s=o.console,a={},l=0,c=["error","warn","info","debug","log"],u="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),h=u.length,d=[];--h>=0;)!function(e){a[e]=function(){0!==l&&s&&s[e]&&s[e].apply(s,arguments)}}(u[h]);for(h=c.length;--h>=0;)!function(n,i){a[i]=function(){var a=r.call(arguments),l=[i].concat(a);d.push(l),s&&t(n)&&(e(l),s.firebug||o.Firebug?s[i].apply(s,a):s[i]?s[i](a):s.log(a))}}(h,c[h]);return a.setLevel=function(e){l="number"==typeof e?e:9},a.setCallback=function(){var t=r.call(arguments),o=d.length,s=o;for(n=t.shift()||null,i="boolean"==typeof t[0]?t.shift():!1,s-="number"==typeof t[0]?t.shift():o;o>s;)e(d[s++])},a.getLogs=function(){return d.join("\n")},a}(),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&1/0!==i&&i!==-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var o=i>=0?i:Math.max(n-Math.abs(i),0);n>o;o++)if(o in t&&t[o]===e)return o;return-1}),/**
 * flexselect: a jQuery plugin, version: 0.3 (2011-12-17)
 * @requires jQuery v1.3 or later
 *
 * FlexSelect is a jQuery plugin that makes it easy to convert a select box into
 * a Quicksilver-style, autocompleting, flex matching selection tool.
 *
 * For usage and examples, visit:
 * http://rmm5t.github.com/jquery-flexselect/
 *
 * Licensed under the MIT:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Copyright (c) 2009-2012, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
function(e){e.flexselect=function(e,t){this.init(e,t)},e.extend(e.flexselect.prototype,{settings:{allowMismatch:!1,selectedClass:"flexselect_selected",dropdownClass:"flexselect_dropdown",defaultmessage:"No results",inputIdTransform:function(e){return e+"_flexselect"},inputNameTransform:function(){},dropdownIdTransform:function(e){return e+"_flexselect_dropdown"}},select:null,input:null,hidden:null,dropdown:null,dropdownList:null,cache:[],results:[],lastAbbreviation:null,abbreviationBeforeFocus:null,selectedIndex:0,picked:!1,dropdownMouseover:!1,init:function(t,n){this.settings=e.extend({},this.settings,n),this.select=e(t),this.preloadCache(),this.renderControls(),this.wire()},preloadCache:function(){this.cache=this.select.children("option").map(function(){return{name:e.trim(e(this).text()),value:e(this).val(),score:0}})},renderControls:function(){var t=this.select.children("option:selected");this.hidden=e("<input type='hidden'/>").attr({id:this.select.attr("id"),name:this.select.attr("name")}).val(t.val()),this.input=e("<input type='text' autocomplete='off' />").attr({id:this.settings.inputIdTransform(this.select.attr("id")),name:this.settings.inputNameTransform(this.select.attr("name")),accesskey:this.select.attr("accesskey"),tabindex:this.select.attr("tabindex"),placeholder:this.select.attr("placeholder"),style:this.select.attr("style")}).addClass(this.select.attr("class")).val(e.trim(t.text())),this.dropdown=e("<div></div>").attr({id:this.settings.dropdownIdTransform(this.select.attr("id"))}).addClass(this.settings.dropdownClass),this.dropdownList=e("<ul></ul>"),this.dropdown.append(this.dropdownList),this.select.after(this.input).after(this.hidden).remove(),e("body").append(this.dropdown)},wire:function(){var t=this;this.input.click(function(){t.lastAbbreviation=null,t.focus(),t.picked||t.filterResults()}),this.input.mouseup(function(e){e.preventDefault()}),this.input.focus(function(){t.abbreviationBeforeFocus=t.input.val(),t.input.select()}),this.input.blur(function(){t.dropdownMouseover||(t.hide(),t.settings.allowMismatch||t.picked||t.reset())}),this.dropdownList.mouseover(function(n){if("LI"==n.target.tagName){var i=t.dropdown.find("li");t.markSelected(i.index(e(n.target)))}}),this.dropdownList.mouseleave(function(){t.markSelected(-1)}),this.dropdownList.mouseup(function(){t.pickSelected(),t.focusAndHide()}),this.dropdown.mouseover(function(){t.dropdownMouseover=!0}),this.dropdown.mouseleave(function(){t.dropdownMouseover=!1}),this.dropdown.mousedown(function(e){e.preventDefault()}),this.input.keyup(function(e){switch(e.keyCode){case 13:e.preventDefault(),t.pickSelected(),t.focusAndHide();break;case 27:e.preventDefault(),t.reset(),t.focusAndHide();break;default:t.filterResults()}}),this.input.keydown(function(e){switch(e.keyCode){case 9:t.pickSelected(),t.hide();break;case 33:e.preventDefault(),t.markFirst();break;case 34:e.preventDefault(),t.markLast();break;case 38:e.preventDefault(),t.moveSelected(-1);break;case 40:e.preventDefault(),t.moveSelected(1);break;case 13:case 27:e.preventDefault(),e.stopPropagation()}})},filterResults:function(){var t=this.input.val();if(t!=this.lastAbbreviation){var n=[];if(e.each(this.cache,function(){this.score=LiquidMetal.score(this.name,t),this.score>0&&n.push(this)}),0==n.length){var i={name:this.settings.defaultmessage,value:"ZERO_CONTACTS",score:9.9};n.push(i)}this.results=n,this.sortResults(),this.renderDropdown(),this.markFirst(),this.lastAbbreviation=t,this.picked=!1}},sortResults:function(){this.results.sort(function(e,t){return t.score-e.score})},renderDropdown:function(){var t=this.dropdown.outerWidth()-this.dropdown.innerWidth(),n=this.input.offset();this.dropdown.css({width:this.input.outerWidth()-t+"px",top:n.top+this.input.outerHeight()+"px",left:n.left+"px"});var i=this.dropdownList.html("");this.results.length>0&&e.each(this.results,function(){i.append(e("<li/>").html(this.name))}),this.dropdown.show()},markSelected:function(t){if(!(t>this.results.length)){var n=this.dropdown.find("li");n.removeClass(this.settings.selectedClass),this.selectedIndex=t,t>=0&&e(n[t]).addClass(this.settings.selectedClass)}},pickSelected:function(){var e=this.results[this.selectedIndex];if(e){if(this.hidden.val(e.value),this.input.val(""),"function"==typeof PRESENCE.UIMANAGER.changeSelectContactValue)return PRESENCE.UIMANAGER.changeSelectContactValue(e.name,e.value)}else this.settings.allowMismatch?this.hidden.val(""):this.reset()},hide:function(){this.dropdown.hide(),this.lastAbbreviation=null},moveSelected:function(e){this.markSelected(this.selectedIndex+e)},markFirst:function(){this.markSelected(0)},markLast:function(){this.markSelected(this.results.length-1)},reset:function(){this.input.val(this.abbreviationBeforeFocus)},focus:function(){this.input.focus()},focusAndHide:function(){this.hide()}}),e.fn.flexselect=function(t){return this.each(function(){"SELECT"==this.tagName&&new e.flexselect(this,t)}),this}}(jQuery),/*
 * Copyright 2010, Wen Pu (dexterpu at gmail dot com)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Check out http://www.cs.illinois.edu/homes/wenpu1/chatbox.html for document
 *
 * Depends on jquery.ui.core, jquery.ui.widiget, jquery.ui.effect
 * 
 * Also uses some styles for jquery.ui.dialog
 * 
 */
function(e){e.widget("ui.chatbox",{options:{id:null,title:null,user:null,hidden:!1,offset:0,width:230,height:400,groupBox:!1,video:0,messageSent:function(e,t,n){this.boxManager.addMsg(t.first_name,n)},boxClosed:function(){},boxManager:{init:function(e){this.elem=e},addMsg:function(t,n){var i=this,o=i.elem.uiChatboxLog,r=document.createElement("div");if(null==t||""==e(t).html())var s=n;else var s="<b>"+t+":</b> "+n;e(r).html(s).addClass("ui-chatbox-msg"),o.append(r),i._scrollToBottom(),i.elem.uiChatboxTitlebar.hasClass("ui-state-focus")||i.highlightLock||(i.highlightLock=!0,i.highlightBox())},highlightBox:function(){this.elem.uiChatbox.addClass("ui-state-highlight");var t=this,n=e('<p class="chatWindowhighlighted"></div>'),i={color:e(n).css("color")};t.elem.uiChatboxTitlebar.effect("highlight",i,300),"function"==typeof PRESENCE.UTILITIES.mustBounceBoxForChatWindow&&PRESENCE.UTILITIES.mustBounceBoxForChatWindow(t)||"function"!=typeof PRESENCE.UTILITIES.mustBounceBoxForChatWindow?t.elem.uiChatbox.effect("bounce",{times:3},300,function(){t.highlightLock=!1,t._scrollToBottom()}):t.highlightLock=!1},toggleBox:function(e){this.elem.uiChatbox.toggle(e)},_scrollToBottom:function(){var e=this.elem.uiChatboxLog;e.scrollTop(e.get(0).scrollHeight)}}},toggleContent:function(){this.uiChatboxContent.toggle(),this.uiChatboxContent.is(":visible")&&this.uiChatboxInputBox.focus()},widget:function(){return this.uiChatbox},_create:function(){var t=this,n=t.options,i=n.title||"No Title",o=(t.uiChatbox=e("<div></div>")).appendTo(document.body).addClass("ui-widget ui-corner-top ui-chatbox").attr("outline",0).focusin(function(){t.uiChatbox.removeClass("ui-state-highlight"),t.uiChatboxTitlebar.addClass("ui-state-focus")}).focusout(function(){t.uiChatboxTitlebar.removeClass("ui-state-focus")}),r=(t.uiChatboxTitlebar=e("<div></div>")).addClass("ui-widget-header ui-corner-top ui-chatbox-titlebar ui-dialog-header").click(function(e){t.toggleContent(e)}).appendTo(o),s=((t.uiChatboxTitle=e("<span></span>")).html(i).appendTo(r),(t.uiChatboxTitlebarClose=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ").attr("role","button").hover(function(){s.addClass("ui-state-hover")},function(){s.removeClass("ui-state-hover")}).click(function(){return o.hide(),t.options.boxClosed(t.options.id),!1}).appendTo(r)),a=(e("<span></span>").addClass("icon_tool16-trash chat-thick chat-closethick").appendTo(s),(t.uiChatboxTitlebarMinimize=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon").attr("role","button").hover(function(){a.addClass("ui-state-hover")},function(){a.removeClass("ui-state-hover")}).click(function(e){return t.toggleContent(e),!1}).appendTo(r)),l=(e("<span></span>").addClass("icon_tool16-less chat-thick  chat-minusthick").appendTo(a),(t.uiChatboxTitlebarVideo=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ui-videobox-icon").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).click(function(){return PRESENCE.WINDOW.toggleVideoBox(t),!1}).appendTo(r)),c=(e("<span></span>").addClass("ui-icon-circle-triangle-e chat-thick  chat-videothick").text("     ").appendTo(l),(t.uiChatboxTitlebarVideoChange=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ui-videobox-icon-change").attr("role","button").hover(function(){c.addClass("ui-state-hover")},function(){c.removeClass("ui-state-hover")}).click(function(){return PRESENCE.WINDOW.toggleVideoBoxChange(t),!1}).appendTo(r)),u=(e("<span></span>").addClass("ui-icon-newwin chat-thick  chat-videoPublisherthick").text("").appendTo(c),(t.uiChatboxTitlebarGames=e('<a href="#"></a>')).addClass("ui-corner-all ui-chatbox-icon ui-games-icon").attr("role","button").hover(function(){u.addClass("ui-state-hover")},function(){u.removeClass("ui-state-hover")}).click(function(){return PRESENCE.GAME.INTERFACE.pickGamesButton(t),!1}).appendTo(r)),h=(e("<span></span>").addClass("ui-icon-star chat-thick  chat-gamesthick").text("").appendTo(u),(t.uiChatboxContent=e("<div></div>")).addClass("ui-widget-content ui-chatbox-content ").appendTo(o)),d=((t.uiChatboxNotify=e("<div></div>")).addClass("ui-widget-content ui-chatbox-notify").click(function(){PRESENCE.NOTIFICATIONS.onClickChatNotification(t.uiChatboxNotify)}).appendTo(h),(t.uiVideobox=e("<div></div>")).addClass("ui-widget-content ui-videobox").click(function(){}).appendTo(h),(t.uiChatboxLog=t.element).addClass("ui-widget-content ui-chatbox-log").appendTo(h),(t.uiChatboxInput=e("<div></div>")).addClass("ui-widget-content ui-chatbox-input").click(function(){}).appendTo(h)),f=(t.uiChatboxInputBox=e("<textarea></textarea>")).addClass("ui-widget-content ui-chatbox-input-box ui-corner-all").appendTo(d).keydown(function(n){if(n.keyCode&&n.keyCode==e.ui.keyCode.ENTER){var i="function"==typeof PRESENCE.UTILITIES.userChatDataInputControl&&PRESENCE.UTILITIES.userChatDataInputControl()||"function"!=typeof PRESENCE.UTILITIES.userChatDataInputControl;return i&&(msg=e.trim(e(this).val()),msg.length>0&&t.options.messageSent(t.options.id,t.options.user,msg),e(this).val("")),!1}}).focusin(function(){f.addClass("ui-chatbox-input-focus");var t=e(this).parent().prev();t.scrollTop(t.get(0).scrollHeight)}).focusout(function(){f.removeClass("ui-chatbox-input-focus")});r.find("*").add(r).disableSelection(),h.children().click(function(){t.uiChatboxInputBox.focus()}),t._setWidth(t.options.width),t._setHeight(t.options.height),t._setVideo(t.options.video),t._position(t.options.offset),t.options.boxManager.init(t),t.options.hidden||o.show()},_setOption:function(t,n){if(null!=n)switch(t){case"hidden":n?this.uiChatbox.hide():this.uiChatbox.show();break;case"offset":this._position(n);break;case"width":this._setWidth(n);break;case"height":this._setHeight(n);break;case"video":this._setVideo(n);break;case"groupBox":this._setGroupBox(n)}e.Widget.prototype._setOption.apply(this,arguments)},_setWidth:function(e){this.uiChatboxTitlebar.width(e+"px"),this.uiChatboxLog.width(e+"px"),this.uiChatboxInputBox.css("width",e-14+"px")},_setHeight:function(e){this.uiChatboxLog.height(e+"px")},_setGroupBox:function(e){this.uiChatboxLog.groupBox(e)},_setVideo:function(e){this.uiVideobox.height(e+"px"),0==e?this.uiVideobox.hide():this.uiVideobox.show()},_position:function(e){this.uiChatbox.css("right",e)}})}(jQuery);var PRESENCE=PRESENCE||{};PRESENCE.VERSION="2.0.1",PRESENCE.AUTHORS="Aldo Gordillo",PRESENCE.CORE=function(){var e=function(){PRESENCE.UIMANAGER.init(),PRESENCE.UTILITIES.init(),PRESENCE.XMPPClient.init(),PRESENCE.VIDEOCHAT.init(),PRESENCE.GAME.init(),PRESENCE.AUDIO.init()};return{init:e}}(PRESENCE,jQuery);var contactsInfo=new Array;PRESENCE.XMPPClient=function(e,t,n){function i(e,t,n,i){this.domain=e,this.resource=t,this.client=n,this.version=i,this.videoChatStatus="disconnected",this.session_id=null,this.user_token=null,this.guest_token=null,this.session=null,this.publisher=null,this.gameStatus="disconnected",this.game=null}function o(){this.occupants=[],this.joined=!1,this.affiliation="none",this.role="none",this.nick=yt(),this.lastMessageId=null}var r="localhost",s=new Array;s.available="chat",s.away="away",s.autoaway="away",s.dnd="dnd";var a=new Array;a[""]="",a.chat="",a.away="Away",a.xa="Away",a.dnd="Busy";var l=new Array,c=new Array;c.cinfo="versionID",c.videochatRequest="videochatRequestID",c.videochatRequestCancel="videochatRequestCancelID";var u,h,d,f=function(){Rt()},p=function(e,t){return g()?!0:(b()?0==v(e,t)&&PRESENCE.UIMANAGER.updateChatWindow():0==y(e,t)&&PRESENCE.UIMANAGER.updateChatWindow(),void 0)},m=function(){return null!=E&&E.connected?!0:!1},g=function(){return m()&&"offline"!=u&&!S},v=function(e,t){try{E=Rt(),E.connect(e,t,I)}catch(n){return!1}return!0},y=function(e,t){if(null!=t&&""!=t)var n=t;else{if(!window.sessionStorage||null==sessionStorage.getItem("ss_user_pass"))return!1;var n=sessionStorage.getItem("ss_user_pass")}try{E=Rt(),E.connect(e,n,I)}catch(i){return!1}return!0},b=function(){var e="cookie";return"cookie"==e},w=function(){var e="cookie";return"password"==e},_=6e4,x=6e5,C=0,E=null,S=!1,T=!1,k=!0,I=function(e){return PRESENCE.UTILITIES.log("Strophe onConnect callback call with status "+e),e==Strophe.Status.ERROR?(PRESENCE.UTILITIES.log("Strophe connection error"),void 0):e==Strophe.Status.ATTACHED?(PRESENCE.UTILITIES.log("Strophe connection attached"),void 0):e==Strophe.Status.AUTHENTICATING?(PRESENCE.UTILITIES.log("Strophe connection AUTHENTICATING"),void 0):e==Strophe.Status.CONNECTING?(PRESENCE.UTILITIES.log("Strophe is connecting."),void 0):e==Strophe.Status.DISCONNECTING?(PRESENCE.UTILITIES.log("Strophe is disconnecting."),void 0):("undefined"!=typeof initialTimer&&clearTimeout(initialTimer),e==Strophe.Status.CONNFAIL?(PRESENCE.UTILITIES.log("Strophe failed to connect."),d=setTimeout("PRESENCE.XMPPClient.onReconnect()",5e3),S=!0):e==Strophe.Status.AUTHFAIL?(PRESENCE.UTILITIES.log("Strophe authentication fail."),window.sessionStorage&&null!=sessionStorage.getItem("ss_user_pass")&&sessionStorage.removeItem("ss_user_pass"),S=!0):e==Strophe.Status.ERROR?(PRESENCE.UTILITIES.log("Strophe error."),S=!0):e==Strophe.Status.DISCONNECTED?(PRESENCE.UTILITIES.log("Strophe is disconnected."),S=!0,clearTimeout(h),PRESENCE.UIMANAGER.updateInterfaceAfterUserDisconnect(),mt(),d=setTimeout("PRESENCE.XMPPClient.onReconnect()",5e3)):e==Strophe.Status.CONNECTED&&(PRESENCE.UTILITIES.log("Strophe is connected."),clearTimeout(d),E.addHandler(R,null,"message","chat",null,null),E.addHandler(wt,null,"message","groupchat",null,null),E.addHandler(j,null,"presence",null,null,null),E.addHandler(q,null,"iq",null,null),S=!1,T=!0,u||(u=PRESENCE.PERSISTENCE.getRestoreUserChatStatus()),"offline"==u&&(u="chat"),ot(u),h=setInterval("PRESENCE.XMPPClient.awayTimerFunction()",_)),PRESENCE.UIMANAGER.updateChatWindow(),void 0)},N=function(){},P=function(){if(u="offline",PRESENCE.UIMANAGER.setStatusWidgetTitle("offline"),m()){if(l)for(var e in l)l[e].joined&&at(e);E.send($pres({type:"unavailable"}).tree()),E.disconnect()}},A=function(){C++,C>x/_&&("dnd"!=u&&"away"!=u&&(u="autoaway",ot(u)),clearTimeout(h))},D=function(){"autoaway"==u&&(u="available",ot(u))},M=function(){C>x/_&&(h=setInterval("PRESENCE.XMPPClient.awayTimerFunction()",_),D()),C=0},R=function(e){var t=e.getAttribute("from"),n=e.getAttribute("type"),i=e.getElementsByTagName("body");if("chat"==n&&i.length>0){var o=i[0],e=Strophe.getText(o),r=kt(t);if(Nt(t))return!0;var r=kt(t);PRESENCE.UIMANAGER.afterReceivedChatMessage(r,e,null)}return!0},j=function(e){return Nt(t(e).attr("from"))?_t(e):O(e)},O=function(e){var i=t(e).attr("type");switch(i){case n:F(e);break;case"available":F(e);break;case"unavailable":H(e);break;default:F(e)}return!0},F=function(e){var n=t(e).attr("from"),i=n.split("@")[0];if(i!=user_slug)if(B(e),null!=PRESENCE.UIMANAGER.getConnectionBoxFromSlug(i)){var o=t(e).find("show").text();PRESENCE.UIMANAGER.setUserIconStatus(i,o),PRESENCE.UIMANAGER.updateInterfaceAfterPresenceStanza(i,!0)}else PRESENCE.UTILITIES.isAdminSlug(i)||PRESENCE.UIMANAGER.updateChatWindow()},H=function(e){var n=t(e).attr("from"),i=n.split("@")[0];i!=user_slug&&null!=PRESENCE.UIMANAGER.getConnectionBoxFromSlug(i)&&(PRESENCE.UIMANAGER.updateInterfaceAfterPresenceStanza(i,!1),PRESENCE.GAME.userDisconnected(i))},B=function(e){var n=t(e).attr("from"),o=n.split("@"),r=o[0],s=o[1].split("/")[0],a=o[1].split("/")[1];if(r in contactsInfo)contactsInfo[r].domain=s,contactsInfo[r].resource=a;else{var l=new i(s,a,null,null);contactsInfo[r]=l}},L=function(e){if(!(e in l)){var t=new o;l[e]=t}},q=function(e){var t=e.getAttribute("type"),n=e.getAttribute("from"),i=n.split("@")[0];return i==user_slug?!0:"get"==t?z(e,n,i):(t="result")?$(e,n,i):!0},z=function(e,t,n){var i=e.getAttribute("id"),o=e.getElementsByTagName("query");if(o.length>0){var r=o[0],s=r.getAttribute("xmlns");if("jabber:iq:version"==s)return X(t,i),!0;if("jabber:iq:last"==s)return J(t,i),!0}return i==c.videochatRequest?(W(t,i,e,n),!0):i==PRESENCE.GAME.COMUNICATION.getIQStanzaID().gameRequest?!0:(Z(t,i),!0)},W=function(e,n,i,o){B(i);var r=i.getElementsByTagName("query");if(r.length>0){var s=r[0],a=s.getElementsByTagName("session_id"),l=s.getElementsByTagName("token");if(1==a.length&&1==l.length)return contactsInfo[o].session_id=t(a).text(),contactsInfo[o].user_token=t(l).text(),PRESENCE.VIDEOCHAT.updateInterfaceAfterVideoRequestReceived(o),void 0}Z(e,n)},$=function(e,t,n){var i=e.getAttribute("id");return i==c.cinfo?U(e,n):i==c.videochatRequest?V(e,n):i==c.videochatRequestCancel?G(e,n):!0},U=function(e,n){var o=e.getElementsByTagName("query");if(o.length>0){var r=o[0],s=r.getElementsByTagName("name"),a=r.getElementsByTagName("version");if(1==s.length&&1==a.length){var l=t(s).text(),c=t(a).text();if(n in contactsInfo)contactsInfo[n].client=l,contactsInfo[n].version=c;else{var u=new i(null,null,l,c);contactsInfo[n]=u}PRESENCE.VIDEOCHAT.clientInfoReceivedTrigger(n)}}return!0},V=function(e,n){var i=e.getElementsByTagName("query");if(i.length>0){var o=i[0],r=o.getElementsByTagName("response");if(1==r.length)return PRESENCE.VIDEOCHAT.receiveVideoChatResponseFromUser(n,t(r).text()),!0}return PRESENCE.VIDEOCHAT.receiveVideoChatResponseFromUser(n,"Bad response"),!0},G=function(e,t){var n=e.getElementsByTagName("query");if(n.length>0){var i=n[0],o=i.getElementsByTagName("response");if(1==o.length)return PRESENCE.VIDEOCHAT.receiveVideoChatCancelationFromUser(t),!0}return!0},Q=function(e){if(e in contactsInfo){var t=contactsInfo[e].domain,n=contactsInfo[e].resource,i=e+"@"+t+"/"+n,o=$iq({to:i,type:"get",id:c.cinfo,xmlns:"jabber:iq:version"}).c("query",{xmlns:"jabber:iq:version"});E.sendIQ(o)}},Y=function(e){if(e in contactsInfo){var t=e+"@"+contactsInfo[e].domain+"/"+contactsInfo[e].resource,n=$iq({to:t,type:"get",id:c.videochatRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("session_id").t(contactsInfo[e].session_id).up().c("token").t(contactsInfo[e].guest_token);E.sendIQ(n)}},X=function(e,t){var n="Social Stream XMPP Client",i=K(),o=$iq({to:e,type:"result",id:t}).c("query",{xmlns:"jabber:iq:version"}).c("name").t(n).up().c("version").t(i);E.sendIQ(o)},K=function(){return"2.0.1"},J=function(e,t){var n=$iq({to:e,type:"result",id:t}).c("query",{xmlns:"jabber:iq:last",seconds:"0"});E.sendIQ(n)},Z=function(e,t){var n=$iq({to:e,type:"result",id:t});E.sendIQ(n)},et=function(e,t){if(e in contactsInfo){var n=e+"@"+contactsInfo[e].domain+"/"+contactsInfo[e].resource,i=$iq({to:n,type:"result",id:c.videochatRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("response").t(t);E.sendIQ(i)}},tt=function(e){if(e in contactsInfo){var t=e+"@"+contactsInfo[e].domain+"/"+contactsInfo[e].resource,n=$iq({to:t,type:"result",id:c.videochatRequestCancel}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("response").t("cancel");E.sendIQ(n)}},nt=function(e,t){if(PRESENCE.WINDOW.rotatePriority(e),PRESENCE.WINDOW.isSlugGroup(e)){var n=gt(e);return lt(n,t)}var i=PRESENCE.PARSER.getParsedName(user_name,!0);PRESENCE.WINDOW.getChatBoxForSlug(e).chatbox("option","boxManager").addMsg(i,PRESENCE.PARSER.getParsedContent(t,!0));var n=At(e);return it(n,t)},it=function(e,t){var n=user_jid,i=$build("body");i.t(t);var o=$msg({to:e,from:n,type:"chat"}).cnode(i.tree());return E.send(o.tree()),M(),!0},ot=function(e){if(e||(e=u),e in s&&(e=s[e]),e in a){var t=$pres().c("status").t(a[e]).up().c("show").t(e);E.send(t.tree()),PRESENCE.UIMANAGER.setStatusWidgetTitle(e)}},rt="conference",st=function(e){return E.muc.join(gt(e),vt(e),null,null,null,null)},at=function(e){return E.muc.leave(gt(e),vt(e),null,null)},lt=function(e,t){return E.muc.message(e,null,t,null,"groupchat")},ct=function(e){return E.muc.queryOccupants(gt(e),ut,ht)},ut=function(e){return dt(e),!0},ht=function(){return!0},dt=function(e){var n=t(e).attr("from"),i=kt(n),o=e.getElementsByTagName("query");if(o.length>0){var r=o[0],s=r.getElementsByTagName("item");t.each(s,function(e,n){var o=t(n).attr("name");-1==l[i].occupants.indexOf(o)&&(l[i].occupants.push(o),PRESENCE.NOTIFICATIONS.addNickToNotificationInGroup(i,o))})}},ft=function(e,t){return L(e),0==l[e].joined&&(st(e),ct(e)),PRESENCE.UIMANAGER.existsSlugChatBox(e)||PRESENCE.WINDOW.createGroupChatBox(e,t),!0},pt=function(e){L(e);var t=new o;l[e]=t},mt=function(){t.each(PRESENCE.WINDOW.getAllSlugsWithVisibleGroupBoxes(),function(e,t){pt(t),PRESENCE.NOTIFICATIONS.initialNotificationInGroup(t,I18n.t("chat.muc.offline"))})},gt=function(e){return e+"@"+rt+"."+r},vt=function(e){return e in l?l[e].nick:yt()},yt=function(){return user_name.split(" ")[0]},bt=function(e){var t=vt(e);return t.split("_").length>4?!1:(L(e),l[e].nick=t+"_",st(e),!0)},wt=function(e){var t=e.getAttribute("from"),n=e.getAttribute("type"),i=e.getElementsByTagName("body");if("groupchat"==n&&i.length>0){var o=i[0];Dt(t);var r=Strophe.getText(o),s=kt(t),a=e.getAttribute("id");if(s in l&&null!=l[s].lastMessageId&&l[s].lastMessageId==a)return!0;l[s].lastMessageId=a,PRESENCE.UIMANAGER.afterReceivedGroupChatMessage(t,r)}return!0},_t=function(e){var i=t(e).attr("from"),o=t(e).attr("to"),r=kt(i),s=Dt(i),a=t(e).attr("type");if(s==vt(r)&&kt(o)==user_slug){switch(a){case n:xt(e);break;case"available":xt(e);break;case"unavailable":Ct(e);break;case"error":Et(e)}return!0}switch(a){case n:St(e);break;case"available":St(e);break;case"unavailable":Tt(e);break;default:return!0}return!0},xt=function(e){var n=t(e).attr("from"),i=kt(n);L(i);var o=e.getElementsByTagName("x");if(1==o.length){var r=o[0],s=r.getElementsByTagName("item");t.each(s,function(e,n){var o=t(n).attr("role"),r=t(n).attr("affiliation");l[i].affiliation=r,l[i].role=o,0==l[i].joined&&(l[i].joined=!0,PRESENCE.NOTIFICATIONS.changeInitialNotificationInGroup(i,I18n.t("chat.muc.occupants")))})}},Ct=function(e){var n=t(e).attr("from"),i=kt(n);pt(i),PRESENCE.NOTIFICATIONS.changeInitialNotificationInGroup(i,"")},Et=function(e){var n=t(e).attr("from"),i=kt(n),o="Error",r=e.getElementsByTagName("error");if(1==r.length){var s=r[0],a=t(s).attr("code"),l=t(s).attr("type");o=o+" with code:"+a+" and type:"+l;var c=s.getElementsByTagName("text");if(1==c.length){var u=t(c[0]).text();o=o+"\n"+u}if(409==a&&bt(i))return}pt(i),PRESENCE.NOTIFICATIONS.initialNotificationInGroup(i,I18n.t("chat.muc.joinError",{errorMsg:o}))},St=function(e){var n=t(e).attr("from"),i=Dt(n),o=kt(n);L(o),-1==l[o].occupants.indexOf(i)&&(l[o].occupants.push(i),PRESENCE.NOTIFICATIONS.addNickToNotificationInGroup(o,i),PRESENCE.UIMANAGER.writeReceivedMessageOnChatWindow("",o,I18n.t("chat.muc.join",{nick:i})))},Tt=function(e){var n=t(e).attr("from"),i=Dt(n),o=kt(n);L(o),-1!=l[o].occupants.indexOf(i)&&(l[o].occupants.splice(l[o].occupants.indexOf(i),1),PRESENCE.NOTIFICATIONS.removeNickFromNotificationInGroup(o,i),PRESENCE.UIMANAGER.writeReceivedMessageOnChatWindow("",o,I18n.t("chat.muc.leave",{nick:i})))},kt=function(e){return e.split("@")[0]},It=function(e){return e.split("@")[1].split("/")[0]},Nt=function(e){return It(e).split(".")[0]==rt?!0:!1},Pt=function(e){var n=PRESENCE.UIMANAGER.getConnectionBoxFromSlug(e);if(null!=n)return t(n).attr("name");var i=PRESENCE.WINDOW.getChatBoxForSlug(e);return null!=i?i.attr("name"):e},At=function(e){return e+"@"+r},Dt=function(e){return e.split("/")[1]},Mt=function(){return s},Rt=function(){return E||(E=new Strophe.Connection(BOSH_SERVICE)),E},jt=function(){return T},Ot=function(e){T=e},Ft=function(){return k},Ht=function(e){k=e},Bt=function(){return u},Lt=function(e){u=e},qt=function(){return S},zt=function(){return l};return{init:f,connectToChat:p,onReconnect:N,isStropheConnected:m,isUserConnected:g,authByCookie:b,authByPassword:w,disconnect:P,awayTimerFunction:A,restartAwayTimer:M,sendIQStanzaForRequestClientInfo:Q,sendIQStanzaToRequestVideochat:Y,sendIQStanzaToResponseVideochat:et,sendIQStanzaToCancelVideochat:tt,getJavascriptXMPPClientName:K,sendChatMessage:nt,sendStatus:ot,accessRoom:ft,joinRoom:st,leaveRoom:at,getSlugFromJid:kt,getJidFromSlug:At,getNameFromSlug:Pt,getNickFromChatRoomJid:Dt,getConnection:Rt,isNewConnection:jt,setNewConnection:Ot,isFirstConnection:Ft,setFirstConnection:Ht,getUserStatus:Bt,setUserStatus:Lt,getDisconnectionFlag:qt,getRoomsInfo:zt,getSStreamChatStatus:Mt}}(PRESENCE,jQuery),PRESENCE.AUDIO=function(e,t){function n(){}function o(e){null!=window[e]?window[e].play():t("body").append('<embed src="'+s+"/"+e+'.mp3" autostart="true" hidden="true" loop="false">')}function r(){return"dnd"==PRESENCE.XMPPClient.getUserStatus()?!1:PRESENCE.UTILITIES.getChatFocus()?!1:!0}var s="/assets/chat",a=[["mp3","audio/mpeg"],["wav","audio/wav"]],l=function(){c("onMessageAudio")},c=function(e){var t=document.createElement("audio");if(t.canPlayType)for(path=s+"/"+e,window[e]=new Audio,i=0;i<a.length;i++)if(window[e].canPlayType(a[i][1])){var o=document.createElement("source");o.type=a[i][1],o.src=path+"."+a[i][0],window[e].addEventListener("ended",n),window[e].appendChild(o)}};return{init:l,mustPlaySoundForChatWindow:r,playSound:o}}(PRESENCE,jQuery),PRESENCE.GAME=function(e,t){function n(e,t,n,i){this.id=e,this.name=t,this.players=n,this.options=i,this.handler=null}function i(e,t){this.id=e,this.name=t}function o(e,t){this.pass=e,this.reason=t}var r=function(e,t){return new o(e,t)},s=function(){var t="false";"true"==t&&(e.GAME.INTERFACE.enableGameFeature(!0),e.GAME.COMUNICATION.init(PRESENCE.XMPPClient.getConnection()))},a=function(t,n){if(null!=n){if(t in contactsInfo)var i=contactsInfo[t].gameStatus;else var i=null;if(!PRESENCE.XMPPClient.isUserConnected())return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.offline")),null!=i&&(contactsInfo[t].gameStatus="disconnected"),void 0;if(!PRESENCE.UIMANAGER.isSlugChatConnected(t))return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.guestOffline",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),null!=i&&(contactsInfo[t].gameStatus="disconnected"),void 0;if(null==i)return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.unable")),void 0;if("disconnected"!=i)return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,"Esta ocupado en otro estado!=desconectado..."),void 0;contactsInfo[t].gameStatus="waiting",e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.waiting")),contactsInfo[t].game=n;var o=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;return e.GAME.COMUNICATION.sendIQStanzaToRequestGame(o,n)}},l=function(t,n){if(!(!t in contactsInfo)){var i=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;e.GAME.COMUNICATION.sendIQStanzaToResponseGameRequest(i,n),"yes"==n?(contactsInfo[t].gameStatus="playing",PRESENCE.GAME.INTERFACE.updateInterfaceBeforeStartGame(t)):(contactsInfo[t].gameStatus="disconnected",PRESENCE.GAME.INTERFACE.updateInterfaceAfterFinishGame(t))}},c=function(n,i){t.each(n.players,function(t,o){var r=o.id;if(r!=user_slug&&r in contactsInfo){var s=r+"@"+contactsInfo[r].domain+"/"+contactsInfo[r].resource;e.GAME.COMUNICATION.sendIQStanzaWithAction(s,n.id,i)}})},u=function(t,i,o,r,s){if(!(!t in contactsInfo)){if(contactsInfo[t].game=new n(i,o,r,s),"disconnected"!=contactsInfo[t].gameStatus)return e.GAME.COMUNICATION.sendIQStanzaToResponseGameRequest(t,"busy"),!0;contactsInfo[t].gameStatus="pending",e.GAME.INTERFACE.updateInterfaceAfterGameRequestReceived(t,contactsInfo[t].game)}},h=function(t,n){return"waiting"!=contactsInfo[t].gameStatus?!0:("yes"==n?(contactsInfo[t].gameStatus="playing",e.GAME.INTERFACE.updateInterfaceBeforeStartGame(t,contactsInfo[t].game)):"no"==n?(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.rejected",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"):"busy"==n?(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.rejectedBusy",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"):(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.unknown",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"),void 0)},d=function(t,n){t in contactsInfo?"finish"==n&&("pending"==contactsInfo[t].gameStatus?(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.cancel",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected"):"playing"==contactsInfo[t].gameStatus&&(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.finish",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected")):y(t)},f=function(t){return"waiting"!=contactsInfo[t].gameStatus?!0:(e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,I18n.t("chat.game.clientIssue",{name:PRESENCE.XMPPClient.getNameFromSlug(t)})),contactsInfo[t].gameStatus="disconnected",void 0)},p=function(e){if(!e in contactsInfo){var n=contactsInfo[e].game;null!=n&&null!=n.players&&t.each(n.players,function(t,n){return n[0]==e?n[1]:void 0})}return null},m=function(e,t,n){var i;return i=g(t),i[0]?"undefined"==typeof e||"undefined"==typeof n?new o(!1,"myPlayer or myDivID undefined"):-1==t.players.constructor.toString().indexOf("Array")?new o(!1,"Game.Players is not an array"):-1==t.options.constructor.toString().indexOf("Array")?new o(!1,"Game.options is not an array"):-1==t.players.indexOf(e)?new o(!1,"myPlayer is not contained in players array"):new o(!0,"Ok"):i},g=function(e){return"undefined"==typeof e||"undefined"==typeof e.id||"undefined"==typeof e.name||"undefined"==typeof e.players||"undefined"==typeof e.options?new o(!1,"Some game field (game/game.id/game.name/game.players/game.options) is undefined"):""==e.id||""==e.name?new o(!1,"game.id or game.name is empty"):e.id.split(" ").length>2?new o(!1,"Invalid game.id. No whitespaces allowd in this field"):new o(!0,"Ok")},v=function(t,n){var o=contactsInfo[t].game,r=new i(user_slug,p(user_slug)),s=m(r,o,n);if(!s.pass){var a="StartPlay error with reason: "+s.reason;return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,a),void 0}if("function"==typeof PRESENCE.GAME[o.id].validateParams){if(s=PRESENCE.GAME[o.id].validateParams(r,o,n),!s.pass){var a="StartPlay error with reason: "+s.reason;return e.GAME.INTERFACE.updateInterfaceOnInformationMessage(t,a),void 0}}else PRESENCE.UTILITIES.log("Warning: Missed "+o.name+" validateParams method");"function"==typeof PRESENCE.GAME[o.id].minimumRequirements||PRESENCE.UTILITIES.log("Warning: Missed "+o.name+" minRequirements method"),null!=o.handler&&PRESENCE.GAME.COMUNICATION.removeHandler(o.handler),o.handler=PRESENCE.GAME.COMUNICATION.addHandler(o.id);var r=new i(user_slug,user_name);PRESENCE.GAME[o.id].init(r,o,n)},y=function(t){var n=null;if(t in contactsInfo){var i=contactsInfo[t].gameStatus;if("playing"==i){var o=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;e.GAME.COMUNICATION.sendIQStanzaToFinishGame(o),null!=contactsInfo[t].game.handler&&(e.GAME.COMUNICATION.removeHandler(contactsInfo[t].game.handler),null==contactsInfo[t].game.handler)}else if("waiting"==i){var o=t+"@"+contactsInfo[t].domain+"/"+contactsInfo[t].resource;e.GAME.COMUNICATION.sendIQStanzaToFinishGame(o)}else"pending"==i&&e.GAME.COMUNICATION.sendIQStanzaToResponseGameRequest(t,"no");contactsInfo[t].gameStatus="disconnected",n=contactsInfo[t].game}PRESENCE.GAME.INTERFACE.updateInterfaceAfterFinishGame(t,n)},b=function(e){y(e)};return{init:s,game:n,player:i,startGame:v,finishGame:y,createValidationResult:r,requestUserToPlay:a,responseUserToPlay:l,updateLogicAfterReceivedGameRequest:u,updateLogicAfterReceivedGameRequestCancelation:d,updateLogicAfterReceivedGameRequestResponse:h,updateLogicAfterReceivedGameRequestError:f,sendAction:c,userDisconnected:b}}(PRESENCE,jQuery),PRESENCE.GAME.COMUNICATION=function(e,t){function n(){}var i=null,o=new Array;o.gameRequest="gameRequestID",o.gameRequestFinish="gameRequestFinishID",o.gameAction="gameActionID";var r=function(){return o},s=function(e){i=e,i&&(i.addHandler(l,null,"iq","get",o.gameRequest,null),i.addHandler(u,null,"iq","result",o.gameRequest,null),i.addHandler(h,null,"iq","error",o.gameRequest,null),i.addHandler(f,null,"iq","result",o.gameRequestFinish,null),i.addHandler(v,null,"iq","result",m("gameId"),null))},a=function(e,n){var r=0,s=Object.keys(n.options).length,a=$iq({to:e,type:"get",id:o.gameRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("game",{id:n.id,name:n.name}).c("players",{});t.each(n.players,function(e,t){e==n.players.length-1?a.c("player",{id:t.id}).t(t.name).up().up():a.c("player",{id:t.id}).t(t.name).up()}),a.c("options",{});for(var l in n.options)r==s-1?a.c("option",{name:l}).t(n.options[l]).up().up():a.c("option",{name:l}).t(n.options[l]).up(),r+=1;i.sendIQ(a)},l=function(n){var i=n.getAttribute("from"),o=i.split("@")[0],r="",s="",a=[],l=new Array,c=n.getElementsByTagName("game");if(1==c.length){var u=c[0];s=t(u).attr("name"),r=t(u).attr("id");var h=n.getElementsByTagName("players");h.length>0&&t.each(t(h).children(),function(n,i){a.push(new e.GAME.player(t(i).attr("id"),t(i).text()))});var d=n.getElementsByTagName("options");d.length>0&&t.each(t(d).children(),function(e,n){l[t(n).attr("name")]=t(n).text()})}return e.GAME.updateLogicAfterReceivedGameRequest(o,r,s,a,l),!0},c=function(e,t){var n=$iq({to:e,type:"result",id:o.gameRequest}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("response").t(t);i.sendIQ(n)},u=function(n){var i=n.getAttribute("from"),o=i.split("@")[0],r=n.getElementsByTagName("query");if(r.length>0){var s=r[0],a=s.getElementsByTagName("response");if(1==a.length)return e.GAME.updateLogicAfterReceivedGameRequestResponse(o,t(a).text()),!0}return!0},h=function(t){var n=t.getAttribute("from"),i=n.split("@")[0];return e.GAME.updateLogicAfterReceivedGameRequestError(i),!0},d=function(e){var t=$iq({to:e,type:"result",id:o.gameRequestFinish}).c("game",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("status").t("finish");i.sendIQ(t)},f=function(n){var i=n.getAttribute("from"),o=i.split("@")[0],r=n.getElementsByTagName("game");if(r.length>0){var s=r[0],a=s.getElementsByTagName("status");if(1==a.length){var l=t(a).text();return e.GAME.updateLogicAfterReceivedGameRequestCancelation(o,l),!0}}return!0},p=function(e,t,n){var o=m(t),r=$iq({to:e,type:"result",id:o}).c("query",{xmlns:"urn:ietf:params:xml:ns:xmpp-stanzas"}).c("game",{id:t}).c("action",{type:n.type});return n.type=null,r=g(r,n),i.sendIQ(r)},m=function(e){return o.gameAction+"_"+e},g=function(e,n){if("object"!=typeof n)return e;var i=Object.keys(n).length,o=0;return t.each(n,function(t,n){if(null!=n){if("object"==typeof n){var r="object";-1!=n.constructor.toString().indexOf("Array")&&(r="array"),e.c(t,{type:r}),e=g(e,n)}else{var s=typeof n,a=typeof t;switch(s){case"number":n+="";break;case"boolean":n=n.toString();break;case"string":}switch(a){case"number":t="item";break;case"string":}o==i-1?e.c(t,{type:s}).t(n).up().up():e.c(t,{type:s}).t(n).up()}o++}}),e},v=function(e){var n=e.getAttribute("from");n.split("@")[0];var i=e.getElementsByTagName("query");if(1==i.length){var o=i[0],r=o.getElementsByTagName("game");if(1==r.length){var s=r[0],a=t(s).attr("id"),l=s.getElementsByTagName("action");t.each(l,function(e,t){var n=y(t);PRESENCE.GAME[a].onActionReceived(n)})}}return!0},y=function(e){var i=new n,o=t(e).attr("type");return i.type=o,i=b(i,e)},b=function(e,n){return t.each(t(n).children(),function(n,i){if(t(i).children().length>0)e[i.tagName]="array"==t(i).attr("type")?new Array:new Object,e[i.tagName]=b(e[i.tagName],t(i));else{var o=null,r=t(i).text(),s=t(i).attr("type");switch(s){case"number":isNaN(+r)||(o=+r);break;case"boolean":("true"==r||"false"==r)&&(o="true"===r);break;case"string":o=r}-1!=e.constructor.toString().indexOf("Array")&&"item"==i.tagName?e.push(o):e[i.tagName]=o}}),e},w=function(e){i.deleteHandler(e)},_=function(e){return i.addHandler(v,null,"iq","result",m(e),null)};return{init:s,sendIQStanzaToRequestGame:a,handleRequestGameIQStanza:l,sendIQStanzaToResponseGameRequest:c,handleIQResultFromGameRequest:u,sendIQStanzaToFinishGame:d,handleIQResultFromGameRequestFinish:f,sendIQStanzaWithAction:p,handleActionIQStanza:v,addHandler:_,removeHandler:w,getIQStanzaID:r}}(PRESENCE,jQuery),PRESENCE.GAME.FACTORY=function(){var e=function(e,n){switch(n){case"Modern-TER":var i=new Array;return i.theme="Modern",t(e,"TER",i);case"Classic-TER":var i=new Array;return i.theme="Classic",t(e,"TER",i);default:return null}},t=function(e,t,i){var o=new PRESENCE.GAME.player(user_slug,user_name),r=new PRESENCE.GAME.player(e,PRESENCE.XMPPClient.getNameFromSlug(e)),s=[o,r],a=new PRESENCE.GAME.game(t,n(t),s,i);return a},n=function(e){return"function"==typeof PRESENCE.GAME[e].getName?PRESENCE.GAME[e].getName():e};return{getGame:e}}(PRESENCE,jQuery),PRESENCE.GAME.INTERFACE=function(e,t,n){function i(e,t,n){this.name=e,this.choice=t,this.thumbnail=n
}updateInterfaceAfterGameRequestReceived=function(e,t){PRESENCE.WINDOW.createBuddyChatBox(e),PRESENCE.WINDOW.getChatBoxForSlug(e),m(e,t),v(e),PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!0)};var o=function(e){var n=document.createElement("div"),i="game_"+e+contactsInfo[e].game.id;n.setAttribute("id",i),t(n).css("width","100%"),t(n).css("height","100%"),PRESENCE.WINDOW.setVideoBoxContent(e,n),PRESENCE.GAME.startGame(e,i)},r=function(e){PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!1),y(e)},s=function(e,t){PRESENCE.WINDOW.setVideoBoxContent(e,'<p class="game-info"> '+t+" </p>")},a=function(e){var n=t(e.element).attr("id"),i=PRESENCE.WINDOW.toggleVideoBoxForSlug(n);i?(v(n),c(n)):(y(n),PRESENCE.GAME.finishGame(n))},l=[];l.push(new i("Modern Tic Tac Toe","Modern-TER","/assets/games/ter/modern_thumbnail.png")),l.push(new i("Classic Tic Tac Toe","Classic-TER","/assets/games/ter/classic_thumbnail.png"));var c=function(e,t){("undefined"==typeof t||null==t)&&(t=l.length>0?l[0]:new t("No games available","None",""));var n=h(e,t);PRESENCE.WINDOW.setVideoBoxContent(e,n),d()},u=function(e,t){PRESENCE.GAME.requestUserToPlay(e,t)},h=function(e,t){var n='<div class="game-choices"><div class="game-choice-buttonLeft"><a class="game-choice-linkLeft"><img class="game-button-img" src="/assets/btn/group_left.png" ></a></div><div class="game-choice"><a class="game-choice-link" slug='+e+' choice="'+t.choice+'" >'+'<img class="game-choice-img" src="'+t.thumbnail+'" >'+'<p class="game-name">'+t.name+" </p>"+"</a>"+"</div>"+'<div class="game-choice-buttonRight">'+'<a class="game-choice-linkRight">'+'<img class="game-button-img" src="/assets/btn/group_right.png" >'+"</a>"+"</div>"+"</div>";return n},d=function(){t(".game-choice-link").click(function(){var n=t(this).attr("choice"),i=t(this).attr("slug"),o=e.GAME.FACTORY.getGame(i,n);u(i,o)}),t(".game-choice-linkLeft").click(function(e){var n=t(e.target).parent().parent().parent().find(".game-choice-link"),i=n.attr("slug"),o=n.attr("choice"),r=p(o);c(i,r)}),t(".game-choice-linkRight").click(function(e){var n=t(e.target).parent().parent().parent().find(".game-choice-link"),i=n.attr("slug"),o=n.attr("choice"),r=f(o);c(i,r)})},f=function(e){var n=null;return t.each(l,function(t,i){i.choice==e&&(n=t==l.length-1?l[0]:l[t+1])}),n},p=function(e){var n=null;return t.each(l,function(t,i){i.choice==e&&(n=0==t?l[l.length-1]:l[t-1])}),n},m=function(e,t){var n='<p class="game-info">'+I18n.t("chat.game.call",{name:PRESENCE.XMPPClient.getNameFromSlug(e),game:t.name})+" </p>",i=n+'<p class="game-request"> <a class="gameButton" slug="'+e+'" value="yes">'+I18n.t("chat.game.accept")+"</a> -"+' <a class="gameButton" slug="'+e+'" value="no">'+I18n.t("chat.game.deny")+"</a> </p>";PRESENCE.WINDOW.setVideoBoxContent(e,i),g()},g=function(){t(".gameButton").click(function(e){e.preventDefault();var n=t(this).attr("value"),i=t(this).attr("slug");PRESENCE.GAME.responseUserToPlay(i,n)})},v=function(e){t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"video")).hide()},y=function(e){t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"video")).show()},b=function(){t(".chat-gamesthick").css("display","block")},w=function(e){for(var t=document.styleSheets,i=0;i<t.length;i++){var o=t[i].cssRules||t[i].rules;if(o!=n)for(var r=0;r<o.length;r++)".chat-gamesthick"===o[r].selectorText&&(o[r].style.display=e?"block":"none")}};return{pickGamesButton:a,updateInterfaceAfterGameRequestReceived:updateInterfaceAfterGameRequestReceived,updateInterfaceBeforeStartGame:o,updateInterfaceAfterFinishGame:r,updateInterfaceOnInformationMessage:s,play:b,enableGameFeature:w}}(PRESENCE,jQuery),PRESENCE.GAME.SFIGTHER=function(e,t,n){function i(e,t){this.player=e,this.move=t,this.type="movement"}function o(){t.playground().registerCallback(function(){var e=t("#cvs"),n=e.data("fighter"),i=e.position().left,o=t("#abobo"),r=o.data("fighter"),s=o.position().left;i+n.animations[n.currentState].width-2>s&&(n.currentState!=E&&n.currentState!=C||r.currentState==T?r.currentState!=E&&r.currentState!=C||n.currentState==T||n.currentState!=S&&c(e):r.currentState==E||r.currentState==C?(c(o),c(e)):r.currentState!=S&&c(o)),n.currentState==_?i+n.animations[n.currentState].width+2<s&&e.css("left",i+2):i>50&&n.currentState==x&&e.css("left",i-2),r.currentState==_?i+n.animations[n.currentState].width+2<s&&o.css("left",s-2):650>s&&r.currentState==x&&o.css("left",s+2);var a=o.position().left-r.animations[r.currentState].deltaX,l=e.position().left-n.animations[n.currentState].deltaX,u=(a-l)/2+l;return B(.5*-(u-400)),!1},30)}function r(){t(window).keydown(function(e){if("undefined"!=typeof j[e.which]){if(F==e.which)return j[F]=!0,void 0;O=F,F=e.which,null!=O&&(j[O]=!1),j[F]=!0}}).keyup(function(e){"undefined"!=typeof j[e.which]})}function s(e,t){if(e.data("fighter").currentState==k)return k;for(var n in j)if(j[n]){j[n]=!1;var i=e.position().left-t.position().left>0;switch(n){case"37":return i?_:x;case"39":return i?x:_;case"65":return C;case"83":return E;case"90":return S}}return w}function a(){d={id:v,health:100,currentState:w,position:250,adversary:"#abobo",animations:[{animation:new t.gameQuery.Animation({imageURL:P+"/cvs/cvs_idle_59x106x6.png",numberOfFrame:6,delta:59,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:0,width:59,height:106},{animation:new t.gameQuery.Animation({imageURL:P+"/cvs/cvs_walk_forward_58x106x5.png",numberOfFrame:5,delta:58,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:0,width:58,height:106},{animation:new t.gameQuery.Animation({imageURL:P+"/cvs/cvs_walk_backward_58x106x5.png",numberOfFrame:5,delta:58,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:0,width:58,height:106},{animation:new t.gameQuery.Animation({imageURL:P+"/cvs/cvs_punch_120x104x6.png",numberOfFrame:6,delta:120,rate:120,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:2,width:120,height:104},{animation:new t.gameQuery.Animation({imageURL:P+"/cvs/cvs_kick_156x106x9.png",numberOfFrame:9,delta:156,rate:90,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:-20,deltaY:0,width:156,height:106},{animation:new t.gameQuery.Animation({imageURL:P+"/cvs/cvs_block_69x99x2.png",numberOfFrame:2,delta:69,rate:480,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:7,width:69,height:99},{animation:new t.gameQuery.Animation({imageURL:P+"/cvs/cvs_hit_59x103x1.png",rate:720,type:t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:3,width:59,height:103},{animation:new t.gameQuery.Animation({imageURL:P+"/cvs/cvs_die_150x110x1.png",numberOfFrame:1,rate:720,type:t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:3,width:150,height:110}]},t("#fighters").addSprite("cvs",{posx:250,posy:70,height:106,width:58,animation:d.animations[0].animation,geometry:t.gameQuery.GEOMETRY_RECTANGLE,callback:l}),t("#cvs").data("fighter",d),h={id:y,health:100,currentState:w,position:500,adversary:"#cvs",animations:[{animation:new t.gameQuery.Animation({imageURL:P+"/abobo/abobo_idle_100x121x3.png",numberOfFrame:3,delta:100,rate:190,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:49,width:100,height:121},{animation:new t.gameQuery.Animation({imageURL:P+"/abobo/abobo_walk_forward_94x126x6.png",numberOfFrame:6,delta:94,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:44,width:94,height:126},{animation:new t.gameQuery.Animation({imageURL:P+"/abobo/abobo_walk_backward_94x126x6.png",numberOfFrame:6,delta:94,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:44,width:94,height:126},{animation:new t.gameQuery.Animation({imageURL:P+"/abobo/abobo_punch_131x170x4.png",numberOfFrame:4,delta:131,rate:150,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:-30,deltaY:0,width:131,height:170},{animation:new t.gameQuery.Animation({imageURL:P+"/abobo/abobo_kick_137x130x2.png",numberOfFrame:2,delta:137,rate:500,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:20,deltaY:40,width:137,height:130},{animation:new t.gameQuery.Animation({imageURL:P+"/abobo/abobo_block_81x130x1.png",rate:700,type:t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:40,width:81,height:130},{animation:new t.gameQuery.Animation({imageURL:P+"/abobo/abobo_hit_108x120x3.png",numberOfFrame:3,delta:108,rate:240,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:50,width:108,height:120},{animation:new t.gameQuery.Animation({imageURL:P+"/abobo/abobo_die_156x119x1.png",numberOfFrame:1,delta:0,rate:500,type:t.gameQuery.ANIMATION_HORIZONTAL|t.gameQuery.ANIMATION_CALLBACK}),deltaX:0,deltaY:50,width:156,height:120}]},t("#fighters").addSprite("abobo",{posx:550,posy:60,height:121,width:100,animation:h.animations[0].animation,geometry:t.gameQuery.GEOMETRY_RECTANGLE,callback:l}),t("#abobo").data("fighter",h)}function l(e){e=t(e),fighter=e.data("fighter"),adversary=t(fighter.adversary),adversaryFighter=adversary.data("fighter");var o=w;if(fighter.id==b){o=s(e,adversary);var r=new i(o);W(r)}else null!=A&&(o=A.move);L(e,fighter.animations,o,fighter.currentState),o==C||o==E?e.css("z-index",20):(fighter.currentState==C||fighter.currentState==E)&&e.css("z-index",n),fighter.currentState=o}function c(e){var t=e.data("fighter");t.health=t.health-45,t.health<0?(L(e,t.animations,k,t.currentState),t.currentState=k,g=!1):(L(e,t.animations,T,t.currentState),t.currentState=T)}var u,h,d,f=e.GAME,p="Street Fighter",m=null,g=!0,v="cvs",y="abobo",b=null,w=0,_=1,x=2,C=3,E=4,S=5,T=6,k=7,I=800,N=200,P="/assets/games/sfighter/",A=null,D=null,M=function(e,n){m=e,u=n,D="playground",b=n.players[0].id==e.id?y:v,u.options=R(n.options),g=!0,H(),r(),a(),o(),t().setLoadBar("loadingBar",600),t.playground().startGame(function(){t("#welcomMessage").fadeOut(2e3,function(){t(this).remove()})})},R=function(e){return e},j=new Array;j[37]=!1,j[39]=!1,j[65]=!1,j[83]=!1,j[90]=!1;var O=null,F=null,H=function(){var e=document.createElement("div");e.setAttribute("id",D),e.setAttribute("style","width: 800px; height: 200px;"),t("#wrapper_body").prepend(e);var n=document.createElement("div");n.setAttribute("id","welcomMessage"),n.setAttribute("style","position: absolute; top: 0px; width: 800px; height: 200px; color: white; z-index: 1000; background: #333;"),t("#"+D).prepend(n),t("#"+D).playground({height:N,width:I,refreshRate:30,keyTracker:!0});var i=new t.gameQuery.Animation({imageURL:P+"/stage/foreground.png",type:t.gameQuery.ANIMATION_VERTICAL}),o=new t.gameQuery.Animation({imageURL:P+"/stage/ground.png"}),r=new t.gameQuery.Animation({imageURL:P+"/stage/background1.png"}),s=new t.gameQuery.Animation({imageURL:P+"/stage/background2.png"}),a=new t.gameQuery.Animation({imageURL:P+"/stage/background3.png"});t.playground().addSprite("background3",{posx:90,posy:0,height:200,width:534,animation:a}).addSprite("background2",{posx:30,posy:-50,height:180,width:432,animation:s}).addSprite("background1",{posx:50,posy:-150,height:317,width:749,animation:r}).addSprite("ground",{posx:-300,posy:0,height:200,width:1493,animation:o}).addGroup("fighters").end().addSprite("foreground",{posx:-800,posy:165,height:44,width:2e3,animation:i}),t("#sceengraph").css("background-color","#121423")},B=function(e){e>50?e=50:-50>e&&(e=-50),t("#foreground").css("left",""+(-800+e/.5)+"px"),t("#ground").css("left",""+(-300+e)+"px"),t("#fighters").css("left",""+e+"px"),t("#background1").css("left",""+(50+e/2)+"px"),t("#background2").css("left",""+(30+e/4)+"px"),t("#background3").css("left",""+(90+e/5)+"px")},L=function(e,t,n,i){e.setAnimation(t[n].animation).width(t[n].width).height(t[n].height).css("top",e.position().top+t[n].deltaY-t[i].deltaY).css("left",e.position().left+t[n].deltaX-t[i].deltaX)},q=function(e,t){return 2!=t.players.length?new f.createValidationResult(!1,"This game needs two players"):new f.createValidationResult(!0,"Ok")},z=function(){var e=new Array;return e},W=function(e){f.sendAction(u,e)},$=function(e){A=e},U=function(){return p};return{init:M,getName:U,validateParams:q,minimumRequirements:z,onActionReceived:$}}(PRESENCE,jQuery),PRESENCE.GAME.TER=function(e,t){function n(e,t){this.player=e,this.square=t,this.type="general"}var i,o=e.GAME,r="Tic Tac Toe",s=null,a=null,l=!0,c=null,u="tresEnRayaContainerDivID",h="tresEnRayaMessageDivID",d=[],f=null,p=null,m=null,g=function(e,t,n){s=e,i=t,c=n,i.options=v(t.options),S(),T(),k(),a=i.players[0],l=!0,s.id==a.id?N("You start!"):N(a.name+" starts!")},v=function(e){return"theme"in e||(e.theme="Modern"),"rounds"in e||(e.rounds="1"),e},y=function(e,t){return 2!=t.players.length?new o.createValidationResult(!1,"This game needs two players"):new o.createValidationResult(!0,"Ok")},b=function(){var e=new Array;return e},w=function(e){o.sendAction(i,e)},_=function(e){x(e)},x=function(e){if(0!=l){if(!C(e))return N("Ilegal action"),!1;s.id==e.player.id&&w(e),A(e),D(e);var t=M();return null!=t?(R(t),P(),void 0):(E(),void 0)}},C=function(e){return a.id!=e.player.id?!1:0!=d[e.square][2]?!1:!0},E=function(){var e=i.players.length,t=i.players.indexOf(a);a=t==e-1?i.players[0]:i.players[t+1],s.id==a.id?N("Is your turn!"):N(a.name+" turn")},S=function(){var e=document.createElement("div");e.setAttribute("id",u),e.setAttribute("class","tresEnRayaContainerDivClass"),t("#"+c).append(e);var n=document.createElement("div");n.setAttribute("id",h),t(n).addClass("tresEnRayaMessageDivClass"),t(n).addClass("tresEnRayaMessageTheme"+i.options.theme),t("#"+c).append(n);var o=document.createElement("p");o.setAttribute("id",h+"p"),t(o).addClass("tresEnRayaMessagePTheme"+i.options.theme),t("#"+h).append(o);var r=12,s=t("#"+c).width(),a=t("#"+c).height(),l=300,d=100,p=Math.max(Math.min(s,a,l),d);f=p-r,t("#"+u).height(f),t("#"+u).width(f),t("#"+h).width(f),t("#"+u).addClass("tresEnRayaContainerTheme"+i.options.theme)},T=function(){p=f/3,m=p/2,d[0]=[m,m,0],d[1]=[m+p,m,0],d[2]=[f-m,m,0],d[3]=[m,m+p,0],d[4]=[m+p,m+p,0],d[5]=[f-m,m+p,0],d[6]=[m,f-m,0],d[7]=[m+p,f-m,0],d[8]=[f-m,f-m,0]},k=function(){t("#"+u).click(function(e){var i=e.pageX-t("#"+u).offset().left,o=e.pageY-t("#"+u).offset().top;if(!t(e.target).is("img")&&a.id==s.id){square=I(i,o);var r=new n(a,square);x(r)}})},I=function(e,t){for(var n=0;n<d.length;n++)if(Math.abs(e-d[n][0])<m&&Math.abs(t-d[n][1])<m)return n;return 0},N=function(e){t("#"+h+"p").html(e)},P=function(){l=!1},A=function(e){if(e.player.id==i.players[0].id)var t=1;else var t=2;d[e.square][2]=t},D=function(e){var n=document.createElement("img");if(e.player.id==i.players[0].id)var o="circle";else var o="aspa";t(n).attr("src","/assets/games/ter/"+i.options.theme.toLowerCase()+"_"+o+".png"),t("#"+u).append(n),t(n).addClass("tresEnRayaImgTheme"+i.options.theme);var r=.8,s=.7*(-p*r/2),a=13;t(n).width(p*r),t(n).height(p*r),t(n).css("top",d[e.square][1]+a),t(n).css("left",d[e.square][0]+s)},M=function(){for(var e=!0,t=0;t<d.length;t++)if(0==d[t][2]){e=!1;break}return e?"finish":d[0][2]==d[1][2]&&d[1][2]==d[2][2]&&0!=d[2][2]?i.players[d[0][2]-1]:d[3][2]==d[4][2]&&d[4][2]==d[5][2]&&0!=d[5][2]?i.players[d[3][2]-1]:d[6][2]==d[7][2]&&d[7][2]==d[8][2]&&0!=d[8][2]?i.players[d[6][2]-1]:d[0][2]==d[3][2]&&d[3][2]==d[6][2]&&0!=d[6][2]?i.players[d[0][2]-1]:d[1][2]==d[4][2]&&d[4][2]==d[7][2]&&0!=d[7][2]?i.players[d[1][2]-1]:d[2][2]==d[5][2]&&d[5][2]==d[8][2]&&0!=d[8][2]?i.players[d[2][2]-1]:d[0][2]==d[4][2]&&d[4][2]==d[8][2]&&0!=d[8][2]?i.players[d[0][2]-1]:d[6][2]==d[4][2]&&d[4][2]==d[2][2]&&0!=d[2][2]?i.players[d[6][2]-1]:null},R=function(e){"finish"!=e?s.id==e.id?N("You have won the game"):N(e.name+" has won the game"):N("Finished game")},j=function(){return r};return{init:g,getName:j,validateParams:y,minimumRequirements:b,onActionReceived:_}}(PRESENCE,jQuery),PRESENCE.NOTIFICATIONS=function(e,t){var n=function(){},i=function(e){null!=e&&(e.css("display","block"),e.css("visibility","visible"),e.fadeIn())},o=function(e,t,n){e.html('<p notification_type="'+t+'" class="ui-chatbox-notify-text">'+n+"</p>"),i(e)},r=function(e,n,i){var r=t("#"+e).parent().find("div.ui-chatbox-notify");1==r.length&&o(r,n,i)},s=function(e){var t=I18n.t("chat.notify.guestOffline",{name:PRESENCE.XMPPClient.getNameFromSlug(e)});r(e,"guestOffline",t)},a=function(e){null!=e&&(e.fadeOut(),e.css("display","none"),e.css("visibility","hidden"))},l=function(e){var t=d(e);a(t)},c=function(){var e=t("div.ui-chatbox-notify"),n=I18n.t("chat.notify.offline");o(e,"userOffline",n)},u=function(){var e=t("div.ui-chatbox-notify");a(e)},h=function(){u(),PRESENCE.XMPPClient.getDisconnectionFlag()?c():t.each(PRESENCE.WINDOW.getAllDisconnectedSlugsWithChatBoxes(),function(e,t){PRESENCE.WINDOW.isSlugGroup(t)||s(t)})},d=function(e){var t=PRESENCE.WINDOW.getChatBoxForSlug(e);if(null!=t){var n=t.parent().find("div.ui-chatbox-notify");if(1==n.length)return n}return null},f=function(e){return t(e).find("p").attr("notification_type")},p=function(e,n,o,r){var s=document.createElement("p");t(s).attr("class","ui-chatbox-notify-text"),t(s).attr("notification_type",o),t(s).html(n),null!=r&&t(s).attr("name",r),t(e).append(s),i(e)},m=function(e,n){var i=t(e).find("p.ui-chatbox-notify-text[name="+n+"]");if(null!=i){i.remove();var o=0==t(e).find("p").length;o&&a(e)}},g=function(e){var n=t(e).find("p.ui-chatbox-notify-text");if(null!=n){n.remove();var i=0==t(e).find("p").length;i&&a(e)}},v=function(e,t,n,i){var o=d(e);null!=o&&p(o,t,n,i)},y=function(e,t){var n=d(e);null!=n&&m(n,t)},b=function(e){var t=d(e);null!=t&&g(t)},w=function(e,t){PRESENCE.WINDOW.isSlugGroup(e)&&v(e,t,"roomNotification",t)},_=function(e,t){PRESENCE.WINDOW.isSlugGroup(e)&&y(e,t)},x=function(e,t){b(e),v(e,t,"roomNotification","Initial_Notification")},C=function(e,n){var i=d(e);null!=i&&t(i).find("p.ui-chatbox-notify-text[name=Initial_Notification]").html(n)},E=function(e){"roomNotification"!=f(e)&&a(e)};return{init:n,showOfflineChatNotificationForSlug:s,hideChatNotificationForSlug:l,updateNotificationsAfterUserDisconnect:c,updateAllNotifications:h,addNickToNotificationInGroup:w,removeNickFromNotificationInGroup:_,initialNotificationInGroup:x,changeInitialNotificationInGroup:C,onClickChatNotification:E}}(PRESENCE,jQuery),PRESENCE.PARSER=function(e,t){function n(e,t){if(t)var n="ownChatText";else var n="guestChatText";return'<span class="'+n+'">'+o(e)+"</span>"}function o(e){if(null!=e.match(b))return e=e.replace(/>/g,"&gt;"),e=e.replace(/</g,"&lt;"),"<pre>"+e+"</pre>";var t=e.split(" ");for(i=0;i<t.length;i++)t[i]=r(t[i]);return t.join(" ")}function r(e){if(""==e.trim()||null!=e.match(w))return e;var t=e.match(_);if(null!=t){var n=t[0],i=p(n);switch(i){case"link":var o=l(n,n),f=s(e,n);return r(f[0])+o+r(f[1]);case"image":var m=c(n),f=s(e,n);return r(f[0])+m+r(f[1]);case"video-youtube":var v=u(n),f=s(e,n);return r(f[0])+v+r(f[1]);default:return e}}var y=e.match(x);if(null!=y){var n=y[0],i=p(n);switch(i){case"link":var o=l("http://"+n,n),f=s(e,n);return r(f[0])+o+r(f[1]);case"image":var m=c("http://"+n),f=s(e,n);return r(f[0])+m+r(f[1]);case"video-youtube":var v=u("http://"+n),f=s(e,n);return r(f[0])+v+r(f[1]);default:return e}}var b=e.match(C);if(null!=b)for(g=0;g<b.length;g++)e=e.replace(d(b[g]),a(b[g]));var S=e.match(E);if(null!=S)for(h=0;h<S.length;h++)e=e.replace(d(S[h]),a(S[h]));return e}function s(e,t){var n=[],i=e.split(t);n[0]=i[0],i.shift();var o=i.join(t);return n[1]=o,n}function a(e){if(e in v){var t=v[e];return'<img class="chatEmoticon" src="/assets/emoticons/'+t+'"/>'}return e}function l(e,t){return'<a target="_blank" class="chatLink" href="'+e+'">'+t+"</a>"}function c(e){return'<a target="_blank" class="chatImageLink" href="'+e+'">'+'<img class="chatImage" src="'+e+'"/>'+"</a>"}function u(e){var n=e.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0],i="http://gdata.youtube.com/feeds/api/videos/"+n;return t.ajax({type:"GET",url:i,cache:!1,dataType:"jsonp",success:function(i){var o=e,r="",s=t(i).find("media\\:title");s.length>0&&(o=t(s).text());var a=t(i).find("media\\:thumbnail");if(a.length>0){var c=t(a[0]).attr("url");null!=c&&(r='<p><img class="chatVideoImage" src="'+c+'"/></p>')}t("a[youtube_id="+n+"]").html(l(e,o)+r)},error:function(){}}),'<a target="_blank" youtube_id="'+n+'" class="chatLink" href="'+e+'">'+e+"</a>"}function d(e){e=e.replace(")","\\)"),e=e.replace("(","\\(");var t="("+e+")";return t=f(t),new RegExp(t,"g")}function f(e){return e=e.replace("+","\\+"),e=e.replace("?","\\?")}function p(e){if(null!=e.match(S))return"video-youtube";var t=e.split(".");if(null!=t&&t.length>0)var n=t[t.length-1];else var n=null;switch(n){case"jpg":return"image";case"png":return"image";case"gif":return"image";default:return"link"}}function m(e,t){if(t)var n="ownName";else var n="guestName";return'<span class="'+n+'">'+e+"</span>"}var v=new Array;v[":)"]="face-smile.png",v[":("]="face-sad.png",v["(B)"]="beer.png",v["(C)"]="clock.png",v["(P)"]="present.png",v[":P"]="face-raspberry.png",v[":Z"]="face-tired.png",v["(R)"]="rain.png",v["(S)"]="sun.png",v[";)"]="face-wink.png";var y=function(){},b=/.*\<[^>]+>.*/g,w=/^[aA-zZ0-9]+$/g,_=/(http(s)?:\/\/)([aA-zZ0-9%=_&+?])+([./-][aA-zZ0-9%=_&+?]+)*[/]?/g,x=/(www[.])([aA-zZ0-9%=_&+?])+([./-][aA-zZ0-9%=_&+?]+)*[/]?/g,C=/\([A-Z]\)/g,E=/((:|;)([()A-Z]))/g,S=/(http(s)?:\/\/)?(((youtu.be\/)([aA-zZ0-9]+))|((www.youtube.com\/watch\?v=)([aA-z0-9Z&=.])+))/g;return{init:y,getParsedContent:n,getParsedName:m}}(PRESENCE,jQuery),PRESENCE.PERSISTENCE=function(e,t){var n=function(){},i=function(){window.sessionStorage&&(o(),s(),r())},o=function(){var e=PRESENCE.WINDOW.getMainChatBox();null!=e?sessionStorage.setItem("chat_mainChatBox_status",t(e).is(":visible")):sessionStorage.setItem("chat_mainChatBox_status",null)},r=function(){for(var e=PRESENCE.WINDOW.getAllChatBoxes(),n=PRESENCE.WINDOW.getVisibleChatBoxes(),i=[],o=[],r=[],s=[],a=0;a<e.length;a++){var l=e[a].id;if(PRESENCE.WINDOW.isSlugGroup(l))-1!=n.indexOf(PRESENCE.WINDOW.getChatBoxForSlug(l))&&o.push(l);else{var c=t(e[a]).html();sessionStorage.setItem("chat_log_"+l,c),i.push(l)}}i.length>0?sessionStorage.setItem("slugs_with_stored_log",i.join(",")):sessionStorage.setItem("slugs_with_stored_log",null),o.length>0?sessionStorage.setItem("open_group_slugs",o.join(",")):sessionStorage.setItem("open_group_slugs",null);for(var u=0;u<n.length;u++)n[u].is(":visible")?r.push(t(n[u]).attr("id")):s.push(t(n[u]).attr("id"));r.length>0?sessionStorage.setItem("slugs_with_visible_max_chatbox",r.join(",")):sessionStorage.setItem("slugs_with_visible_max_chatbox",null),s.length>0?sessionStorage.setItem("slugs_with_visible_min_chatbox",s.join(",")):sessionStorage.setItem("slugs_with_visible_min_chatbox",null)},s=function(){sessionStorage.setItem("chat_user_status",PRESENCE.XMPPClient.getUserStatus())},a=function(){if(!window.sessionStorage)return"available";var e=sessionStorage.getItem("chat_user_status");return null!=e&&(e in PRESENCE.XMPPClient.getSStreamChatStatus()||"offline"==e)?e:"available"},l=function(){window.sessionStorage&&u()},c=function(){return window.sessionStorage?"true"==sessionStorage.getItem("chat_mainChatBox_status")?!0:!1:!1},u=function(){var e=sessionStorage.getItem("slugs_with_visible_max_chatbox"),t=sessionStorage.getItem("slugs_with_visible_min_chatbox");if(null!=e)var n=e.split(",");else var n=[];if(null!=t)var i=t.split(",");else var i=[];d(n,i),h(n,i)},h=function(e,t){var n=sessionStorage.getItem("open_group_slugs");if(null!=n&&"null"!=n)for(var i=n.split(","),o=0;o<i.length;o++){var r=i[o];PRESENCE.XMPPClient.getNameFromSlug(r);var s=-1==t.indexOf(r);PRESENCE.XMPPClient.accessRoom(r,s)}},d=function(e,t){var n=sessionStorage.getItem("slugs_with_stored_log");if(null!=n)for(var i=n.split(","),o=0;o<i.length;o++){var r=sessionStorage.getItem("chat_log_"+i[o]);if(null!=r){var s=i[o];PRESENCE.XMPPClient.getNameFromSlug(s),PRESENCE.XMPPClient.getJidFromSlug(s),PRESENCE.WINDOW.createBuddyChatBox(s),-1!=t.indexOf(s)&&PRESENCE.WINDOW.getChatBoxForSlug(s).parent().toggle(!1),-1==e.indexOf(s)&&-1==t.indexOf(s)&&PRESENCE.WINDOW.closeChatBox(s),PRESENCE.WINDOW.getChatBoxForSlug(s).html(r),PRESENCE.UIMANAGER.isSlugChatConnected(s)||PRESENCE.NOTIFICATIONS.showOfflineChatNotificationForSlug(s)}}};return{init:n,storeChatData:i,restoreChatData:l,getRestoreUserChatStatus:a,getRestoreMainChatBoxStatus:c}}(PRESENCE,jQuery),PRESENCE.STORE=function(e,t){var n=function(){},i=function(){PRESENCE.XMPPClient.authByCookie()||window.sessionStorage&&(1==t("#user_password").length&&""!=t("#user_password").val()?sessionStorage.setItem("ss_user_pass",t("#user_password").val()):1==t("#password").length&&""!=t("#password").val()&&sessionStorage.setItem("ss_user_pass",t("#password").val()))};return{init:n,storePassword:i}}(PRESENCE,jQuery),PRESENCE.UIMANAGER=function(e,t){var n=new Array;n[""]="available",n.chat="available",n.away="away",n.xa="away",n.dnd="dnd";var i,o=function(){t(window).unload(function(){PRESENCE.PERSISTENCE.storeChatData(),PRESENCE.XMPPClient.disconnect()})},r=15,s=r+1,a=function(){s++,s>r-1&&(clearTimeout(i),PRESENCE.XMPPClient.isUserConnected()||c(I18n.t("chat.disconnected")))},l=function(){return s>r-1?(s=0,i=setInterval("PRESENCE.UIMANAGER.connectButtonTimerFunction()",1e3),c(I18n.t("chat.connecting")),!0):!1},c=function(e){null==PRESENCE.WINDOW.getMainChatBox()?t("#chat_header_title").html(e):PRESENCE.WINDOW.changeMainChatBoxHeaderTitle(e)},u=!1,h=function(){t(".dropdown dt a").click(function(e){e.preventDefault(),t(".dropdown dd ul").toggle(),t(".dropdown dd ul").is(":visible")?y("default"):y(PRESENCE.XMPPClient.getUserStatus()),PRESENCE.XMPPClient.restartAwayTimer()}),t(".dropdown dd ul li a.option").click(function(e){e.preventDefault(),PRESENCE.XMPPClient.setUserStatus(t(this).find("span.value").html()),"offline"==PRESENCE.XMPPClient.getUserStatus()?PRESENCE.XMPPClient.disconnect():PRESENCE.XMPPClient.sendStatus(),t(".dropdown dd ul").hide()}),t(document).bind("click",function(e){var n=t(e.target);n.parents().hasClass("dropdown")||(t(".dropdown dd ul").hide(),y(PRESENCE.XMPPClient.getUserStatus()))})},d=function(){t("div.user_presence").click(function(){var e=t(this).attr("slug");PRESENCE.WINDOW.createBuddyChatBox(e)}),t("div.user_presence").mouseleave(function(){var e=t(this);t.each(t(".tooltip:visible"),function(n){t(t(".tooltip:visible")[0]).html()==t(e).attr("name")&&t(t(".tooltip:visible")[n]).hide()})})},f=function(){if(null==PRESENCE.WINDOW.getMainChatBox())t(".user_presence a[title]").tooltip();else{for(var e=document.styleSheets,n=0;n<e.length;n++)for(var i=e[n].cssRules||e[n].rules,o=0;o<i.length;o++)".tooltip"===i[o].selectorText&&(i[o].style.background='url("black_arrow9.png") repeat scroll 0% 0% transparent');t(".user_presence a[title]").tooltip({opacity:.95,relative:!1,position:"top left",offset:[0,31]})}},p=function(){t("#chat_partial select.flexselect").flexselect({allowMismatch:!0,defaultmessage:I18n.t("chat.zerocontacts")}),t("#chat_partial #search_chat_contact_flexselect").watermark(I18n.t("chat.search"),"#666"),t("#chat_partial #search_chat_contact_flexselect").focus(function(){v(!0)}),t("#chat_partial #search_chat_contact_flexselect").blur(function(){v(!1)})},m=function(){h(),d(),f()},g=function(e,n){if("ZERO_CONTACTS"!=n&&""!=n){var i=n;PRESENCE.WINDOW.createBuddyChatBox(i),A(i)||PRESENCE.NOTIFICATIONS.showOfflineChatNotificationForSlug(i)}t("#chat_partial #search_chat_contact_flexselect").blur(),v(!1)},v=function(e){var n=R();if(e){if(u=!0,n>9){var i=PRESENCE.WINDOW.getMainchatBoxParams()[1];PRESENCE.WINDOW.changeMainChatBoxHeight(i)}else{var o=PRESENCE.WINDOW.getMainchatBoxParams()[0],r=o+20+19*n;PRESENCE.WINDOW.changeMainChatBoxHeight(r)}t(".users_connected").hide()}else PRESENCE.WINDOW.changeMainChatBoxHeight(PRESENCE.WINDOW.getChatBoxHeightRequiredForConnectionBoxes()),t(".users_connected").show()},y=function(e){if(e in PRESENCE.XMPPClient.getSStreamChatStatus()&&(e=PRESENCE.XMPPClient.getSStreamChatStatus()[e]),0!=t(".dropdown dt a span").length){if("default"==e){var i=I18n.t("chat.status.choose");return t(".dropdown dt a span").html(i),void 0}if("offline"==e){var o=t("#"+e).html();return t(".dropdown dt a span").html(o),void 0}if(e in n&&t("#"+n[e]).length>0){var o=t("#"+n[e]).html();t(".dropdown dt a span").html(o)}}},b=function(){return timerCounter=0,PRESENCE.UTILITIES.log("updateChatWindow()"),PRESENCE.UTILITIES.log("Connected "+PRESENCE.XMPPClient.isUserConnected()),PRESENCE.XMPPClient.isUserConnected()?(t.post("/chatWindow",{},function(e){t(".tooltip").hide(),_(e),E(),m(),q(),I(),PRESENCE.XMPPClient.isStropheConnected()&&PRESENCE.XMPPClient.isNewConnection()&&(PRESENCE.XMPPClient.setNewConnection(!1),PRESENCE.XMPPClient.isFirstConnection()?(PRESENCE.PERSISTENCE.restoreChatData(),"undefined"!=typeof current_group_slug&&PRESENCE.XMPPClient.accessRoom(current_group_slug,!1),PRESENCE.XMPPClient.setFirstConnection(!1)):(PRESENCE.NOTIFICATIONS.updateAllNotifications(),t.each(PRESENCE.WINDOW.getAllSlugsWithVisibleGroupBoxes(),function(e,n){PRESENCE.XMPPClient.accessRoom(n,t(n).is(":visible"))})))},"html"),void 0):(w(),q(),void 0)},w=function(){t("#chat_partial").html(PRESENCE.WINDOW.modifyChatPartialIfMainBox(t("#chat_connection_off").html())),t(".connectChatButton").bind("click",function(){l()&&(PRESENCE.XMPPClient.authByCookie()?PRESENCE.XMPPClient.connectToChat(user_jid,cookie):PRESENCE.XMPPClient.connectToChat(user_jid,t("#user_password").val()))}),PRESENCE.XMPPClient.authByCookie()?t("#chat_partial #passwordFormChat").hide():(t(".storePass").bind("click",function(){PRESENCE.STORE.storePassword()}),window.sessionStorage&&null!=sessionStorage.getItem("ss_user_pass")?t("#chat_partial #passwordFormChat").hide():t("#chat_partial #passwordFormChat").show())},_=function(e){t("#chat_partial").html(PRESENCE.WINDOW.modifyChatPartialIfMainBox(t("#chat_widgets").html())),t("#chat_partial").append(e),x(),p()},x=function(){t("#chat_partial #search_chat_contact").children().remove(),t("#chat_partial #search_chat_contact").append('<option value=""></option>'),t.each(j(),function(e,n){t("#chat_partial #search_chat_contact").append("<option value="+n+">"+PRESENCE.XMPPClient.getNameFromSlug(n)+"</option>")})},C=function(){PRESENCE.NOTIFICATIONS.updateNotificationsAfterUserDisconnect(),t.each(PRESENCE.WINDOW.getAllSlugsWithVisibleVideoBoxes(),function(e,t){PRESENCE.VIDEOCHAT.closeVideoSession(t)})},E=function(){t('div.user_presence[slug][connected="false"]').hide()},S=function(e){t("div.user_presence[slug="+e+"]").attr("connected","false"),t("div.user_presence[slug="+e+"]").hide()},T=function(e){t("div.user_presence[slug="+e+"]").attr("connected","true"),t("div.user_presence[slug="+e+"]").show()},k=function(e,t){t?(T(e),PRESENCE.NOTIFICATIONS.hideChatNotificationForSlug(e)):(S(e),PRESENCE.NOTIFICATIONS.showOfflineChatNotificationForSlug(e),PRESENCE.VIDEOCHAT.closeVideoSession(e)),z(),I()},I=function(){if(0==M())if(t(".users_connected p.zero_users_connected").length>0)t(".users_connected p.zero_users_connected").show();else{var e=I18n.t("chat.zerousers");t(".users_connected").append('<p class="zero_users_connected">'+e+"</p>")}else t(".users_connected p.zero_users_connected").hide()},N=function(e,i){if(i in n){var o=n[i],r=t("img.presence_status"),s="/assets/status",a=P(e);t(a).find(r).attr("src",s+"/"+o+".png")}},P=function(e){return t("div.user_presence[slug="+e+"]").length>0?t("div.user_presence[slug="+e+"]")[0]:null},A=function(e){return"true"==t("div.user_presence[slug="+e+"]").attr("connected")},D=function(e){return null!=PRESENCE.WINDOW.getChatBoxForSlug(e)},M=function(){return t('div.user_presence[slug][connected="true"]').length},R=function(){return t("div.user_presence[slug]").length},j=function(){return F()[2]},O=function(){return F()[0]},F=function(){var e=[],n=[],i=[],o=t("div.user_presence[slug]");return t.each(o,function(o,r){"true"==t(r).attr("connected")?e.push(t(r).attr("slug")):n.push(t(r).attr("slug")),i.push(t(r).attr("slug"))}),[e,n,i]},H=function(e,t,n){if(!PRESENCE.UTILITIES.antifloodControl(e,t,n)){var i=PRESENCE.XMPPClient.getNameFromSlug(e);PRESENCE.WINDOW.createBuddyChatBox(e),L(i,e,t)}},B=function(e,t){var n=PRESENCE.XMPPClient.getSlugFromJid(e),i=PRESENCE.XMPPClient.getNickFromChatRoomJid(e);D(n)||PRESENCE.WINDOW.createGroupChatBox(n,!0),L(i,n,t)},L=function(e,t,n){var i=PRESENCE.PARSER.getParsedContent(n,!1),o=PRESENCE.PARSER.getParsedName(e,!1);PRESENCE.WINDOW.getChatBoxForSlug(t).chatbox("option","boxManager").addMsg(o,i),PRESENCE.WINDOW.rotatePriority(t),PRESENCE.UTILITIES.blinkTitleOnMessage(e),PRESENCE.AUDIO.mustPlaySoundForChatWindow(PRESENCE.WINDOW.getChatBoxForSlug(t))&&PRESENCE.AUDIO.playSound("onMessageAudio")},q=function(){if(null!=PRESENCE.WINDOW.getMainChatBox())if(PRESENCE.XMPPClient.isUserConnected()){var e=M();
PRESENCE.WINDOW.changeMainChatBoxHeaderTitle(I18n.t("chat.title")+" ("+e+")"),PRESENCE.WINDOW.changeMainChatBoxHeight(PRESENCE.WINDOW.getChatBoxHeightRequiredForConnectionBoxes())}else PRESENCE.XMPPClient.isFirstConnection()?c(I18n.t("chat.connecting")):c(I18n.t("chat.disconnected"))},z=function(){PRESENCE.WINDOW.changeMainChatBoxHeight(PRESENCE.WINDOW.getChatBoxHeightRequiredForConnectionBoxes()),q()};return{init:o,changeChatHeaderTitle:c,changeSelectContactValue:g,setStatusWidgetTitle:y,updateChatWindow:b,updateInterfaceAfterUserDisconnect:C,updateInterfaceAfterPresenceStanza:k,setUserIconStatus:N,connectButtonTimerFunction:a,getConnectionBoxFromSlug:P,isSlugChatConnected:A,existsSlugChatBox:D,getAllConnectedSlugs:O,afterReceivedChatMessage:H,afterReceivedGroupChatMessage:B,writeReceivedMessageOnChatWindow:L,updateConnectedUsersOfMainChatBox:q}}(PRESENCE,jQuery),PRESENCE.UTILITIES=function(e,t){var n,i,o=function(){c()},r=!1,s=function(e){r&&console.log(e)},a=function(){n=!1},l=function(){f(),h=[],n=!0},c=function(){window.onfocus=PRESENCE.UTILITIES.onChatFocus,window.onblur=PRESENCE.UTILITIES.onChatBlur},u=function(){return n},h=[],d=function(e,n){t(document).attr("title",e[n]),n=(n+1)%e.length,i=setTimeout(function(){PRESENCE.UTILITIES.blinkTitle(e,n)},2e3)},f=function(){clearTimeout(i),h.length>0&&t(document).attr("title",h[0])},p=function(e){n||(0==h.length&&h.push(t(document).attr("title")),-1==h.indexOf(e)&&h.push(e+" says..."),f(),d(h,h.length-1))},m=function(){var e=E(),t=I();return e&&t},g=new Array,v=500,y=function(e,t,n){e in g||(g[e]=[,[]]),null==n&&(n=w());var i=g[e][0],o=(new Date).getTime();if(v>o-i)return _(e,t,n);if(g[e][1].length>0){if(g[e][1][0]!=n)return _(e,t,n);g[e][1].splice(0,1)}return g[e][0]=o,!1},b=1,w=function(){return++b},_=function(e,t,n){return-1==g[e][1].indexOf(n)&&g[e][1].push(n),setTimeout(function(){PRESENCE.UIMANAGER.afterReceivedChatMessage(e,t,n)},v),!0},x=500,C=null,E=function(){var e=(new Date).getTime();return null==C?(C=e,!0):x>e-C?!1:(C=e,!0)},S=new Array,T=5e3,k=function(e){var t=e.elem.uiChatbox.find(".ui-chatbox-content").find(".ui-chatbox-log").attr("id");if("undefined"==typeof t)return!1;if(t in contactsInfo&&"disconnected"!=contactsInfo[t].videoChatStatus)return!1;var n=(new Date).getTime();if(!(t in S))return S[t]=n,!0;var i=S[t];return T>n-i?!1:(S[t]=n,!0)},I=function(){return!PRESENCE.XMPPClient.getDisconnectionFlag()&&PRESENCE.XMPPClient.isStropheConnected()},N=function(e){return"<%=SocialStream::Presence.social_stream_presence_username%>"==e};return{init:o,log:s,onChatFocus:l,onChatBlur:a,blinkTitleOnMessage:p,blinkTitle:d,userChatDataInputControl:m,antifloodControl:y,mustBounceBoxForChatWindow:k,isAdminSlug:N,getChatFocus:u}}(PRESENCE,jQuery),PRESENCE.VIDEOCHAT=function(e,t,n){var i=function(){E()},o="default",r=new Array,s=function(e){var t=PRESENCE.WINDOW.toggleVideoBoxForSlug(e);t?c(e):a(e)},a=function(e){t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"games")).show(),g(e)},l=1,c=function(e){if(t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"games")).hide(),e in contactsInfo)var n=contactsInfo[e].videoChatStatus;else var n=null;return TB.checkSystemRequirements()!=TB.HAS_REQUIREMENTS?(y(e,I18n.t("chat.videochat.requirements")),null!=n&&(contactsInfo[e].videoChatStatus="disconnected"),void 0):PRESENCE.XMPPClient.isUserConnected()?PRESENCE.UIMANAGER.isSlugChatConnected(e)?null==n?(l>0?(l--,y(e,I18n.t("chat.videochat.connectingWait")),setTimeout(function(){c(e)},5e3)):y(e,I18n.t("chat.videochat.unable")),void 0):(l=1,"disconnected"==n&&u(e),void 0):(y(e,I18n.t("chat.videochat.guestOffline",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),null!=n&&(contactsInfo[e].videoChatStatus="disconnected"),void 0):(y(e,I18n.t("chat.videochat.offline")),null!=n&&(contactsInfo[e].videoChatStatus="disconnected"),void 0)},u=function(e){return y(e,I18n.t("chat.videochat.negotiating")),contactsInfo[e].videoChatStatus="negotiating",null!=contactsInfo[e].version?(h(e),void 0):(PRESENCE.XMPPClient.sendIQStanzaForRequestClientInfo(e),void 0)},h=function(e){contactsInfo[e].version==PRESENCE.XMPPClient.getJavascriptXMPPClientName()?(contactsInfo[e].videoChatStatus="connecting",y(e,I18n.t("chat.videochat.connecting")),d(e)):(y(e,I18n.t("chat.videochat.clientIssue",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected")},d=function(e){t.post("/requestVideoChat.xml",{},function(n){var i=t(n).find("session");return 1==i.length&&1==t(i).find("id").length&&1==t(i).find("user_token").length&&1==t(i).find("guest_token").length?(contactsInfo[e].session_id=t(i).find("id").text(),contactsInfo[e].user_token=t(i).find("user_token").text(),contactsInfo[e].guest_token=t(i).find("guest_token").text(),f(e),void 0):(y(e,I18n.t("chat.videochat.serverIssue")),contactsInfo[e].videoChatStatus="disconnected",void 0)})},f=function(e){contactsInfo[e].videoChatStatus="waiting",y(e,I18n.t("chat.videochat.waiting")),PRESENCE.XMPPClient.sendIQStanzaToRequestVideochat(e)},p=function(e,t){"waiting"==contactsInfo[e].videoChatStatus&&("yes"==t?(y(e,I18n.t("chat.videochat.establishing")),contactsInfo[e].videoChatStatus="establishing",P(e)):"no"==t?(y(e,I18n.t("chat.videochat.rejected",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected"):(y(e,I18n.t("chat.videochat.rejectedBusy",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected"))},m=function(e){e in contactsInfo?"pending"==contactsInfo[e].videoChatStatus&&(y(e,I18n.t("chat.videochat.cancel",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})),contactsInfo[e].videoChatStatus="disconnected"):g(e)},g=function(e){if(e in contactsInfo){var t=contactsInfo[e].videoChatStatus;"connected"==t?(y(e,I18n.t("chat.videochat.disconnecting")),contactsInfo[e].session.connected&&contactsInfo[e].session.disconnect(),C(e)):"waiting"==t?PRESENCE.XMPPClient.sendIQStanzaToCancelVideochat(e):"pending"==t&&PRESENCE.XMPPClient.sendIQStanzaToResponseVideochat(e,"no"),contactsInfo[e].videoChatStatus="disconnected"}PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!1)},v=function(e){e in contactsInfo&&(contactsInfo[e].videoChatStatus="negotiating")&&h(e)},y=function(e,t){PRESENCE.WINDOW.setVideoBoxContent(e,'<p class="video-info"> '+t+" </p>")},b=function(e){return"disconnected"!=contactsInfo[e].videoChatStatus?(PRESENCE.XMPPClient.sendIQStanzaToResponseVideochat(e,"busy"),void 0):(contactsInfo[e].videoChatStatus="pending",PRESENCE.WINDOW.createBuddyChatBox(e),PRESENCE.WINDOW.getChatBoxForSlug(e),w(e),PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!0),void 0)},w=function(e){var t='<p class="video-info">'+I18n.t("chat.videochat.call",{name:PRESENCE.XMPPClient.getNameFromSlug(e)})+" </p>",n=t+'<p class="video-request"> <a class="videoChatButton" slug="'+e+'" value="yes">'+I18n.t("chat.videochat.accept")+"</a> -"+' <a class="videoChatButton" slug="'+e+'" value="no">'+I18n.t("chat.videochat.deny")+"</a> </p>";PRESENCE.WINDOW.setVideoBoxContent(e,n),_()},_=function(){t(".videoChatButton").click(function(e){e.preventDefault();var n=t(this).attr("value"),i=t(this).attr("slug");PRESENCE.XMPPClient.sendIQStanzaToResponseVideochat(i,n),"yes"==n?(y(i,I18n.t("chat.videochat.establishing")),contactsInfo[i].videoChatStatus="establishing",P(i)):(contactsInfo[i].videoChatStatus="disconnected",g(i))})},x=function(e){var n=PRESENCE.WINDOW.getPublisherVideoBoxForSlug(e),i=PRESENCE.WINDOW.getChatBoxForSlug(e),o=PRESENCE.WINDOW.getVideoBoxForSlug(e);if(null!=i&&null!=o&&null!=n){var r="-1"!=n.css("z-index"),s=k+1,a=t(i)[0].scrollHeight,l=i.outerHeight(),c=a-i.scrollTop()-l,u=145;r?(n.css("z-index","-1"),i.css("height",i.height()+s),o.css("height",o.height()-s),s>c?i.scrollTop(i.scrollTop()-c):i.scrollTop(i.scrollTop()-u)):(n.css("z-index","100"),i.css("height",i.height()-s),o.css("height",o.height()+s),i.scrollTop(i.scrollTop()+u))}},C=function(e){y(e,I18n.t("chat.videochat.disconnected")),t(PRESENCE.WINDOW.getChatBoxButtonForSlug(e,"videoChange")).find("span").hide(),PRESENCE.WINDOW.toggleVideoBoxForSlug(e,!1);var n=PRESENCE.WINDOW.getChatBoxForSlug(e);n.height(PRESENCE.WINDOW.getChatBoxHeight())},E=function(){if("default"==o)for(var e=document.styleSheets,t=0;t<e.length;t++){var i=e[t].cssRules||e[t].rules;if(i!=n)for(var r=0;r<i.length;r++)".chat-videothick"===i[r].selectorText&&(i[r].style.display="none")}},S=function(e){x(e)},T=235,k=145,I=235,N=145,P=function(e){TB.checkSystemRequirements()!=TB.HAS_REQUIREMENTS?(y(e,I18n.t("chat.videochat.requirements")),contactsInfo[e].videoChatStatus="disconnected"):(contactsInfo[e].session=TB.initSession(contactsInfo[e].session_id),contactsInfo[e].session.addEventListener("sessionConnected",PRESENCE.VIDEOCHAT.sessionConnectedHandler),contactsInfo[e].session.addEventListener("sessionDisconnected",PRESENCE.VIDEOCHAT.sessionDisconnectedHandler),contactsInfo[e].session.addEventListener("streamCreated",PRESENCE.VIDEOCHAT.streamCreatedHandler),contactsInfo[e].session.addEventListener("streamDestroyed",PRESENCE.VIDEOCHAT.streamDestroyedHandler),contactsInfo[e].session.connect(o,contactsInfo[e].user_token),r[contactsInfo[e].session_id]=e)},A=function(e){if(e.target.sessionId in r){var n=r[e.target.sessionId];contactsInfo[n].videoChatStatus="connected",t(PRESENCE.WINDOW.getChatBoxButtonForSlug(n,"videoChange")).find("span").show();var i=document.createElement("div"),o="stream_publish_videochat_"+n;i.setAttribute("id",o),i.setAttribute("class","stream_publish_videochat");var s=document.createElement("div");s.id="opentok_publisher&"+n,i.appendChild(s),PRESENCE.WINDOW.setVideoBoxContent(n,i);var a={width:T,height:k};contactsInfo[n].publisher=contactsInfo[n].session.publish(s.id,a),contactsInfo[n].publisher.addEventListener("accessAllowed",O),j(e.streams,n),x(n)}},D=function(e){var t=r[e.target.sessionId];contactsInfo[t].publisher=null,contactsInfo[t].videoChatStatus="disconnected"},M=function(e){var t=r[e.target.sessionId];j(e.streams,t)},R=function(e){var t=r[e.target.sessionId];g(t)},j=function(e,t){for(var n=contactsInfo[t].session,i=0;i<e.length;i++){if(e[i].connection.connectionId==n.connection.connectionId)return;var o=document.createElement("div");o.setAttribute("class","stream_videochat");var r=document.createElement("div");r.id="stream"+e[i].streamId,o.appendChild(r),PRESENCE.WINDOW.addVideoBoxContent(t,o);var s={width:I,height:N};n.subscribe(e[i],r.id,s)}},O=function(e){var t=e.target.replacedDivId.split("&")[1];x(t)};return{init:i,clickVideoChatButton:s,clientInfoReceivedTrigger:v,closeVideoSession:g,updateInterfaceAfterVideoRequestReceived:b,receiveVideoChatResponseFromUser:p,receiveVideoChatCancelationFromUser:m,clickVideoChangeChatButton:S,sessionConnectedHandler:A,sessionDisconnectedHandler:D,streamCreatedHandler:M,streamDestroyedHandler:R}}(PRESENCE,jQuery),PRESENCE.WINDOW=function(e,t){var n,o=function(){},r=0,s=5,a=230,l=180,c=145,u=new Array,h=0,d=a+12,f=function(e,n){var i=PRESENCE.XMPPClient.getNameFromSlug(e);if(n)var o=I18n.t("chat.muc.group",{group:i});else var o=i;if("undefined"==typeof window[Q(e)]){t("#chat_divs").append("<div id="+e+" name="+i+" class=chatbox ></div>"),boxParams=m();var r=boxParams[0],s=boxParams[1];return window[Q(e)]=t("#"+e).chatbox({id:user_name,user:{key:"value"},hidden:!1,offset:r,width:a,height:l,video:0,title:o,position:s,priority:u.length+1,groupBox:n,boxClosed:function(){PRESENCE.WINDOW.closeChatBox(e)},messageSent:function(t,n,i){PRESENCE.XMPPClient.sendChatMessage(e,i)}}),u[s-1]=window[Q(e)],!0}if(-1==u.indexOf(window[Q(e)])){boxParams=m();var r=boxParams[0],s=boxParams[1];window[Q(e)].chatbox("option","offset",r),window[Q(e)].chatbox("option","position",s),u[s-1]=window[Q(e)]}return window[Q(e)].chatbox("option","hidden",!1),window[Q(e)].parent().toggle(!0),!1},m=function(){var e=new Array(2);return r==s?(replaced=u[F()],replaced.chatbox("option","hidden",!0),index=u.indexOf(replaced),e[0]=replaced.chatbox("option","offset"),e[1]=replaced.chatbox("option","position")):(r++,e[0]=(r-1)*d,1!=r&&null!=n&&(e[0]=e[0]-h),e[1]=r),e},g=function(e){var n=K(e).chatbox("option","position");for(i=n+1;i<u.length+1;i++)u[i-1].chatbox("option","offset",u[i-1].chatbox("option","offset")-d),u[i-1].chatbox("option","position",u[i-1].chatbox("option","position")-1);u.splice(n-1,1),t("#"+e).chatbox("option","hidden",!0),r--,rt(e)&&PRESENCE.XMPPClient.leaveRoom(e)},v=function(e){return f(e,!1)},y=function(e,n){if(f(e,!0)){var i=K(e);return t(et(e,"games")).remove(),t(et(e,"video")).remove(),t(i.parent()).find(".ui-videobox").remove(),i.parent().toggle(n),PRESENCE.NOTIFICATIONS.initialNotificationInGroup(e,I18n.t("chat.muc.joining")),!0}return!1},b=5,w=11,_=150,x=50,C=30,E=260,S=136,T=x+C*w,k="SocialStream_MainChat",I=[x,E],N=function(){null==n&&(f(k,!1),n=window[Q(k)],t(n.parent().parent()).find(".ui-chatbox-titlebar").find(".ui-icon-closethick").remove(),t(n.parent().parent()).find(".ui-videobox-icon").remove(),t(n.parent().parent()).find(".chat-gamesthick").remove(),n.parent().parent().find(".ui-chatbox-titlebar").find(".chat-minusthick").parent().css("margin-right","5px"),t(n.parent()).find(".ui-chatbox-notify").remove(),t(n.parent()).find(".ui-videobox").remove(),t(n.parent()).find(".ui-chatbox-input").remove(),t(n).css("background-color",t(n.parent().parent()).find(".ui-chatbox-titlebar").css("background-color")),j(O()),window[Q(k)].parent().parent().css("width",_),t(n.parent().parent()).find(".ui-chatbox-titlebar").css("width",_-6),t(n).css("width",_-6),h=235-_,t("#chat_partial").css("margin-top",-3),t("#chat_partial").css("margin-left",-3),t(".dropdown dd ul").css("min-width",147),t(n).css("overflow-x","hidden"),t(n).css("overflow-y","hidden"),n.parent().toggle(PRESENCE.PERSISTENCE.getRestoreMainChatBoxStatus()),PRESENCE.UIMANAGER.updateConnectedUsersOfMainChatBox())},P=function(){return n},A=function(){return I},D=function(e){null!=n&&t(n.parent()).find("#"+k).html(e)},M=function(e){return null!=n?(p=t("<div/>").append(e),t(p).find(".header").remove(),t(p).find(".dropdown dd ul").css("min-width",147),t(p)):e},R=function(e){null!=n&&t(t(n.parent().parent()).find(".ui-chatbox-titlebar").find("span")[0]).html(e)},j=function(e){if(null!=n){if(t("#chat_partial #search_chat_contact_flexselect").is(":focus")&&!focusSearchContactsFlag)return;focusSearchContactsFlag=!1,e>T?(e=T,t(n).css("overflow-y","visible"),n.chatbox("option","offset","5px"),n.chatbox("option","width",_+5)):(t(n).css("overflow-y","hidden"),n.chatbox("option","offset","0px"),n.chatbox("option","width",_),e=Math.max(e,S)),window[Q(k)].css("height",e)}},O=function(){if(null!=n){var e=x+Math.ceil(PRESENCE.UIMANAGER.getAllConnectedSlugs().length/b)*C;return e}return null},F=function(){for(tmp=u[0],i=0;i<u.length;i++)u[i].chatbox("option","priority")>tmp.chatbox("option","priority")&&(tmp=u[i]);return u.indexOf(tmp)},H=function(e){if(priority=t("#"+e).chatbox("option","priority"),priority>1){for(i=0;i<u.length;i++)u[i].chatbox("option","priority")<priority&&u[i].chatbox("option","priority",u[i].chatbox("option","priority")+1);t("#"+e).chatbox("option","priority",1)}},B=function(e){var n=t("#"+e).parent().find("div.ui-videobox");return 1==n.length?n:null},L=function(e){var n=t("#stream_publish_videochat_"+e);return n.length>0?n:null},q=function(e,t){var n=B(e);null!=n&&n.html(t)},z=function(e,t){var n=B(e);null!=n&&n.append(t)},W=function(e){e.chatbox("option","video",c)},$=function(e){e.chatbox("option","video",0)},U=function(e){var n=t(e.element).attr("id");PRESENCE.VIDEOCHAT.clickVideoChatButton(n)},V=function(e){var n=t(e.element).attr("id");PRESENCE.VIDEOCHAT.clickVideoChangeChatButton(n)},G=function(e,t){var n,i=K(e);return null==i?null:(n="undefined"!=typeof t?t:0==i.chatbox("option","video")?!0:!1,n?(W(i),!0):($(i),!1))},Q=function(e){return"Slug_"+e},Y=function(){var e=new Array;for(i=0;i<u.length;i++)u[i][0].id!=k&&e.push(u[i]);return e},X=function(){return t(".chatbox").not(document.getElementById(k))},K=function(e){return"undefined"==typeof window[Q(e)]?null:window[Q(e)]},J=function(e){var t=K(e);return null!=t?t.parent().parent().find(".ui-chatbox-titlebar"):null},Z=function(e){var t=J(e);return null!=t?t.find(".ui-chatbox-icon"):null},et=function(e,t){var n=Z(e);if(null==n)return null;switch(t){case"close":return n[0];case"min":return n[1];case"video":return n[2];case"videoChange":return n[3];case"games":return n[4];default:return null}},tt=function(){var e=[],n=[];return t.each(X(),function(i,o){t(o).parent().find(".ui-videobox").is(":visible")&&n.push(t(o).attr("id")),e.push(t(o).attr("id"))}),[e,n]},nt=function(){return tt()[0]},it=function(){return tt()[1]},ot=function(){var e=nt(),n=PRESENCE.UIMANAGER.getAllConnectedSlugs(),i=[];return t.each(e,function(e,t){-1==n.indexOf(t)&&i.push(t)}),i},rt=function(e){var t=K(e);return null!=t?t.chatbox("option","groupBox"):!1},st=function(){var e=[];return t.each(Y(),function(n,i){t(i).chatbox("option","groupBox")&&e.push(t(i).attr("id"))}),e},at=function(){return l};return{init:o,createMainChatBox:N,createBuddyChatBox:v,createGroupChatBox:y,closeChatBox:g,rotatePriority:H,addContentToMainChatBox:D,modifyChatPartialIfMainBox:M,changeMainChatBoxHeaderTitle:R,changeMainChatBoxHeight:j,getChatBoxHeightRequiredForConnectionBoxes:O,getVideoBoxForSlug:B,getPublisherVideoBoxForSlug:L,setVideoBoxContent:q,addVideoBoxContent:z,toggleVideoBox:U,toggleVideoBoxChange:V,toggleVideoBoxForSlug:G,getVisibleChatBoxes:Y,getAllChatBoxes:X,getChatBoxForSlug:K,getChatBoxHeaderForSlug:J,getChatBoxButtonForSlug:et,getAllSlugsWithVisibleVideoBoxes:it,getAllDisconnectedSlugsWithChatBoxes:ot,isSlugGroup:rt,getAllSlugsWithVisibleGroupBoxes:st,getMainChatBox:P,getMainchatBoxParams:A,getChatBoxHeight:at}}(PRESENCE,jQuery),$(document).ready(function(){$(".resize").hover(function(){$(this).animate({width:300})},function(){$(this).animate({width:250})}),$(".phrase1").hover(function(){$("#image1").animate({width:300})},function(){$("#image1").animate({width:250})}),$(".phrase2").hover(function(){$("#image2").animate({width:300})},function(){$("#image2").animate({width:250})}),$(".phrase3").hover(function(){$("#image3").animate({width:300})},function(){$("#image3").animate({width:250})});var e=$("#loginButton"),t=$("#loginBox"),n=$("#loginForm");e.removeAttr("href"),e.mouseup(function(){t.toggle(),e.toggleClass("active")}),n.mouseup(function(){return!1}),$(this).mouseup(function(n){$(n.target).parent("#loginButton").length>0||(e.removeClass("active"),t.hide())})});